import{a as P,b as S,c as y,d as Ce,e as ee,f as xe,g as ve,h as Me,j as Se,k as _e,l as Ae,m as te}from"../../chunks/T3X6HKSZ.js";import{B as Q,G as we,H as Ie,I as be,q as J,r as B,s as he,t as Z,u as fe,v as ge,w as pe,x as Ee,y as Te}from"../../chunks/JLO744NT.js";import"../../chunks/LIFUWJGW.js";import"../../chunks/MAPXS3RR.js";import{b as N,c as ye}from"../../chunks/MC2A5KLN.js";import{n as Y}from"../../chunks/SZXXTBUM.js";import{k as z}from"../../chunks/VTGOYHJW.js";import"../../chunks/DQCZLHJM.js";import{I as M}from"../../chunks/LHOPOZ7S.js";import"../../chunks/N5EAU2XY.js";import"../../chunks/SMGS7QAW.js";import"../../chunks/XOTQ5KQV.js";import{c as ue}from"../../chunks/454JMIH7.js";import"../../chunks/X7IGDKSO.js";import"../../chunks/DW5SZ3VB.js";import"../../chunks/2HIYOEPI.js";import{a as de}from"../../chunks/PZVNEH53.js";import"../../chunks/HPHM72CW.js";import"../../chunks/UZTKLAY4.js";import{a as D,i as j}from"../../chunks/Q25QR6DL.js";import"../../chunks/XXMMBCVS.js";import"../../chunks/UAWD6KOW.js";import"../../chunks/27O46L5C.js";import{c as R}from"../../chunks/UXYD27MU.js";import{D as ce,E as b,Ra as me,v as qe,x as Ge}from"../../chunks/VE4EMEBO.js";import"../../chunks/UICGGF3X.js";import{M as le,o as H}from"../../chunks/AUJ76673.js";import"../../chunks/UB52WFCV.js";import"../../chunks/PKATR2QD.js";import{A as v}from"../../chunks/DOCIOFBQ.js";import"../../chunks/MX3LYTPZ.js";import"../../chunks/HFEXSQX6.js";import"../../chunks/4B6UFNBQ.js";import{R as x,T as K}from"../../chunks/XZ5AIA7R.js";import{a as Ve}from"../../chunks/PJ57C2TE.js";import{f as $,h as L}from"../../chunks/GAV6HCJA.js";var De=$(qe()),Be=$(Ge());var Le=H(),Re=i=>({left:i.left,right:i.right,top:i.top,bottom:i.bottom,width:i.width||i.right-i.left,height:i.height||i.bottom-i.top,x:i.x||i.left,y:i.y||i.top}),$e=()=>{if(!x())return;M(async(n,o,s)=>{switch(n){case"Client_listenUpdateIframeInput":{let{startMarkerId:c,endMarkerId:m,value:u,type:l}=o;return c&&m&&await Te(c,m,u,l),{success:!0,data:{},message:""}}}});let i=null,e=[],t=!1,a=(n,o=0)=>{try{let s=i||n.target,{isEditableElement:c,editableElement:m}=Q(s),u=pe(),l="",d="",f="",E=0,F=null,W=null,_=document.body,se="";if(c&&m){E=ge(m);let T=Ee(m);d=T.startMarkerId,f=T.endMarkerId,u=T.selectionText,l=T.editableElementSelectionText,_=m.parentElement?Q(m.parentElement).editableElement:m,_=_||m,F=T.selection,W=T.range}else F=window.getSelection();!u&&t&&s.tagName==="BUTTON"&&o<10&&setTimeout(()=>{a(n,o+1)},100),i=null;let Xe=Re(document.body.getBoundingClientRect()),h=Re(s.getBoundingClientRect()),g=window.getSelection()?.getRangeAt(0)?.getBoundingClientRect(),w=null;if(J()&&B()&&(g=fe()||g),s.tagName==="INPUT"||s.tagName==="TEXTAREA"){let T=Math.max(h.left,0),A=Math.max(h.top,0),I=(document.documentElement.clientWidth||document.body.clientWidth||document.body.offsetWidth)-T,p=document.documentElement.clientHeight||document.body.clientHeight||document.body.offsetHeight,U=Math.max(h.left,0),V=Math.max(h.left,0),q=Math.min(A,p),G=Math.min(A,p),oe=Math.min(h.left>0?h.width:h.width+h.left,I),Ue=Math.min(h.top>0?h.height:h.height+h.top,p);w={left:U,x:V,top:q,y:G,width:oe,height:Ue,right:Math.max(Math.min(h.width,I),I),bottom:Math.min(h.bottom,p)},w.height=Math.min(p-w.top,w.height)}else if(g){let T=Math.max(g.left,0),A=Math.max(g.top,0),I=(document.documentElement.clientWidth||document.body.clientWidth||document.body.offsetWidth)-T,p=document.documentElement.clientHeight||document.body.clientHeight||document.body.offsetHeight,U=Math.max(g.left,0),V=Math.max(g.left,0),q=Math.min(A,p),G=Math.min(A,p);w={left:U,x:V,top:q,y:G,width:Math.min(g.width,I),height:Math.min(g.height,p),right:Math.max(Math.min(g.right,I),I),bottom:Math.min(g.bottom,p)},w.height=Math.min(p-w.top,w.height),l&&F&&(se=(W?we(W,2e3,_):Ie(F,2e3,_)).relatedContent)}let We=[e[0]-window.screenLeft,e[1]-window.screenTop];window.parent.postMessage({id:R,type:"iframeSelection",data:{virtual:!0,iframeId:Le,tagName:s.tagName,id:s.id,className:s.className,windowRect:Xe,targetRect:h,selectionRect:g,iframeSelectionRect:w,iframePosition:We,selectionText:u||"",selectionHTML:u||"",editableElementSelectionText:l,editableElementSelectionHTML:l,eventType:n instanceof MouseEvent?"mouseup":"keyup",isEmbedPage:t,isEditableElement:c,caretOffset:E,startMarkerId:d,endMarkerId:f,relatedContent:se}},"*")}catch{}},r=n=>{let o=n.target;(o.tagName==="INPUT"||o.tagName==="TEXTAREA")&&(i=o),e=[n.screenX,n.screenY]};if(document.addEventListener("mousedown",r),document.addEventListener("mouseup",a),document.addEventListener("keyup",a),window.location.href.indexOf("maxai.me/embed")>-1){let n=document.createElement("div");n.id="USE_CHAT_GPT_AI_ROOT",n.style.display="none",n.style.zIndex="-1",n.style.position="absolute",n.style.top="-10000px",n.style.left="-10000px",n.style.width="1px",n.style.height="1px",n.style.overflow="hidden",n.style.opacity="0",n.style.pointerEvents="none",document.body.appendChild(n),t=!0}if(J()){let n=document.querySelector("#WACViewPanel");he()?.addEventListener("focus",s=>{a({target:s.target})}),n?.addEventListener("mousedown",s=>{r(s);let c=document.body.getBoundingClientRect().toJSON();window.parent.postMessage({id:R,type:"iframeSelection",data:{virtual:!0,iframeId:Le,tagName:"",id:"",className:"",windowRect:c,targetRect:c,selectionRect:c,iframeSelectionRect:c,iframePosition:[0,0],selectionText:"",selectionHTML:"",editableElementSelectionText:"",editableElementSelectionHTML:"",eventType:s instanceof MouseEvent?"mouseup":"keyup",isEmbedPage:!1,isEditableElement:!0,caretOffset:0,startMarkerId:"",endMarkerId:""}},"*")}),n?.addEventListener("mouseup",s=>{let m=s.target.getBoundingClientRect();setTimeout(()=>{B()&&(Z().length?a({...s,target:document.activeElement}):a({...s,target:document.elementFromPoint(m.x,m.y)}))},50)}),n?.addEventListener("scroll",v(s=>{B()&&Z().length&&a({...s,target:document.activeElement})},200))}},Ne=$e;var Ke=()=>{let i="",e=document.documentElement,t=e.querySelector("#WACViewPanel_EditingElement_WrappingDiv"),a=e.querySelector("#PagesContainer .HiddenParagraph"),r=t?.style.display;return t&&(t.style.display="none"),a&&a.classList.remove("HiddenParagraph"),i=e.querySelector("#PageContentContainer")?.innerText||"",t&&(t.style.display=r),a&&a.classList.add("HiddenParagraph"),i},je=()=>document.documentElement?.querySelector(".mail-message-defaults")?.innerText||"",ze=()=>document.documentElement?.ownerDocument?.body?.innerText||"",Ye=()=>{if(!x())return;let i=typeof window<"u"?window.location.href:"";window.addEventListener("message",async e=>{let{id:t,eventType:a,taskId:r,data:n}=e.data;if(t===ce){if(a==="BROWSER_EXTENSION_FEATURES__PROXY_FETCH"){let o=await N(...n);window.postMessage({id:b,taskId:r,result:o})}if(a==="BROWSER_EXTENSION_FEATURES__ABORT_PROXY_FETCH"){let o=await ye(...n);window.postMessage({id:b,taskId:r,result:o})}if(a==="BROWSER_EXTENSION_FEATURES__GET_SPECIAL_HOST_PAGE_CONTENT"&&window.postMessage({id:b,taskId:r,result:""}),a==="BROWSER_EXTENSION_FEATURES__PING_IFRAME_PAGE"&&window.parent.postMessage({id:b,taskId:r,result:!0},"*"),a==="BROWSER_EXTENSION_FEATURES__FIND_IFRAME_PAGE_CITATION"){let[o,s]=n,c=await Y.find(s);window.parent.postMessage({id:b,taskId:r,result:c},"*")}if(a==="BROWSER_EXTENSION_FEATURES__CREATE_IFRAME_PAGE_DOCUMENT"){let[o,s]=n,c=await z.generateWebpageURLDocument(i);window.parent.postMessage({id:b,taskId:r,result:c},"*")}}}),M(async(e,t,a)=>{switch(e){case"Iframe_listenGetPageContent":{let{taskId:r}=t;if(!i)return;let n="";return i.includes("word-edit.officeapps.live.com/we/wordeditorframe.aspx")&&(n=Ke()),i.includes("icloud-sandbox.com/applications/mail2-message")&&(n=je()),i.includes("mail.com/mail/client/mailbody")&&(n=ze()),n=n.trim(),n?(await new D().postMessage({event:"Iframe_sendPageContentResult",data:{taskId:r,pageContent:n}}),{success:!0,data:"",message:""}):{success:!1,data:"",message:"no page content"}}case"Iframe_listenFindPageCitation":{let{taskId:r,citation:n}=t;if(!i)return;if(!n.source?.url||!K(n.source.url,i))return{success:!1,data:"",message:"not citation page"};let o=await Y.find(n);return await new D().postMessage({event:"Iframe_sendPageCitationResult",data:{taskId:r,isMatched:o}}),{success:!0,data:"",message:""}}case"Iframe_listenCreatePageDocument":{let{taskId:r,pageUrl:n}=t;if(!i)return;if(!n||!K(n,i))return{success:!1,data:"",message:"is not page url"};let o=await z.generateWebpageURLDocument(i);return await new D().postMessage({event:"Iframe_sendPageDocumentResult",data:{taskId:r,pageDocument:o}}),{success:!0,data:"",message:""}}}})},Pe=Ye;var ke=(i,e)=>{let t=function(a){let r=Date.now();return setTimeout(function(){a({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-r))}})},1)};try{return typeof window!==void 0&&window.requestIdleCallback?window.requestIdleCallback(i,e):t(i)}catch{return t(i)}};var Je=()=>{try{return window.self!==window.top}catch{return!1}},Ze=(i,e,t)=>{let a=t.value;t.value=function(...r){let n=a.apply(this,r);return Je()||j("tabs","query",[{active:!0,currentWindow:!0}]).then(s=>{let c=s?.[0]?.id;c&&j("tabs","sendMessage",[c,{id:R,event:"Client_listenPageTranslationEvent",data:{fn:e,args:r}}]).then().catch()}),n}},k=Ze;var ae=$(Ve());var X="TRANSLATOR_ACCESS_TOKEN_CACHE_KEY",ne=30,ie=class{constructor(){this.token="",this.authFetching=!1,this.getCacheToken().then(e=>{this.token=e})}async getCacheToken(){let e=await ae.default.storage.local.get(X);return e[X]?e[X]:""}async setCacheToken(e){await ae.default.storage.local.set({[X]:e})}async fetchAccessToken(){try{if(this.authFetching)return;this.authFetching=!0;let e=await N("https://edge.microsoft.com/translate/auth",{method:"GET",parse:"text"});if(e?.responseRaw?.ok===!0&&e.responseRaw?.status===200){let t=e.data||"";this.token=t,await this.setCacheToken(t)}}catch{}finally{this.authFetching=!1}}async translate(e,t="",a="",r=!0){this.token||await this.fetchAccessToken();try{if(!this.token)return e.forEach(l=>l.updateFetchStatus("error")),!1;if(e.length>ne){let l=[];for(let d=0;d<e.length;d+=ne){let f=e.slice(d,d+ne),E=await this.translate(f,t,a);l.push(E)}return l.every(d=>d)}let n=e.map(l=>l.rawText).filter(l=>l);if(n.length<=0)return!1;e.forEach(l=>l.updateFetchStatus("fetching"));let o=te(t),s=te(a),c=await be(N(`https://api-edge.cognitive.microsofttranslator.com/translate?from=${s}&to=${o}&api-version=3.0&includeSentenceLength=true`,{parse:"json",method:"POST",body:JSON.stringify(n.map(l=>({Text:l}))),headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}}),2e4,null),m=c?.responseRaw;if(m?.status===401&&r)return await this.fetchAccessToken(),this.translate(e,t,a,!1);let u=!1;if(c&&c.data&&m?.ok===!0&&m?.status===200){let l=c?.data??null;if(l.length===n.length){u=!0;for(let d=0;d<l.length;d++){let f=e[d],E=l?.[d];E&&(f.translatedText=E.translations?.[0]?.text,f.translatedLangCode=E.translations?.[0]?.to,f.originalLangCode=E.detectedLanguage?.language,f.isTranslated=!0,f.updateFetchStatus("success"))}}return u}return u||e.forEach(l=>l.updateFetchStatus("error")),u}catch{return e.forEach(o=>o.updateFetchStatus("error")),!1}}},Oe=ie;var re=class{constructor(e,t){let a=e.filter(r=>t.contains(r));this.rawElement=t,this.rawText=a.map(r=>r?.nodeValue?.trim()||"").join(" "),this.textNodes=a,this.translatedLangCode="",this.originalLangCode="",this.translatedText="",this.isTranslated=!1,this.observer=null,this.isIntersecting=!1,this.translateStatus="idle",this.translateContainerElement=null,this.translateInnerElement=null,this.isInline=!1,this.observeIntersection(),this.insertCustomElement()}observeIntersection(){if(!this.observer){let e=t=>{let a=t[0];this.isIntersecting=a.isIntersecting,this.isIntersecting&&window.dispatchEvent(new CustomEvent("MAXAI_PageTranslatorEvent_doTranslate"))};this.observer=new IntersectionObserver(e,{threshold:.1}),this.rawElement&&this.observer.observe(this.rawElement)}}disconnectObserver(){this.observer&&(this.observer.disconnect(),this.observer=null)}insertCustomElement(){if(this.rawElement){let e=!1,t=this.rawText.trim();t.match(/\p{Unified_Ideograph}/gu)?e=t.length<=.25*15:t.length<=15&&t.split(" ").filter(s=>s.trim()).length<=2&&(e=!0),this.isInline=e;let r=document.createElement(P),n=document.createElement(e?S:y);n.classList.add("notranslate"),r.appendChild(n),this.translateContainerElement=r,this.translateInnerElement=n;let o=this.textNodes[this.textNodes.length-1];if(this.textNodes.length===1)ee(r,o);else{let s=ve(o);ee(r,s||o)}this.makeSureContainerHeightAuto(r.parentElement)}}makeSureContainerHeightAuto(e){if(e&&e!==document.body){let{webkitLineClamp:t}=getComputedStyle(e);if(le(t)){e.style.webkitLineClamp="unset",e.style.paddingBottom="2px";return}this.makeSureContainerHeightAuto(e.parentElement)}}updateFetchStatus(e){this.translateStatus=e,this.translateInnerElement?.removeEventListener("click",this.handleInlineElementClick),e==="fetching"&&this.renderLoadingStatus(),e==="success"&&(this.renderTranslatedText(),this.disconnectObserver()),e==="error"&&this.renderErrorStatus()}renderTranslatedText(){if(this.translatedText&&this.isTranslated&&this.translateInnerElement){let e=this.translatedText,t=/[\s\p{P}]+/gu;if(this.rawText.replace(t,"")===e.replace(t,"")&&(e=""),this.translateInnerElement.removeAttribute("title"),this.translateInnerElement.innerText=e,this.translateInnerElement.className="",!e)return;if(this.isInline)this.translateInnerElement.classList.add("maxai-trans-inline");else if(!this.translateContainerElement?.querySelector("& > br")){let r=document.createElement("br");this.translateContainerElement?.insertBefore(r,this.translateInnerElement)}}}renderLoadingStatus(){this.translateInnerElement&&(this.translateInnerElement.innerHTML=`
        <svg class="maxai-trans-inline maxai-trans-icon maxai-trans-loading" style="display: inline;" width="12" height="12" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle opacity="0.25" cx="12" cy="12" r="10" stroke="currentColor" strokewidth="4"></circle>
          <path opacity="0.75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
      `,this.translateInnerElement.classList.add("loading"))}renderErrorStatus(){this.translateInnerElement&&(this.translateInnerElement.title="retry",this.translateInnerElement.classList.add("retry"),this.translateInnerElement.innerHTML=`
        <svg class="maxai-trans-inline maxai-trans-icon maxai-trans-refresh" style="display: inline;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="12" height="12">
          <path d="M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z" fill="currentColor"></path>
        </svg>
      `,this.translateInnerElement.addEventListener("click",this.handleInlineElementClick))}handleInlineElementClick(e){e.stopPropagation(),e.preventDefault(),window.dispatchEvent(new CustomEvent("MAXAI_PageTranslatorEvent_retryTranslate"))}reset(){this.disconnectObserver(),this.rawElement.removeChild(this.translateContainerElement),this.translateStatus="idle",this.translatedText="",this.isTranslated=!1,this.isIntersecting=!1,this.translatedLangCode="",this.originalLangCode=""}},Fe=re;var C=class{constructor(e,t){this.mutationsObserver=null;this.id=H(),this.textNodesSet=new Set,this.translateItemsSet=new Set,this.translator=new Oe,this.isEnable=!1,this.loading=!1,this.fromCode=e??"",this.toCode=t??"en",this._fetching=!1,this.onFetchingChange=()=>{},this.startEventListener()}get fetching(){return this._fetching}set fetching(e){this._fetching=e,this.onFetchingChange&&this.isEnable&&this.onFetchingChange(e)}setOnFetchingChange(e){this.onFetchingChange=e}updateFromCode(e){this.fromCode=e}updateToCode(e){this.toCode=e}toggle(e){e?this.startPageTranslator():this.hideTranslateElements()}retranslate(){this.translateItemsSet.forEach(e=>{e.translateContainerElement?.remove()}),this.translateItemsSet.clear(),this.textNodesSet.clear(),this.startPageTranslator()}findSameTranslateItem(e){let t=this.translateItemsSet;for(let a of t)if(a.rawElement===e)return a;return null}startPageTranslator(){if(this.injectStyle(),this.showTranslateElements(),!this.isEnable)return;let e=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,o=>{if(this.textNodesSet.has(o))return NodeFilter.FILTER_REJECT;let s=o.parentElement;return!(o.nodeValue||"").trim()||!s||s.closest(P)||["SCRIPT","STYLE"].includes(s.nodeName)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),t=!1,a=[],r=null,n=()=>{ke(o=>{let s=o.timeRemaining();for(let c=0;s>0;s-=performance.now()-c){c=performance.now();let m=e.nextNode();if(!m){a.length&&r&&this.newPageTranslateItem(a,r),t=!0,setTimeout(()=>{v(this.doTranslate,100).call(this)},500);return}let u=xe(m);if(!u||!_e(m.parentElement))continue;r||(r=u);let l=Me(m),d=l?l.previousElementSibling:m.previousSibling,f=!1;d&&(f=d.nodeName==="BR"||d.nodeName==="LI"||("tagName"in d?Ce(d):!1)),r!==u||f?(this.newPageTranslateItem(a,r),r=u,a=[m]):a.push(m)}s<=0&&!t&&n()})};n()}newPageTranslateItem(e,t){e.forEach(n=>{this.textNodesSet.add(n)});let a=e.map(n=>n.textContent||"").join("").trim();if(Ae(a)||Se(t))return;let r=new Fe(e,t);this.translateItemsSet.add(r)}async doTranslate(e=[]){if(this.fetching)return;let t=[...e];this.translateItemsSet.forEach(a=>{!a.isTranslated&&a.isIntersecting&&a.translateStatus==="idle"&&t.push(a)}),t.length>0&&(this.fetching=!0,await this.translator.translate(t,this.toCode,this.fromCode),this.fetching=!1)}async retryTranslate(){let e=[];this.translateItemsSet.forEach(t=>{!t.isTranslated&&t.isIntersecting&&t.translateStatus==="error"&&e.push(t)}),this.doTranslate(e)}startEventListener(){let e=v(this.doTranslate,500).bind(this),t=v(this.retryTranslate,500).bind(this),a={MAXAI_PageTranslatorEvent_doTranslate:()=>{e()},MAXAI_PageTranslatorEvent_retryTranslate:()=>{t()}};window.addEventListener("MAXAI_PageTranslatorEvent_doTranslate",a.MAXAI_PageTranslatorEvent_doTranslate),window.addEventListener("MAXAI_PageTranslatorEvent_retryTranslate",a.MAXAI_PageTranslatorEvent_retryTranslate),window.addEventListener("beforeunload",()=>{window.removeEventListener("MAXAI_PageTranslatorEvent_doTranslate",a.MAXAI_PageTranslatorEvent_doTranslate),window.removeEventListener("MAXAI_PageTranslatorEvent_retryTranslate",a.MAXAI_PageTranslatorEvent_retryTranslate)})}injectStyle(){let e="maxai-translate-style";if(document.getElementById(e))return;let t=document.createElement("style");t.id=e,t.innerHTML=`
      @keyframes maxai-trans-spin {
        to {transform: rotate(360deg);}
      }
      ${P}.maxai-trans-hide {
        display: none !important;
      }
      ${y} {
        display: inline;
        margin: 4px 0;
        background-image: linear-gradient(to right, rgba(148, 168, 184, 0.8) 50%, rgba(255, 255, 255, 0) 0%);
        background-position: bottom;
        background-size: 9px 2px;
        background-repeat: repeat-x;
        padding-bottom: 3px;

        visibility: visible !important;
      }
      ${S} {
        background-image: linear-gradient(to right, rgba(148, 168, 184, 0.8) 50%, rgba(255, 255, 255, 0) 0%);
        background-position: bottom;
        background-size: 9px 2px;
        background-repeat: repeat-x;
        padding-bottom: 3px;

        visibility: visible !important;
      }

      ${S}.retry,
      ${y}.retry {
        white-space: normal;
        margin: 0;
      }

      .maxai-trans-icon {
        display: inline !important;
        border: none !important;
        background: transparent !important;
        color: #9065B0 !important;
        vertical-align: middle !important;
        fill: none !important;
        stroke: none !important;
      }
      .maxai-trans-inline {
        margin-inline-start: 4px !important;        
      }
      .maxai-trans-loading {
        animation: maxai-trans-spin 1s linear infinite !important;
      }
      .maxai-trans-refresh {
        cursor: pointer;
      }
    `;let a=ue();a==="tiktok.com"?t.innerHTML+=`
      body.maxai-trans-show [data-e2e="user-post-item-list"] [data-e2e="user-post-item-desc"] {
        height: auto;
      }
      `:a==="larksuite.com"?t.innerHTML+=`
      body.maxai-trans-show .catalogue-container .catalogue__list-item {
        height: auto!important;
      }
      body.maxai-trans-show .catalogue-container .catalogue__list-item ${y} {
        margin-left: 16px;
      }
      `:a.includes("youtube.com")?t.innerHTML+=`
      body.maxai-trans-show #video-title-link .ytd-rich-grid-media,
      body.maxai-trans-show #video-title,
      body.maxai-trans-show .ShortsLockupViewModelHostMetadataTitle, 
      body.maxai-trans-show a.ShortsLockupViewModelHostEndpoint,
      body.maxai-trans-show a.yt-lockup-metadata-view-model-wiz__title
      {
        max-height: none!important;
      }
      `:a.includes("notion")&&(t.innerHTML+=`
      ${y} {
        visibility: unset !important;
      }
      ${S} {
        visibility: unset !important;
      }
      `),document.head.appendChild(t)}hideTranslateElements(){this.isEnable=!1,document.body.classList.remove("maxai-trans-show"),this.translateItemsSet.forEach(e=>{e.translateContainerElement?.classList.add("maxai-trans-hide")}),this.closeMutationsObserver()}showTranslateElements(){this.isEnable=!0,document.body.classList.add("maxai-trans-show"),this.translateItemsSet.forEach(e=>{e.translateContainerElement?.classList.remove("maxai-trans-hide")}),this.startMutationsObserver()}closeMutationsObserver(){this.mutationsObserver&&(this.mutationsObserver.disconnect(),this.mutationsObserver=null)}startMutationsObserver(){this.mutationsObserver||(this.mutationsObserver=new MutationObserver(de(this.startPageTranslator,300).bind(this)),this.mutationsObserver.observe(document,{attributes:!1,childList:!0,characterData:!0,subtree:!0}))}};L([k],C.prototype,"updateFromCode",1),L([k],C.prototype,"updateToCode",1),L([k],C.prototype,"toggle",1),L([k],C.prototype,"retranslate",1);var O=new C;var Qe=()=>{window.self!==window.top&&(me.getAppSettings().then(i=>{i.userSettings?.pageTranslation?.sourceLanguage&&O.updateFromCode(i.userSettings.pageTranslation.sourceLanguage),i.userSettings?.pageTranslation?.targetLanguage&&O.updateToCode(i.userSettings.pageTranslation.targetLanguage)}),M(async(i,e)=>{switch(i){case"Client_listenPageTranslationEvent":{let{fn:t,args:a}=e;return t&&O[t]&&O[t](...a),{success:!0,data:!0,message:"ok"}}default:break}}))},He=Qe;De.default.extend(Be.default);var et=()=>window.frameElement?.classList.contains("docs-texteventtarget-iframe")?!0:["https://viewscreen.githubusercontent.com/view/pdf","https://notebooks.githubusercontent.com/view"].find(i=>window.location.href.startsWith(i)),tt=async()=>{x()&&(et()||(window.__MAXAI__EXTENSION__VERSION__="8.22.0",Pe(),He(),Ne()))};tt();
