import{a as Rr,b as Hr}from"./HWMIOKDV.js";import{G as Br,L as Nr,P as Rt,Q as Ht,V as Dr,W as Ut,X as Fr,h as Dt,i as Ft,u as Ya}from"./DDI5UP4S.js";import"./FXDTEDOO.js";import{a as Er,b as X,d as Ar,e as Or}from"./SITM5SLO.js";import{p as Mr}from"./XYAU3F2A.js";import{Ab as Mt,qa as Lr,zb as Nt}from"./CLPCS5HX.js";import"./5JAHRNIU.js";import"./YZ5NMKB5.js";import"./KKGP7PQX.js";import"./ZRYDJGAJ.js";import"./UAB7UEHC.js";import"./SGC75SOE.js";import"./XN3JVMCS.js";import"./TIMUG6T2.js";import"./VNS2BKAR.js";import"./CRTJIQND.js";import{f as Ua,n as qa,q as gt}from"./YOZ5W2GG.js";import"./IHRJUCHI.js";import"./GREWFYE3.js";import"./NQEUUFEJ.js";import"./IE4E3732.js";import{k as Ee}from"./X2ALZK3D.js";import{c as br}from"./GGDJOTLD.js";import{d as Bt}from"./7LKKTU5H.js";import"./QGM6CHM5.js";import"./W5GFQTKO.js";import"./HDYNK7EV.js";import{b as dt}from"./4PRYT5SQ.js";import"./B7VRG6XU.js";import"./STNCT5QQ.js";import"./IR2EOPWG.js";import"./XHCCXCYD.js";import{a as vr}from"./UGKEWSX5.js";import{a as wr}from"./PB5LUW66.js";import"./DNTOT5B2.js";import"./ZD4W36SK.js";import{a as et}from"./4WM5DWTI.js";import"./WZACKIKL.js";import{d as yr}from"./NLYC5QHQ.js";import"./WMUCJVX3.js";import"./LQYH3ZSR.js";import"./3RGTNMOF.js";import{a as $}from"./XKR4REXP.js";import"./2QQMSEQI.js";import"./LU2HGRXL.js";import{a as fr}from"./OD4HJMKT.js";import{b as Se}from"./B3ZCAZRS.js";import"./S34QHPYH.js";import{a as Ra}from"./WJUWA2XU.js";import{G as re,i as ur,j as cr}from"./MM57Z2BS.js";import"./GSC4ZYB5.js";import"./AKHNMYRV.js";import"./WXUW4ORG.js";import"./6T6FEPNJ.js";import{e as pr,f as dr}from"./OZ6K5KWN.js";import"./P3TOHEEA.js";import"./B7SYSBXF.js";import{u as sr,v as lr}from"./H5C5R2IB.js";import{i as gr}from"./QGTSDQHN.js";import{C as pt,H as ir,X as mr,r as ar}from"./G7W6DI5V.js";import"./HPIKDO6W.js";import{e as Z}from"./LSIA5SS7.js";import"./BJ5FAZNI.js";import{c as q}from"./NCSJWSK3.js";import"./F44UP4MI.js";import"./RDPX2RL7.js";import"./POF2YL63.js";import"./XXHIGHFM.js";import"./LWSOZ55D.js";import{b as Fa}from"./NS74SLXM.js";import{E as be,a as nr,b as Ba,c as rr,d as Na,h as Da,la as Pt,na as x}from"./PEAOUDRP.js";import"./JQWMDYRH.js";import{a as ka,d as tr}from"./PCHDBHHN.js";import"./JUJJIC7Z.js";import"./2KEEOA55.js";import{a as Pr}from"./BEL6FLMX.js";import"./7DYLEKAB.js";import{k as xr}from"./BYBP4KRV.js";import"./UXV3QMB6.js";import{a as Et}from"./2KT44S3D.js";import{i as Ur,m as ft}from"./T3X6HKSZ.js";import"./JLO744NT.js";import{a as Ae}from"./LIFUWJGW.js";import{b as we}from"./MC2A5KLN.js";import"./SZXXTBUM.js";import"./VTGOYHJW.js";import{d as _r}from"./DQCZLHJM.js";import{J as ve}from"./LHOPOZ7S.js";import"./N5EAU2XY.js";import"./SMGS7QAW.js";import"./XOTQ5KQV.js";import{c as G,e as kr}from"./454JMIH7.js";import"./X7IGDKSO.js";import"./DW5SZ3VB.js";import"./2HIYOEPI.js";import"./PZVNEH53.js";import{a as Ir}from"./HPHM72CW.js";import"./UZTKLAY4.js";import{a as Sr,c as Cr,g as Me,i as sn}from"./Q25QR6DL.js";import"./XXMMBCVS.js";import"./UAWD6KOW.js";import{a as Ot}from"./27O46L5C.js";import"./UXYD27MU.js";import{Na as Tr,S as hr,Ta as F,f as kt,ia as tt,r as an}from"./VE4EMEBO.js";import{b as xe}from"./UICGGF3X.js";import{d as b,f as It,j as te,k as ee,l as ne,n as or,o as ye}from"./AUJ76673.js";import"./UB52WFCV.js";import"./PKATR2QD.js";import{A as Ie,G as Ha,e as Ce}from"./DOCIOFBQ.js";import{c as on}from"./MX3LYTPZ.js";import{c as er}from"./HFEXSQX6.js";import{a as _}from"./4B6UFNBQ.js";import{I as Qn,O as Jn,b as Qt,l as Jt,s as Zt}from"./XZ5AIA7R.js";import{a as Zn}from"./PJ57C2TE.js";import{c as at,f}from"./GAV6HCJA.js";var ae=at(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.dontSetMe=Va;vt.findInArray=za;vt.int=Ga;vt.isFunction=$a;vt.isNum=Xa;function za(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function $a(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function Xa(e){return typeof e=="number"&&!isNaN(e)}function Ga(e){return parseInt(e,10)}function Va(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))}});var zr=at(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.browserPrefixToKey=Wr;At.browserPrefixToStyle=Ka;At.default=void 0;At.getPrefix=Yr;var ln=["Moz","Webkit","O","ms"];function Yr(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";let n=(e=window.document)===null||e===void 0||(e=e.documentElement)===null||e===void 0?void 0:e.style;if(!n||t in n)return"";for(let r=0;r<ln.length;r++)if(Wr(t,ln[r])in n)return ln[r];return""}function Wr(e,t){return t?"".concat(t).concat(ja(e)):e}function Ka(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function ja(e){let t="",n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):e[r]==="-"?n=!0:t+=e[r];return t}var $s=At.default=Yr()});var Pe=at(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.addClassName=Vr;E.addEvent=Za;E.addUserSelectStyles=ci;E.createCSSTransform=ii;E.createSVGTransform=si;E.getTouch=li;E.getTouchIdentifier=ui;E.getTranslation=un;E.innerHeight=ri;E.innerWidth=oi;E.matchesSelector=Gr;E.matchesSelectorAndParentsTo=Ja;E.offsetXYFromParent=ai;E.outerHeight=ei;E.outerWidth=ni;E.removeClassName=Kr;E.removeEvent=ti;E.removeUserSelectStyles=mi;var Y=ae(),$r=Qa(zr());function Xr(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(Xr=function(r){return r?n:t})(e)}function Qa(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=Xr(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}var Le="";function Gr(e,t){return Le||(Le=(0,Y.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Y.isFunction)(e[n])})),(0,Y.isFunction)(e[Le])?e[Le](t):!1}function Ja(e,t,n){let r=e;do{if(Gr(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Za(e,t,n,r){if(!e)return;let o={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function ti(e,t,n,r){if(!e)return;let o={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}function ei(e){let t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Y.int)(n.borderTopWidth),t+=(0,Y.int)(n.borderBottomWidth),t}function ni(e){let t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Y.int)(n.borderLeftWidth),t+=(0,Y.int)(n.borderRightWidth),t}function ri(e){let t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Y.int)(n.paddingTop),t-=(0,Y.int)(n.paddingBottom),t}function oi(e){let t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Y.int)(n.paddingLeft),t-=(0,Y.int)(n.paddingRight),t}function ai(e,t,n){let o=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-o.left)/n,i=(e.clientY+t.scrollTop-o.top)/n;return{x:a,y:i}}function ii(e,t){let n=un(e,t,"px");return{[(0,$r.browserPrefixToKey)("transform",$r.default)]:n}}function si(e,t){return un(e,t,"")}function un(e,t,n){let{x:r,y:o}=e,a="translate(".concat(r).concat(n,",").concat(o).concat(n,")");if(t){let i="".concat(typeof t.x=="string"?t.x:t.x+n),s="".concat(typeof t.y=="string"?t.y:t.y+n);a="translate(".concat(i,", ").concat(s,")")+a}return a}function li(e,t){return e.targetTouches&&(0,Y.findInArray)(e.targetTouches,n=>t===n.identifier)||e.changedTouches&&(0,Y.findInArray)(e.changedTouches,n=>t===n.identifier)}function ui(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function ci(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&Vr(e.body,"react-draggable-transparent-selection")}function mi(e){if(e)try{if(e.body&&Kr(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{let t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function Vr(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function Kr(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}});var mn=at(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.canDragX=gi;it.canDragY=fi;it.createCoreData=Ti;it.createDraggableData=_i;it.getBoundPosition=pi;it.getControlPosition=hi;it.snapToGrid=di;var W=ae(),qt=Pe();function pi(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:r}=e.props;r=typeof r=="string"?r:bi(r);let o=cn(e);if(typeof r=="string"){let{ownerDocument:a}=o,i=a.defaultView,s;if(r==="parent"?s=o.parentNode:s=a.querySelector(r),!(s instanceof i.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');let l=s,u=i.getComputedStyle(o),c=i.getComputedStyle(l);r={left:-o.offsetLeft+(0,W.int)(c.paddingLeft)+(0,W.int)(u.marginLeft),top:-o.offsetTop+(0,W.int)(c.paddingTop)+(0,W.int)(u.marginTop),right:(0,qt.innerWidth)(l)-(0,qt.outerWidth)(o)-o.offsetLeft+(0,W.int)(c.paddingRight)-(0,W.int)(u.marginRight),bottom:(0,qt.innerHeight)(l)-(0,qt.outerHeight)(o)-o.offsetTop+(0,W.int)(c.paddingBottom)-(0,W.int)(u.marginBottom)}}return(0,W.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,W.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,W.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,W.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]}function di(e,t,n){let r=Math.round(t/e[0])*e[0],o=Math.round(n/e[1])*e[1];return[r,o]}function gi(e){return e.props.axis==="both"||e.props.axis==="x"}function fi(e){return e.props.axis==="both"||e.props.axis==="y"}function hi(e,t,n){let r=typeof t=="number"?(0,qt.getTouch)(e,t):null;if(typeof t=="number"&&!r)return null;let o=cn(n),a=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,qt.offsetXYFromParent)(r||e,a,n.props.scale)}function Ti(e,t,n){let r=!(0,W.isNum)(e.lastX),o=cn(e);return r?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:o,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}}function _i(e,t){let n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function bi(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function cn(e){let t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}});var dn=at(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.default=xi;function xi(){}});var Qr=at(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.default=void 0;var gn=Si(_()),R=hn(tr()),yi=hn(on()),v=Pe(),ht=mn(),fn=ae(),ie=hn(dn());function hn(e){return e&&e.__esModule?e:{default:e}}function jr(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(jr=function(r){return r?n:t})(e)}function Si(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=jr(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function w(e,t,n){return t=Ci(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ci(e){var t=Ii(e,"string");return typeof t=="symbol"?t:String(t)}function Ii(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},Tt=Q.mouse,Yt=class extends gn.Component{constructor(){super(...arguments),w(this,"dragging",!1),w(this,"lastX",NaN),w(this,"lastY",NaN),w(this,"touchIdentifier",null),w(this,"mounted",!1),w(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;let n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");let{ownerDocument:r}=n;if(this.props.disabled||!(t.target instanceof r.defaultView.Node)||this.props.handle&&!(0,v.matchesSelectorAndParentsTo)(t.target,this.props.handle,n)||this.props.cancel&&(0,v.matchesSelectorAndParentsTo)(t.target,this.props.cancel,n))return;t.type==="touchstart"&&t.preventDefault();let o=(0,v.getTouchIdentifier)(t);this.touchIdentifier=o;let a=(0,ht.getControlPosition)(t,o,this);if(a==null)return;let{x:i,y:s}=a,l=(0,ht.createCoreData)(this,i,s);(0,ie.default)("DraggableCore: handleDragStart: %j",l),(0,ie.default)("calling",this.props.onStart),!(this.props.onStart(t,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,v.addUserSelectStyles)(r),this.dragging=!0,this.lastX=i,this.lastY=s,(0,v.addEvent)(r,Tt.move,this.handleDrag),(0,v.addEvent)(r,Tt.stop,this.handleDragStop))}),w(this,"handleDrag",t=>{let n=(0,ht.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:r,y:o}=n;if(Array.isArray(this.props.grid)){let s=r-this.lastX,l=o-this.lastY;if([s,l]=(0,ht.snapToGrid)(this.props.grid,s,l),!s&&!l)return;r=this.lastX+s,o=this.lastY+l}let a=(0,ht.createCoreData)(this,r,o);if((0,ie.default)("DraggableCore: handleDrag: %j",a),this.props.onDrag(t,a)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{let l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=r,this.lastY=o}),w(this,"handleDragStop",t=>{if(!this.dragging)return;let n=(0,ht.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:r,y:o}=n;if(Array.isArray(this.props.grid)){let l=r-this.lastX||0,u=o-this.lastY||0;[l,u]=(0,ht.snapToGrid)(this.props.grid,l,u),r=this.lastX+l,o=this.lastY+u}let a=(0,ht.createCoreData)(this,r,o);if(this.props.onStop(t,a)===!1||this.mounted===!1)return!1;let s=this.findDOMNode();s&&this.props.enableUserSelectHack&&(0,v.removeUserSelectStyles)(s.ownerDocument),(0,ie.default)("DraggableCore: handleDragStop: %j",a),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,s&&((0,ie.default)("DraggableCore: Removing handlers"),(0,v.removeEvent)(s.ownerDocument,Tt.move,this.handleDrag),(0,v.removeEvent)(s.ownerDocument,Tt.stop,this.handleDragStop))}),w(this,"onMouseDown",t=>(Tt=Q.mouse,this.handleDragStart(t))),w(this,"onMouseUp",t=>(Tt=Q.mouse,this.handleDragStop(t))),w(this,"onTouchStart",t=>(Tt=Q.touch,this.handleDragStart(t))),w(this,"onTouchEnd",t=>(Tt=Q.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;let t=this.findDOMNode();t&&(0,v.addEvent)(t,Q.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;let t=this.findDOMNode();if(t){let{ownerDocument:n}=t;(0,v.removeEvent)(n,Q.mouse.move,this.handleDrag),(0,v.removeEvent)(n,Q.touch.move,this.handleDrag),(0,v.removeEvent)(n,Q.mouse.stop,this.handleDragStop),(0,v.removeEvent)(n,Q.touch.stop,this.handleDragStop),(0,v.removeEvent)(t,Q.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,v.removeUserSelectStyles)(n)}}findDOMNode(){var t,n;return(t=this.props)!==null&&t!==void 0&&t.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:yi.default.findDOMNode(this)}render(){return gn.cloneElement(gn.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Oe.default=Yt;w(Yt,"displayName","DraggableCore");w(Yt,"propTypes",{allowAnyClick:R.default.bool,children:R.default.node.isRequired,disabled:R.default.bool,enableUserSelectHack:R.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:R.default.arrayOf(R.default.number),handle:R.default.string,cancel:R.default.string,nodeRef:R.default.object,onStart:R.default.func,onDrag:R.default.func,onStop:R.default.func,onMouseDown:R.default.func,scale:R.default.number,className:fn.dontSetMe,style:fn.dontSetMe,transform:fn.dontSetMe});w(Yt,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})});var to=at(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});Object.defineProperty(le,"DraggableCore",{enumerable:!0,get:function(){return Ne.default}});le.default=void 0;var ke=vi(_()),C=se(tr()),Ei=se(on()),Mi=se(Ha()),Jr=Pe(),Wt=mn(),Tn=ae(),Ne=se(Qr()),Be=se(dn());function se(e){return e&&e.__esModule?e:{default:e}}function Zr(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(Zr=function(r){return r?n:t})(e)}function vi(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=Zr(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function _n(){return _n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_n.apply(this,arguments)}function zt(e,t,n){return t=Ai(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ai(e){var t=wi(e,"string");return typeof t=="symbol"?t:String(t)}function wi(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $t=class extends ke.Component{static getDerivedStateFromProps(t,n){let{position:r}=t,{prevPropsPosition:o}=n;return r&&(!o||r.x!==o.x||r.y!==o.y)?((0,Be.default)("Draggable: getDerivedStateFromProps %j",{position:r,prevPropsPosition:o}),{x:r.x,y:r.y,prevPropsPosition:{...r}}):null}constructor(t){super(t),zt(this,"onDragStart",(n,r)=>{if((0,Be.default)("Draggable: onDragStart: %j",r),this.props.onStart(n,(0,Wt.createDraggableData)(this,r))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),zt(this,"onDrag",(n,r)=>{if(!this.state.dragging)return!1;(0,Be.default)("Draggable: onDrag: %j",r);let o=(0,Wt.createDraggableData)(this,r),a={x:o.x,y:o.y,slackX:0,slackY:0};if(this.props.bounds){let{x:s,y:l}=a;a.x+=this.state.slackX,a.y+=this.state.slackY;let[u,c]=(0,Wt.getBoundPosition)(this,a.x,a.y);a.x=u,a.y=c,a.slackX=this.state.slackX+(s-a.x),a.slackY=this.state.slackY+(l-a.y),o.x=a.x,o.y=a.y,o.deltaX=a.x-this.state.x,o.deltaY=a.y-this.state.y}if(this.props.onDrag(n,o)===!1)return!1;this.setState(a)}),zt(this,"onDragStop",(n,r)=>{if(!this.state.dragging||this.props.onStop(n,(0,Wt.createDraggableData)(this,r))===!1)return!1;(0,Be.default)("Draggable: onDragStop: %j",r);let a={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){let{x:s,y:l}=this.props.position;a.x=s,a.y=l}this.setState(a)}),this.state={dragging:!1,dragged:!1,x:t.position?t.position.x:t.defaultPosition.x,y:t.position?t.position.y:t.defaultPosition.y,prevPropsPosition:{...t.position},slackX:0,slackY:0,isElementSVG:!1},t.position&&(t.onDrag||t.onStop)}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var t,n;return(t=(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current)!==null&&t!==void 0?t:Ei.default.findDOMNode(this)}render(){let{axis:t,bounds:n,children:r,defaultPosition:o,defaultClassName:a,defaultClassNameDragging:i,defaultClassNameDragged:s,position:l,positionOffset:u,scale:c,...m}=this.props,g={},p=null,T=!!!l||this.state.dragging,I=l||o,B={x:(0,Wt.canDragX)(this)&&T?this.state.x:I.x,y:(0,Wt.canDragY)(this)&&T?this.state.y:I.y};this.state.isElementSVG?p=(0,Jr.createSVGTransform)(B,u):g=(0,Jr.createCSSTransform)(B,u);let M=(0,Mi.default)(r.props.className||"",a,{[i]:this.state.dragging,[s]:this.state.dragged});return ke.createElement(Ne.default,_n({},m,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),ke.cloneElement(ke.Children.only(r),{className:M,style:{...r.props.style,...g},transform:p}))}};le.default=$t;zt($t,"displayName","Draggable");zt($t,"propTypes",{...Ne.default.propTypes,axis:C.default.oneOf(["both","x","y","none"]),bounds:C.default.oneOfType([C.default.shape({left:C.default.number,right:C.default.number,top:C.default.number,bottom:C.default.number}),C.default.string,C.default.oneOf([!1])]),defaultClassName:C.default.string,defaultClassNameDragging:C.default.string,defaultClassNameDragged:C.default.string,defaultPosition:C.default.shape({x:C.default.number,y:C.default.number}),positionOffset:C.default.shape({x:C.default.oneOfType([C.default.number,C.default.string]),y:C.default.oneOfType([C.default.number,C.default.string])}),position:C.default.shape({x:C.default.number,y:C.default.number}),className:Tn.dontSetMe,style:Tn.dontSetMe,transform:Tn.dontSetMe});zt($t,"defaultProps",{...Ne.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})});var no=at((Js,De)=>{"use strict";var{default:eo,DraggableCore:Li}=to();De.exports=eo;De.exports.default=eo;De.exports.DraggableCore=Li});var Vo=at($e=>{"use strict";"use client";var ns=ka();Object.defineProperty($e,"__esModule",{value:!0});$e.default=void 0;var rs=ns(Ra()),os=Da(),Pc=$e.default=(0,rs.default)((0,os.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward")});var k=f(_());var nt=f(_());var oe={sceneType:"QUICK_ACCESS_CTA_BUTTON",id:"ONBOARDING_TOOLTIP__QUICK_ACCESS_CTA_BUTTON",anchorElementSelectors:'[data-testid="quick-access-maxai-mini-button-main"]',CtaButtonClickedName:"Onboarding > QuickAccessCTAButton > Got it"},Wa=e=>{let{showStateTrigger:t,...n}=e,{t:r}=b(),{chatBoxShortCutKey:o}=Ae(),[a,i]=(0,nt.useState)(!1);(0,nt.useEffect)(()=>{t?Rt(oe.sceneType).then(l=>{l||Ht(oe.sceneType).then(()=>{i(!0)})}):i(!1)},[t]);let s={bgcolor:l=>l.palette.mode==="dark"?"rgba(255, 255, 255, 0.16) !important":"rgba(0, 0, 0, 0.08) !important",color:l=>l.palette.mode==="dark"?"rgba(255, 255, 255, 0.7) !important":"rgba(0, 0, 0, 0.7) !important"};return nt.default.createElement(Ft,{autoCloseOnMouseDownAndUp:!0,hideBackdrop:!0,sx:{visibility:"hidden"},placement:"left",fallbackPlacements:["right"],trigger:a,anchorElementSelectors:oe.anchorElementSelectors,CtaButtonProps:{"data-button-clicked-name":oe.CtaButtonClickedName},popoverBoxSx:{minWidth:"180px"},id:oe.id,footerLeft:nt.default.createElement(Ut,null),...n},nt.default.createElement(x,{spacing:.5},nt.default.createElement(Pt,{fontSize:14,lineHeight:1.4,color:"text.primary",fontWeight:400,textAlign:"left"},r("onboarding:onboarding_tooltip__QUICK_ACCESS_CTA_BUTTON__text")),o&&nt.default.createElement(Se,{sx:s},o)))},qr=Wa;var h=f(_()),fa=f(no());var rt=f(_());var vo=f(Zn());var Lt=f(_());function ro(e){return/^\d+$/.test(e)}function oo(e){return/^[.,/#!$%^&*;:{}=\-_`~()\s]+$/.test(e)}function ao(e){return/^[\d.,/#!$%^&*;:{}=\-_`~()\s]+$/.test(e)}function io(e){let t=window.getComputedStyle(e);return t.display==="none"||t.visibility==="hidden"||t.opacity==="0"}function so(e){return!!(e.textContent?.trim()??"")}function lo(e){return e.replace(/</g,"%3C").replace(/>/g,"%3E")}var uo={fromLanguageCode:"",toLanguageCode:"en",needToTranslateRootContentSelectors:["body"],validElementTags:["p","h1","h2","h3","h4","h5","h6","a","span","div","li","td","th","button","label","strong","em","small"],invalidElementTags:["script","style","noscript","iframe","svg","canvas","video","audio","img","br","hr","input","select","textarea","pre","code","aside"],directElementTags:["p","h1","h2","h3","h4","h5","h6"],skipProcessComplexElementsChildElementTags:["svg","path"],minTextLength:3,maxTextLength:5e3,makeTranslatedTextMarginLeftAutoInOnlyTextNodeAndSvgNode:!0,disableCache:!1,skipElementSelectors:[]};var co={"nextjs.org":{"invalidElementTags.add":["header"]},"github.com":{"invalidElementTags.remove":["aside"],"skipElementSelectors.add":['aside[aria-label="Account"]',"header.AppHeader","footer",'div[data-testid="issue-viewer-metadata-container"]']},"stackoverflow.com":{needToTranslateRootContentSelectors:['div[id="content"]'],"skipElementSelectors.add":[".s-post-summary--meta"]},"mui.com":{"directElementTags.remove":["h1","h2","h3","h4","h5","h6"]}};var mo=(e,t)=>{let n=Ce(e),r=Object.keys(t);for(let o=0;o<r.length;o++){let a=r[o],i=t[a];if(i==null)continue;let s=a,l="cover";if(a.includes(".")){let c=a.split(".");s=c[0],l=c[1]}let u=n[s];if(Array.isArray(u)&&Array.isArray(i))switch(l){case"add":n[s]=[...new Set([...u,...i])];break;case"remove":n[s]=u.filter(c=>!i.includes(c));break;case"cover":n[s]=[...i];break}else a.includes(".")||(n[a]=i)}return n};var bn=class{constructor(){this.coverTranslatorRules={}}async getFromAndToLanguageCode(){let{fromLanguageCode:t,toLanguageCode:n}=await this.getTranslationRules(),r=ft(n);return{from:ft(t),to:r}}updateTranslatorRules(t){this.coverTranslatorRules={...this.coverTranslatorRules,...t}}getTranslationRules(){let t=Qn(),n=co[t]??{};return mo({...uo,...this.coverTranslatorRules},n)}checkIsValidContent(t,n){let r=n??this.getTranslationRules(),o=t.trim()??"";return o.length>=r.minTextLength&&o.length<=r.maxTextLength&&!ro(o)&&!oo(o)&&!ao(o)}isDirectTranslatableElement(t,n){let r=n??this.getTranslationRules(),o=t.tagName.toLowerCase();return r.directElementTags.includes(o)&&r.validElementTags.includes(o)}},Pi=new bn,S=Pi;var xn=class{markerAttributes(t,n,r){try{return t&&t.setAttribute?(t.setAttribute(n,r),!0):!1}catch{return!1}}getMarkerValue(t,n){try{return t&&t.getAttribute?t.getAttribute(n):null}catch{return null}}removeMarker(t,n){try{return t&&t.removeAttribute?(t.removeAttribute(n),!0):!1}catch{return!1}}},Oi=new xn,Xt=Oi;function Sn(e,t,n){try{let r=window.location.origin+window.location.pathname,o=yn(r),a=ki(e),i=yn(`${t}+${n}`);return`${o}_${i}_${a}`}catch{return null}}function yn(e){let t=0;if(e.length===0)return t.toString(36);for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);t=(t<<5)-t+r,t=t&t}return Math.abs(t).toString(36)}function ki(e){if(!e)return"";let t=Bi(e);return yn(`xpath:${t}`)}function Bi(e){if(!e)return"";if(e===document.body)return"/html/body";let t="",n=e;for(;n&&n!==document.documentElement;){let r=0,o=!1;for(let s=n.previousElementSibling;s;s=s.previousElementSibling)s.nodeName===n.nodeName&&(r++,o=!0);let a=n.nodeName.toLowerCase(),i=o?`[${r+1}]`:"";t=`/${a}${i}${t}`,n=n.parentElement}return`/html${t}`}var Cn=class{constructor(){this.cacheService=new an({saveKey:"MAXAI__FEATURES__PAGE_TRANSLATOR__ELEMENT_TRANSLATED",cacheTime:an.HOURLY});this.pendingUpdates={};this.debounceTimer=null;this.debounceDelay=100}async updateCache(t,n){if((await S.getTranslationRules()).disableCache)return;let{from:o,to:a}=await S.getFromAndToLanguageCode(),i=Sn(t,o,a);i&&(this.pendingUpdates[i]={...n,fromLanguageCode:o,toLanguageCode:a},this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.flushPendingUpdates()},this.debounceDelay))}async flushPendingUpdates(){if(Object.keys(this.pendingUpdates).length===0)return;let t=await this.cacheService.get(),r={...t.expired?{}:t.data,...this.pendingUpdates};await this.cacheService.sync(r),this.pendingUpdates={}}async getCacheByElement(t){if((await S.getTranslationRules()).disableCache)return{cacheData:null,cacheKey:null};let{from:r,to:o}=await S.getFromAndToLanguageCode(),a=Sn(t,r,o),i=await this.cacheService.get();return i.expired&&this.cacheService.clear(),!i.expired&&a&&i.data&&i.data[a]?{cacheData:i.data[a],cacheKey:a}:{cacheData:null,cacheKey:null}}},Ni=new Cn,Fe=Ni;var V=(e,...t)=>{},po=(e,...t)=>{};var En=f(Zn());var Re="MAXAI__PAGE_TRANSLATOR__ACCESS_TOKEN_STORAGE_KEY";var In="Access token is not available";var go=async e=>{await En.default.storage.local.set({[Re]:e})},He=async()=>(await En.default.storage.local.get(Re))[Re]??null;var fo=async(e,t,n,r)=>{try{let o=r??await He(),a=await hr(we(`https://api-edge.cognitive.microsofttranslator.com/translate?from=${e}&to=${t}&api-version=3.0&includeSentenceLength=true`,{parse:"json",method:"POST",body:JSON.stringify(n.map(s=>({Text:s}))),headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}}),2e4,null),i=a?.responseRaw;if(i?.status===401)return{success:!1,statusCode:401,data:null,error:"Access token expired"};if(a&&a.data&&i?.ok===!0&&i?.status===200){let s=a.data.map(l=>l.translations[0].text);return s.length===n.length?{success:!0,data:s}:{success:!1,data:s,error:"Response and request item count mismatch"}}else return{success:!1,data:null,error:`Translation API error: ${i?.status}`}}catch(o){return{success:!1,data:null,error:o?.message??"Page translator error"}}};var Mn=class{constructor(){this.accessToken=null;this.translating=!1;this.tokenFetching=!1;this.translateTasks=[];this.timer=null;this.checkInterval=5e3;this.idleThreshold=3e3;this.getCacheToken().then(t=>{this.accessToken=t}),this.startTaskScheduler()}addTask(t){let n=Array.isArray(t)?t:[t];this.translateTasks.push(...n),this.checkAndProcessTasks()}startTaskScheduler(){this.timer!==null&&window.clearInterval(this.timer),this.timer=window.setInterval(()=>{this.checkAndProcessTasks()},this.checkInterval)}stopTaskScheduler(){this.timer!==null&&(window.clearInterval(this.timer),this.timer=null)}checkAndProcessTasks(){this.translateTasks.length===0||this.translating||("requestIdleCallback"in window?window.requestIdleCallback(()=>this.processNextBatch(),{timeout:this.idleThreshold}):setTimeout(()=>this.processNextBatch(),0))}async processNextBatch(){if(!(this.translateTasks.length===0||this.translating))try{this.translating=!0;let t=30,n=this.translateTasks.splice(0,t),r=await this.translate(n);!r.success&&r.data.length>0&&r.error!==In&&setTimeout(()=>{this.translateTasks.push(...r.data.filter(o=>!o.isTranslated))},3e3)}catch(t){V("\u5904\u7406\u7FFB\u8BD1\u6279\u6B21\u65F6\u51FA\u9519:",t)}finally{this.translating=!1,this.translateTasks.length>0&&this.checkAndProcessTasks()}}async translate(t,n=!0){if(t.length===0)return{success:!0,data:[]};try{if(this.accessToken||await this.fetchAccessToken(),!this.accessToken)return{success:!1,data:t,error:In};if(t.length>30){let l=[];for(let m=0;m<t.length;m+=30){let g=t.slice(m,m+30),p=await this.translate(g,n);l.push(p)}let u=l.every(m=>m.success),c=l.flatMap(m=>m.data);return{success:u,data:c,error:l.find(m=>!m.success)?.error}}let r=t.filter(l=>!!l.waitToTranslateText),o=r.map(l=>l.waitToTranslateText);if(o.length===0)return{success:!0,data:t};r.forEach(l=>l.updateStatus("fetching"));let{from:a,to:i}=await S.getFromAndToLanguageCode(),s=await fo(a,i,o,this.accessToken);if(s.statusCode===401&&n)return await this.fetchAccessToken(),this.translate(t,!1);if(s&&s.data&&s?.success===!0){let l=s.data;if(l.length===o.length){for(let u=0;u<l.length;u++){let c=r[u],m=l[u];m?(c.updateTranslatedText(m),await c.updateStatus("success")):c.updateStatus("error")}return{success:!0,data:t}}else return t.forEach(u=>u.updateStatus("error")),{success:!1,data:t,error:`Translation API error: ${s?.statusCode??s.error}`}}else return t.forEach(l=>l.updateStatus("error")),{success:!1,data:t,error:`Translation API error: ${s?.statusCode??s.error}`}}catch(r){return V("catch error:",r),t.forEach(o=>o.updateStatus("error")),{success:!1,data:t,error:r?.message??"Page translator error"}}}async setCacheToken(t){await go(t)}async getCacheToken(){return await He()}async fetchAccessToken(){try{if(this.tokenFetching)return;this.tokenFetching=!0;let t=await we("https://edge.microsoft.com/translate/auth",{method:"GET",parse:"text"});if(t?.responseRaw?.ok===!0&&t.responseRaw?.status===200){let n=t.data||"";this.accessToken=n,await this.setCacheToken(n)}}catch{}finally{this.tokenFetching=!1}}clearTasks(){this.translateTasks=[]}},Di=new Mn,ho=Di;var To="maxai--page-translator-styles",H="maxai--page-translator";var Gt="data-maxai-translate-id",qe="MAXAI__RETRY_TRANSLATOR_EVENT";function _o(e,t){let n=e.cloneNode(!0);t.skipProcessComplexElementsChildElementTags.forEach(l=>{n.querySelectorAll(l).forEach(c=>c.remove())}),n.querySelectorAll("*").forEach(l=>{so(l)||l.remove()});let o={},a=0;function i(l){if(l.nodeType===Node.TEXT_NODE)return l.textContent?lo(l.textContent):"";if(l.nodeType===Node.ELEMENT_NODE){let u=l,c=u.tagName.toLowerCase(),m="";for(let T=0;T<u.childNodes.length;T++)m+=i(u.childNodes[T]);let g=`<c${a}>`,p=`</c${a}>`;a++;let d=Array.from(u.attributes).reduce((T,I)=>{let B=I.name,M=I.value;return B&&M&&(T[B]=M),T},{});return o[g]={tag:c,attributes:d,content:m,originalMatch:u.outerHTML},g+m+p}return""}let s="";for(let l=0;l<n.childNodes.length;l++)s+=i(n.childNodes[l]);return s=s.trim(),{processedText:s,tagMapping:o,tagCount:a}}function bo(e,t,n={}){if(!t)return null;let o=new DOMParser().parseFromString(`<div id="container">${t}</div>`,"text/html"),a=o.getElementById("container");function i(s){if(s.nodeType===Node.TEXT_NODE){if(s.textContent){let l=s.textContent;try{l=decodeURIComponent(s.textContent)}catch{}finally{s.textContent=l}}}else if(s.nodeType===Node.ELEMENT_NODE){if(s.tagName.toLowerCase().startsWith("c")&&/^c\d+$/.test(s.tagName.toLowerCase())){let u=`<c${s.tagName.substring(1)}>`,c=n[u];if(c){Array.from(s.childNodes).forEach(g=>{i(g)});let m=o.createElement(c.tag);for(c.attributes&&Object.entries(c.attributes).forEach(([g,p])=>{m.setAttribute(g,p)});s.firstChild;)m.appendChild(s.firstChild);s.parentNode?.replaceChild(m,s);return}}Array.from(s.childNodes).forEach(l=>i(l))}}return a&&i(a),a?.innerHTML||""}function Ye(e,t,n){let r=t.replace(/<[^>]+>/g,"").trim(),o=n?.replace(/<[^>]+>/g,"").trim()??"",a=e.innerText?.includes(`
`)||r.length>150||o.length>150||e.offsetWidth>500||/^(div|p|section|article|main|header|footer)$/i.test(e.tagName)||Hi(e.firstChild);return!!(r.length<25||/^(strong|em|b|i|label|button)$/i.test(e.tagName))}function Fi(e){let n=Array.from(e.childNodes).filter(r=>r.nodeType!==Node.COMMENT_NODE).filter(r=>r.nodeType===Node.TEXT_NODE&&r.textContent?.trim()!=="");return n.length===1&&n[0].textContent?.trim()!==""}function ue(e,t,n){n&&Ri(e,t,n),Fi(e)&&Ur(e).length===1&&e.firstChild&&e.firstChild?.nodeType===Node.TEXT_NODE?e.insertBefore(t,e.firstChild.nextSibling):e.appendChild(t)}function Ri(e,t,n){if(n.makeTranslatedTextMarginLeftAutoInOnlyTextNodeAndSvgNode){let r=Array.from(e.childNodes).filter(i=>i.nodeType!==Node.COMMENT_NODE&&(i.nodeType!==Node.TEXT_NODE||i.textContent?.trim()!=="")),o=r.find(i=>i.nodeType===Node.TEXT_NODE),a=r.find(i=>i.nodeName==="svg");e.offsetWidth>200&&r.length===2&&o&&a&&t.style.setProperty("margin-left","auto","important")}}function Hi(e){let t=e.textContent;if(!t||!t.trim())return!1;let n=e.parentNode;if(!n)return!1;let r=window.getComputedStyle(n);if(r.display==="none"||r.visibility==="hidden")return!1;let o=document.createRange(),a=document.createRange();try{o.setStart(e,0),o.setEnd(e,1);let i=e.length;a.setStart(e,i-1),a.setEnd(e,i);let s=o.getBoundingClientRect(),l=a.getBoundingClientRect();return Math.abs(s.y-l.y)>2}catch{return!1}finally{o.detach(),a.detach()}}var vn=class{constructor(t,n){this.enabled=!0;this.waitToTranslateText=null;this.translatedText=null;this.tagMapping={};this.tagMappingCount=0;this.insertedContainerElement=null;this.isInserted=!1;this.error=null;this.isTranslated=!1;this.status="idle";this.hasCache=!1;this.observer=null;this.onStatusChange=null;this.paragraphElement=t,this.id=ye(),this.onStatusChange=n,Fe.getCacheByElement(this.paragraphElement).then(({cacheData:r,cacheKey:o})=>{r?(this.id=r.id,this.waitToTranslateText=r.waitToTranslateText,this.tagMapping=r.tagMapping,this.tagMappingCount=r.tagMappingCount,this.updateTranslatedText(r.translatedText),this.hasCache=!0):(this.hasCache=!1,this.generateWaitToTranslateText()),this.setupObserver(),Xt.markerAttributes(this.paragraphElement,Gt,this.id)})}setupObserver(){this.observer?this.startObserver():(this.observer=new IntersectionObserver(this.handleIntersection.bind(this),{rootMargin:"100px",threshold:.1}),this.observer.observe(this.paragraphElement))}async handleIntersection(t){t[0].isIntersecting&&(this.hasCache?await this.updateStatus("success"):this.doTranslate())}generateWaitToTranslateText(){let t=S.getTranslationRules(),{processedText:n,tagMapping:r,tagCount:o}=_o(this.paragraphElement,t);this.waitToTranslateText=n,this.tagMapping=r,this.tagMappingCount=o}async doTranslate(){try{this.isTranslated=!0;let t=this.paragraphElement.textContent?.trim();this.waitToTranslateText||this.generateWaitToTranslateText(),t&&S.checkIsValidContent(t)&&ho.addTask(this)}catch(t){V(`Translation error for element ${this.id}:`,t),this.isTranslated=!1}}updateTranslatedText(t){this.translatedText=t,this.isTranslated=!0}async updateStatus(t){this.status=t,t==="fetching"&&this.renderTranslateLoadingHtml(),t==="success"&&(this.renderTranslatedHtml(),this.stopObserver(),this.hasCache=!0,this.waitToTranslateText&&this.translatedText&&await Fe.updateCache(this.paragraphElement,{id:this.id,waitToTranslateText:this.waitToTranslateText,translatedText:this.translatedText,tagMapping:this.tagMapping,tagMappingCount:this.tagMappingCount})),t==="error"&&(this.renderTranslatedErrorHtml(),this.stopObserver()),this.onStatusChange?.(this.id,t)}createTranslatedHtmlContainer(){let t=this.paragraphElement,n=Ye(t,t.innerHTML),r=document.createElement("div");r.classList.add("notranslate"),r.classList.add(`${H}--translate-item--container`),r.classList.add(n?`${H}--translate-item--inline`:`${H}--translate-item--block`),r.setAttribute("data-no-translate","true"),r.setAttribute("translate","no"),this.insertedContainerElement=r}renderTranslateLoadingHtml(){if(this.insertedContainerElement||this.createTranslatedHtmlContainer(),!this.insertedContainerElement){V("insertedContainerElement is missing");return}this.insertedContainerElement.innerHTML="";let t=this.paragraphElement,n=Ye(t,t.innerHTML);this.insertedContainerElement.classList.add(n?`${H}--translate-item--inline`:`${H}--translate-item--block`);let r=document.createElement("div");r.classList.add(`${H}--loading-spinner`),this.insertedContainerElement.appendChild(r);let o=S.getTranslationRules();this.enabled&&(ue(this.paragraphElement,this.insertedContainerElement,o),this.isInserted=!0)}renderTranslatedHtml(){if(this.insertedContainerElement||this.createTranslatedHtmlContainer(),!this.insertedContainerElement){V("insertedContainerElement is missing");return}if(!this.translatedText){this.updateStatus("error"),V("translatedText is missing");return}let t=this.paragraphElement,n=bo(this.id,this.translatedText,this.tagMapping);if(!n){this.updateStatus("error"),V("translatedText is missing");return}this.insertedContainerElement.remove(),this.isInserted=!1,this.insertedContainerElement.innerHTML="";let r=/[\s\p{P}]+/gu;if(this.waitToTranslateText?.replace(r,"")===this.translatedText.replace(r,""))return;let o=Ye(t,t.innerHTML,n);if(this.insertedContainerElement.classList.add(o?`${H}--translate-item--inline`:`${H}--translate-item--block`),o){let s=document.createElement("span");s.classList.add(`${H}--translate-item--gap`),s.classList.add("notranslate"),s.setAttribute("data-no-translate","true"),s.innerHTML="&nbsp;&nbsp;",this.insertedContainerElement.appendChild(s)}let a=document.createElement("span");a.classList.add(`${H}--translate-item--inner`),a.innerHTML=n,this.insertedContainerElement.appendChild(a);let i=S.getTranslationRules();this.enabled&&(ue(this.paragraphElement,this.insertedContainerElement,i),this.isInserted=!0)}renderTranslatedErrorHtml(){if(!this.insertedContainerElement){V("insertedContainerElement is missing");return}this.insertedContainerElement.remove(),this.insertedContainerElement.innerHTML="";let t=document.createElement("span");t.innerHTML=`
      <svg style="display:inline;width:1em;height:1em;pointer-events:none;" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M35.9387 5.48805C35.9166 4.60421 35.2434 4.04719 34.279 4.0675C33.3131 4.0878 32.8154 4.67712 32.6567 5.56132C32.5745 6.01985 32.601 6.49957 32.5962 6.96997C32.5881 7.77251 32.594 8.5752 32.594 9.3779C32.4685 9.43478 32.343 9.4917 32.2175 9.54866C31.7961 9.14366 31.3817 8.73102 30.9521 8.33488C27.0799 4.76502 22.4856 3.43605 17.3405 4.22591C10.0761 5.34107 4.69388 11.3891 4.06231 18.939C3.46983 26.0213 8.03881 32.8643 14.897 35.1663C21.8348 37.495 29.5543 34.7845 33.4563 28.6429C33.7074 28.2475 33.9685 27.8417 34.1218 27.4045C34.4194 26.5555 34.2699 25.765 33.4312 25.3113C32.6231 24.8743 31.8573 25.0498 31.2835 25.7915C30.9966 26.1625 30.7785 26.5856 30.5106 26.9724C28.0914 30.4658 24.7682 32.3693 20.5158 32.5766C14.8218 32.8541 9.60215 29.1608 7.94272 23.717C6.22884 18.0946 8.59939 12.0366 13.6698 9.08126C18.5986 6.20837 24.9262 7.03281 28.9148 11.0837C29.2069 11.3803 29.4036 11.7708 29.8772 12.4519C28.32 12.4519 27.1212 12.3885 25.9323 12.4704C24.8345 12.5461 24.253 13.1995 24.262 14.1166C24.2708 15.0096 24.8931 15.7485 25.9495 15.7745C28.7068 15.8424 31.4671 15.8177 34.2259 15.7884C35.1348 15.7787 35.8872 15.2584 35.9148 14.3603C36.0054 11.4048 36.0127 8.44397 35.9387 5.48805Z" fill="#428ADF"></path>
      </svg>
      <span style="color:#428ADF;text-decoration-line:underline;text-underline-offset:0.2em;margin-left:0.2em;pointer-events:none;">Retry</span>
    `,t.classList.add(`${H}--error-box`),this.insertedContainerElement.appendChild(t),t.addEventListener("click",r=>{r.stopPropagation(),r.preventDefault(),this.triggerAllTranslateItemInstanceRetryTranslate()});let n=S.getTranslationRules();this.enabled&&ue(this.paragraphElement,this.insertedContainerElement,n)}triggerAllTranslateItemInstanceRetryTranslate(){window.dispatchEvent(new CustomEvent(qe))}async doRetryTranslate(t=!1){this.resetStatus();let{cacheData:n}=await Fe.getCacheByElement(this.paragraphElement);n?(this.id=n.id,this.waitToTranslateText=n.waitToTranslateText,this.tagMapping=n.tagMapping,this.tagMappingCount=n.tagMappingCount,this.updateTranslatedText(n.translatedText),t||(this.hasCache=!0)):(this.hasCache=!1,this.generateWaitToTranslateText()),this.setupObserver(),Xt.markerAttributes(this.paragraphElement,Gt,this.id)}resetStatus(){this.status="idle",this.isTranslated=!1,this.waitToTranslateText=null,this.translatedText=null,this.tagMapping={},this.tagMappingCount=0,this.error=null,this.insertedContainerElement&&(this.insertedContainerElement.remove(),this.insertedContainerElement=null)}forceTranslate(){this.doTranslate()}stopObserver(){this.observer&&this.observer.disconnect()}startObserver(){this.observer&&this.observer.observe(this.paragraphElement)}removeTranslateNode(){this.enabled=!1,this.insertedContainerElement&&(this.insertedContainerElement.remove(),this.isInserted=!1),this.stopObserver()}reshowTranslateNode(){if(this.enabled=!0,this.startObserver(),!this.isInserted&&this.hasCache&&this.insertedContainerElement){let t=S.getTranslationRules();ue(this.paragraphElement,this.insertedContainerElement,t),this.isInserted=!0}}},xo=vn;var yo=e=>e.getAttribute&&(e.getAttribute("data-no-translate")==="true"||e.getAttribute("translate")==="no"),Ui=e=>e?!!e.closest("[contenteditable=true]"):!1,So=(e,t)=>{if(!e)return!0;let n=t;if(e.nodeType===Node.ELEMENT_NODE){if(n.invalidElementTags.includes(e.tagName.toLowerCase())||Ui(e))return!0;let r=n.skipElementSelectors;if(r&&r.length>0){for(let o of r)if(e.matches(o))return!0}if(io(e))return!0}return!1};var An=class extends xe{constructor(n){super();this.translateItemInstances=[];this.translatorItemsStatusState={};this.contentContainerElement=null;this.retryListenerMounted=!1;this.contentContainerElement=n,this.id=ye()}identifyTranslatableParagraphs(n){try{let r=[],o=S.getTranslationRules();this.traverseDOMWithTreeWalker(n,o,r);let a=this.filterNestedElements(r);po("translatableElements",a);let i=a.map(s=>new xo(s,(l,u)=>{this.translatorItemsStatusState[l]=u,this.emit("onTranslatorItemsStatusStateChange",{translatorItemsStatusState:this.translatorItemsStatusState})}));return this.translateItemInstances=[...this.translateItemInstances,...i],this.retryListenerMounted||(window.addEventListener(qe,()=>{this.translateItemInstances.forEach(s=>{(s.status==="error"||s.status==="idle")&&s.doRetryTranslate()})}),this.retryListenerMounted=!0),!0}catch(r){return V(`Error identifying translatable paragraphs: ${r}`),!1}}changeTranslateItemCacheStatus(n){this.translateItemInstances.forEach(r=>{r.hasCache=n})}reSearchTranslatableParagraphs(){this.contentContainerElement&&this.identifyTranslatableParagraphs(this.contentContainerElement)}traverseDOMWithTreeWalker(n,r,o){let a=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:s=>s.nodeType===Node.ELEMENT_NODE&&(So(s,r)||yo(s)||Xt.getMarkerValue(s,Gt))?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),i;for(;i=a.nextNode();)if(i.nodeType===Node.TEXT_NODE)this.processTextNode(i,o);else if(i.nodeType===Node.ELEMENT_NODE){let s=i;if(S.isDirectTranslatableElement(s,r)){let l=s.textContent?.trim();l&&S.checkIsValidContent(l,r)&&o.push(s),a.currentNode=s;let u=this.findNextSiblingOrAncestorSibling(s);u&&(a.currentNode=u)}}}findNextSiblingOrAncestorSibling(n){let r=n;for(;r;){if(r.nextSibling)return r.nextSibling;if(r=r.parentNode,!r||r.nodeType===Node.DOCUMENT_NODE)return null}return null}filterNestedElements(n){return n.filter(r=>!n.some(o=>o!==r&&o.contains(r)))}processTextNode(n,r){let o=n.textContent?.trim();if(o&&S.checkIsValidContent(o)){let a=n.parentElement;if(a){if(r.includes(a)||Xt.getMarkerValue(a,Gt))return null;r.push(a)}}}closeTranslate(){this.translateItemInstances.forEach(n=>{n.removeTranslateNode()})}startTranslate(){this.translateItemInstances.forEach(n=>{n.reshowTranslateNode()})}doRetryTranslate(){this.translateItemInstances.forEach(n=>{n.doRetryTranslate()})}},Co=An;var wn=class{constructor(){this.inserted=!1;this.styleTagId=To;this.classNamePrefix=H}initialize(){if(this.inserted)return;let t=document.createElement("style");t.id=this.styleTagId,t.textContent=this.generateCSS(),document.head.appendChild(t),this.inserted=!0}remove(){let t=document.getElementById(this.styleTagId);t&&(t.remove(),this.inserted=!1)}generateCSS(){let t=this.classNamePrefix;return`
      .${t}--loading-spinner {
        vertical-align: middle;
        width: 10px;
        height: 10px;
        display: inline-block;
        margin: 0 4px;
        border: 2px solid rgba(221, 244, 255, 0.6);
        border-top: 2px solid rgba(0 ,0, 0, 0.375);
        border-left: 2px solid rgba(0 ,0, 0, 0.375);
        border-radius: 50%;
        padding: 0 !important;
        animation: maxai--page-translator--loading 0.6s infinite linear !important;
      }

      @keyframes ${t}--loading {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(359deg);
        }
      }

      .${t}--error-box {
        position: relative;
        display: inline-flex;
        gap: 2px;
        flex-direction: row;
        align-items: center;
        cursor: pointer;
        white-space: nowrap;
        font-size: 0.9em;
      }

      .${t}--translate-item--container {
        word-break: break-word;
        user-select: text;
        font-family: inherit;
      }
      .${t}--translate-item--inline {
        display: inline;
      }
      .${t}--translate-item--block {
        position: relative;
        margin: 0.5em 0 !important;
        display: block;
      }
        
      .${t}--translate-item--inner {
        display: inline;
        background-image: linear-gradient(to right, rgba(148, 168, 184, 0.8) 50%, rgba(255, 255, 255, 0) 0%);
        background-position: bottom;
        background-size: 9px 2px;
        background-repeat: repeat-x;
        padding-bottom: max(min(0.2em, 3px), 1px);
      }
    `}},Io=wn;var Ln=class extends xe{constructor(){super(...arguments);this._enableTranslate=!1;this._loading=!1;this.translatorFinderInstance=[];this.styleInserted=!1;this.isInitialized=!1;this.mutationsObserverObj={}}set enableTranslate(n){this._enableTranslate=n,this.emit("onEnableChange",n)}get enableTranslate(){return this._enableTranslate}set loading(n){this._loading=n,this.emit("onLoadingChange",n)}get loading(){return this._loading}startTranslate(){this.isInitialized?(this.reSearchTranslatableParagraphs(),this.translatorFinderInstance.forEach(n=>{n.startTranslate()})):this.initializeFinder(),this.enableTranslate=!0}closeTranslate(){this.enableTranslate=!1,this.translatorFinderInstance.forEach(n=>{n.closeTranslate(),this.closeMutationsObserverWith(n.id)})}doRetryTranslate(){this.translatorFinderInstance.forEach(n=>{n.doRetryTranslate()})}updateCacheStatus(n){this.translatorFinderInstance.forEach(r=>{r.changeTranslateItemCacheStatus(n)})}initializeFinder(){if(this.isInitialized)return;let n=S.getTranslationRules();document.querySelectorAll(n.needToTranslateRootContentSelectors.map(o=>`${o}`).join(", ")).forEach(o=>{if(o&&o instanceof HTMLElement){let a=new Co(o);a.identifyTranslatableParagraphs(o),a.on("onTranslatorItemsStatusStateChange",i=>{let{translatorItemsStatusState:s}=i;Object.values(s).some(u=>u==="fetching")?this.loading=!0:this.loading=!1}),this.translatorFinderInstance.push(a),this.mutationsObserverObj[a.id]=this.initMutationsObserver(o,a.id)}}),this.isInitialized=!0,this.styleInserted||(new Io().initialize(),this.styleInserted=!0)}reSearchTranslatableParagraphs(){this.translatorFinderInstance.forEach(n=>{n.reSearchTranslatableParagraphs()})}initMutationsObserver(n,r){if(this.mutationsObserverObj[r])return this.mutationsObserverObj[r];let o=new MutationObserver(Ie(this.reSearchTranslatableParagraphs,500).bind(this));return o.observe(n,{childList:!0,characterData:!0,subtree:!0}),o}closeMutationsObserverWith(n){this.mutationsObserverObj[n]&&(this.mutationsObserverObj[n].disconnect(),this.mutationsObserverObj[n]=null)}},qi=new Ln,wt=qi;var We=It({key:"pageTranslationEnableAtom",default:!1}),Eo=It({key:"pageTranslationLoadingAtom",default:!1}),ze=It({key:"currentPageLanguageNotEqualTargetLanguageAtom",default:!1}),Pn=It({key:"showTranslateSameLanguageTooltipAtom",default:!1});var Yi=()=>{let{userSettings:e}=F(),[t,n]=ee(We),[r,o]=ee(Eo),{needStartShowTranslateSameLanguageTooltip:a}=On(),i=(0,Lt.useMemo)(()=>e?.pageTranslation?.targetLanguage??e?.preferredLanguage??ft(navigator.language)??"en",[e?.pageTranslation?.targetLanguage,e?.preferredLanguage]),s=(0,Lt.useRef)(i),l=async(u,c)=>{if(!await Ee({emitEvent:!0})||r)return;let g=u??!t;g&&a();let d=(()=>{let T=Zt[s.current];if(T)return T.en_label;let I="";return Object.keys(Zt).forEach(B=>{if(Zt[B].microsoft_translator_code===s.current){I=Zt[B].en_label;return}}),I})();c&&wt.updateCacheStatus(!1),g?(u===!0&&t===!0?wt.doRetryTranslate():wt.startTranslate(),_r("prompt_used",{prompt_name:"Translate this page",prompt_details:d?`Translate to ${d}`:void 0})):wt.closeTranslate()};return(0,Lt.useEffect)(()=>{s.current=i,S.updateTranslatorRules({toLanguageCode:i})},[i]),(0,Lt.useEffect)(()=>{wt.on("onEnableChange",u=>{n(u)}),wt.on("onLoadingChange",u=>{o(u)})},[]),{loading:r,setLoading:o,translationEnable:t,toggleTranslation:l,targetLanguage:i}},Mo=Yi;var Wi=()=>Mo(),J=Wi;var Ao=()=>te(ze),wo=()=>{let e=te(Pn),{needStartShowTranslateSameLanguageTooltip:t}=On();return{showTranslateSameLanguageTooltip:e,needStartShowTranslateSameLanguageTooltip:t}},On=()=>{let e=ne(Pn),t=(0,rt.useRef)(null),n=or(({snapshot:r})=>async()=>{await r.getPromise(ze)||(e(!0),t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{e(!1)},2e3))});return{setShowTranslateSameLanguageTooltip:e,needStartShowTranslateSameLanguageTooltip:n}},zi=()=>{let[e,t]=(0,rt.useState)(!0),[n,r]=(0,rt.useState)(null),{targetLanguage:o}=J(),a=(0,rt.useCallback)(async()=>{let l="";if(G()==="notion.so")return document.documentElement.lang;if(!l){let u=document.body.innerText.slice(500,3e3),c=await vo.default.i18n.detectLanguage(u),m=c?.languages?.[0];if(c.isReliable&&m&&m.percentage>0&&m.language)return m.language}return null},[]),i=(0,rt.useCallback)(async()=>{let u=(await sn("tabs","query",[{active:!0,currentWindow:!0}])||[])[0],c=u?.id;return u&&c?await sn("tabs","detectLanguage",[c]):null},[]),s=ne(ze);return(0,rt.useEffect)(()=>{if(!o||!n)return;let l=o.includes("_")?o?.split("_")[0]:o?.split("-")[0],u=n.includes("_")?n?.split("_")[0]:n?.split("-")[0];s(l!==u)},[o,n,s]),Et(()=>{setTimeout(async()=>{t(!0);let l=await a();if(l){r(l),t(!1);return}let u=await i();if(u){r(u),t(!1);return}},500)}),{currentPageLanguage:n}},Lo=zi;var kn=f(_());var Bn=It({key:"MaxAIMinimumHideState",default:!1}),Po=()=>{let{t:e}=b(["common","client"]);return e("client:quick_access__hide_button__title")},$i=e=>{let{isDragging:t}=e,n=ne(Bn);return kn.default.createElement(x,{"data-testid":"quick-access-maxai-close-button",sx:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",opacity:"0.4","&:hover":{opacity:"1"}},onClick:()=>{t||n(!0)}},kn.default.createElement(gt,{sx:{fontSize:"20px",color:"inherit"},icon:"Close"}))},Oo=$i;var pe=f(_());var L=f(_());var ko=f(_()),Xi=e=>{let{onClick:t,children:n,sx:r,testId:o,...a}=e;return ko.default.createElement(Z,{"data-testid":o,sx:{position:"relative",minWidth:"var(--mini-button-height)",minHeight:"var(--mini-button-height)",width:"var(--mini-button-height)",height:"var(--mini-button-height)",padding:0,borderRadius:"50%",display:"flex",color:i=>i.palette.mode==="dark"?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.6)","&:hover":{backgroundColor:i=>i.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.06)",color:"primary.main"},...r},...a,onClick:i=>{i.stopPropagation(),t?.(i)}},n)},Bo=Xi;var No=e=>{let{testId:t,setOpen:n,isDragging:r,onClick:o,isOnThePageLeft:a}=e,i=e.Component;return L.default.createElement(Bo,{testId:t,onClick:o,...e.buttonProps},i&&L.default.createElement(i,{setOpen:n,isDragging:r,isOnThePageLeft:a}))},Gi=e=>{let{tooltip:t,children:n,open:r,setOpen:o,isOnThePageLeft:a}=e;if(!t)return n;if(t.customNode){let i=t.customNode;return L.default.createElement(i,{open:r,setOpen:o,testId:t.testId,isOnThePageLeft:a},n)}return t.tooltipProps?L.default.createElement(et,{testId:t.testId,arrow:!0,open:r,minimumTooltip:!0,placement:"left",...t.tooltipProps,PopperProps:{sx:{whiteSpace:"nowrap"}}},n):n},Vi=e=>{let{priorityTooltip:t,isMiddleButton:n=!1,mainButton:r,childButtons:o=[],isDragging:a,isOnThePageLeft:i,...s}=e,{sx:l,...u}=s||{},[c,m]=(0,L.useState)(r.tooltip),[g,p]=(0,L.useState)(!1),d=t||c,T=!!t||g,{devShowAuxiliaryLine:I,devAlwaysShowTooltip:B}=Dt();return L.default.createElement(q,{sx:{"--middle-button-width":"8px","--main-button-width":n?"calc(var(--mini-button-height) + var(--middle-button-width))":"var(--mini-button-height)","--main-button-width-wrapper":n?"calc(var(--mini-button-height-wrapper) + var(--middle-button-width))":"var(--mini-button-height-wrapper)","--expanded-width":n?`calc(var(--mini-button-height-wrapper) * ${o.length+1} + var(--middle-button-width))`:`calc(var(--mini-button-height-wrapper) * ${o.length+1})`,position:"relative",boxSizing:"border-box",height:"var(--mini-button-height-wrapper)",width:"var(--mini-button-height-wrapper)",...i?{marginRight:n?"-2px":0}:{marginLeft:n?"-2px":0},...l,...I?{}:{}},...u,onMouseLeave:()=>{p(!1)}},!a&&L.default.createElement(Gi,{isOnThePageLeft:i,open:B||T,key:`${B||T}`,tooltip:d,setOpen:p},L.default.createElement("div",{style:{position:"absolute",top:0,...i?{left:0}:{right:0},width:"var(--expanded-width)",height:"100%",pointerEvents:"none",marginRight:n?"calc(-1 * var(--middle-button-width) - 2px)":0,...I?{outline:"1px solid #f0f"}:{}}})),L.default.createElement(x,{direction:i?"row":"row-reverse",spacing:.5,alignItems:"center",sx:{boxSizing:"border-box",position:"absolute",overflow:"hidden",top:0,...i?{left:0}:{right:0},borderRadius:n?i?"0 var(--mini-button-height-wrapper) var(--mini-button-height-wrapper) 0":"var(--mini-button-height-wrapper) 0 0 var(--mini-button-height-wrapper)":"var(--mini-button-height-wrapper)",padding:"2px",marginRight:n?"calc(-1 * var(--middle-button-width) - 2px)":0,boxShadow:" 0px 0px 1px 0px rgba(0, 0, 0, 0.08), 0px 5px 25px 0px rgba(0, 0, 0, 0.04), 0px 3.2px 12px 0px rgba(0, 0, 0, 0.08)",bgcolor:"background.paper",transition:"width 0.24s",width:T?"var(--expanded-width)":"var(--main-button-width-wrapper)",...I?{outline:"1px solid #0f8"}:{}},onMouseEnter:()=>{p(!0)}},L.default.createElement(No,{setOpen:p,isDragging:a,isOnThePageLeft:i,...r,buttonProps:{sx:{minWidth:"var(--main-button-width)",width:"var(--main-button-width)",...n?{borderRadius:i?"0 var(--mini-button-height-wrapper) var(--mini-button-height-wrapper) 0":"var(--mini-button-height-wrapper) 0 0 var(--mini-button-height-wrapper)"}:{}},onMouseEnter:()=>{r.tooltip&&m(r.tooltip)}}}),o?.map((M,U)=>{let jt=M.customNode?M.customNode:L.default.createElement(No,{key:U,setOpen:p,isDragging:a,isOnThePageLeft:i,buttonProps:{onMouseEnter:()=>{M.tooltip&&m(M.tooltip)}},...M,onClick:St=>{St.stopPropagation(),St.preventDefault()}});return L.default.isValidElement(jt)?jt:null})))},ce=Vi;var _t=f(_());var Nn=f(_()),Ki=()=>Nn.default.createElement(x,{sx:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center"}},Nn.default.createElement(gt,{icon:"Power",sx:{fontSize:"20px"}})),Do=Ki;var st=f(_());var ji=e=>{let{open:t,setOpen:n,isOnThePageLeft:r}=e,{t:o}=b(["client","common"]),{updateAppSettings:a}=Br(),{userSettings:i,setUserSettings:s}=F(),l=d=>{d.stopPropagation(),Me({key:"options",query:"?id=quick-access#/appearance"})},u=async d=>{d.stopPropagation(),await s({...i,quickAccess:{visibility:{...i?.quickAccess?.visibility||{whitelist:[],blacklist:[],isWhitelistMode:!1},blacklist:[...i?.quickAccess?.visibility?.blacklist||[],G()]}}}),a()},c=async d=>{d.stopPropagation(),await s({...i,quickAccess:{visibility:{...i?.quickAccess?.visibility||{whitelist:[],blacklist:[]},isWhitelistMode:!0}}}),a()},m=(0,st.useRef)(null),[g,p]=(0,st.useState)(0);return(0,st.useEffect)(()=>{m.current&&p(Math.max(m.current.getBoundingClientRect().bottom-window.innerHeight,0))},[t]),t&&st.default.createElement(q,{sx:{marginLeft:"0px!important",color:"#fff",position:"absolute",...r?{left:"calc(72px - 5px)"}:{right:"calc(72px - 5px)"},top:g>0?-g-8:0},onClick:d=>d.stopPropagation(),onMouseDown:d=>d.stopPropagation(),onMouseLeave:()=>n(!1)},st.default.createElement(Dr,{ref:m,sx:{...r?{marginLeft:"10px"}:{marginRight:"10px"}},hideThisSiteItemDataButtonClickedName:"max_ai__quick_access__hide_menu__this_site",hideThisSiteItemText:o("client:floating_menu__mini_menu__image__close_item__hide_on_this_site"),hideThisSiteConfirmCardTitle:o("client:quick_access__confirm_card__hide_this_site__title"),hideThisSiteConfirmCardOkText:o("client:floating_menu__mini_menu__image__close_item__hide_on_this_site"),hideThisSiteConfirmCardCancelText:o("common:cancel"),onHideThisSiteConfirmCardClickOk:u,onHideThisSiteConfirmCardClickCancel:()=>{},hideAllSitesItemDataButtonClickedName:"max_ai__quick_access__hide_menu__all_sites",hideAllSitesItemText:o("client:floating_menu__mini_menu__image__close_item__hide_always"),hideAllSitesConfirmCardTitle:o("client:quick_access__confirm_card__hide_all_sites__title"),hideAllSitesConfirmCardOkText:o("client:floating_menu__mini_menu__image__close_item__hide_always"),hideAllSitesConfirmCardCancelText:o("common:cancel"),onHideAllSitesConfirmCardClickOk:c,onHideAllSitesConfirmCardClickCancel:()=>{},openSettingsItemTextI18nKey:"client:floating_menu__button__menu_settings",onClickSettings:l}))},Fo=ji;var Dn=f(_());var Ro=()=>{let{t:e}=b(["common","client"]);return e("client:sidebar__button__immersive_chat")},Qi=e=>{let{setOpen:t,isDragging:n}=e,r=()=>{n||(t?.(!1),setTimeout(()=>{Me({url:wr})},10))};return Dn.default.createElement(x,{"data-testid":"quick-access-maxai-immersive-chat-button",sx:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},onClick:()=>r()},Dn.default.createElement(gt,{sx:{fontSize:"20px",color:"inherit"},icon:"Fullscreen"}))},Ho=Qi;var me=f(_());var Uo=()=>{let{t:e}=b(["client"]);return e("client:quick_access__maxai_button__title")},qo=()=>{let{chatBoxShortCutKey:e}=Ae();return e&&me.default.createElement(Se,null,e)},Ji=e=>{let{isDragging:t,isOnThePageLeft:n}=e,r=()=>{if(t)return;new Sr().postMessage({event:"Client_emitCMDJ",data:{}})};return me.default.createElement(x,{"data-testid":"quick-access-maxai-mini-button",sx:{width:"100%",height:"100%",alignItems:n?"flex-end":"flex-start",justifyContent:"center"},onClick:()=>r()},me.default.createElement(x,{sx:{width:"var(--mini-button-height)",height:"var(--mini-button-height)",alignItems:"center",justifyContent:"center"}},me.default.createElement($,{sx:{fontSize:"20px"}})))},Yo=Ji;var Wo=f(Ya());var Fn=f(_());var zo=()=>{let{t:e}=b(["common","client"]);return e("client:sidebar__mini_button__screenshot__tooltip")},Zi=e=>{let{isDragging:t}=e,n=()=>{if(t)return;X("QuickAccessScreenshot",{});let r=setInterval(()=>{let o=Cr()?.querySelector('button[data-testid="maxai-take-screenshot"]');o&&(clearInterval(r),o.click())},200)};return Fn.default.createElement(x,{"data-testid":"quick-access-maxai-screenshot-button",sx:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},onClick:()=>n()},Fn.default.createElement(Wo.default,{sx:{transform:"rotate(-90deg)",color:"inherit",fontSize:"18px"}}))},$o=Zi;var Rn=f(_());var ts=()=>{switch(tt()){case"DEFAULT_EMAIL_SUMMARY":return"client:sidebar__tabs__summary__tooltip__default_email";case"PAGE_SUMMARY":return"client:sidebar__tabs__summary__tooltip__page";case"PDF_CRX_SUMMARY":return"client:sidebar__tabs__summary__tooltip__pdf_crx";case"YOUTUBE_VIDEO_SUMMARY":return"client:sidebar__tabs__summary__tooltip__youtube_video";default:return"client:sidebar__tabs__summary__tooltip__page"}},Xo=()=>{let{t:e}=b(["common","client"]);return e(ts())},es=e=>{let{isDragging:t}=e,n=()=>{t||X("QuickAccessSummary",{pageSummaryType:tt()})};return Rn.default.createElement(x,{"data-testid":"quick-access-maxai-summary-button",sx:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},onClick:()=>n()},Rn.default.createElement(gt,{sx:{fontSize:"20px",color:"inherit"},icon:"Summarize"}))},Go=es;var Qo=f(Vo());var z=f(_());var jo=f(Fa());var lt=f(_());var Hn={am:{label:"\u12A0\u121B\u122D\u129B",en_label:"Amharic"},ar:{label:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629",en_label:"Arabic"},bg:{label:"\u0411\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438",en_label:"Bulgarian"},bn:{label:"\u09AC\u09BE\u0982\u09B2\u09BE",en_label:"Bengali"},ca:{label:"Catal\xE0",en_label:"Catalan"},cs:{label:"\u010Ce\u0161tina",en_label:"Czech"},da:{label:"Dansk",en_label:"Danish"},de:{label:"Deutsch",en_label:"German"},el:{label:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC",en_label:"Greek"},en:{label:"English",en_label:"English"},en_GB:{label:"English (UK)",en_label:"English (UK)"},en_US:{label:"English (US)",en_label:"English (US)"},es:{label:"Espa\xF1ol",en_label:"Spanish"},es_419:{label:"Espa\xF1ol (Latinoam\xE9rica)",en_label:"Spanish (Latin America)"},et:{label:"Eesti",en_label:"Estonian"},fa:{label:"\u0641\u0627\u0631\u0633\u06CC",en_label:"Persian"},fi:{label:"Suomi",en_label:"Finnish"},fil:{label:"Filipino",en_label:"Filipino"},fr:{label:"Fran\xE7ais",en_label:"French"},gu:{label:"\u0A97\u0AC1\u0A9C\u0AB0\u0ABE\u0AA4\u0AC0",en_label:"Gujarati"},he:{label:"\u05E2\u05D1\u05E8\u05D9\u05EA",en_label:"Hebrew"},he_IL:{label:"\u05E2\u05D1\u05E8\u05D9\u05EA (\u05D9\u05E9\u05E8\u05D0\u05DC)",en_label:"Hebrew (Israel)"},hi:{label:"\u0939\u093F\u0928\u094D\u0926\u0940",en_label:"Hindi"},hr:{label:"Hrvatski",en_label:"Croatian"},hy:{label:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",en_label:"Armenian"},hu:{label:"Magyar",en_label:"Hungarian"},in:{label:"Bahasa Indonesia",en_label:"Indonesian"},id:{label:"Indonesia",en_label:"Indonesian"},it:{label:"Italiano",en_label:"Italian"},ja:{label:"\u65E5\u672C\u8A9E",en_label:"Japanese"},kn:{label:"\u0C95\u0CA8\u0CCD\u0CA8\u0CA1",en_label:"Kannada"},ko:{label:"\uD55C\uAD6D\uC5B4",en_label:"Korean"},lt:{label:"Lietuvi\u0173",en_label:"Lithuanian"},lv:{label:"Latvie\u0161u",en_label:"Latvian"},ml:{label:"\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02",en_label:"Malayalam"},mr:{label:"\u092E\u0930\u093E\u0920\u0940",en_label:"Marathi"},ms:{label:"Melayu",en_label:"Malay"},nl:{label:"Nederlands",en_label:"Dutch"},no:{label:"Norsk",en_label:"Norwegian"},pl:{label:"Polski",en_label:"Polish"},pt_BR:{label:"Portugu\xEAs (Brasil)",en_label:"Portuguese (Brazil)"},pt_PT:{label:"Portugu\xEAs (Portugal)",en_label:"Portuguese (Portugal)"},ro:{label:"Rom\xE2n\u0103",en_label:"Romanian"},ru:{label:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",en_label:"Russian"},sk:{label:"Sloven\u010Dina",en_label:"Slovak"},sl:{label:"Sloven\u0161\u010Dina",en_label:"Slovenian"},sr:{label:"\u0421\u0440\u043F\u0441\u043A\u0438",en_label:"Serbian"},sv:{label:"Svenska",en_label:"Swedish"},sw:{label:"Kiswahili",en_label:"Swahili"},ta:{label:"\u0BA4\u0BAE\u0BBF\u0BB4\u0BCD",en_label:"Tamil"},te:{label:"\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41",en_label:"Telugu"},th:{label:"\u0E44\u0E17\u0E22",en_label:"Thai"},tr:{label:"T\xFCrk\xE7e",en_label:"Turkish"},ua:{label:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430",en_label:"Ukrainian",microsoft_translator_code:"uk"},uk:{label:"\u0627\u0631\u062F\u0648",en_label:"Urdu",microsoft_translator_code:"ur"},vi:{label:"Ti\u1EBFng Vi\u1EC7t",en_label:"Vietnamese"},zh_CN:{label:"\u7B80\u4F53\u4E2D\u6587",en_label:"Simplified Chinese",microsoft_translator_code:"zh-Hans"},zh_TW:{label:"\u7E41\u9AD4\u4E2D\u6587",en_label:"Traditional Chinese",microsoft_translator_code:"zh-Hant"}};function as(e,{inputValue:t}){return e.filter(n=>{let r=n.label.toLowerCase(),o=n.origin?.en_label?.toLowerCase()||"",a=n.value.toLowerCase(),i=t.toLowerCase();return r.includes(i)||a.includes(i)||o.includes(i)})}var Ko=Object.keys(Hn).map(e=>{let t=Hn[e];return{label:t.label,value:e,origin:{value:e,...t}}}),is={label:"English",value:"en",origin:{value:"en",label:"English",en_label:"English"}},ss=e=>{let{label:t="Choose a language",defaultValue:n="",expandOptionsHandler:r,onChange:o=p=>{},sx:a,disableTransition:i=!1}=e,[s,l]=lt.default.useState(!1),{t:u}=b(["common"]),c=(0,lt.useMemo)(()=>r?r(Ko):Ko,[r]),[m,g]=lt.default.useState(()=>c.find(p=>ft(p.value)===ft(n))||is);return(0,lt.useEffect)(()=>{if(!(G()==="youtube.com")||!s)return;let d=T=>{T.key==="i"&&T.stopPropagation()};return window.addEventListener("keydown",d,!0),()=>{window.removeEventListener("keydown",d,!0)}},[s]),lt.default.createElement(lr,{"data-testid":"maxai--language-code-select",open:s,onOpen:()=>{l(!0)},onClose:()=>{l(!1)},noOptionsText:u("common:no_options"),disableClearable:!0,value:m,size:"small",sx:{width:160,[`.${mr.root}`]:{fontSize:a?.fontSize??16,...i&&{transition:"none !important"}},[`.${pt.root}`]:{fontSize:a?.fontSize??16},[`.${pt.root} fieldset > legend`]:{fontSize:14},[`.${sr.popupIndicator} .${jo.svgIconClasses.root}`]:{fontSize:24},...i&&{[`& .${ir.notchedOutline} > legend`]:{transition:"none !important"}},...a},slotProps:{paper:{sx:{fontSize:a?.fontSize??16}},popper:{sx:{zIndex:2147483648}}},autoHighlight:!0,getOptionLabel:p=>p.label,options:c,onChange:(p,d)=>{p.stopPropagation(),g(d),o(d.value)},filterOptions:as,renderInput:p=>lt.default.createElement(gr,{...p,label:t,inputProps:{...p.inputProps,autoComplete:"off"}})})},Un=ss;var ls=be(({className:e,...t})=>z.default.createElement(dr,{...t,classes:{popper:e}}))({[`& .${pr.tooltip}`]:{maxWidth:"none",padding:0}}),us=e=>{let{children:t,open:n,setOpen:r,testId:o}=e,{toggleTranslation:a,targetLanguage:i}=J(),{userSettings:s,setUserSettings:l}=F(),{t:u}=b(["client"]),c=(0,z.useCallback)(p=>[{label:u("translation_advanced__source_lang_select__option__detected_language"),value:""}].concat(p.map(T=>T?.origin?.microsoft_translator_code?{...T,value:T.origin.microsoft_translator_code}:T)),[u]),m=(0,z.useCallback)(p=>p.map(d=>d?.origin?.microsoft_translator_code?{...d,value:d.origin.microsoft_translator_code}:d),[]),g=async({fromCode:p,toCode:d})=>{if(!await Ee({emitEvent:!0}))return;await l({pageTranslation:{...s?.pageTranslation,sourceLanguage:p,targetLanguage:d}});let T=!1;(p||p==="")&&(T=!0),d&&(T=!0),T&&setTimeout(()=>{a(!0,!0)},0),r(!1)};return(0,z.useEffect)(()=>{(s?.pageTranslation?.targetLanguage===""||s?.pageTranslation?.targetLanguage===void 0)&&s?.preferredLanguage&&l({...s,pageTranslation:{...s?.pageTranslation,targetLanguage:s?.preferredLanguage}})},[l,s,s?.pageTranslation?.targetLanguage,s?.preferredLanguage]),z.default.createElement(ls,{open:n,placement:"left",title:z.default.createElement(q,{"data-testid":o,id:"MaxAIPageTranslateAdvancedCard",sx:{marginRight:"-10px",borderRadius:"8px",boxShadow:"0px 4px 8px 0px rgba(0, 0, 0, 0.16)",minWidth:358,height:"45px",display:"flex",alignItems:"stretch",justifyContent:"center",flexDirection:"row",border:"1px solid rgba(0, 0, 0, 0.08)",backgroundColor:"background.paper",padding:"0 4px!important"},onClick:p=>p.stopPropagation(),onMouseDown:p=>p.stopPropagation()},z.default.createElement(x,{sx:{flexDirection:"row",alignItems:"center",spacing:2,width:"100%"}},z.default.createElement(Un,{sx:{flexShrink:0,width:0,flex:1,fontSize:14,[`.${pt.root} > fieldset`]:{borderWidth:0},[`.${pt.root} > input`]:{textAlign:"left",cursor:"pointer"}},label:"",expandOptionsHandler:c,defaultValue:s?.pageTranslation?.sourceLanguage,onChange:async p=>{await g({fromCode:p,toCode:s?.pageTranslation?.targetLanguage})}}),z.default.createElement(Qo.default,{sx:{color:p=>p.palette.mode==="dark"?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.6)",fontSize:"20px"}}),z.default.createElement(Un,{expandOptionsHandler:m,sx:{fontSize:14,[`.${pt.root} > fieldset`]:{borderWidth:0},[`.${pt.root} > input`]:{textAlign:"left",cursor:"pointer"}},label:"",defaultValue:i,onChange:async p=>{await g({fromCode:s?.pageTranslation?.sourceLanguage,toCode:p})}})))},t)},Jo=us;var Zo=f(Ua()),ta=f(qa());var ot=f(_());var ea=()=>{let{t:e}=b(["common","client"]),{translationEnable:t}=J();return e(t?"common:show_original_text":"common:web_translation")},cs=be(cr)(({theme:e})=>({[`& .${ur.badge}`]:{right:4,top:-5}})),ms=e=>{let{isDragging:t,icon:n}=e,{userSettings:r}=F(),{isLogin:o}=kt(),{translationEnable:a,targetLanguage:i,toggleTranslation:s}=J(),l=(0,ot.useMemo)(()=>a,[a]);(0,ot.useEffect)(()=>{o&&r?.pageTranslation?.sourceLanguage&&S.updateTranslatorRules({fromLanguageCode:r.pageTranslation.sourceLanguage})},[r?.pageTranslation?.sourceLanguage,o]),(0,ot.useEffect)(()=>{o&&S.updateTranslatorRules({toLanguageCode:i})},[o,i]);let u=()=>{t||s()};return ot.default.createElement(x,{"data-testid":"quick-access-maxai-translate-button",id:"quick-access-maxai-translate-button-v2",sx:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},onClick:c=>{c.stopPropagation(),c.preventDefault(),u()}},n||ot.default.createElement(cs,{badgeContent:l?ot.default.createElement(Zo.default,{sx:{fontSize:10,color:"rgba(52, 168, 83, 1)",bgcolor:"background.paper",borderRadius:"50%"}}):null,anchorOrigin:{vertical:"bottom",horizontal:"right"}},ot.default.createElement(ta.default,{sx:{fontSize:"20px",color:"inherit"}})))},Xe=ms;var Ge=f(_());var ps=e=>{let{isDragging:t,isOnThePageLeft:n}=e,{targetLanguage:r}=J(),o=(0,Ge.useMemo)(()=>{let a=r;return a&&a.length>=2&&(a=a.charAt(0).toUpperCase()+a.charAt(1).toLowerCase()),a},[r]);return Ge.default.createElement(Xe,{icon:o,isDragging:t,isOnThePageLeft:n})},na=ps;var ra={type:"quick-access",isMiddleButton:!0,mainButton:{testId:"maxai__quick_access__open_sidebar_button",Component:Yo,tooltip:{testId:"maxai__quick_access__open_sidebar_button_tooltip",tooltipProps:{title:_t.default.createElement(Uo,null),description:()=>_t.default.createElement(qo,null)}}},childButtons:[{testId:"maxai__quick_access__immersive_chat_button",Component:Ho,tooltip:{testId:"maxai__quick_access__immersive_chat_button_tooltip",tooltipProps:{title:_t.default.createElement(Ro,null)}}}]},qn={type:"translate",mainButton:{testId:"maxai__quick_access__translate_button",Component:Xe,tooltip:{testId:"maxai__quick_access__translate_button_tooltip",tooltipProps:{title:_t.default.createElement(ea,null)}}},childButtons:[{testId:"maxai__quick_access__translate_target_button",Component:na,tooltip:{testId:"maxai__quick_access__translate_target_button_tooltip",customNode:Jo}}]},ds={type:"summarize",mainButton:{testId:"maxai__quick_access__summarize_button",Component:Go,tooltip:{testId:"maxai__quick_access__summarize_button_tooltip",tooltipProps:{title:_t.default.createElement(Xo,null)}}}},gs={type:"screenshot",mainButton:{testId:"maxai__quick_access__screenshot_button",Component:$o,tooltip:{testId:"maxai__quick_access__screenshot_button_tooltip",tooltipProps:{title:_t.default.createElement(zo,null)}}}},oa={type:"hide-quick-access",mainButton:{testId:"maxai__quick_access__hide_button",Component:Oo,tooltip:{testId:"maxai__quick_access__hide_button_tooltip",tooltipProps:{title:_t.default.createElement(Po,null)}}},childButtons:[{testId:"maxai__quick_access__hide_more_button",Component:Do,tooltip:{testId:"maxai__quick_access__hide_more_button_tooltip",customNode:Fo}}]},aa=[gs,ds];var fs=e=>{let{isDragging:t,isOnThePageLeft:n,onClick:r,onMouseEnter:o,onMouseLeave:a,aboveNode:i,underNode:s}=e,{devShowAuxiliaryLine:l}=Dt();return pe.default.createElement(x,{direction:"row",sx:{width:42,height:"var(--mini-button-height-wrapper)",position:"relative",pointerEvents:"auto",...l?{outline:"2px solid blue"}:{}}},pe.default.createElement(ce,{isDragging:t,isOnThePageLeft:n,...ra,onMouseEnter:u=>{o?.(u)},onMouseLeave:u=>{a?.(u)},onClick:u=>{r?.(u)}}),i&&pe.default.createElement(x,{sx:{position:"absolute",left:0,width:42,bottom:"var(--mini-button-height-wrapper)",pb:"6px"}},i),s&&pe.default.createElement(x,{sx:{position:"absolute",left:0,width:42,top:"var(--mini-button-height-wrapper)",pt:"6px"}},s))},ia=fs;var Yn="MAXAI_FLOATING_MINIMUM_Y",Ve="FLOATING_MINIMUM_IS_ON_THE_LEFT",Ke="MAXAI_FLOATING_MINIMUM_IS_TOP_HALF",je="MAXAI_FLOATING_MINIMUM_OFFSET_TOP",Qe="MAXAI_FLOATING_MINIMUM_OFFSET_BOTTOM";var Je=window.innerHeight-160;var Wn=()=>{let e=G(),t=typeof window<"u"?window.location.pathname:"";if(["article","news","doc","docs","blog","blogs","review","product","recipe","profile","website","stories","manual"].some(d=>t.includes(`/${d}/`)))return!0;let o=`${e}${t}`;if(["linkedin.com/feed/update","stackoverflow.com/questions"].find(d=>o.startsWith(d)))return!0;if(["figma.com/file"].some(d=>o.includes(d))||[/figma\.com\/design\/.{15,}\/.{5,}/].some(d=>o.match(d)))return!1;let l=[/github.com\/.+/,/reddit.com\/r\/.+/,/quora.com\/.+/],u=`${e}${t.slice(0,5)}`;if(l.find(d=>u.match(d)))return!0;let c=document.querySelector('script[type="application/ld+json"]');if(c)try{let d=JSON.parse(c.textContent||"{}");if(["Article","BlogPosting","NewsArticle","ProfilePage","ProductPage","Review","Recipe"].includes(d["@type"]||""))return!0}catch{}let m=document.querySelector('meta[property="og:type"]');if(document.querySelector('meta[property="article:author"]')||document.querySelector('meta[name="author"]')||m&&["article","blog","news","profile","product","review","recipe"].includes(m.getAttribute("content")||""))return!0;let p=document.querySelector('link[rel="author"]');return!!(p&&p.getAttribute("href"))};var zn=Nt(Yn,Je),sa=Nt(Ve,!1),la=Nt(Ke,!1),ua=Nt(je,0),ca=Nt(Qe,0),ma=async(e,t)=>{let n=await zn();Math.abs(n-e)<10||(await Mt(Yn,e),t?.())},pa=(e,t)=>{if(!t)return e;if(e<56||t+160<=56)return 56;if(e>t-160)return t-160;if(t-36<=e){let n=t-36;return n<=0?56:n}return e};var da=f(_());var hs=e=>{let{children:t,open:n,testId:r}=e,{t:o}=b(["common","client"]);return da.default.createElement(fr,{testId:r,open:n,placement:"right",title:o("client:quick_access__translate__same_language_tooltip")},t)},ga=hs;var Ts=({onDrag:e})=>{Lo();let{devShowAuxiliaryLine:t,devAlwaysExpandAllButtons:n}=Dt(),[r]=ee(Bn),[o,a]=(0,h.useState)(!1),[i,s]=(0,h.useState)(()=>Je),[l,u]=(0,h.useState)(!1),[c,m]=(0,h.useState)(!1),[g,p]=(0,h.useState)(!1),[d,T]=(0,h.useState)(!1),I=te(We),B=Ao(),M=(0,h.useRef)(0),[U,jt]=(0,h.useState)(!1),St=(0,h.useRef)(!1),he=(0,h.useRef)(0),Te=(0,h.useRef)(0),$n=(0,h.useCallback)((y,N=!1)=>{let D=pa(y,M.current);N&&ma(D),s(D)},[]),[Aa,wa]=(0,h.useState)(!1);Et(()=>{let y=()=>{M.current=window.innerHeight,$n(St.current?he.current:M.current-Te.current)};return(async()=>{try{let[D,Ct,_e,Pa,Oa]=await Promise.all([zn(),la(),ua(),ca(),sa()]);M.current=window.innerHeight,St.current=Ct,he.current=_e||D,Te.current=Pa||M.current-D,jt(Oa),y()}catch{}finally{wa(!0),T(!0)}})(),window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y)}});let La=Ie(()=>{a(Wn())},1e3);Et(()=>{a(Wn())}),ve(async y=>{if(y==="Client_listenTabUrlUpdate")return La(),{success:!0,message:"ok",data:{}}});let nn=(0,h.useMemo)(()=>Jn()||document.querySelector('body > embed[type="application/pdf"][internalid]')?!1:l||I||B,[l,I,B]),{showTranslateSameLanguageTooltip:Xn}=wo(),rn=(0,h.useMemo)(()=>l||o,[l,o]),Gn=(0,h.useCallback)(y=>{if(n)return!0;switch(y){case"summarize":return rn;case"translate":return nn;case"screenshot":return l;case"hide-quick-access":return l;default:return!1}},[l,rn,nn,n]),Vn=(0,h.useMemo)(()=>{let y=qn;return Xn&&(y=Ce(qn),y.priorityTooltip={testId:"maxai__quick_access__translate_same_language_tooltip",customNode:ga}),[y,oa]},[Xn]);(0,h.useEffect)(()=>{},[Vn]);let Kn=xr(g);(0,h.useEffect)(()=>{let y=N=>{Kn.current&&N.preventDefault()};return document.addEventListener("contextmenu",y),()=>document.removeEventListener("contextmenu",y)},[Kn]);let jn=(0,h.useRef)(0);return!d||r?null:h.default.createElement(h.default.Fragment,null,g&&h.default.createElement(q,{sx:{width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:2147483618,cursor:"grab"}}),h.default.createElement(q,{sx:{width:0,height:"100vh",position:"fixed",visibility:Aa?"visible":"hidden",top:0,...U?{left:0}:{right:0},zIndex:2147483619,"--mini-button-height-wrapper":"36px","--mini-button-height":"32px","@media print":{display:"none !important"}}},h.default.createElement(fa.default,{disabled:!c,position:{x:0,y:i},bounds:{top:56,bottom:window.innerHeight-160,left:U?0:-window.innerWidth+48,right:U?window.innerWidth-48:0},axis:"both",scale:1,onStart:()=>{jn.current=Date.now()},onStop:(y,N)=>{if(g){if(M.current){if(St.current=N.y<M.current/2,he.current=N.y,Te.current=M.current-N.y,Math.abs(N.x)>window.innerWidth/2){let D=N.x<0;jt(D),Mt(Ve,D)}Mt(Ke,St.current),Mt(je,he.current),Mt(Qe,Te.current)}$n(N.y,!0),requestAnimationFrame(()=>{u(!1),p(!1)})}},onDrag:(y,N)=>{e?.(),Date.now()-jn.current>90&&(p(!0),u(!0))}},h.default.createElement(q,{"data-testid":"quick-access-maxai-mini-button-main",sx:{position:"absolute",width:42,...U?{left:0}:{right:0},top:0,userSelect:"none"}},g?h.default.createElement(q,{sx:{cursor:"grab",width:"36px",height:"36px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:"text.primary",bgcolor:"background.paper",boxShadow:" 0px 0px 1px 0px rgba(0, 0, 0, 0.08), 0px 5px 25px 0px rgba(0, 0, 0, 0.04), 0px 3.2px 12px 0px rgba(0, 0, 0, 0.08)",transform:"translate(0, 37px)"}},h.default.createElement($,{sx:{transform:"translateX(-1px)"}})):h.default.createElement(ar,{onClickAway:()=>{u(!1),p(!1)}},h.default.createElement(x,{sx:{justifyContent:"center",width:"110px",height:"110px","--hover-outset-distance":"15px",...U?{borderRadius:"0 50% 50% 0",paddingRight:"var(--hover-outset-distance)",marginRight:"calc(-1 * var(--hover-outset-distance))",alignItems:"flex-end",float:"right"}:{borderRadius:"50% 0 0 50%",paddingLeft:"var(--hover-outset-distance)",marginLeft:"calc(-1 * var(--hover-outset-distance))"},transform:l||rn||nn||n?"translateX(0)":U?"translateX(-10px)":"translateX(10px)",transition:"0.1s all",...t?{outline:"1px solid red"}:{}},onMouseLeave:()=>{u(!1),m(!1)},onMouseEnter:()=>{u(!0),m(!0)},onClick:y=>{if(g)return;let N=document.elementsFromPoint(y.clientX,y.clientY);for(let D of N)if(D!==y.target&&D instanceof HTMLElement){let Ct=D,_e=!0;for(;Ct&&Ct!==document.body;){if(Ct.tagName.toLowerCase()==="max-ai-minimum-app"){_e=!1;break}Ct=Ct.parentElement}if(_e){D.click();return}}}},h.default.createElement(ia,{onMouseLeave:()=>{m(!1)},isDragging:g,isOnThePageLeft:U,aboveNode:h.default.createElement(x,{spacing:"4px",sx:{position:"absolute",...U?{left:"6px"}:{right:"6px"},bottom:"4px",alignItems:"flex-end",...t?{}:{}}},aa.map(y=>Gn(y.type)&&h.default.createElement(ce,{key:y.type,isDragging:g,isOnThePageLeft:U,...y}))),underNode:h.default.createElement(x,{spacing:"4px",sx:{position:"absolute",...U?{left:"6px"}:{right:"6px"},top:"4px",alignItems:"flex-end",...t?{}:{}}},Vn.map(y=>Gn(y.type)&&h.default.createElement(ce,{key:y.type,isDragging:g,isOnThePageLeft:U,...y})))})))))))},ha=Ts;var mt=f(_());var P=f(_());Ba();Na();var ut=f(_()),Ta=f(on());var _s=e=>{let{rootContainer:t,customElementName:n,children:r,style:o,checkVisibility:a=!0,onSetContainer:i}=e,[s,l]=(0,ut.useState)(null),u=(0,ut.useRef)(null);return(0,ut.useEffect)(()=>{if(t&&!s){if(a&&!Ot(t))return;let c="customElements"in window,m=document.createElement(c?n:"div");o&&(m.style.cssText=o),t.insertBefore(m,t.firstChild);let g=m.attachShadow({mode:"open"}),p=document.createElement("style"),d=document.createElement("div");g.appendChild(p),g.appendChild(d);let T=String(n).toLowerCase().replace(/_/g,"-");u.current=nr({key:`${T}-emotion-cache`,prepend:!0,container:p}),l(I=>(I&&I.getRootNode()?.host?.remove(),d))}else s&&!t&&l(null);return()=>{}},[t,s,n,a,o]),(0,ut.useEffect)(()=>{i&&s&&i(s)},[s,i]),!s||!u.current?null:(0,Ta.createPortal)(ut.default.createElement(rr,{value:u.current},r),s)},bt=_s;var K=f(_());var bs=(e,t)=>{let[n,r]=(0,K.useState)(void 0),[o,a]=(0,K.useState)([]),{interval:i=1e3,style:s}=t||{};return(0,K.useEffect)(()=>{let l=setInterval(()=>{if(!n){let u=document.querySelectorAll(e);if(u.length>0){let c=Array.from(u).map(m=>(s&&m.setAttribute("style",s),m));a(c),r(c[0])}}},i);return()=>{l&&clearInterval(l)}},[e,i,n]),(0,K.useEffect)(()=>{let l=setInterval(()=>{if(n){if(Ot(n))return;r(void 0),a([])}},1e3);return()=>{l&&clearInterval(l)}},[n]),{elements:o,element:n}},Kt=bs,_a=async(e,t=5e3,n=0)=>new Promise((o,a)=>{let i=e();if(i)o(i);else{if(n>t)return o(null);setTimeout(()=>o(_a(e,t,n+500)),500)}}),ba=e=>{let[t,n]=(0,K.useState)(null),r=(0,K.useRef)(null),o=(0,K.useRef)(null),a=(0,K.useRef)(!1),i=async()=>{if(a.current){try{let u=await _a(e,1100);r.current=u,n(u)}catch{}o.current=setTimeout(()=>{i()},1e3)}},s=()=>{a.current||(a.current=!0,i())},l=()=>{o.current&&clearTimeout(o.current),a.current=!1};return(0,K.useEffect)(()=>(setTimeout(()=>s(),0),()=>{l()}),[]),{element:t}};var xt=f(_());var ge={sceneType:"EMAIL_SUMMARY_BUTTON",id:"ONBOARDING_TOOLTIP__EMAIL_SUMMARY_BUTTON",anchorElementSelectors:['button[data-testid="maxai-gmail-summary-button"]','button[data-testid="maxai-outlook-summary-button"]'],CtaButtonClickedName:"Onboarding > EmailSummarizeButton > Got it"},xs=e=>{let{showStateTrigger:t,...n}=e,{t:r}=b(),[o,a]=(0,xt.useState)(!1);return(0,xt.useEffect)(()=>{t?Rt(ge.sceneType).then(i=>{i||Ht(ge.sceneType).then(()=>{a(!0)})}):a(!1)},[t]),xt.default.createElement(Ft,{hideBackdrop:!0,sx:{visibility:"hidden"},placement:"bottom",fallbackPlacements:["left","right"],trigger:o,anchorElementSelectors:ge.anchorElementSelectors,CtaButtonProps:{"data-button-clicked-name":ge.CtaButtonClickedName},id:ge.id,footerLeft:xt.default.createElement(Ut,null),...n},xt.default.createElement(Pt,{fontSize:14,lineHeight:1.4,color:"text.primary",fontWeight:400,textAlign:"left"},r("onboarding:onboarding_tooltip__EMAIL_SUMMARY_BUTTON__text")))},Ze=xs;var ys=()=>{let{t:e}=b(["client"]),t=location.pathname.includes("popout"),{element:n}=Kt(t?"div[jsaction] .G-tF":"div[jsaction] > .adF"),[r,o]=(0,P.useState)(null),[a,i]=(0,P.useState)(!1),s=Bt(n,{needCheckScrollParentsInInit:!1});(0,P.useEffect)(()=>{let c=()=>{let g=document?.querySelector("div[jsaction] .G-tF svg");if(!g)return;let p=g?getComputedStyle(g).color:"";i(p==="rgb(255, 255, 255)")},m=setInterval(c,500);return c(),()=>{clearInterval(m)}},[]);let[l,u]=(0,P.useState)(!0);return P.default.createElement(P.default.Fragment,null,P.default.createElement(bt,{rootContainer:n,customElementName:"max-ai-gmail-summary-button",onSetContainer:o},P.default.createElement(q,{sx:t?{height:36,position:"absolute",right:16,top:4}:{height:20,position:"relative",top:-8,mr:1}},P.default.createElement(et,{arrow:!0,PopperProps:{disablePortal:!0,sx:{"& > div":{maxWidth:"unset",width:"max-content"}}},title:e("client:sidebar__tabs__summary__tooltip__default_email")},P.default.createElement(Z,{sx:{borderRadius:"18px",color:a?"#d6d6d6":"#444746",backgroundColor:"transparent","&:hover":{color:a?"white":"rgba(0, 0, 0, 0.87)",backgroundColor:a?"rgba(255,255,255,0.2)":"rgba(32,33,36,0.059)"}},startIcon:P.default.createElement($,{sx:{fontSize:16,color:a?"white":"rgba(0, 0, 0, 0.87)"}}),id:"page-summary-button","data-testid":"maxai-gmail-summary-button",variant:"contained",onClick:c=>{dt("maxai-gmail-summary-button",c.currentTarget),X("QuickAccessSummary",{pageSummaryType:tt()}),u(!1)}},e("client:social_media_summary_button__text"))))),r&&s&&P.default.createElement(Ze,{showStateTrigger:l,anchorElementSelectorsRootContainer:r}))},xa=ys;var O=f(_());var Ss=()=>{let{t:e}=b(["client"]),{element:t}=Kt('#ReadingPaneContainerId div[role="heading"]',{style:"display: flex;align-items: center;gap: 8px;"}),[n,r]=(0,O.useState)(null),[o,a]=(0,O.useState)(!1),i=Bt(t,{needCheckScrollParentsInInit:!1});(0,O.useEffect)(()=>{a(Ir()==="dark")},[]);let[s,l]=(0,O.useState)(!0);return O.default.createElement(O.default.Fragment,null,O.default.createElement(bt,{rootContainer:t,customElementName:"max-ai-outlook-summary-button",style:"order:1",onSetContainer:r},O.default.createElement(et,{arrow:!0,placement:"bottom",PopperProps:{disablePortal:!0,sx:{"& > div":{maxWidth:"unset",width:"max-content"}}},title:e("client:sidebar__tabs__summary__tooltip__default_email")},O.default.createElement(Z,{sx:{height:"28px",px:"9px",mr:1,borderRadius:"4px",color:o?"#d6d6d6":"#444746",backgroundColor:"transparent","&:hover":{color:o?"white":"rgba(0, 0, 0, 0.87)",backgroundColor:o?"rgba(255,255,255,0.2)":"rgba(32,33,36,0.059)"}},id:"page-summary-button","data-testid":"maxai-outlook-summary-button",variant:"contained",onClick:u=>{dt("maxai-outlook-summary-button",u.currentTarget),X("QuickAccessSummary",{pageSummaryType:tt()}),l(!1)}},O.default.createElement(x,{direction:"row",alignItems:"center",gap:1},O.default.createElement($,{sx:{fontSize:16,color:"inherit"}}),e("client:social_media_summary_button__text"))))),n&&i&&O.default.createElement(Ze,{showStateTrigger:s,anchorElementSelectorsRootContainer:n}))},ya=Ss;var ct=f(_());var Cs=()=>{let{t:e}=b(["client"]),{element:t}=Kt("#toolbarViewerRight"),[n,r]=(0,ct.useState)(null);return ct.default.createElement(bt,{rootContainer:t,customElementName:"max-ai-pdf-summary-button",onSetContainer:r},ct.default.createElement(et,{arrow:!0,PopperProps:{disablePortal:!0,sx:{"& > div":{maxWidth:"unset",width:"max-content"}}},title:e("client:sidebar__tabs__summary__tooltip__pdf_crx")},ct.default.createElement(Z,{sx:{py:0,px:1,mr:1,mt:.5,borderRadius:"12px",border:"1px solid",backgroundColor:"transparent",color:"white",borderColor:"white","&:hover":{backgroundColor:"transparent",color:"white",borderColor:"white"}},variant:"contained",id:"page-summary-button","data-testid":"maxai-pdf-summary-button",onClick:o=>{dt("maxai-pdf-summary-button",o.currentTarget),X("QuickAccessSummary",{pageSummaryType:"PDF_CRX_SUMMARY"})}},ct.default.createElement(x,{direction:"row",alignItems:"center",gap:1},ct.default.createElement($,{sx:{fontSize:14,color:"inherit"}}),e("client:social_media_summary_button__text")))),n&&ct.default.createElement(Hr,{sceneType:"PDF_SUMMARY_BUTTON",container:n}))},Sa=Cs;var A=f(_());var yt=f(_());var fe={sceneType:"YOUTUBE_SUMMARY_BUTTON",id:"ONBOARDING_TOOLTIP__YOUTUBE_SUMMARY_BUTTON",anchorElementSelectors:'button[data-testid="maxai-youtube-summary-button"]',CtaButtonClickedName:"Onboarding > YoutubeSummarizeButton > Got it"},Is=e=>{let{showStateTrigger:t,...n}=e,{t:r}=b(),[o,a]=(0,yt.useState)(!1);return(0,yt.useEffect)(()=>{t?Rt(fe.sceneType).then(i=>{i||Ht(fe.sceneType).then(()=>{a(!0)})}):a(!1)},[t]),yt.default.createElement(Ft,{hideBackdrop:!0,sx:{visibility:"hidden"},placement:"left",fallbackPlacements:["right","bottom"],trigger:o,anchorElementSelectors:fe.anchorElementSelectors,CtaButtonProps:{"data-button-clicked-name":fe.CtaButtonClickedName},id:fe.id,footerLeft:yt.default.createElement(Ut,null),...n},yt.default.createElement(Pt,{fontSize:14,lineHeight:1.4,color:"text.primary",fontWeight:400,textAlign:"left"},r("onboarding:onboarding_tooltip__YOUTUBE_SUMMARY_BUTTON__text")))},Ca=Is;var tn="max-ai-youtube-summary-button",Es=()=>{let e=document.querySelector("ytd-watch-metadata div#title h1 yt-formatted-string");return e&&e.innerText?.length>0&&Ot(e)?e:null},Ms=()=>{let{t:e}=b(["client"]),{element:t}=ba(Es),[n,r]=A.default.useState(null),o=Bt(t,{needCheckScrollParentsInInit:!1}),[a,i]=A.default.useState(null),s=(0,A.useMemo)(()=>{switch(tt()){case"DEFAULT_EMAIL_SUMMARY":return"client:sidebar__tabs__summary__tooltip__default_email";case"PAGE_SUMMARY":return"client:sidebar__tabs__summary__tooltip__page";case"PDF_CRX_SUMMARY":return"client:sidebar__tabs__summary__tooltip__pdf_crx";case"YOUTUBE_VIDEO_SUMMARY":return"client:sidebar__tabs__summary__tooltip__youtube_video__page_button";default:return"client:sidebar__tabs__summary__tooltip__page"}},[window.location.href]),l=!!document?.documentElement.hasAttribute("dark");(0,A.useEffect)(()=>{let m=null;if(t){let g=document.querySelector(`.${tn}`)??document.createElement("div");if(g.className=tn,g.style.cssText=`
          display: flex;
          align-items: center;
          justify-content: start;
          margin-left: auto;
          flex-shrink: 0;
        `,g.parentNode===t.parentNode){r(g);return}m=setTimeout(()=>{let p=t.parentNode;p&&(p.style.cssText+="display: flex;align-items: center;gap: 8px;",t.parentNode?.append(g)),r(g)},0)}else Array.from(document.querySelectorAll(`.${tn}`)).filter(p=>{p.remove()}),r(null);return()=>{m&&clearTimeout(m)}},[t]);let[u,c]=(0,A.useState)(!0);return n?A.default.createElement(A.default.Fragment,null,A.default.createElement(bt,{checkVisibility:!1,customElementName:tn,rootContainer:n,onSetContainer:i},A.default.createElement(et,{arrow:!0,PopperProps:{disablePortal:!0},title:e(s),placement:"left"},A.default.createElement(Z,{id:"page-summary-button","data-testid":"maxai-youtube-summary-button",onClick:m=>{dt("maxai-youtube-summary-button",m.currentTarget),X("QuickAccessSummary",{pageSummaryType:tt()}),c(!1)},sx:{maxHeight:"36px",borderRadius:"18px",backgroundColor:l?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",color:l?"#f1f1f1":"#0f0f0f","&:hover":{backgroundColor:l?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)",color:l?"#f1f1f1":"#0f0f0f"}},variant:"contained",startIcon:A.default.createElement($,{sx:{fontSize:16,color:"inherit"}})},e("client:youtube_summary_button__text")))),a&&o&&A.default.createElement(Ca,{showStateTrigger:u,anchorElementSelectorsRootContainer:a})):null},Ia=Ms;var vs=()=>{let{userSettings:e}=F(),[t]=(0,mt.useState)(G);return mt.default.createElement(mt.default.Fragment,null,e?.summarizeButton?.gmail&&t==="mail.google.com"&&mt.default.createElement(xa,null),e?.summarizeButton?.youtube&&t==="youtube.com"&&mt.default.createElement(Ia,null),e?.summarizeButton?.pdf&&kr()&&mt.default.createElement(Sa,null),e?.summarizeButton?.outlook&&(t==="outlook.live.com"||t==="outlook.office.com"||t==="outlook.office365.com")&&mt.default.createElement(ya,null))},Ea=vs;var j=f(_());var en=f(_());var As=()=>{let{toggleTranslation:e}=J(),t=(0,en.useRef)(e);return(0,en.useEffect)(()=>{t.current=e},[e]),ve(async(n,r)=>{switch(n){case"Client_togglePageTranslator":return t.current(),{success:!0,data:{},message:""}}}),null},Ma=As;var ws=()=>{let{setAppSettingsState:e}=F(),{getLocalSettings:t}=yr(),{isLogin:n}=kt(),{syncBetaFeatures:r,clearBetaFeatures:o}=Lr();Pr(()=>{o()});let a=(0,j.useRef)(!1);return(0,j.useEffect)(()=>{if(n){if(a.current)return;a.current=!0,r().then().catch()}},[n]),Nr(),(0,j.useEffect)(()=>{let i=async()=>{let s=await Ar();s&&e({...s}),t()};return i(),window.addEventListener("focus",i),()=>{window.removeEventListener("focus",i)}},[]),j.default.createElement(j.default.Fragment,null)},Ls=()=>(Er(),Fr(),br(!1),Mr("minimum"),Ma(),j.default.createElement(j.default.Fragment,null,j.default.createElement(ws,null),j.default.createElement(vr,null))),va=Ls;var Ps=()=>{let{userSettings:e,setUserSettings:t}=F(),[n,r]=(0,k.useState)(!1),{isLogin:o}=kt(),a=(0,k.useRef)(()=>{});Et(()=>{let c=setInterval(()=>{let g=document.querySelector(`#${er}`),p=new MutationObserver(d=>{d.forEach(T=>{if(T.type==="attributes"){let I=T.target?.classList?.contains("open");r(I||!1)}})});g&&(clearInterval(c),p.observe(g,{attributes:!0}))},500),m=({data:g})=>{let{event:p,data:d}=g;p===Rr&&d.open&&(r(d.open),window.removeEventListener("message",m))};window.addEventListener("message",m)});let i=(0,k.useMemo)(()=>{let c=e?.quickAccess?.visibility;return c?!c.isWhitelistMode&&Tr(c):!0},[t,e]),s=k.default.useMemo(()=>{let c=[`${Qt}/login/email`,`${Qt}/login/google`,`${Qt}/auth`,"https://accounts.google.com/o/oauth2","https://checkout.stripe.com/"];return typeof window<"u"&&c.find(m=>window.location.href.startsWith(m))?!1:i&&!n},[i,n]),l=k.default.useMemo(()=>{if(s){let c=G();return c==="app.maxai.me"||c==="accounts.google.com"&&location.pathname.startsWith("/o/oauth2")?o:!0}},[o,s]),u=(0,k.useMemo)(()=>!(n||Qt.includes(location.host)),[n]);return k.default.createElement(Or,null,k.default.createElement(va,null),s&&k.default.createElement(ha,{onDrag:()=>{a.current()}}),k.default.createElement(Ea,null),u&&k.default.createElement(qr,{updateRef:a,showStateTrigger:l}))},mg=Ps;export{mg as default};
