import{a as F}from"./QGM6CHM5.js";import{a as T}from"./LU2HGRXL.js";import{ga as A,o as M}from"./G7W6DI5V.js";import{c as B}from"./NCSJWSK3.js";import{na as D}from"./PEAOUDRP.js";import{d as L,q as H}from"./XOTQ5KQV.js";import{a as I}from"./PZVNEH53.js";import{K as z}from"./VE4EMEBO.js";import{N as k}from"./MX3LYTPZ.js";import{a as h}from"./4B6UFNBQ.js";import{f as b}from"./GAV6HCJA.js";var w=b(h()),W=({target:l,windowResize:c,windowScroll:r,observeOptions:p})=>{let[i,x]=(0,w.useState)(null),e=()=>{setTimeout(()=>{l&&x(t=>{let f=l.getBoundingClientRect();return z(t,f)?t:f})},0)};return(0,w.useEffect)(()=>{if(!l)return;e();let t=new MutationObserver(e),f=new ResizeObserver(e);return t.observe(l,{attributes:!0,attributeFilter:["style","class"],...p}),f.observe(l),r&&window.addEventListener("scroll",e,{capture:!0,passive:!0}),c&&window.addEventListener("resize",e,{capture:!0,passive:!0}),()=>{t.disconnect(),f.disconnect(),r&&window.removeEventListener("scroll",e,{capture:!0}),c&&window.removeEventListener("resize",e,{capture:!0})}},[l]),{rect:i}},S=W;var o=b(h());var P=b(h()),G=l=>{let{placement:c,referenceElementDOMRect:r,floatingBoxDOMRect:p,...i}=l,{isDarkMode:x}=F(),[e,t]=c.split("-"),{yOffsetProp:f,xOffsetProp:g,arrowY:u,arrowX:v}=(0,P.useMemo)(()=>{let a="0px",m="0px";return e==="left"||e==="right"?(m="0px",a=t==="start"||t==="end"?"15%":"calc(50% - 0.35em)"):(e==="top"||e==="bottom")&&(a="0px",m=t==="start"?"10%":t==="end"?"15%":"calc(50% - 0.35em)"),r&&p&&(e==="left"||e==="right"?(a=0,t==="end"?a=p.bottom-r.top-r.height/2-7:t==="start"?a=r.top-p.top+r.height/2-7:a=p.height/2-7):(e==="top"||e==="bottom")&&(m=0,t==="end"?m=r.right-p.right+r.width/2-7:t==="start"?m=r.left-p.left+r.width/2-7:m=p.width/2-7)),{arrowY:a,arrowX:m,yOffsetProp:t==="end"?"bottom":"top",xOffsetProp:t==="end"?"right":"left"}},[e,t,r,p]);return P.default.createElement(B,{component:"span",className:"maxai--custom-popover-arrow","data-custom-popover-placement":c,...i,sx:[{display:"inline-block",overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:x?"#393939":"background.paper",[g]:v,[f]:u,[e]:"100%",'&[data-custom-popover-placement*="bottom"]':{marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},'&[data-custom-popover-placement*="top"]':{marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},'&[data-custom-popover-placement*="right"]':{height:"1em",width:"0.71em",marginLeft:"-0.71em","&::before":{transformOrigin:"100% 100%"}},'&[data-custom-popover-placement*="left"]':{height:"1em",width:"0.71em",marginRight:"-0.71em","&::before":{transformOrigin:"0 0"}},"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}},...i.sx?Array.isArray(i.sx)?i.sx:[i.sx]:[]]})},$=G;var J=l=>{let{offset:c,placement:r="bottom",fallbackPlacements:p,anchorEl:i,PaperProps:x,arrow:e=!1,arrowSx:t,popoverBoxSx:f,updateRef:g,...u}=l,{refs:v,placement:a,update:m}=H({placement:r,middleware:[L({fallbackPlacements:p})]});g&&(g.current=m);let[R,y]=(0,o.useState)(!1),[X,Y]=(0,o.useState)(null),[C,j]=(0,o.useState)(null),{rect:n}=S({target:X,windowScroll:!0}),{rect:q}=S({target:C}),s=(0,o.useMemo)(()=>T(a,c===void 0?8:c),[c,a]),N=(0,o.useMemo)(()=>[{position:"relative"},s.originOffset?{marginTop:`calc(${s.originOffset.top}px + var(--arrow-margin-top))`,marginRight:`calc(${s.originOffset.right}px + var(--arrow-margin-right))`,marginBottom:`calc(${s.originOffset.bottom}px + var(--arrow-margin-bottom))`,marginLeft:`calc(${s.originOffset.left}px + var(--arrow-margin-left))`}:{},e?{'&[data-custom-popover-placement*="left"]':{"--arrow-margin-right":"6px"},'&[data-custom-popover-placement*="right"]':{"--arrow-margin-left":"6px"},'&[data-custom-popover-placement*="top"]':{"--arrow-margin-bottom":"6px"},'&[data-custom-popover-placement*="bottom"]':{"--arrow-margin-top":"6px"}}:{},n?.width!=null&&n?.width<20&&["left","right"].includes(s.anchorOrigin.horizontal)&&s.anchorOrigin.vertical!=="center"?{...s.anchorOrigin.horizontal==="left"?{'&[data-custom-popover-placement*="bottom"]':{marginLeft:"-10px"},'&[data-custom-popover-placement*="top"]':{marginLeft:"-10px"}}:{'&[data-custom-popover-placement*="bottom"]':{marginRIght:"-10px"},'&[data-custom-popover-placement*="top"]':{marginRIght:"-16px"}}}:{},f],[s.originOffset,s.anchorOrigin,e,R,n]);(0,o.useEffect)(()=>{if(i){let E=k(i)?i():i;Y(E),v.setReference(E)}let d=I(()=>{m()},50);return window.addEventListener("resize",d),window.addEventListener("scroll",d),()=>{window.removeEventListener("resize",d),window.removeEventListener("scroll",d)}},[i]),(0,o.useEffect)(()=>{let d=null;return u.open?(v.setFloating(C),setTimeout(()=>{m()},0),d=setTimeout(()=>{y(!0)},50)):y(!1),()=>{d&&clearTimeout(d)}},[u.open,C]),(0,o.useEffect)(()=>{},[a]);let U=(0,o.useMemo)(()=>(n?.x??0)<=0&&(n?.y??0)<=0||(n?.width??0)<=0||(n?.height??0)<=0||(n?.y??0)+(n?.height??0)-20<=0||(n?.y??0)+20>window.innerHeight||(n?.x??0)+(n?.width??0)-20<=0||(n?.x??0)+20>window.innerWidth,[n]);return o.default.createElement(A,{...u,open:u.open&&!U,transitionDuration:0,slotProps:{paper:{elevation:0,sx:{overflow:"unset",background:"transparent"}}},anchorOrigin:u.anchorOrigin??s.anchorOrigin,transformOrigin:u.transformOrigin??s.transformOrigin,anchorEl:i,disableScrollLock:!0},o.default.createElement(D,{sx:N,ref:j,"data-custom-popover-placement":a},o.default.createElement(M,{...x,sx:{visibility:R?"visible":"hidden",width:"100%",boxSizing:"border-box",display:"flex",flexDirection:"column",border:`${e?0:1}px solid`,borderColor:"border.main",boxShadow:e?"0px 16px 24px 0px rgba(0, 0, 0, 0.08),0px 0px 16px 0px rgba(0, 0, 0, 0.1),0px 0px 1px 0px rgba(0, 0, 0, 0.2)":"0px 12px 16px -4px rgba(16, 24, 40, 0.08), 0px 4px 6px -2px rgba(16, 24, 40, 0.03)",...x?.sx}},u.open?l.children:null),e?o.default.createElement($,{referenceElementDOMRect:n,floatingBoxDOMRect:q,placement:a,sx:{visibility:R?"visible":"hidden",...t}}):null))},ve=J;var O=b(h()),K={collapsed:!1,onCollapse:()=>{},disabledCollapse:!1,collapseAnimation:!1},Q=(0,O.createContext)(K),he=()=>(0,O.useContext)(Q);export{S as a,ve as b,he as c};
