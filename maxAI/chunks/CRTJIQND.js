import{q as Ze}from"./YOZ5W2GG.js";import{g as te,h as oe,i as ze,j as Oe,k as _e,l as Le,m as fe,n as Pe,o as Ne,p as We,q as Re,r as re,s as ke,t as He}from"./2QQMSEQI.js";import{a as wt}from"./S34QHPYH.js";import{G as Ae,H,v as de,w as De}from"./MM57Z2BS.js";import{N as ee,f as be}from"./G7W6DI5V.js";import{c as Fe}from"./NCSJWSK3.js";import{a as Ee,c as ue}from"./LWSOZ55D.js";import{E as Me,e as ce,la as k,na as D}from"./PEAOUDRP.js";import{k as Ke}from"./BYBP4KRV.js";import{c as Ge,l as ne,r as V}from"./VTGOYHJW.js";import{c as qe}from"./2HIYOEPI.js";import{G as $e}from"./VE4EMEBO.js";import{d as Q,f as P,h as Te,k as N,n as J}from"./AUJ76673.js";import{D as Be,a as ye,b as It,o as Ve,p as Ue,y as me}from"./MX3LYTPZ.js";import{a as b}from"./4B6UFNBQ.js";import{E as le,m as Y}from"./XZ5AIA7R.js";import{f as E}from"./GAV6HCJA.js";var O=E(b()),Jt=(r,e)=>{let t=Ke(e||{}),[o,i]=(0,O.useState)(!0),[s,a]=(0,O.useState)(0),[l,d]=(0,O.useState)(),[h,f]=(0,O.useState)(r instanceof File?r:null),[w,m]=(0,O.useState)(null),[I,v]=(0,O.useState)(""),n=e?.fileName||w?.name||h?.name||"",c=e?.fileSize||w?.size||h?.size||0,u=e?.fileType||w?.type||h?.type||"";return(0,O.useEffect)(()=>{let x=!1,C=null,T=async()=>{let p=r instanceof File?r:null,S="",M=typeof r=="string"?r:"";if(M){if(p=await ne.loadFile(M,{onProgress(F){x||(a(F.progress*.8),m(F.fileInfo))}}),x)return null;f(p)}if(p)if(t.current.loadFileText){if(S=await Ue(p,F=>{x||a(()=>80+F.progress*.2)}),x)return null;v(S)}else a(100);return{file:p,fileText:S}};return C=t.current.onLoadStart?.(),T().then(p=>{x||p?.file&&(i(!1),f(p.file),v(p.fileText),C=t.current.onLoadSuccess?.({file:p.file,fileText:p.fileText}))}).catch(p=>{x||(i(!1),d(p),C=t.current.onLoadError?.(p))}),()=>{x=!0,i(!0),a(0),d(void 0),f(null),m(null),C&&C(),t.current.onLoadReset?.()}},[r]),{loading:o,progress:s,error:l,file:h,fileText:I,fileName:n,fileSize:c,fileType:u}};var W=E(b()),to=()=>{let[r,e]=(0,W.useState)(!1),[t,o]=(0,W.useState)(!0),i=(0,W.useRef)();return(0,W.useEffect)(()=>{if(clearTimeout(i.current),!r&&!t)return i.current=setTimeout(()=>e(!0),3e3),()=>{clearTimeout(i.current)}},[t,r]),{isFreeze:r,resetFreeze:()=>{!t&&r&&e(!1)},disableFreeze:()=>{o(!0)},enableFreeze:()=>{o(!1)}}};var io=P({key:"ChatPDFThumbnailState",default:{hidden:Y}}),Ct=new Map,U=Te({key:"MaxAIDocumentStateFamily",default:null,effects:r=>[({onSet:e})=>{e(t=>{t&&Ct.set(r,t)})}]});var St=r=>{let[e,t]=N(U(r));return{document:e,setDocument:t}},yt=()=>{let r=J(({snapshot:o,set:i})=>async(s,a)=>{let l=await o.getPromise(U(s));if(l&&!V.isDocumentExpired(l)&&!a)return l;let d=a?await V.downloadDocument(s,{forceUpdate:a}):await V.downloadDocument(s);return d.success&&d.data&&i(U(s),d.data),d.data},[]),e=J(({set:o})=>async i=>{let s=await V.uploadDocument(i);return s.success&&s.data&&o(U(s.data.doc_id),s.data),s},[]),t=J(({set:o})=>async(i,s)=>{o(U(i),s)},[]);return{downloadDocument:r,uploadDocument:e,updateDocument:t}},Tt=r=>{let e=St(r||""),t=yt();return{...e,...t}};var Mt=async(r,e)=>{if(!r)return null;let{filename:t="image.png"}=e||{},s=new DOMParser().parseFromString(r,"text/html").querySelector("img");if(s){let a=s.getAttribute("src");if(a){if(a.startsWith("data:image"))return await Ve(a,t);await new Promise(d=>{try{let h=new Image;h.src=a,h.crossOrigin="anonymous",h.onload=()=>{let f=document.createElement("canvas"),w=f.getContext("2d");w&&(f.width=h.width,f.height=h.height,w.drawImage(h,0,0),f.toBlob(m=>{if(m){let I=new File([m],t,{type:"image/png"});d(I)}else d(null)}))},h.onerror=f=>{d(null)}}catch{d(null)}})}}return null},Xe=async r=>{let{items:e}=r;if(!e||!e.length)return[];let t=[];if(Array.from(e).forEach((o,i)=>{if(!o||o.webkitGetAsEntry()?.isDirectory)return;let s=o.getAsFile();s&&t.push({file:s,index:i})}),t.length===0){let o=r.getData("text/html"),i=await Mt(o);i&&t.push({file:i,index:0})}return t},je=async r=>{let e=[],{items:t}=r;if(!t||!t.length)return e;let o=async(s,a)=>{let l=s.createReader();return await new Promise(d=>{let h=()=>{l.readEntries(async f=>{await Promise.all(f.map(w=>new Promise((m,I)=>{if(w.isDirectory){let v={path:w.fullPath,name:w.fullPath.split("/").pop()||"Folder",folders:[],files:[]};a.folders.push(v),o(w,v).then(m).catch(I)}else w.isFile?w.file(v=>{a.files.push(v),m(!0)}):m(!0)}))),f.length<=0?d(!0):h()})};h()}),a},i=[];for(let s=0;s<t.length;s++){let a=t[s];if(a.kind==="file"){let l=a.webkitGetAsEntry();if(l?.isDirectory){let d={path:l.fullPath,name:l.fullPath.split("/").pop()||"Folder",folders:[],files:[]};e.push({folder:d,index:s}),i.push(o(l,d))}}}return await Promise.all(i),e};var B=E(b()),go=r=>{let{allowFolder:e,onDropFiles:t,onDropFolders:o,onDropData:i,onDropDone:s}=r||{},[a,l]=(0,B.useState)(!1),d=(0,B.useCallback)(m=>{if(m.target instanceof Node&&!m.currentTarget.contains(m.target))return;let I=Array.from(m.dataTransfer.items).some(n=>n.kind==="file"),v=m.dataTransfer.items[0]&&m.dataTransfer.items[0]?.type==="text/uri-list"&&m.dataTransfer.items[0]?.kind==="string";!I&&!v||(m.preventDefault(),m.stopPropagation(),l(!0))},[]),h=(0,B.useCallback)(m=>{m.preventDefault(),m.stopPropagation()},[]),f=(0,B.useCallback)(m=>{let I=m.relatedTarget;if(!I||!(I instanceof HTMLElement)){l(!1);return}if(m.currentTarget.contains(I))return;let v=I.getRootNode();if(v instanceof ShadowRoot){let n=v.host;if(n instanceof HTMLTextAreaElement&&!n.id)return}l(!1)},[]);return{dragging:a,setDragging:l,onDragEnter:d,onDragOver:h,onDragLeave:f,onDrop:async m=>{l(!1);let{items:I}=m.dataTransfer||{};if(!I||!I.length)return;m.stopPropagation(),m.preventDefault();let v=[],n=[];if((t||i)&&(v=await Xe(m.dataTransfer)),e&&(o||i)&&(n=await je(m.dataTransfer)),e&&(o||i)){let c=[...v,...n].sort((u,x)=>u.index-x.index);c.forEach(u=>{u.file?t?.([u.file]):u.folder&&o?.([u.folder])}),c.length&&(i?.(c),s?.())}else v.length>0&&(t?.(v.map(({file:c})=>c)),i?.(v),s?.())}}};var g=E(b()),Et=r=>{let{icon:e,...t}=r;return g.default.createElement(g.default.Fragment,null,e==="File"&&g.default.createElement(H.default,{...t},g.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},g.default.createElement("g",{clipPath:"url(#clip0_3885_130535)"},g.default.createElement("path",{d:"M16.6667 0H3.33333C1.49238 0 0 1.49238 0 3.33333V16.6667C0 18.5076 1.49238 20 3.33333 20H16.6667C18.5076 20 20 18.5076 20 16.6667V3.33333C20 1.49238 18.5076 0 16.6667 0Z",fill:"#666666"}),g.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.9393 3.94815C11.0727 3.9802 11.2027 4.02449 11.3277 4.08035C11.3364 4.08404 11.345 4.08795 11.3534 4.09207C11.4317 4.12827 11.5079 4.16904 11.5816 4.21422C11.807 4.35234 11.9954 4.54092 12.2447 4.79048L14.096 6.64176C14.3456 6.89109 14.5341 7.07948 14.6723 7.30488C14.7175 7.37861 14.7582 7.4548 14.7944 7.53306C14.7985 7.54153 14.8024 7.55012 14.8061 7.55882C14.862 7.68375 14.9063 7.81376 14.9383 7.94722C15.0001 8.20428 14.9999 8.47083 14.9998 8.8236L14.9997 12.9097C14.9997 13.3569 14.9998 13.726 14.9752 14.0266C14.9497 14.3389 14.8949 14.626 14.7575 14.8956C14.5445 15.3137 14.2045 15.6537 13.7864 15.8667C13.5168 16.0041 13.2297 16.0589 12.9174 16.0844C12.6168 16.109 12.2477 16.109 11.8005 16.109H8.19903C7.75186 16.109 7.38272 16.109 7.08207 16.0844C6.7698 16.0589 6.48274 16.0041 6.21311 15.8667C5.79497 15.6537 5.45501 15.3137 5.24196 14.8956C5.10458 14.626 5.04982 14.3389 5.02431 14.0266C4.99974 13.726 4.99975 13.3569 4.99976 12.9097V7.08603C4.99975 6.63882 4.99974 6.26973 5.02431 5.96907C5.04982 5.65679 5.10458 5.36974 5.24196 5.10011C5.45502 4.68197 5.79497 4.34201 6.21311 4.12896C6.48274 3.99158 6.7698 3.93682 7.08207 3.91131C7.38274 3.88674 7.75182 3.88675 8.19903 3.88675L10.0629 3.88674C10.4157 3.88657 10.6822 3.88644 10.9393 3.94815ZM10.0063 4.99786C10.2993 4.99786 10.4521 4.99949 10.5553 5.00889V6.90447C10.5553 7.04467 10.5553 7.18124 10.5647 7.29688C10.5751 7.42387 10.5996 7.57372 10.6764 7.72451C10.7829 7.93358 10.9529 8.10356 11.162 8.21009C11.3128 8.28692 11.4626 8.3114 11.5896 8.32178C11.7053 8.33122 11.8418 8.33121 11.982 8.33119L13.8776 8.33119C13.887 8.43436 13.8886 8.58722 13.8886 8.8802V12.8867C13.8886 13.3626 13.8882 13.6861 13.8678 13.9362C13.8479 14.1797 13.8118 14.3043 13.7675 14.3912C13.661 14.6002 13.491 14.7702 13.282 14.8767C13.1951 14.921 13.0705 14.9571 12.8269 14.977C12.5769 14.9974 12.2534 14.9978 11.7775 14.9978H8.22197C7.7461 14.9978 7.4226 14.9974 7.17255 14.977C6.92899 14.9571 6.80443 14.921 6.71754 14.8767C6.50847 14.7702 6.3385 14.6002 6.23197 14.3912C6.1877 14.3043 6.15163 14.1797 6.13173 13.9362C6.1113 13.6861 6.11087 13.3626 6.11087 12.8867V7.10897C6.11087 6.63309 6.1113 6.3096 6.13173 6.05955C6.15163 5.81599 6.1877 5.69143 6.23197 5.60454C6.3385 5.39547 6.50847 5.22549 6.71754 5.11897C6.80443 5.07469 6.92899 5.03862 7.17255 5.01872C7.4226 4.99829 7.7461 4.99786 8.22197 4.99786H10.0063ZM11.6664 6.88675V5.78354L13.103 7.22008H11.9997C11.835 7.22008 11.7449 7.21965 11.6801 7.21436L11.6728 7.21372L11.6721 7.2064C11.6668 7.14163 11.6664 7.05149 11.6664 6.88675Z",fill:"white"})),g.default.createElement("defs",null,g.default.createElement("clipPath",{id:"clip0_3885_130535"},g.default.createElement("rect",{width:"20",height:"20",fill:"white"}))))),e==="Screenshot"&&g.default.createElement(H.default,{...t},g.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},g.default.createElement("g",{clipPath:"url(#clip0_2203_126039)"},g.default.createElement("path",{d:"M16.6667 0H3.33333C1.49238 0 0 1.49238 0 3.33333V16.6667C0 18.5076 1.49238 20 3.33333 20H16.6667C18.5076 20 20 18.5076 20 16.6667V3.33333C20 1.49238 18.5076 0 16.6667 0Z",fill:"#B98BF4"}),g.default.createElement("path",{d:"M13.677 14.7289L10.002 11.0539L8.7682 12.2877C8.8382 12.4189 8.88633 12.5589 8.91258 12.7077C8.93883 12.8564 8.95195 13.0052 8.95195 13.1539C8.95195 13.7314 8.74633 14.2258 8.33508 14.637C7.92383 15.0483 7.42945 15.2539 6.85195 15.2539C6.27445 15.2539 5.78008 15.0483 5.36883 14.637C4.95758 14.2258 4.75195 13.7314 4.75195 13.1539C4.75195 12.5764 4.95758 12.082 5.36883 11.6708C5.78008 11.2595 6.27445 11.0539 6.85195 11.0539C7.0007 11.0539 7.14945 11.067 7.2982 11.0933C7.44695 11.1195 7.58695 11.1677 7.7182 11.2377L8.95195 10.0039L7.7182 8.77016C7.58695 8.84016 7.44695 8.88828 7.2982 8.91453C7.14945 8.94078 7.0007 8.95391 6.85195 8.95391C6.27445 8.95391 5.78008 8.74828 5.36883 8.33703C4.95758 7.92578 4.75195 7.43141 4.75195 6.85391C4.75195 6.27641 4.95758 5.78203 5.36883 5.37078C5.78008 4.95953 6.27445 4.75391 6.85195 4.75391C7.42945 4.75391 7.92383 4.95953 8.33508 5.37078C8.74633 5.78203 8.95195 6.27641 8.95195 6.85391C8.95195 7.00266 8.93883 7.15141 8.91258 7.30016C8.88633 7.44891 8.8382 7.58891 8.7682 7.72016L15.252 14.2039V14.7289H13.677ZM11.577 9.47891L10.527 8.42891L13.677 5.27891H15.252V5.80391L11.577 9.47891ZM6.85195 7.90391C7.1407 7.90391 7.38789 7.80109 7.59352 7.59547C7.79914 7.38984 7.90195 7.14266 7.90195 6.85391C7.90195 6.56516 7.79914 6.31797 7.59352 6.11234C7.38789 5.90672 7.1407 5.80391 6.85195 5.80391C6.5632 5.80391 6.31602 5.90672 6.11039 6.11234C5.90477 6.31797 5.80195 6.56516 5.80195 6.85391C5.80195 7.14266 5.90477 7.38984 6.11039 7.59547C6.31602 7.80109 6.5632 7.90391 6.85195 7.90391ZM10.002 10.2664C10.072 10.2664 10.1332 10.2402 10.1857 10.1877C10.2382 10.1352 10.2645 10.0739 10.2645 10.0039C10.2645 9.93391 10.2382 9.87266 10.1857 9.82016C10.1332 9.76766 10.072 9.74141 10.002 9.74141C9.93195 9.74141 9.8707 9.76766 9.8182 9.82016C9.7657 9.87266 9.73945 9.93391 9.73945 10.0039C9.73945 10.0739 9.7657 10.1352 9.8182 10.1877C9.8707 10.2402 9.93195 10.2664 10.002 10.2664ZM6.85195 14.2039C7.1407 14.2039 7.38789 14.1011 7.59352 13.8955C7.79914 13.6898 7.90195 13.4427 7.90195 13.1539C7.90195 12.8652 7.79914 12.618 7.59352 12.4123C7.38789 12.2067 7.1407 12.1039 6.85195 12.1039C6.5632 12.1039 6.31602 12.2067 6.11039 12.4123C5.90477 12.618 5.80195 12.8652 5.80195 13.1539C5.80195 13.4427 5.90477 13.6898 6.11039 13.8955C6.31602 14.1011 6.5632 14.2039 6.85195 14.2039Z",fill:"white"})),g.default.createElement("defs",null,g.default.createElement("clipPath",{id:"clip0_2203_126039"},g.default.createElement("rect",{width:"20",height:"20",fill:"white"}))))),e==="Text"&&g.default.createElement(H.default,{...t},g.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},g.default.createElement("g",{clipPath:"url(#clip0_3885_130542)"},g.default.createElement("path",{d:"M16.6667 0H3.33333C1.49238 0 0 1.49238 0 3.33333V16.6667C0 18.5076 1.49238 20 3.33333 20H16.6667C18.5076 20 20 18.5076 20 16.6667V3.33333C20 1.49238 18.5076 0 16.6667 0Z",fill:"#F9A51B"}),g.default.createElement("path",{d:"M9.16835 14.4475V7.22526H6.11279V5.55859H13.8906V7.22526H10.835V14.4475H9.16835Z",fill:"white"})),g.default.createElement("defs",null,g.default.createElement("clipPath",{id:"clip0_3885_130542"},g.default.createElement("rect",{width:"20",height:"20",fill:"white"}))))),e==="Search"&&g.default.createElement(H.default,{...t},g.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},g.default.createElement("g",{clipPath:"url(#clip0_3885_130539)"},g.default.createElement("path",{d:"M16.6667 0H3.33333C1.49238 0 0 1.49238 0 3.33333V16.6667C0 18.5076 1.49238 20 3.33333 20H16.6667C18.5076 20 20 18.5076 20 16.6667V3.33333C20 1.49238 18.5076 0 16.6667 0Z",fill:"rgba(48, 123, 201, 1)"}),g.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.88877 4.44531C6.43418 4.44531 4.44434 6.43515 4.44434 8.88975C4.44434 11.3443 6.43418 13.3342 8.88877 13.3342C9.91584 13.3342 10.8615 12.9858 11.6142 12.4008L14.607 15.3937C14.824 15.6106 15.1757 15.6106 15.3927 15.3937C15.6097 15.1767 15.6097 14.825 15.3927 14.608L12.3998 11.6151C12.9848 10.8625 13.3332 9.9168 13.3332 8.88975C13.3332 6.43515 11.3434 4.44531 8.88877 4.44531ZM5.55545 8.88975C5.55545 7.0488 7.04783 5.55642 8.88877 5.55642C10.7297 5.55642 12.2221 7.0488 12.2221 8.88975C12.2221 10.7307 10.7297 12.2231 8.88877 12.2231C7.04783 12.2231 5.55545 10.7307 5.55545 8.88975Z",fill:"white"})),g.default.createElement("defs",null,g.default.createElement("clipPath",{id:"clip0_3885_130539"},g.default.createElement("rect",{width:"20",height:"20",fill:"white"}))))),e==="URLs"&&g.default.createElement(H.default,{...t},g.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},g.default.createElement("g",{clipPath:"url(#clip0_3885_130547)"},g.default.createElement("path",{d:"M16.6667 0H3.33333C1.49238 0 0 1.49238 0 3.33333V16.6667C0 18.5076 1.49238 20 3.33333 20H16.6667C18.5076 20 20 18.5076 20 16.6667V3.33333C20 1.49238 18.5076 0 16.6667 0Z",fill:"#079455"}),g.default.createElement("path",{d:"M14.7142 5.2849C13.4125 3.98316 11.3019 3.98316 10.0002 5.2849L9.21449 6.07058C8.99753 6.28753 8.99753 6.63929 9.21449 6.85625C9.43145 7.07321 9.7832 7.07321 10.0002 6.85625L10.7858 6.07058C11.6537 5.20275 13.0607 5.20275 13.9285 6.07058C14.7964 6.93841 14.7964 8.34544 13.9285 9.21327L13.1429 9.99894C12.9259 10.2159 12.9259 10.5677 13.1429 10.7846C13.3598 11.0016 13.7116 11.0016 13.9285 10.7846L14.7142 9.99894C16.0159 8.69719 16.0159 6.58665 14.7142 5.2849Z",fill:"white"}),g.default.createElement("path",{d:"M12.3374 8.44732C12.5544 8.23036 12.5544 7.87861 12.3374 7.66165C12.1205 7.44469 11.7687 7.44469 11.5518 7.66165L7.66288 11.5505C7.44592 11.7675 7.44592 12.1192 7.66288 12.3362C7.87984 12.5532 8.2316 12.5532 8.44856 12.3362L12.3374 8.44732Z",fill:"white"}),g.default.createElement("path",{d:"M6.85747 9.99894C7.07443 9.78198 7.07443 9.43022 6.85747 9.21327C6.64051 8.99631 6.28875 8.99631 6.0718 9.21327L5.28612 9.99894C3.98438 11.3007 3.98438 13.4112 5.28612 14.713C6.58787 16.0147 8.69841 16.0147 10.0002 14.713L10.7858 13.9273C11.0028 13.7103 11.0028 13.3586 10.7858 13.1416C10.5689 12.9247 10.2171 12.9247 10.0002 13.1416L9.21449 13.9273C8.34666 14.7951 6.93963 14.7951 6.0718 13.9273C5.20397 13.0595 5.20397 11.6524 6.0718 10.7846L6.85747 9.99894Z",fill:"white"})),g.default.createElement("defs",null,g.default.createElement("clipPath",{id:"clip0_3885_130547"},g.default.createElement("rect",{width:"20",height:"20",fill:"white"}))))))},Ye=Et;var y=E(b()),bt=r=>{let{documentType:e,file:t,link:o,size:i,sx:s}=r,a={fontSize:`${i}px`,...s};switch(e){case"image":return o?y.default.createElement("img",{src:o,width:i,height:i,alt:"",style:{objectFit:"contain"}}):y.default.createElement(Le,{sx:a});case"chat_file_code":return(t?.type||"")==="text/html"?y.default.createElement(We,{sx:a}):y.default.createElement(oe,{sx:a});case"chat_file_excel":return y.default.createElement(fe,{sx:a});case"chat_file_pptx":return y.default.createElement(Re,{sx:a});case"chat_file_docx":return y.default.createElement(He,{sx:a});case"chat_file_ebook":return y.default.createElement(ke,{sx:a});case"chat_file_markdown":return y.default.createElement(re,{sx:a});case"chat_file":{let l=t?.name||"",d=t?.type||"",h=Ge({name:l,type:d});return h==="chat_file_code"?y.default.createElement(oe,{sx:a}):h==="chat_file_excel"?y.default.createElement(fe,{sx:a}):d==="text/markdown"?y.default.createElement(re,{sx:a}):h==="chat_file_markdown"?y.default.createElement(re,{sx:a}):y.default.createElement(Oe,{sx:a})}case"page_content__pdf":return y.default.createElement(ze,{sx:a});case"search_results":return y.default.createElement(Ye,{sx:a,icon:"Search"});case"page_content__youtube":return y.default.createElement("img",{src:le("https://youtube.com"),width:i,height:i,alt:"Youtube"});case"audio":return y.default.createElement(Pe,{sx:a});case"video":return y.default.createElement(Ne,{sx:a});case"maxai_component":return y.default.createElement(oe,{sx:a});case"page_content__email":case"page_content__webpage":default:return o?y.default.createElement("img",{src:le(o),width:i,height:i,style:{objectFit:"contain"},alt:""}):y.default.createElement(_e,{sx:a})}},Qe=bt;var A=E(b()),Ft=Me(De)(({theme:r})=>({height:10,borderRadius:5,[`&.${de.colorPrimary}`]:{backgroundColor:r.palette.mode==="dark"?r.palette.grey[800]:r.palette.grey[300]},[`& .${de.bar}`]:{borderRadius:5,backgroundColor:"#1a90ff"}})),Dt=r=>{let{documentType:e,title:t,fileSize:o,progress:i,sx:s}=r;return A.default.createElement(D,{gap:2,direction:"row",justifyContent:"center",alignItems:"flex-start",sx:{border:"1px solid",borderColor:"border.main",borderRadius:2,bgcolor:"background.paper",width:"calc(100% - 16px)",maxWidth:400,boxSizing:"border-box",p:2,...s}},A.default.createElement(Qe,{documentType:e,sx:{fontSize:46}}),A.default.createElement(D,{flex:1,width:0,gap:.5},A.default.createElement(D,{gap:2,direction:"row",alignItems:"center"},A.default.createElement(k,{flex:1,fontSize:16,fontWeight:500,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",color:"text.primary",textAlign:"left"},t||"-"),A.default.createElement(ee,{size:20,sx:{color:"text.secondary"}})),A.default.createElement(k,{fontSize:14,fontWeight:400,color:"text.secondary",textAlign:"left"},Be(o||0)),A.default.createElement(D,{gap:2,direction:"row",justifyContent:"center",alignItems:"center"},A.default.createElement(Ft,{variant:"determinate",value:i||0,sx:{flex:1}}),A.default.createElement(k,{fontSize:14,fontWeight:500,color:"text.primary"},Math.floor(i||0)," %"))))},jo=Dt;var Je=E(wt());var _=E(b()),At=r=>{let{icon:e,title:t,loading:o,hideIcon:i,hideClose:s,onClose:a,sx:l,children:d}=r,{t:h}=Q();return _.default.createElement(D,{className:"maxai-document--title-bar",direction:"row",gap:.5,sx:{boxSizing:"border-box",width:"100%",alignItems:"center",px:2,py:1.5,borderBottom:"1px solid",borderColor:"border.main",...l}},!i&&_.default.createElement(D,{sx:{width:"18px",height:"18px",position:"relative",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0,"& > img":{width:o?"12px":"18px",height:o?"12px":"18px",boxSizing:"border-box",borderRadius:o?"50%":"4px",overflow:"hidden",transition:"all 0.3s ease-in-out"},"& > svg":{fontSize:o?"12px":"18px",boxSizing:"border-box",borderRadius:o?"50%":"4px",overflow:"hidden",transition:"all 0.3s ease-in-out"}}},_.default.createElement(ee,{thickness:5,size:18,sx:{position:"absolute",color:"primary.main",display:o?"block":"none"}}),e),_.default.createElement(k,{color:"text.primary",fontSize:16,fontWeight:500,textAlign:"left",width:0,flex:1,ml:.5,noWrap:!0},t),_.default.createElement(D,{direction:"row",alignItems:"center"},d,!s&&_.default.createElement(te,{title:h("package__common:close"),onClick:a},_.default.createElement(Je.default,null))))},rr=At;var R=E(b()),lr=r=>{let{sx:e,...t}=r;return R.default.createElement(Fe,{sx:{height:24,width:"1px",mx:1,bgcolor:"border.main",...e},...t})},zt=r=>{let{freeze:e,enableFreeze:t,disableFreeze:o,sx:i,children:s}=r;return(0,R.useEffect)(()=>(t?.(),()=>{o?.()}),[]),R.default.createElement(be,{in:!e},R.default.createElement(D,{direction:"row",position:"absolute",left:"50%",bottom:26,height:48,borderRadius:1,bgcolor:"background.paper",border:"1px solid",borderColor:"border.main",alignItems:"center",boxShadow:"0px 4px 8px 0px rgba(0, 0, 0, 0.16);0px 0px 1px 0px rgba(0, 0, 0, 0.24)",sx:{maxWidth:"calc(100% - 16px)",overflowX:"auto",overflowY:"hidden",transform:"translateX(-50%)",...i},onMouseEnter:o,onMouseLeave:t},R.default.createElement(D,{flexDirection:"row",alignItems:"center",height:"100%",minWidth:"max-content",boxSizing:"border-box",px:2,gap:1,sx:{"&:empty":{display:"none"}}},s)))},cr=zt;It();var et=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Ot(r,e){return!!(r===e||et(r)&&et(e))}function _t(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(!Ot(r[t],e[t]))return!1;return!0}function Lt(r,e){e===void 0&&(e=_t);var t,o=[],i,s=!1;function a(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];return s&&t===this&&e(l,o)||(i=r.apply(this,l),s=!0,t=this,o=l),i}return a}var ie=Lt;var K=E(b());var Pt=typeof performance=="object"&&typeof performance.now=="function",tt=Pt?function(){return performance.now()}:function(){return Date.now()};function ot(r){cancelAnimationFrame(r.id)}function Nt(r,e){var t=tt();function o(){tt()-t>=e?r.call(null):i.id=requestAnimationFrame(o)}var i={id:requestAnimationFrame(o)};return i}var he=-1;function rt(r){if(r===void 0&&(r=!1),he===-1||r){var e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",document.body.appendChild(e),he=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return he}var $=null;function nt(r){if(r===void 0&&(r=!1),$===null||r){var e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";var o=document.createElement("div"),i=o.style;return i.width="100px",i.height="100px",e.appendChild(o),document.body.appendChild(e),e.scrollLeft>0?$="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?$="negative":$="positive-ascending"),document.body.removeChild(e),$}return $}var Wt=150,Rt=function(e,t){return e};function st(r){var e,t=r.getItemOffset,o=r.getEstimatedTotalSize,i=r.getItemSize,s=r.getOffsetForIndexAndAlignment,a=r.getStartIndexForOffset,l=r.getStopIndexForStartIndex,d=r.initInstanceProps,h=r.shouldResetStyleCacheOnItemSizeChange,f=r.validateProps;return e=function(w){Ee(m,w);function m(v){var n;return n=w.call(this,v)||this,n._instanceProps=d(n.props,ue(n)),n._outerRef=void 0,n._resetIsScrollingTimeoutId=null,n.state={instance:ue(n),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof n.props.initialScrollOffset=="number"?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n._callOnItemsRendered=void 0,n._callOnItemsRendered=ie(function(c,u,x,C){return n.props.onItemsRendered({overscanStartIndex:c,overscanStopIndex:u,visibleStartIndex:x,visibleStopIndex:C})}),n._callOnScroll=void 0,n._callOnScroll=ie(function(c,u,x){return n.props.onScroll({scrollDirection:c,scrollOffset:u,scrollUpdateWasRequested:x})}),n._getItemStyle=void 0,n._getItemStyle=function(c){var u=n.props,x=u.direction,C=u.itemSize,T=u.layout,p=n._getItemStyleCache(h&&C,h&&T,h&&x),S;if(p.hasOwnProperty(c))S=p[c];else{var M=t(n.props,c,n._instanceProps),F=i(n.props,c,n._instanceProps),z=x==="horizontal"||T==="horizontal",X=x==="rtl",j=z?M:0;p[c]=S={position:"absolute",left:X?void 0:j,right:X?j:void 0,top:z?0:M,height:z?"100%":F,width:z?F:"100%"}}return S},n._getItemStyleCache=void 0,n._getItemStyleCache=ie(function(c,u,x){return{}}),n._onScrollHorizontal=function(c){var u=c.currentTarget,x=u.clientWidth,C=u.scrollLeft,T=u.scrollWidth;n.setState(function(p){if(p.scrollOffset===C)return null;var S=n.props.direction,M=C;if(S==="rtl")switch(nt()){case"negative":M=-C;break;case"positive-descending":M=T-x-C;break}return M=Math.max(0,Math.min(M,T-x)),{isScrolling:!0,scrollDirection:p.scrollOffset<M?"forward":"backward",scrollOffset:M,scrollUpdateWasRequested:!1}},n._resetIsScrollingDebounced)},n._onScrollVertical=function(c){var u=c.currentTarget,x=u.clientHeight,C=u.scrollHeight,T=u.scrollTop;n.setState(function(p){if(p.scrollOffset===T)return null;var S=Math.max(0,Math.min(T,C-x));return{isScrolling:!0,scrollDirection:p.scrollOffset<S?"forward":"backward",scrollOffset:S,scrollUpdateWasRequested:!1}},n._resetIsScrollingDebounced)},n._outerRefSetter=function(c){var u=n.props.outerRef;n._outerRef=c,typeof u=="function"?u(c):u!=null&&typeof u=="object"&&u.hasOwnProperty("current")&&(u.current=c)},n._resetIsScrollingDebounced=function(){n._resetIsScrollingTimeoutId!==null&&ot(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=Nt(n._resetIsScrolling,Wt)},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},function(){n._getItemStyleCache(-1,null)})},n}m.getDerivedStateFromProps=function(n,c){return kt(n,c),f(n),null};var I=m.prototype;return I.scrollTo=function(n){n=Math.max(0,n),this.setState(function(c){return c.scrollOffset===n?null:{scrollDirection:c.scrollOffset<n?"forward":"backward",scrollOffset:n,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},I.scrollToItem=function(n,c){c===void 0&&(c="auto");var u=this.props,x=u.itemCount,C=u.layout,T=this.state.scrollOffset;n=Math.max(0,Math.min(n,x-1));var p=0;if(this._outerRef){var S=this._outerRef;C==="vertical"?p=S.scrollWidth>S.clientWidth?rt():0:p=S.scrollHeight>S.clientHeight?rt():0}this.scrollTo(s(this.props,n,c,T,this._instanceProps,p))},I.componentDidMount=function(){var n=this.props,c=n.direction,u=n.initialScrollOffset,x=n.layout;if(typeof u=="number"&&this._outerRef!=null){var C=this._outerRef;c==="horizontal"||x==="horizontal"?C.scrollLeft=u:C.scrollTop=u}this._callPropsCallbacks()},I.componentDidUpdate=function(){var n=this.props,c=n.direction,u=n.layout,x=this.state,C=x.scrollOffset,T=x.scrollUpdateWasRequested;if(T&&this._outerRef!=null){var p=this._outerRef;if(c==="horizontal"||u==="horizontal")if(c==="rtl")switch(nt()){case"negative":p.scrollLeft=-C;break;case"positive-ascending":p.scrollLeft=C;break;default:var S=p.clientWidth,M=p.scrollWidth;p.scrollLeft=M-S-C;break}else p.scrollLeft=C;else p.scrollTop=C}this._callPropsCallbacks()},I.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&ot(this._resetIsScrollingTimeoutId)},I.render=function(){var n=this.props,c=n.children,u=n.className,x=n.direction,C=n.height,T=n.innerRef,p=n.innerElementType,S=n.innerTagName,M=n.itemCount,F=n.itemData,z=n.itemKey,X=z===void 0?Rt:z,j=n.layout,dt=n.outerElementType,ft=n.outerTagName,mt=n.style,ht=n.useIsScrolling,pt=n.width,Ie=this.state.isScrolling,se=x==="horizontal"||j==="horizontal",gt=se?this._onScrollHorizontal:this._onScrollVertical,we=this._getRangeToRender(),vt=we[0],xt=we[1],Ce=[];if(M>0)for(var Z=vt;Z<=xt;Z++)Ce.push((0,K.createElement)(c,{data:F,key:X(Z,F),index:Z,isScrolling:ht?Ie:void 0,style:this._getItemStyle(Z)}));var Se=o(this.props,this._instanceProps);return(0,K.createElement)(dt||ft||"div",{className:u,onScroll:gt,ref:this._outerRefSetter,style:ye({position:"relative",height:C,width:pt,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:x},mt)},(0,K.createElement)(p||S||"div",{children:Ce,ref:T,style:{height:se?"100%":Se,pointerEvents:Ie?"none":void 0,width:se?Se:"100%"}}))},I._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var n=this.props.itemCount;if(n>0){var c=this._getRangeToRender(),u=c[0],x=c[1],C=c[2],T=c[3];this._callOnItemsRendered(u,x,C,T)}}if(typeof this.props.onScroll=="function"){var p=this.state,S=p.scrollDirection,M=p.scrollOffset,F=p.scrollUpdateWasRequested;this._callOnScroll(S,M,F)}},I._getRangeToRender=function(){var n=this.props,c=n.itemCount,u=n.overscanCount,x=this.state,C=x.isScrolling,T=x.scrollDirection,p=x.scrollOffset;if(c===0)return[0,0,0,0];var S=a(this.props,p,this._instanceProps),M=l(this.props,S,p,this._instanceProps),F=!C||T==="backward"?Math.max(1,u):1,z=!C||T==="forward"?Math.max(1,u):1;return[Math.max(0,S-F),Math.max(0,Math.min(c-1,M+z)),S,M]},m}(K.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var kt=function(e,t){var o=e.children,i=e.direction,s=e.height,a=e.layout,l=e.innerTagName,d=e.outerTagName,h=e.width,f=t.instance;if(0)var w},Ht=50,q=function(e,t,o){var i=e,s=i.itemSize,a=o.itemMetadataMap,l=o.lastMeasuredIndex;if(t>l){var d=0;if(l>=0){var h=a[l];d=h.offset+h.size}for(var f=l+1;f<=t;f++){var w=s(f);a[f]={offset:d,size:w},d+=w}o.lastMeasuredIndex=t}return a[t]},Vt=function(e,t,o){var i=t.itemMetadataMap,s=t.lastMeasuredIndex,a=s>0?i[s].offset:0;return a>=o?lt(e,t,s,0,o):Ut(e,t,Math.max(0,s),o)},lt=function(e,t,o,i,s){for(;i<=o;){var a=i+Math.floor((o-i)/2),l=q(e,a,t).offset;if(l===s)return a;l<s?i=a+1:l>s&&(o=a-1)}return i>0?i-1:0},Ut=function(e,t,o,i){for(var s=e.itemCount,a=1;o<s&&q(e,o,t).offset<i;)o+=a,a*=2;return lt(e,t,Math.min(o,s-1),Math.floor(o/2),i)},it=function(e,t){var o=e.itemCount,i=t.itemMetadataMap,s=t.estimatedItemSize,a=t.lastMeasuredIndex,l=0;if(a>=o&&(a=o-1),a>=0){var d=i[a];l=d.offset+d.size}var h=o-a-1,f=h*s;return l+f},vr=st({getItemOffset:function(e,t,o){return q(e,t,o).offset},getItemSize:function(e,t,o){return o.itemMetadataMap[t].size},getEstimatedTotalSize:it,getOffsetForIndexAndAlignment:function(e,t,o,i,s,a){var l=e.direction,d=e.height,h=e.layout,f=e.width,w=l==="horizontal"||h==="horizontal",m=w?f:d,I=q(e,t,s),v=it(e,s),n=Math.max(0,Math.min(v-m,I.offset)),c=Math.max(0,I.offset-m+I.size+a);switch(o==="smart"&&(i>=c-m&&i<=n+m?o="auto":o="center"),o){case"start":return n;case"end":return c;case"center":return Math.round(c+(n-c)/2);case"auto":default:return i>=c&&i<=n?i:i<c?c:n}},getStartIndexForOffset:function(e,t,o){return Vt(e,o,t)},getStopIndexForStartIndex:function(e,t,o,i){for(var s=e.direction,a=e.height,l=e.itemCount,d=e.layout,h=e.width,f=s==="horizontal"||d==="horizontal",w=f?h:a,m=q(e,t,i),I=o+w,v=m.offset+m.size,n=t;n<l-1&&v<I;)n++,v+=q(e,n,i).size;return n},initInstanceProps:function(e,t){var o=e,i=o.estimatedItemSize,s={itemMetadataMap:{},estimatedItemSize:i||Ht,lastMeasuredIndex:-1};return t.resetAfterIndex=function(a,l){l===void 0&&(l=!0),s.lastMeasuredIndex=Math.min(s.lastMeasuredIndex,a-1),t._getItemStyleCache(-1),l&&t.forceUpdate()},s},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){var t=e.itemSize}});var xr=st({getItemOffset:function(e,t){var o=e.itemSize;return t*o},getItemSize:function(e,t){var o=e.itemSize;return o},getEstimatedTotalSize:function(e){var t=e.itemCount,o=e.itemSize;return o*t},getOffsetForIndexAndAlignment:function(e,t,o,i,s,a){var l=e.direction,d=e.height,h=e.itemCount,f=e.itemSize,w=e.layout,m=e.width,I=l==="horizontal"||w==="horizontal",v=I?m:d,n=Math.max(0,h*f-v),c=Math.min(n,t*f),u=Math.max(0,t*f-v+f+a);switch(o==="smart"&&(i>=u-v&&i<=c+v?o="auto":o="center"),o){case"start":return c;case"end":return u;case"center":{var x=Math.round(u+(c-u)/2);return x<Math.ceil(v/2)?0:x>n+Math.floor(v/2)?n:x}case"auto":default:return i>=u&&i<=c?i:i<u?u:c}},getStartIndexForOffset:function(e,t){var o=e.itemCount,i=e.itemSize;return Math.max(0,Math.min(o-1,Math.floor(t/i)))},getStopIndexForStartIndex:function(e,t,o){var i=e.direction,s=e.height,a=e.itemCount,l=e.itemSize,d=e.layout,h=e.width,f=i==="horizontal"||d==="horizontal",w=t*l,m=f?h:s,I=Math.ceil((m+o-w)/l);return Math.max(0,Math.min(a-1,t+I-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){var t=e.itemSize}});function at(r,e){for(var t in r)if(!(t in e))return!0;for(var o in e)if(r[o]!==e[o])return!0;return!1}var Bt=["style"],$t=["style"];function Ir(r,e){var t=r.style,o=ce(r,Bt),i=e.style,s=ce(e,$t);return!at(t,i)&&!at(o,s)}var G=E(b());var qt=P({key:"ExtensionInstallAlertOpenAtom",default:!1}),Kt=P({key:"ExtensionUpgradeAlertOpenAtom",default:!1}),ae=()=>{let[r,e]=N(qt),[t,o]=N(Kt),i=(0,G.useCallback)(()=>{e(!0)},[]),s=(0,G.useCallback)(()=>{e(!1)},[]),a=(0,G.useCallback)(()=>{o(!0)},[]),l=(0,G.useCallback)(()=>{o(!1)},[]);return{installAlertOpen:r,openExtensionInstallAlert:i,closeExtensionInstallAlert:s,upgradeAlertOpen:t,openExtensionUpgradeAlert:a,closeExtensionUpgradeAlert:l}};var ge=E(b());var pe=P({key:"MaxAIBrowserExtensionAtom",default:{loaded:!1,hasExtension:!1,extensionVersion:null}});var Zt=E(b());var Gt=E(b());var ct=E(b());var ve=(r=!1)=>{let[e,t]=N(pe),{openExtensionInstallAlert:o}=ae(),i=(s=!1)=>{let a=$e();return a?t({loaded:!0,hasExtension:!0,extensionVersion:a}):s&&o(),!!a};return(0,ct.useEffect)(()=>{r&&i()},[r]),{...e,check:i}};var L=E(b()),ut=r=>{let[e,t]=(0,L.useState)(!1),{check:o}=ve(),i=(0,L.useCallback)((d,h)=>{let f=document.createElement("a");f.href=d,f.download=h||"file",f.click(),f.remove()},[]),s=(0,L.useCallback)(async(d,h)=>{let f=await ne.loadFile(d);if(!f){i(d,h);return}return me(f,h||f.name||"file"),f},[i]),a=(0,L.useRef)(!1);a.current=e;let l=(0,L.useCallback)(async d=>{let h=qe({},d,r),{file:f,fileLink:w,fileName:m,onSuccess:I,onError:v,onComplete:n,stopOnLastDownload:c=!0}=h;if(!(!w&&!f)&&!(c&&a.current))try{if(t(!0),!w&&f){me(f,m||(f instanceof File?f.name:"")||"file"),I?.();return}if(!w)return;Y?await s(w,m):o()?await s(w,m):i(w,m),I?.()}catch(u){v?.(u instanceof Error?u:new Error(String(u)))}finally{t(!1),n?.()}},[i,o,r,s]);return{isDownloading:e,setIsDownloading:t,download:l}};var xe=E(b()),Xt=r=>{let{file:e,fileLink:t,fileName:o,customDownloadFile:i,...s}=r,{t:a}=Q(),{isDownloading:l,setIsDownloading:d,download:h}=ut({file:e,fileLink:t,fileName:o}),f=async()=>{l||(i?(d(!0),i().finally(()=>{d(!1)})):h())};return xe.default.createElement(te,{disabled:l,title:a(l?"package__common:downloading":"package__common:download"),onClick:f,...s},xe.default.createElement(Ze,{sx:{fontSize:"20px",scale:l?"0.8":"1"},icon:l?"Loading":"FileDownload"}))},gn=Xt;export{Ye as a,Qe as b,io as c,St as d,yt as e,Tt as f,Xe as g,je as h,go as i,Jt as j,to as k,rr as l,ve as m,ut as n,lr as o,cr as p,jo as q,vr as r,xr as s,Ir as t,gn as u};
