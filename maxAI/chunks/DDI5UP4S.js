import{a as bt,c as qf,d as Kf,e as fi}from"./FXDTEDOO.js";import{b as Ef,d as on}from"./SITM5SLO.js";import{Ca as wf,Ea as _f,Eb as kf,Fa as Of,Ia as Df,K as Jn,Ka as si,Na as ye,Nb as Nf,Ra as Pf,Sa as Rf,Ua as yt,c as af,n as by,p as Zn,q as Tf,r as Mf,w as If}from"./CLPCS5HX.js";import{b as ai}from"./5JAHRNIU.js";import{j as sf}from"./YZ5NMKB5.js";import{a as Sy}from"./ZRYDJGAJ.js";import{a as sd}from"./UAB7UEHC.js";import{a as ud}from"./SGC75SOE.js";import{q as Te}from"./YOZ5W2GG.js";import{j as rf}from"./IE4E3732.js";import{k as xt}from"./X2ALZK3D.js";import{h as ni}from"./7LKKTU5H.js";import{b as zc}from"./ZD4W36SK.js";import{d as Dt}from"./NLYC5QHQ.js";import{a as Zc,b as Jc}from"./XKR4REXP.js";import{g as Ar}from"./2QQMSEQI.js";import{a as Bc}from"./OD4HJMKT.js";import{a as yy}from"./S34QHPYH.js";import{a as Pr}from"./WJUWA2XU.js";import{a as Ic,g as _c,k as Lc}from"./MM57Z2BS.js";import{f as Xn}from"./6T6FEPNJ.js";import{c as Rc,f as Fc}from"./OZ6K5KWN.js";import{c as wc}from"./QGTSDQHN.js";import{_ as Vc}from"./G7W6DI5V.js";import{f as Nc}from"./HPIKDO6W.js";import{e as Wt}from"./LSIA5SS7.js";import{m as kc,p as Jo,s as Qo}from"./BJ5FAZNI.js";import{c as Pe}from"./NCSJWSK3.js";import{h as sr,la as me,na as ee}from"./PEAOUDRP.js";import{a as Dr}from"./PCHDBHHN.js";import{a as to,b as Xs,c as gi,d as $s}from"./JUJJIC7Z.js";import{k as tf}from"./BYBP4KRV.js";import{a as ri}from"./2KT44S3D.js";import{A as nd,B as ln,C as Ys,D as hi,E as od,F as id,H as ad,b as Yf,c as sn,d as Ge,e as di,f as Xf,g as pi,h as Ws,i as eo,j as $f,k as mi,l as qs,m as Ks,n as un,o as Zf,p as Jf,x as ed,y as td,z as rd}from"./JLO744NT.js";import{a as Qf}from"./LIFUWJGW.js";import{F as Gf,G as Wf,J as ci,b as de,d as Vf,i as li,j as zs,p as Ff,s as Qn,t as Bf,u as Hf,v as Gs,w as Uf,x as jf}from"./LHOPOZ7S.js";import{a as zf}from"./N5EAU2XY.js";import{b as lr,e as Af,i as Lf}from"./SMGS7QAW.js";import{a as Oc,b as Dc,c as Pc,d as Ac,f as uf,g as js,h as lf,i as cf,j as ff,k as df,l as pf,m as mf,n as hf,o as gf,p as vf,q as xf,r as yf,s as bf,t as Sf,u as Cf}from"./XOTQ5KQV.js";import{c as an,d as ui}from"./454JMIH7.js";import{e as Qc}from"./2HIYOEPI.js";import{a as ef}from"./PZVNEH53.js";import{a as oi}from"./UZTKLAY4.js";import{a as ii,c as of,e as Ue}from"./Q25QR6DL.js";import{a as nf}from"./UAWD6KOW.js";import{b as Gc,c as Wc,f as qc,k as Us}from"./UXYD27MU.js";import{Na as Xc,Ta as Kt,_ as Kc}from"./VE4EMEBO.js";import{Ab as jc,a as Tc,ab as qt,c as Zo,ca as Uc,d as xe,f as rt,g as Mc,h as vt,j as oe,k as Be,l as ze,n as q,o as ei,u as Hc}from"./AUJ76673.js";import{A as $n,e as He,q as ti,v as Yc,y as $c}from"./DOCIOFBQ.js";import{Aa as ur}from"./MX3LYTPZ.js";import{c as Cc,f as Ec,h as Yn,j as nn}from"./HFEXSQX6.js";import{a as O}from"./4B6UFNBQ.js";import{I as yc,R as bc,l as ar}from"./XZ5AIA7R.js";import{a as Sc}from"./PJ57C2TE.js";import{c as gt,d as xy,f as w}from"./GAV6HCJA.js";var Rb=gt(wi=>{"use strict";"use client";var Pb=Dr();Object.defineProperty(wi,"__esModule",{value:!0});wi.default=void 0;var Ab=Pb(Pr()),Lb=sr(),pD=wi.default=(0,Ab.default)((0,Lb.jsx)("path",{d:"M9.64 7.64c.23-.5.36-1.05.36-1.64 0-2.21-1.79-4-4-4S2 3.79 2 6s1.79 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1zM6 8c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2m0 12c-1.1 0-2-.89-2-2s.9-2 2-2 2 .89 2 2-.9 2-2 2m6-7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5M19 3l-6 6 2 2 7-7V3z"}),"ContentCutOutlined")});var tp=gt(_i=>{"use strict";"use client";var Nb=Dr();Object.defineProperty(_i,"__esModule",{value:!0});_i.default=void 0;var Vb=Nb(Pr()),Fb=sr(),xD=_i.default=(0,Vb.default)((0,Fb.jsx)("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2m-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"DragIndicator")});var rp=gt(Oi=>{"use strict";"use client";var Bb=Dr();Object.defineProperty(Oi,"__esModule",{value:!0});Oi.default=void 0;var Hb=Bb(Pr()),Ub=sr(),bD=Oi.default=(0,Hb.default)((0,Ub.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 13.5L7.5 11l1.42-1.41L12 12.67l3.08-3.08L16.5 11z"}),"ExpandCircleDown")});var xm=gt(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});function M0(e){var t={};return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}Hu.default=M0});var ym=gt(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});function I0(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var w0=I0(xm()),_0=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,O0=w0(function(e){return _0.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});Uu.default=O0});var av=gt((N5,iv)=>{function Hl(e,t,r){var n,o,i,a,s;t==null&&(t=100);function u(){var c=Date.now()-a;c<t&&c>=0?n=setTimeout(u,t-c):(n=null,r||(s=e.apply(i,o),i=o=null))}var l=function(){i=this,o=arguments,a=Date.now();var c=r&&!n;return n||(n=setTimeout(u,t)),c&&(s=e.apply(i,o),i=o=null),s};return l.clear=function(){n&&(clearTimeout(n),n=null)},l.flush=function(){n&&(s=e.apply(i,o),i=o=null,clearTimeout(n),n=null)},l}Hl.debounce=Hl;iv.exports=Hl});var tx=gt((Uj,ex)=>{"use strict";ex.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(o=n;o--!==0;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;o--!==0;){var a=i[o];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r}});var ay=gt(ks=>{"use strict";"use client";var TT=Dr();Object.defineProperty(ks,"__esModule",{value:!0});ks.default=void 0;var MT=TT(Pr()),IT=sr(),s3=ks.default=(0,MT.default)((0,IT.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}),"KeyboardArrowRight")});var sy=gt(Ns=>{"use strict";"use client";var wT=Dr();Object.defineProperty(Ns,"__esModule",{value:!0});Ns.default=void 0;var _T=wT(Pr()),OT=sr(),l3=Ns.default=(0,_T.default)((0,OT.jsx)("path",{d:"M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.41L5.83 13H21V7z"}),"KeyboardReturn")});var UT=gt(Fs=>{"use strict";"use client";var FT=Dr();Object.defineProperty(Fs,"__esModule",{value:!0});Fs.default=void 0;var BT=FT(Pr()),HT=sr(),b4=Fs.default=(0,BT.default)((0,HT.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown")});var WT=gt(Bs=>{"use strict";"use client";var jT=Dr();Object.defineProperty(Bs,"__esModule",{value:!0});Bs.default=void 0;var zT=jT(Pr()),GT=sr(),C4=Bs.default=(0,zT.default)((0,GT.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp")});var ld=rt({key:"DevContentState",default:{quickAccess:{showAuxiliaryLine:!1,alwaysShowTooltip:!1,alwaysExpandAllButtons:!1},chatWithImage:{alwaysShowButton:!1}}});var cd=()=>{let[e,t]=Be(ld);return{IS_MAXAI_DEBUG:ar,devContentState:e,updateDevContentState:n=>{t(o=>({...o,...n}))}}},JT=()=>{let{devContentState:e,updateDevContentState:t}=cd(),r=n=>{t({quickAccess:{...e.quickAccess,...n}})};return{devShowAuxiliaryLine:ar&&e.quickAccess.showAuxiliaryLine,devAlwaysShowTooltip:ar&&e.quickAccess.alwaysShowTooltip,devAlwaysExpandAllButtons:ar&&e.quickAccess.alwaysExpandAllButtons,updateQuickAccessDevContent:r}},fd=()=>{let{devContentState:e,updateDevContentState:t}=cd(),r=n=>{t({chatWithImage:{...e.chatWithImage,...n}})};return{devAlwaysShowButton:ar&&e.chatWithImage.alwaysShowButton,updateChatWithImageDevContent:r}};var vi=w(O()),dd=w(O()),pd=w(O()),Cy=(e,t={})=>{let{immediate:r=!1,autoStopWhenFound:n=!1}=t,[o,i]=(0,dd.useState)(null),a=(0,vi.useRef)(null),s=(0,vi.useRef)(null),u=(0,vi.useRef)(!1),l=async()=>{if(u.current){try{let d=await Kc(e,1100);if(d!==a.current&&(a.current=d,i(d)),n&&d){f();return}}catch{}s.current=setTimeout(()=>{l()},1e3)}},c=()=>{setTimeout(()=>{u.current||(u.current=!0,l())},0)},f=()=>{s.current&&clearTimeout(s.current),u.current=!1};return(0,pd.useEffect)(()=>(r&&c(),()=>{f()}),[]),{element:o,startPolling:c,stopPolling:f}},md=Cy;var Ae=w(O()),Ey=e=>{let{anchorElementSelectors:t,anchorElementSelectorsRootContainer:r,trigger:n,children:o,ctaButtonText:i,onClose:a,onShow:s,onCTAButtonClick:u,CtaButtonProps:l,footerLeft:c,placement:f="left",arrow:d=!0,hideCTAButton:m=!1,keepPollingCheckAnchorEl:p=!1,autoCloseOnMouseDownAndUp:h=!1,autoCloseOnClick:g=!1,...v}=e,{t:y}=xe(),[E,S]=Ae.default.useState(!1),C=ni(),x=(0,Ae.useMemo)(()=>i||y("package__features:onboarding__onboarding_popover__cta_button__got_it"),[y,i]),b=(0,Ae.useCallback)((F,X)=>{S(!1),a&&a(F,X)},[a]);(0,Ae.useEffect)(()=>{typeof n=="function"?n().then(F=>{S(F),F&&s&&s()}):(S(n),n&&s&&s())},[n]);let I=()=>{let F=r||C,X;return Array.isArray(t)?t.find($=>X=F?.querySelector($)):X=F?.querySelector(t),X},{element:T,startPolling:_,stopPolling:P}=md(I,{autoStopWhenFound:!p});(0,Ae.useEffect)(()=>{E?_():P()},[E]);let[H,j]=(0,Ae.useState)(!0),B=tf(E);return(0,Ae.useEffect)(()=>{if(!T||!h||!B.current)return;let F=!1,X=()=>{F=!0,j(!1)},$=()=>{F&&j(!0)};return T.addEventListener("mousedown",X),T.addEventListener("mouseup",$),window.addEventListener("mouseup",$),window.addEventListener("contextmenu",$,!0),()=>{T.removeEventListener("mousedown",X),T.removeEventListener("mouseup",$),window.removeEventListener("mouseup",$),window.removeEventListener("contextmenu",$,!0)}},[T,h,B]),(0,Ae.useEffect)(()=>{if(!T||!g||!B.current)return;let F=()=>{b(null,"escapeKeyDown")};return T.addEventListener("click",F),()=>{T.removeEventListener("click",F)}},[T,g,b,B]),o?Ae.default.createElement(ai,{key:H?"open":"close",arrow:d,...v,open:E,placement:f,anchorEl:T,onClose:b,arrowSx:{visibility:H?"visible":"hidden"},PaperProps:{sx:{maxWidth:320,display:"flex",flexDirection:"column",boxSizing:"border-box",visibility:H?"visible":"hidden",gap:2,p:2,...v.PaperProps?.sx}}},o,Ae.default.createElement(ee,{direction:"row",justifyContent:"flex-end",spacing:1,sx:{"&:empty":{display:"none"}}},c,!m&&Ae.default.createElement(Wt,{...window.location.hostname==="mail.google.com"?{ref:F=>{F&&F.removeAttribute("tabindex")},component:"span"}:{},variant:"contained",...l,sx:{padding:"10px 12px",fontSize:"14px",lineHeight:"20px",fontWeight:500},onClick:F=>{u&&u(F),b(F,"escapeKeyDown")}},x))):null},cM=Ey;var hd=w(O());var Ty=()=>{(0,hd.useEffect)(()=>{let e=new ii,t=()=>{let r=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;e.postMessage({event:"Client_updateIcon",data:{mode:r?"dark":"light"}})};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t),t(),()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",t),e?.destroy()}},[])};var Zs=w(O());var Si=w(O());var Js=class{constructor(){this.pending=new Map}async send(t,r,n=5*1e3){let o=ei(),i={...r,uuid:o};return new Promise((a,s)=>{let u=setTimeout(()=>{this.pending.delete(o),a(void 0)},n);this.pending.set(o,l=>{clearTimeout(u),a(l)}),window.dispatchEvent(new CustomEvent(t,{detail:i}))})}receive(t,r){let n=async o=>{if(o instanceof CustomEvent&&o.detail&&o.detail.uuid){let{uuid:i,...a}=o.detail,s,u=r(a);if(u instanceof Promise?s=await u:s=u,s===void 0)return;let l=this.pending.get(i);l&&(l(s),this.pending.delete(i))}};return window.addEventListener(t,n),()=>{window.removeEventListener(t,n)}}},gd=new Js;var My=Mc({key:"FloatingContextMenuPinSelector",get(e){return e.get(jc).sidebarSettings?.contextMenu?.isPinned}}),ro=()=>{let{setLocalSettings:e}=Dt();return{floatingDropdownMenuPin:oe(My),setFloatingDropdownMenuPin:async n=>{await e({sidebarSettings:{contextMenu:{isPinned:n}}})}}};var no=vt({key:"LiteContextMenuListStateFamily",default:[]}),vd=vt({key:"LiteContextMenuListWithRootStateFamily",default:[]}),Qs=vt({key:"LiteContextMenuListStateFamilyLoading",default:!1}),xd=vt({key:"LiteContextMenuRootStateFamily",default:null}),Iy=e=>{let{contextMenuPath:t}=ye(),r=e||t||"",n=oe(no(r)),o=oe(vd(r)),i=oe(Qs(r)),a=oe(xd(r)),s=q(({set:u})=>async(l,c=r)=>{if(c===null)return;u(Qs(c),!0);let f=await yt.getContextMenuChildren(c),d=await yt.getContextMenuByPath(c);d?(u(xd(c),d),u(vd(c),[d].concat(f))):u(no(c),f),u(no(c),f),u(Qs(c),!1)},[e]);return{rootLiteContextMenu:a,originLiteContextMenuListWithRoot:o,originLiteContextMenuList:n,isLoading:i,refetch:s}},Pt=Iy;var be=w(O()),eu={"/rewrite":"textSelectPopupButton","/art":null,"/compose_reply":"inputAssistantComposeReplyButton","/refine_draft":"inputAssistantRefineDraftButton","/compose_new":"inputAssistantComposeNewButton","/my_own_tools":null},wy=e=>{let{sx:t}=e,{t:r}=xe(),{contextMenuPath:n}=ye(),o=n?eu[n]:null,{buttonSettings:i,updateButtonSettings:a}=fi(),s=ni(),[u,l]=(0,be.useState)(!1),c=be.default.useRef(null),f=(0,be.useMemo)(()=>o&&i&&i[o]&&i[o].contextMenuPosition||"start",[i,o]),d=async m=>{if(o&&i?.[o]){let p=He(i[o]);p.contextMenuPosition=m,await a(o,p),l(!1)}};return o?be.default.createElement(ee,{sx:{padding:"10px 12px",flexShrink:0,borderBottom:"1px solid",borderColor:"border.main",gap:"8px",...t},direction:"row",alignItems:"center"},be.default.createElement(Wt,{ref:c,sx:{padding:"4px",borderRadius:m=>m.spacing(1),bgcolor:m=>m.palette.mode==="dark"?"#3B3D3E":"#E9E9EB",height:"100%",width:"132px",display:"flex",alignItems:"center",justifyContent:"space-between"},disableRipple:!0,onClick:()=>{l(!u)}},be.default.createElement(me,{mx:.5,fontSize:14,lineHeight:1.4,color:"text.primary",textAlign:"left",sx:{userSelect:"none"}},r(f==="start"?"package__features:context_menu__lite_editor__position_settings__label__start":"package__features:context_menu__lite_editor__position_settings__label__end")),be.default.createElement(Te,{icon:"ExpandMore",sx:{color:"text.secondary",fontSize:"16px"}})),be.default.createElement(Bc,{sx:{maxWidth:320},title:be.default.createElement(ee,{padding:"4px",gap:"8px"},be.default.createElement("img",{width:288,src:Uc("/images/context-menu/built-in-tools-position.png"),alt:"built-in-tools-position.png"}),be.default.createElement(me,{fontSize:"14px",fontWeight:400,textAlign:"left",color:"#fff"},r("package__features:context_menu__lite_editor__position_settings__tooltip__description")))},be.default.createElement(me,{sx:{fontSize:"12px",fontWeight:400,textAlign:"left",color:m=>m.palette.mode==="dark"?"rgba(255,255,255,0.38)":"rgba(0,0,0,0.38)",display:"flex",alignItems:"center",gap:"4px"}},r("package__features:context_menu__lite_editor__position_settings__tooltip"),be.default.createElement(Te,{icon:"HelpOutline",sx:{fontSize:"14px",color:"inherit"}}))),be.default.createElement(ai,{anchorEl:c.current,disablePortal:!0,container:s,onClose:()=>{l(!1)},open:u,placement:"bottom-start",fallbackPlacements:["top-start"]},be.default.createElement(Vc,null,be.default.createElement(Xn,{selected:f==="start",onClick:()=>{d("start")}},r("package__features:context_menu__lite_editor__position_settings__label__start")),be.default.createElement(Xn,{onClick:()=>{d("end")},selected:f==="end"},r("package__features:context_menu__lite_editor__position_settings__label__end"))))):null},bd=wy;var tu=w(O()),ru=e=>{switch(e){case"/rewrite":return Rf;case"/compose_new":return Af;case"/refine_draft":return Pf;case"/compose_reply":return Lf;case"/my_own_tools":return[];case"/art":return[];default:return[]}},Oy=(e,t)=>{let{contextMenuPath:r}=ye(),n=t||r||"",{buttonSettings:o}=fi(),i=(0,tu.useMemo)(()=>{if(t){let s=eu[n];if(s&&o)return o?.[s]?.contextMenuPosition||"start"}return"start"},[o,n]);return{presetLiteContextMenuList:(0,tu.useMemo)(()=>{if(n){let s=He(ru(n)).map(d=>(d.display_order+=i==="end"?1e4:-1e4,d)),u=s.find(d=>d.prompt_id==="30f27496-1faf-4a00-87cf-b53926d35bfd"),l=s.find(d=>d.prompt_id==="80e6d17b-2cf5-456b-944b-5f645f0e12de"),c=u?.display_order,f=l?.display_order;return c&&f&&(e||(u.display_order=f,l.display_order=c)),s}return[]},[n,i,e])}},Sd=Oy;var Cd=e=>{let t=e.split("/");return t.length<=1?t[0]:t.slice(0,-1).join("/")},cr=e=>{let t=He(e);return ti(t,r=>r.path.split("/").length*1e5+r.display_order,["asc"])},Ed=e=>{let t=cr(e),r=new Map,n=[];return t.forEach(o=>{let{path:i}=o,a=i.split("/"),s="";a.length<=1?s="/":s=i.split("/").slice(0,-1).join("/");let u=r.get(s),l={...o,children:[]};u?u.children.push(l):n.push(l),r.set(i,l)}),n};var xi=e=>{let t=cr(e),r=yc();if(!r)return t;let n=[];return t.map(o=>{let{path:i,visibility_settings:a}=o;if(n.find(c=>i.startsWith(c)))return null;let{allowed_domains:s,blocked_domains:u,use_allow_list:l}=a;if(l){if(!s.includes(r))return n.push(i),null}else if(u.includes(r))return n.push(i),null;return o}).filter(o=>o!==null)},Td=(e,t)=>{let r=`context_menu__prompt__${e.replace(bt,"")}`,n=`package__features:${r}`,o=Tc().t(n);return o!==r&&o!==n&&!o.includes("context_menu__prompt__")?o:t};var uI=e=>{let{promptId:t,parentPromptId:r,promptTitle:n,question:o,icon:i="UseChatGpt",disableEditQuestion:a=!0}=e;return{prompt_id:t,prompt_icon:i,type:"chat_complete",parent_prompt_id:r,prompt_title:n,children:[],actions:[{type:"ASK_CHATGPT",parameters:{AskChatGPTActionQuestion:{text:o,meta:{disableEditQuestion:a}}}}]}},oo=e=>{let{prompt_title:t,prompt_id:r,parent_prompt_id:n,type:o,prompt_icon:i,path:a}=e,s=a?`/${a.split("/")?.[1]||""}`:"";if(e.type==="chat_complete"){let u=e.variables;u.find(c=>c.name===qt.PRESET_VARIABLE__AI_RESPONSE_WRITING_STYLE.name)||u.push(qt.PRESET_VARIABLE__AI_RESPONSE_WRITING_STYLE),u.find(c=>c.name===qt.PRESET_VARIABLE__AI_RESPONSE_TONE.name)||u.push(qt.PRESET_VARIABLE__AI_RESPONSE_TONE);let l=[{type:"SET_VARIABLES_MODAL",parameters:{MaxAIPromptActionConfig:{...e,variables:u},SetVariablesModalConfig:{}}}];return{contextMenuRootPath:s,prompt_id:r,prompt_title:t,parent_prompt_id:n,type:o,prompt_icon:i,actions:l,children:[],origin:e}}else return{contextMenuRootPath:s,prompt_id:r,prompt_title:t,parent_prompt_id:n,type:o,prompt_icon:i,actions:[],children:[],origin:e}},Md=e=>{let t=[],r=n=>{let o=oo(n);return n.children&&(o.children=n.children.map(r)),o};return e.forEach(n=>{t.push(r(n))}),t};var fr=w(O());var Id=rt({key:"TopUsageContextMenuIdsState",default:[]}),Dy=()=>oe(Id),wd=(e,t)=>{let{t:r}=xe(),n=oe(no(e||"")),[o,i]=(0,fr.useState)([]),a=Dy(),s=q(({set:f})=>async()=>{let d=await Jn.getService("CONTEXT_MENU_SUGGEST").getTopItems();f(Id,d)},[]),u=(0,fr.useMemo)(()=>{let f=xi(Array.from([...o,...n]));return a.map(d=>{let m=f.find(p=>p.prompt_id===d);if(m)return{...oo(He(m)),prompt_id:bt+m.prompt_id}}).filter(Boolean).slice(0,t||3)},[r,o,n,a,t]),l=(0,fr.useMemo)(()=>{if(u?.length)return{prompt_id:bt,prompt_title:r("package__features:context_menu__prompt__group__suggested__title"),children:u,parent_prompt_id:"",prompt_icon:"AutoFix",type:"group"}},[u,r]),c=async()=>{await Jn.getService("CONTEXT_MENU_SUGGEST").resetUsageHistory(),await s()};return(0,fr.useEffect)(()=>{let f=async()=>{await s()};return window.addEventListener("focus",f),Jn.getService("CONTEXT_MENU_SUGGEST").addListener("onUpdate",f),f(),()=>{window.removeEventListener("focus",f),Jn.getService("CONTEXT_MENU_SUGGEST").removeListener("onUpdate",f)}},[]),(0,fr.useEffect)(()=>{e&&i(ru(e))},[e]),{contextMenuSuggestions:u,contextMenuSuggestionsGroup:l,resetContextMenuSuggestions:c}};var _d=(e,t,r)=>{let n=t.toLowerCase().trim().split(/\s+/).filter(Boolean),o={},i=He(e.filter(u=>{let{prompt_title:l,type:c}=u;if(c==="group")return o[u.prompt_id]=u,!1;let f=r?.[u.prompt_id]||l;if(!f)return!1;let d=f.toLowerCase().split(/\s/);for(let m of n){let p=d.findIndex(h=>h.includes(m));if(p===-1)return!1;d.splice(p,1)}return!0})),a=[],s=Qc($c(i,"prompt_id"),"parent_prompt_id");return Object.keys(s).forEach(u=>{let l=o[u];l&&a.push(l)}),i.forEach(u=>{a.push(u)}),cr(a)};var yi=w(O()),Py=(e,t)=>{let{i18n:r}=xe(),{enabledVisibilitySettings:n=!0,enabledFavorite:o=!0,enabledPreset:i=!0,selectionInputAble:a=!1,contextMenuPath:s}=t||{},{contextMenuPath:u}=ye(),l=s||u||"",{originLiteContextMenuList:c,rootLiteContextMenu:f,refetch:d}=Pt(l),{presetLiteContextMenuList:m}=Sd(a,s),{contextMenuSuggestionsGroup:p}=wd(l),h=(0,yi.useMemo)(()=>{let y=c.concat(i?m:[]),E=cr(y);n&&(E=xi(y));let S=r.language,C={},x={},b={};return E.forEach(T=>{let{path:_,prompt_title:P}=T,H=Cd(_),j=P,B=Td(T.prompt_id,T.prompt_title),F=b[H]?`${b[H]} ${j}`:j,X=x[H]?`${x[H]} ${B}`:B;S==="en"?(C[T.prompt_id]=F,b[_]=F):(C[T.prompt_id]=`${X} ${F} `,x[_]=X,b[_]=F)}),e?_d(E,e,C):E},[l,m,c,i,n,r.language,e]),g=(0,yi.useMemo)(()=>Ed(h),[h]),v=(0,yi.useMemo)(()=>{let y=Md(g);return e===""&&o&&p&&y.unshift(p),y.map(E=>({...E,parent_prompt_id:f?.prompt_id||E.parent_prompt_id||""}))},[e,l,g,p,o,f]);return{liteContextMenuList:h,liteContextMenuListWithChildren:g,liteContextMenuActionsItems:v,rootLiteContextMenu:f,refetch:d}},Od=Py;var Se=w(O());var nu=e=>{let t=document.createElement("textarea");t.style.cssText=`
              position: fixed;
              top: 0;
              left: 0;
              width: 1px;
              height: 1px;
              padding: 0;
              border: none;
              outline: none;
              boxShadow: none;
              background: transparent;
              z-index: -1;
            `,t.value=e,t.oncopy=r=>r.stopPropagation(),document.body.appendChild(t),t.select(),document.execCommand("copy",!1,""),t.oncopy=null,t.remove()},Ay=["input","change"];function Ly(e){try{if(e.focus(),e.contentEditable==="true"){let r=document.createRange(),n=window.getSelection(),o=Array.from(e.childNodes||[]).at(-1);if(o){let i=document.createRange();i.selectNodeContents(o);let a=i.toString().length;r.setStart(o,a),r.setEnd(o,a),setTimeout(()=>{o.scrollIntoView({block:"end"})},100)}else r.selectNodeContents(e);n?.removeAllRanges(),n?.addRange(r)}else if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){let r=e.value.length;e.setSelectionRange(r,r)}let t=e.getBoundingClientRect();Ff(t)&&e.scrollIntoView({block:"end"}),Ay.forEach(r=>{e.dispatchEvent(new Event(r,{bubbles:!0,cancelable:!0}))})}catch{}}var Dd=(e,t)=>{if(e){e.focus();let r=an();if(e.contentEditable==="true"){let n="";if(r==="linkedin.com")e.matches(".msg-form__contenteditable")?(e.parentElement?.querySelector(".msg-form__placeholder")?.classList.remove("msg-form__placeholder"),t=`<p>${t}</p>`):n=e.querySelector("a.ql-mention")?.outerHTML||"";else if(r==="facebook.com"){e.focus();let o=document.createRange();o.selectNodeContents(e);let i=window.getSelection();i?.removeAllRanges(),i?.addRange(o),setTimeout(()=>{let a=new DataTransfer;a.setData("text/plain",t),e.dispatchEvent(new ClipboardEvent("paste",{clipboardData:a,bubbles:!0,cancelable:!0}))},100);return}e.innerHTML=n+t.replaceAll(/\n/g,"<br />")}else e.value=t;setTimeout(()=>{Ly(e)},100)}};var Ld=w(O());var BI=rt({key:"SidebarPageState",default:{sidebarConversationType:"Chat",messageListPageNum:1}}),Pd=rt({key:"SidebarSummaryConversationIdState",default:""}),Ad=()=>{try{let e=window.localStorage.getItem(qc);return e?JSON.parse(e):{chatListShow:!0,sidebarNavOpen:!0}}catch{return{chatListShow:!0,sidebarNavOpen:!0}}},HI=rt({key:"ShowImmersiveChatHistory",default:Ad()?.chatListShow}),UI=rt({key:"ExpandImmersiveChatSidebarNav",default:Ad()?.sidebarNavOpen}),jI=rt({key:"ShowMiniScreemImmersiveChatSidebarChatList",default:!1});var Ry=()=>{let e=oe(Pd),{setLocalSettings:t,localSettings:r}=Dt(),{hideWithClickAlwaysPintoSidebar:n}=Lr(),{conversationType:o,setConversationType:i}=af(v=>({conversationType:v.conversationType,setConversationType:v.setConversationType})),a=o,s=r.sidebarSettings?.common?.currentAIProvider,u=r.sidebarSettings?.contextMenu?.conversationId,l=r.sidebarSettings?.chat?.conversationId,c=r.sidebarSettings?.search?.conversationId,f=r.sidebarSettings?.art?.conversationId,d=(0,Ld.useMemo)(()=>{switch(a){case"ContextMenu":return u;case"Chat":return l;case"Search":return c;case"Summary":return e;case"Art":return f;default:return""}},[a,l,c,e,f,u]),m=async v=>{await t(y=>{let E={...y,sidebarSettings:v};return Yc(y,E)?y:E})},p=async v=>{await t(y=>({...y,immersiveSettings:v}))},h=v=>{i(v)},g=v=>{n(),Ef("SyncContextMenuConversationInSidebar",{conversationId:v,switchToRewrite:!0}),to()};return{sidebarSettings:r.sidebarSettings,immersiveSettings:r.immersiveSettings,currentSidebarConversationType:a,currentSidebarAIProvider:s,currentSidebarConversationId:d,updateSidebarSettings:m,updateSidebarConversationType:h,sidebarChatConversationId:l,sidebarSummaryConversationId:e,continueConversationInSidebar:g,updateImmersiveSettings:p}},Rd=Ry;var kd=w(O());function Le(e){let t=(0,kd.useRef)(e);return t.current=e,t}var ky=[],Ny=new ii({runtime:"client"}),Vy=e=>[],bi=()=>{let e=Ue()?.querySelector(".max-ai__action__set_variables_modal");if(e){let r=Array.from(e.querySelectorAll("textarea")).filter(o=>!o.hasAttribute("aria-hidden")),n=r.find(o=>o.value==="")||r[r.length-1];if(n){n.focus(),setTimeout(()=>{n?.focus()},1);return}}let t=Ue()?.querySelector(`#${nn}`);t&&setTimeout(()=>{t?.focus()},1)},Fy=()=>{let[e,t]=(0,Se.useState)(""),[r,n]=(0,Se.useState)(!1),[o,i]=(0,Se.useState)(!1),[a,s]=(0,Se.useState)(!1),[u]=Be(Ge),{setAppSettingsState:l,appSettings:c}=Kt(),f=c.userSettings?.alwaysContinueInSidebar,[d,m]=(0,Se.useState)([]),{currentSelectionRef:p,hideRangy:h}=Rr(),{setLocalSettings:g}=Dt(),{askAIQuestion:v,stopGenerate:y,shortCutsEngine:E,runLastActionsAgain:S,askAIWithShortcuts:C}=kf(),x=ze(Ws),{contextMenuPath:b,mode:I}=ye(),{continueConversationInSidebar:T}=Rd(),{conversationId:_}=si(),P=wf(_),H=Of(_),{activeResponseMessage:j,currentFloatingContextMenuDraft:B,activeResponseMessageIdRef:F,autoUpdateActiveIndex:X}=io(),$=Le(j),{liteContextMenuActionsItems:Ce,liteContextMenuList:et}=Od(I==="list"?e:"",{enabledFavorite:!0,enabledVisibilitySettings:!0,selectionInputAble:p.current?.selectionInputAble}),mt=iu(Ce,e),[te,ie]=Be(eo),G=(0,Se.useMemo)(()=>P||a||j&&Mf(j,"needUpgrade")?ky:B?e.trim()?[...mt,...Ce]:mt:Ce,[a,e,P,Ce,B,mt,j]),D=q(({snapshot:K,set:re})=>async J=>{let{currentSelection:Ot,tempSelection:ht}=await K.getPromise(sn),Fe=B,Ee=Ot?.selectionElement||ht?.selectionElement,qn=["REPLACE_SELECTION","INSERT_BELOW","INSERT","INSERT_ABOVE","DISCARD","COPY","ACCEPT_AND_COPY"],en=Gs(J);if(en)switch(qn.includes(en)&&(re(pi,{range:null,selectionText:""}),re(Ge,{open:!1,rootRect:null,showModelSelector:!1,miniMenuPlacement:null}),re(Ws,{selectedDraftContextMenuId:"",lastOutput:""}),h(!0)),en){case"INSERT_BELOW":case"INSERT":case"INSERT_ABOVE":case"REPLACE_SELECTION":Ee&&Ny.postMessage({event:"Client_updateIframeInput",data:{value:Fe,type:en,id:Ee.id,startMarkerId:Ee.startMarkerId,endMarkerId:Ee.endMarkerId,caretOffset:Ee.caretOffset}});break;case"ACCEPT_AND_COPY":try{let tn=Ot?.selectionElement?.target?.getAttribute("maxai-input-assistant-button-id");if(tn){nu(Fe);let Hs=jf.get(tn);Dd(Hs,Fe)}}catch{}break;case"COPY":try{nu(Fe)}catch{}break;default:break}});ou(e,o);let V=async()=>{if(e.trim()){let K=p.current?.selectionElement,re=K?.editableElementSelectionText||K?.selectionText||"",J="";K&&(K.isEditableElement?re?B?J=B:J=re:B?J=B:J="":J=re+`
`+B);let Ot=`${e}`;J&&(Ot+=`:
"""
${J}
"""`),t(""),f&&T(_),await v({type:"user",text:Ot,meta:{includeHistory:!0,messageVisibleText:e}},{beforeActions:[{type:"SET_VARIABLE",parameters:{Variable:{key:"SELECTED_TEXT",value:J,label:"Selected text",isBuiltIn:!0,overwrite:!0}}}]})}};(0,Se.useEffect)(()=>{let K=null;return r?s(!0):K=setTimeout(()=>{s(!1)},200),()=>{K&&clearTimeout(K)}},[r]),(0,Se.useEffect)(()=>{if(u.open&&G.length>0){let K=null;for(let re=0;re<G.length;re++){let J=G[re];if(J.type==="group"){if(J.children&&J.children.length>0){K=J.children[0];break}}else{K=J;break}}K&&ie(re=>({...re,lastHoverContextMenuId:K?.prompt_id||""}))}},[G,u.open]);let ve=Le(y);(0,Se.useEffect)(()=>{if(te.selectedContextMenuId&&G.length>0&&u.open&&!P){let K=te.selectedContextMenuId,re=!1,J=null;qf(K)&&(K=K.replace(bt,""),re=!0);let Ot=Bf(K);if(Ot){let ht=Hf(K);ht&&(J=ht)}else{let ht=et.find(Fe=>Fe.prompt_id===K)||null;J=ht?oo(ht):null}if(J&&J.prompt_id){if(J.type==="group")return;re&&(J=Kf(J));let ht=J?.prompt_id,Fe=He(J?.actions||[]);if(J?.prompt_id===de.CONTINUE_WRITING&&Fe.unshift({type:"RENDER_TEMPLATE",parameters:{template:F.current||""}}),ie(()=>({selectedContextMenuId:null,hoverContextMenuIdMap:{},lastHoverContextMenuId:null})),J?.prompt_id===de.CONTINUE_IN_CHAT&&_){T(_);return}if(Fe.length>0){$.current?.originalMessage?.content?.text&&Fe.unshift({type:"SET_VARIABLE",parameters:{Variable:{key:"SELECTED_TEXT",value:$.current.originalMessage.content.text,isBuiltIn:!0,overwrite:!0,label:"Selected text overwrite"}}});let Ee=Fe.find(qn=>qn.type==="SET_VARIABLES_MODAL");Ee&&Ee.parameters?.MaxAIPromptActionConfig&&p.current?.relatedContent&&(Ee.parameters.MaxAIPromptActionConfig.variables.push({name:"__RELATED_CONTENT__",default_value:p.current.relatedContent,hint:"Related content",hidden:!0,type:"text"}),p.current.relatedContent),m(Fe)}else Ot&&(Gs(ht)==="TRY_AGAIN"?(x(Ee=>({...Ee,selectedDraftContextMenuId:null})),ve.current?.(),S()):D(J.prompt_id))}}},[b,te.selectedContextMenuId,G,_,H,u.open,P]);let Ke=(0,Se.useRef)(!1);return(0,Se.useEffect)(()=>{if(Ke.current||!_||d.length<=0)return;g({sidebarSettings:{contextMenu:{conversationId:_}}}),f&&T(_);let K=He(d);K.unshift({type:"SET_VARIABLE",parameters:{Variable:{key:"VARIABLE_MODAL_KEY",value:"FloatingContextMenu",overwrite:!0,isBuiltIn:!0}}}),Ke.current=!0,m([]),t("");let re=p.current?.selectionElement;C(Vy(B).concat(K),{overwriteParameters:re?.selectionText?[{key:"SELECTED_TEXT",value:re.selectionText,label:"Selected text",isBuiltIn:!0,overwrite:!0}]:[]}).then(()=>{let J=E?.getNextAction()?.error||""}).catch().finally(()=>{Ke.current=!1,h(!1)})},[f,d,C,_,B]),(0,Se.useEffect)(()=>{P||Qn()&&bi()},[P]),(0,Se.useEffect)(()=>{let K=re=>{t(re)};return lr("floatingMenuInputMediator").subscribe(K),()=>{lr("floatingMenuInputMediator").unsubscribe(K)}},[t]),(0,Se.useEffect)(()=>{if(u.open)lr("floatingMenuInputMediator").updateInputValue(""),bi(),on().then(K=>{l(K)});else{Ke.current=!1,i(!1),n(!1),t("");let re=Ue()?.querySelector(`#${nn}`)?.value;re&&lr("chatBoxInputMediator").updateInputValue(re)}},[u.open]),(0,Se.useEffect)(()=>{X()},[P,H.length]),{loading:P,inputValue:e,setInputValue:t,contextWindowList:G,setIsSettingCustomVariables:n,setIsEditedCustomVariables:i,isSettingCustomVariables:a,isEditedCustomVariable:o,askAIWithContextWindow:V}};function au(){let{t:e}=xe(["client"]),t=ze(mi),r=ze(Ge),{floatingDropdownMenuPin:n}=ro(),o=(a=!1)=>{let s=document.getElementById("maxai-global-popup-container");s?.shadowRoot&&s.shadowRoot.querySelector('div[data-testid="maxai--auth--sign-in-card-modal"]')||!a&&n||r({open:!1,rootRect:null,showModelSelector:!1,miniMenuPlacement:null})};return{closeContextMenu:q(({snapshot:a})=>async s=>{let{haveManualEdited:u}=await a.getPromise(mi);if(!u){o(s);return}let l=e("client:floating_menu__discard_changes_card__your_draft__title"),c=ei();return t(f=>({...f,stack:[...f.stack,{content:l,discardId:c}]})),new Promise(f=>{gd.receive("DiscardModalClose",d=>{if(d.discardId===c)return f(d),!0})}).then(({confirm:f,cancel:d})=>{if(f)return o(!0),!0;if(d)throw bi(),Error("discard modal cancel")})}),hideFloatingContextMenu:o}}function ou(e,t){let{conversationMessages:r}=Df(),n=(0,Si.useMemo)(()=>r.filter(i=>Zn(i)).some(i=>!i.meta?.MaxAIPromptActionConfig),[r]),o=ze(mi);(0,Si.useEffect)(()=>{let i=n||e.length!==0||t;o(a=>a.haveManualEdited===i?a:{...a,haveManualEdited:i})},[n,e,t])}var kr=w(O());function By(e=50){let[t,r]=(0,kr.useState)(!1),n=(0,kr.useRef)(),o=(0,kr.useCallback)(()=>{clearTimeout(n.current),r(!0)},[]),i=(0,kr.useCallback)(()=>{n.current=setTimeout(()=>{r(!1)},e)},[]);return{hover:t,onMouseEnter:o,onMouseLeave:i}}var Nd=w(O());var Hy=new Set(["mail.google.com","outlook.live.com","youtube.com","studio.youtube.com","linkedin.com"]),iu=(e,t)=>{let{currentSelection:r}=oe(sn);return(0,Nd.useMemo)(()=>{let n=[];if(r?.selectionElement?.target?.getAttribute("maxai-input-assistant-button-id")){n=[de.INSERT_BELOW,de.INSERT,de.REPLACE_SELECTION];let a=an();Hy.has(a)||n.push(de.ACCEPT_AND_COPY)}else r?.selectionElement?.isEditableElement?r?.selectionElement?.editableElementSelectionText?n=[de.INSERT,de.ACCEPT_AND_COPY]:n=[de.REPLACE_SELECTION,de.INSERT_BELOW,de.ACCEPT_AND_COPY]:n=[de.INSERT_BELOW,de.INSERT,de.REPLACE_SELECTION,de.ACCEPT_AND_COPY];let o=Vf.filter(a=>!n.includes(a.prompt_id)),i=o.findIndex(a=>a.prompt_id===de.CONTINUE_WRITING);if(!t.trim()){let a={prompt_id:de.REWRITE,prompt_title:"Rewrite",parent_prompt_id:"",type:"group",prompt_icon:"Rewrite",actions:[],children:e.filter(s=>s.prompt_id!==bt&&s.prompt_id!==de.CONTINUE_WRITING).map(s=>(s.children||[]).map(u=>({...u,parent_prompt_id:de.REWRITE}))).flat()};i===-1?o.push(a):o.splice(i+1,0,a)}return o.filter(a=>a.prompt_title.toLowerCase().includes(t.trim().toLowerCase()))},[r,e,t])};var Uy=new oi("ContextMenu/useFloatingContextMenu"),Lr=()=>{let e=ze(zc),{saveCurrentSelection:t,show:r,hideRangy:n,tempSelection:o}=Rr(),{floatingDropdownMenuPin:i,setFloatingDropdownMenuPin:a}=ro(),s=oe(di),u=ze(Ge),{hideFloatingContextMenu:l}=au(),{setAppSettings:c}=Kt(),f=Le(i),d=async(v,y,E,S,C)=>{let x=v;if(!Qn()&&x&&(x?.selectionText||x?.isEditableElement||E)){if(Uy.info("open",x),x.isEditableElement&&x.target){let T=ed(x.target),_=He(x);_.editableElementSelectionText=T.editableElementSelectionText,_.editableElementSelectionHTML=T.editableElementSelectionText,_.selectionText=T.selectionText,T&&(_.startMarkerId=T.startMarkerId,_.endMarkerId=T.endMarkerId,_.selectionText=T.selectionText,_.editableElementSelectionText=T.editableElementSelectionText,x=_)}y&&(x={...x,...y});let I=!0;if(S?I=S:v?.target&&of()?.contains(v?.target)&&(I=!1),!x?.isEditableElement&&x.selectionText||x?.editableElementSelectionText||E){t({selectionText:x.editableElementSelectionText||x.selectionText||"",selectionHTML:x.editableElementSelectionText||x.selectionText||"",selectionRect:x.selectionRect,activeElement:x.target,selectionInputAble:x.isEditableElement,selectionElement:x,relatedContent:x.relatedContent}),n(),u(T=>({...T,open:!0,openAutoExecute:C,rootRect:x?.selectionRect?zs(x.selectionRect):null,showModelSelector:I}));return}}let b=Qn();if(b&&Uf(),f.current||(n(),u({open:!1,rootRect:null,showModelSelector:!!S,miniMenuPlacement:null})),!ui()){if(b){to(),e(I=>({...I,open:!0}));return}gi()?(Xs(),e(I=>({...I,open:!1}))):(to(),e(I=>({...I,open:!0})))}},m=(v,y,E,S,C)=>{let x=li(v.getBoundingClientRect()),b={selectionText:y,selectionHTML:y,selectionRect:zs(x),isEditableElement:!1,target:v,editableElementSelectionText:"",editableElementSelectionHTML:""};d(b,{},E,S,C)},p=({openAutoExecute:v=!1}={})=>{r&&!s&&o&&d(o.selectionElement,{},!0,!1,v)},h=q(({set:v})=>()=>{v(Ge,y=>({...y,open:!1}))}),g=q(({snapshot:v,set:y})=>async E=>{let S=await v.getPromise(Ge);await c({userSettings:{alwaysContinueInSidebar:!1}}),S.rootRect&&E&&(Xs(),setTimeout(()=>{y(Xf,E),y(Ge,C=>({...C,open:!0}))},0))},[]);return{floatingDropdownMenuPin:i,setFloatingDropdownMenu:u,setFloatingDropdownMenuPin:a,showFloatingContextMenu:p,hideFloatingContextMenu:l,haveSelection:r,floatingDropdownMenuOpen:s,showFloatingContextMenuWithElement:m,showFloatingContextMenuWithVirtualElement:d,hideWithClickAlwaysPintoSidebar:h,showWithClickAlwaysPintoSidebar:g}};var nt=w(O());var jy=rt({key:"ContextMenuDraftHistoryActiveIndexState",default:-1}),io=()=>{let{conversationMessages:e,conversationId:t}=si(),r=_f(t),n=(0,nt.useRef)(null);(0,nt.useEffect)(()=>{r&&e.findIndex(g=>g.messageId===r.messageId)===-1?n.current=r:n.current=null},[r,e]);let[o,i]=Be(jy),a=(0,nt.useMemo)(()=>{let g=!1,v=e.map(y=>r?.messageId===y.messageId&&r.conversationId===t?(g=!0,ur([y,r])):y);return g?v:[...v,r||n.current].filter(Boolean)},[e,r,t]),s=(0,nt.useRef)(0),u=(0,nt.useMemo)(()=>{let g=a.filter(v=>!Zn(v));return s.current=g.length,g},[a]),l=(0,nt.useMemo)(()=>o<0||o>=u.length?void 0:u[o],[o,u]),c=(0,nt.useMemo)(()=>{if(!l)return;let g=a.findIndex(y=>y.messageId===l.messageId);if(!g)return;let v=a[g-1];if(Zn(v))return v},[l,a]),f=Le(l?.messageId),d=(0,nt.useMemo)(()=>{let g=u[o],v="";return g&&Tf(g)?v:(g&&(v=If(g,!1)),v.replace(/\n{2,}/,`

`))},[o,u]),m=()=>{i(g=>g+1===u.length?g:g+1)},p=()=>{i(g=>g-1===-1?g:g-1)},h=()=>{i(s.current-1)};return(0,nt.useEffect)(()=>{i(u.length-1)},[u.length,i]),{draftUserMessage:c,activeResponseMessage:l,currentFloatingContextMenuDraft:d,activeResponseMessageIndex:o,totalResponseCount:u.length,goToNextMessage:m,goToPreviousMessage:p,activeResponseMessageIdRef:f,autoUpdateActiveIndex:h}};var dr=w(O()),su=w(Sc());var ao="MAXAI_FLOATING_CONTEXT_WINDOW_LAYOUT",zy=e=>{let[t,r]=(0,dr.useState)(0),[n,o]=(0,dr.useState)(0);(0,dr.useEffect)(()=>{su.default.storage.local.get(ao).then(u=>{u[ao]&&(r(u[ao].width),o(u[ao].height))})},[]);let i=(0,dr.useMemo)(()=>{if(t)return t;if(e){let u=Math.max(e?.width||0,Us-32);return u>1280?1280:u}return Us-32},[e,t]),a=(0,dr.useMemo)(()=>n||0,[e,n]);return{defaultWidth:i,defaultHeight:a,updateLayout:u=>{u.height||(u.height=n),su.default.storage.local.set({[ao]:u}),r(u.width),o(u.height)}}};var Ci=w(O());var Gy=e=>{let{x:t,y:r,refs:n,update:o,dragOffsetRef:i,floatingSizeOffsetRef:a}=e,[s,u]=(0,Ci.useState)(),l=(0,Ci.useMemo)(()=>{switch(s){case"top-left":case"left":return{right:a.current.startRight,bottom:a.current.startBottom};case"top-right":case"top":return{left:a.current.startLeft,bottom:a.current.startBottom};case"bottom-left":case"bottom":return{top:a.current.startTop,right:a.current.startRight};case"bottom-right":case"right":return{top:a.current.startTop,left:a.current.startLeft}}return{top:r??0,left:t??0}},[s,t,r]);return{resizeDir:s,floatingPosition:l,floatingSizeOffsetRef:a,startResize:m=>{let p=n.floating.current?.clientWidth||0,h=n.floating.current?.clientHeight||0;u(m),a.current.startWidth=p,a.current.startHeight=h,a.current.startLeft=t,a.current.startRight=document.documentElement.clientWidth-(t+p),a.current.startTop=r,a.current.startBottom=document.documentElement.clientHeight-(r+h)},handleResize:(m,p,h)=>{a.current.dx=m,a.current.dy=p,a.current.resizeDir=h,a.current.resized=!0,o()},stopResize:()=>{let m=n.floating.current?.clientWidth||0,p=n.floating.current?.clientHeight||0;switch(s){case"top-left":case"left":{let h=document.documentElement.clientWidth-(a.current.startRight+m),g=document.documentElement.clientHeight-(a.current.startBottom+p);i.current.x+=h-t,i.current.y+=g-r;break}case"top-right":case"top":{let h=document.documentElement.clientHeight-(a.current.startBottom+p);i.current.y+=h-r;break}case"bottom-left":case"bottom":{let h=document.documentElement.clientWidth-(a.current.startRight+m);i.current.x+=h-t;break}case"bottom-right":case"right":break}i.current.dragged=!0,u(void 0),o()}}};var At=w(O());function Ei(e){"@babel/helpers - typeof";return Ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ei(e)}var Wy=/^\s+/,qy=/\s+$/;function R(e,t){if(e=e||"",t=t||{},e instanceof R)return e;if(!(this instanceof R))return new R(e,t);var r=Ky(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}R.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),r,n,o,i,a,s;return r=t.r/255,n=t.g/255,o=t.b/255,r<=.03928?i=r/12.92:i=Math.pow((r+.055)/1.055,2.4),n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),o<=.03928?s=o/12.92:s=Math.pow((o+.055)/1.055,2.4),.2126*i+.7152*a+.0722*s},setAlpha:function(t){return this._a=zd(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=Fd(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=Fd(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),o=Math.round(t.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+o+"%)":"hsva("+r+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var t=Vd(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=Vd(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),o=Math.round(t.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+o+"%)":"hsla("+r+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(t){return Bd(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return Zy(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(se(this._r,255)*100)+"%",g:Math.round(se(this._g,255)*100)+"%",b:Math.round(se(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(se(this._r,255)*100)+"%, "+Math.round(se(this._g,255)*100)+"%, "+Math.round(se(this._b,255)*100)+"%)":"rgba("+Math.round(se(this._r,255)*100)+"%, "+Math.round(se(this._g,255)*100)+"%, "+Math.round(se(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:lb[Bd(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var r="#"+Hd(this._r,this._g,this._b,this._a),n=r,o=this._gradientType?"GradientType = 1, ":"";if(t){var i=R(t);n="#"+Hd(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+r+",endColorstr="+n+")"},toString:function(t){var r=!!t;t=t||this._format;var n=!1,o=this._a<1&&this._a>=0,i=!r&&o&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return i?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return R(this.toString())},_applyModification:function(t,r){var n=t.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(tb,arguments)},brighten:function(){return this._applyModification(rb,arguments)},darken:function(){return this._applyModification(nb,arguments)},desaturate:function(){return this._applyModification(Jy,arguments)},saturate:function(){return this._applyModification(Qy,arguments)},greyscale:function(){return this._applyModification(eb,arguments)},spin:function(){return this._applyModification(ob,arguments)},_applyCombination:function(t,r){return t.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(sb,arguments)},complement:function(){return this._applyCombination(ib,arguments)},monochromatic:function(){return this._applyCombination(ub,arguments)},splitcomplement:function(){return this._applyCombination(ab,arguments)},triad:function(){return this._applyCombination(Ud,[3])},tetrad:function(){return this._applyCombination(Ud,[4])}};R.fromRatio=function(e,t){if(Ei(e)=="object"){var r={};for(var n in e)e.hasOwnProperty(n)&&(n==="a"?r[n]=e[n]:r[n]=so(e[n]));e=r}return R(e,t)};function Ky(e){var t={r:0,g:0,b:0},r=1,n=null,o=null,i=null,a=!1,s=!1;return typeof e=="string"&&(e=pb(e)),Ei(e)=="object"&&(Yt(e.r)&&Yt(e.g)&&Yt(e.b)?(t=Yy(e.r,e.g,e.b),a=!0,s=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Yt(e.h)&&Yt(e.s)&&Yt(e.v)?(n=so(e.s),o=so(e.v),t=$y(e.h,n,o),a=!0,s="hsv"):Yt(e.h)&&Yt(e.s)&&Yt(e.l)&&(n=so(e.s),i=so(e.l),t=Xy(e.h,n,i),a=!0,s="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=zd(r),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}function Yy(e,t,r){return{r:se(e,255)*255,g:se(t,255)*255,b:se(r,255)*255}}function Vd(e,t,r){e=se(e,255),t=se(t,255),r=se(r,255);var n=Math.max(e,t,r),o=Math.min(e,t,r),i,a,s=(n+o)/2;if(n==o)i=a=0;else{var u=n-o;switch(a=s>.5?u/(2-n-o):u/(n+o),n){case e:i=(t-r)/u+(t<r?6:0);break;case t:i=(r-e)/u+2;break;case r:i=(e-t)/u+4;break}i/=6}return{h:i,s:a,l:s}}function Xy(e,t,r){var n,o,i;e=se(e,360),t=se(t,100),r=se(r,100);function a(l,c,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?l+(c-l)*6*f:f<1/2?c:f<2/3?l+(c-l)*(2/3-f)*6:l}if(t===0)n=o=i=r;else{var s=r<.5?r*(1+t):r+t-r*t,u=2*r-s;n=a(u,s,e+1/3),o=a(u,s,e),i=a(u,s,e-1/3)}return{r:n*255,g:o*255,b:i*255}}function Fd(e,t,r){e=se(e,255),t=se(t,255),r=se(r,255);var n=Math.max(e,t,r),o=Math.min(e,t,r),i,a,s=n,u=n-o;if(a=n===0?0:u/n,n==o)i=0;else{switch(n){case e:i=(t-r)/u+(t<r?6:0);break;case t:i=(r-e)/u+2;break;case r:i=(e-t)/u+4;break}i/=6}return{h:i,s:a,v:s}}function $y(e,t,r){e=se(e,360)*6,t=se(t,100),r=se(r,100);var n=Math.floor(e),o=e-n,i=r*(1-t),a=r*(1-o*t),s=r*(1-(1-o)*t),u=n%6,l=[r,a,i,i,s,r][u],c=[s,r,r,a,i,i][u],f=[i,i,s,r,r,a][u];return{r:l*255,g:c*255,b:f*255}}function Bd(e,t,r,n){var o=[Ct(Math.round(e).toString(16)),Ct(Math.round(t).toString(16)),Ct(Math.round(r).toString(16))];return n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function Zy(e,t,r,n,o){var i=[Ct(Math.round(e).toString(16)),Ct(Math.round(t).toString(16)),Ct(Math.round(r).toString(16)),Ct(Gd(n))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function Hd(e,t,r,n){var o=[Ct(Gd(n)),Ct(Math.round(e).toString(16)),Ct(Math.round(t).toString(16)),Ct(Math.round(r).toString(16))];return o.join("")}R.equals=function(e,t){return!e||!t?!1:R(e).toRgbString()==R(t).toRgbString()};R.random=function(){return R.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Jy(e,t){t=t===0?0:t||10;var r=R(e).toHsl();return r.s-=t/100,r.s=Ti(r.s),R(r)}function Qy(e,t){t=t===0?0:t||10;var r=R(e).toHsl();return r.s+=t/100,r.s=Ti(r.s),R(r)}function eb(e){return R(e).desaturate(100)}function tb(e,t){t=t===0?0:t||10;var r=R(e).toHsl();return r.l+=t/100,r.l=Ti(r.l),R(r)}function rb(e,t){t=t===0?0:t||10;var r=R(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),R(r)}function nb(e,t){t=t===0?0:t||10;var r=R(e).toHsl();return r.l-=t/100,r.l=Ti(r.l),R(r)}function ob(e,t){var r=R(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,R(r)}function ib(e){var t=R(e).toHsl();return t.h=(t.h+180)%360,R(t)}function Ud(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=R(e).toHsl(),n=[R(e)],o=360/t,i=1;i<t;i++)n.push(R({h:(r.h+i*o)%360,s:r.s,l:r.l}));return n}function ab(e){var t=R(e).toHsl(),r=t.h;return[R(e),R({h:(r+72)%360,s:t.s,l:t.l}),R({h:(r+216)%360,s:t.s,l:t.l})]}function sb(e,t,r){t=t||6,r=r||30;var n=R(e).toHsl(),o=360/r,i=[R(e)];for(n.h=(n.h-(o*t>>1)+720)%360;--t;)n.h=(n.h+o)%360,i.push(R(n));return i}function ub(e,t){t=t||6;for(var r=R(e).toHsv(),n=r.h,o=r.s,i=r.v,a=[],s=1/t;t--;)a.push(R({h:n,s:o,v:i})),i=(i+s)%1;return a}R.mix=function(e,t,r){r=r===0?0:r||50;var n=R(e).toRgb(),o=R(t).toRgb(),i=r/100,a={r:(o.r-n.r)*i+n.r,g:(o.g-n.g)*i+n.g,b:(o.b-n.b)*i+n.b,a:(o.a-n.a)*i+n.a};return R(a)};R.readability=function(e,t){var r=R(e),n=R(t);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};R.isReadable=function(e,t,r){var n=R.readability(e,t),o,i;switch(i=!1,o=mb(r),o.level+o.size){case"AAsmall":case"AAAlarge":i=n>=4.5;break;case"AAlarge":i=n>=3;break;case"AAAsmall":i=n>=7;break}return i};R.mostReadable=function(e,t,r){var n=null,o=0,i,a,s,u;r=r||{},a=r.includeFallbackColors,s=r.level,u=r.size;for(var l=0;l<t.length;l++)i=R.readability(e,t[l]),i>o&&(o=i,n=R(t[l]));return R.isReadable(e,n,{level:s,size:u})||!a?n:(r.includeFallbackColors=!1,R.mostReadable(e,["#fff","#000"],r))};var uu=R.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},lb=R.hexNames=cb(uu);function cb(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function zd(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function se(e,t){fb(e)&&(e="100%");var r=db(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function Ti(e){return Math.min(1,Math.max(0,e))}function Ye(e){return parseInt(e,16)}function fb(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function db(e){return typeof e=="string"&&e.indexOf("%")!=-1}function Ct(e){return e.length==1?"0"+e:""+e}function so(e){return e<=1&&(e=e*100+"%"),e}function Gd(e){return Math.round(parseFloat(e)*255).toString(16)}function jd(e){return Ye(e)/255}var St=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",r="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",o="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+o),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Yt(e){return!!St.CSS_UNIT.exec(e)}function pb(e){e=e.replace(Wy,"").replace(qy,"").toLowerCase();var t=!1;if(uu[e])e=uu[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=St.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=St.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=St.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=St.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=St.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=St.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=St.hex8.exec(e))?{r:Ye(r[1]),g:Ye(r[2]),b:Ye(r[3]),a:jd(r[4]),format:t?"name":"hex8"}:(r=St.hex6.exec(e))?{r:Ye(r[1]),g:Ye(r[2]),b:Ye(r[3]),format:t?"name":"hex"}:(r=St.hex4.exec(e))?{r:Ye(r[1]+""+r[1]),g:Ye(r[2]+""+r[2]),b:Ye(r[3]+""+r[3]),a:jd(r[4]+""+r[4]),format:t?"name":"hex8"}:(r=St.hex3.exec(e))?{r:Ye(r[1]+""+r[1]),g:Ye(r[2]+""+r[2]),b:Ye(r[3]+""+r[3]),format:t?"name":"hex"}:!1}function mb(e){var t,r;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:t,size:r}}function hb(e){let t=e.getBoundingClientRect().toJSON(),r=e.parentNode;for(;r&&r!==document.body;){let n=r.getBoundingClientRect(),o=window.getComputedStyle(r);(o.overflow==="hidden"||o.overflowX==="hidden"||o.overflowY==="hidden"||o.overflow==="clip"||o.overflowX==="clip"||o.overflowY==="clip")&&(t.top=Math.max(t.top,n.top),t.bottom=Math.min(t.bottom,n.bottom),t.left=Math.max(t.left,n.left),t.right=Math.min(t.right,n.right)),r=r.parentNode}return t.left=Math.max(0,t.left),t.top=Math.max(0,t.top),new DOMRect(t.left,t.top,t.right-t.left,t.bottom-t.top)}var gb=()=>{let{devAlwaysShowButton:e}=fd(),{floatingImageMiniMenuKey:t}=(0,At.useContext)(Ks),[r,n]=Be(qs(t));return{showMenu:()=>{n(a=>({...a,show:!0}))},hideMenu:()=>{e||n(a=>({...a,show:!1}))},menu:r}},vb=()=>{let{setAppSettingsState:e}=Kt(),{getLocalSettings:t}=Dt();return{updateAppSettings:async()=>{let n=await on();n&&e({...n}),t()}}},M_=({onAfterMouseEnterImage:e,filterImage:t})=>{let{floatingImageMiniMenuKey:r}=(0,At.useContext)(Ks),n=ze(qs(r)),{showMenu:o,hideMenu:i}=gb(),{appSettings:a}=Kt(),{updateAppSettings:s}=vb(),u=(0,At.useRef)();(0,At.useEffect)(()=>{u.current=a.floatingImageMiniMenu?.visibility},[a.floatingImageMiniMenu]);let l=(0,At.useRef)(null),c=(0,At.useRef)(""),f=Zf(r);ri(()=>{c.current=an()});let d=()=>{f.mouseInImage&&m(f.currentHoverImage)},m=x=>{if(!x){p({x:-1e5,y:-1e5});return}let b=hb(x);if(b.width<=40||b.height<=40){p({x:-1e5,y:-1e5});return}let I=!0,T={x:b.left,y:b.top},_={x:b.left+15,y:b.top+15},P={x:b.left+15,y:b.bottom-50},H={x:b.right-50,y:b.top+15},j={x:b.right-50,y:b.bottom-50};_.x>0&&_.y>0&&!h(_,x)?T={x:b.left,y:b.top}:P.x>0&&P.y>0&&!h(P,x)?T={x:b.left,y:b.bottom-50}:H.x>0&&H.y>0&&!h(H,x)?T={x:b.right-50,y:b.top}:j.x>0&&j.y>0&&!h(j,x)?T={x:b.right-50,y:b.bottom-50}:I=!1,I?(p(T),o()):(p({x:-1e5,y:-1e5}),i())},p=x=>{n(b=>({...b,position:{left:x.x+"px",top:x.y+"px"}}))},h=(x,b)=>{let I=document.elementsFromPoint(x.x,x.y);for(let T=0;T<I.length;T++){let _=I[T];if(_.classList.contains("MAX_AI_FLOATING_IMAGE_MINI_MENU")||_.id==="USE_CHAT_GPT_AI_ROOT_Context_Menu")continue;if(!E(_))return _!==b}return!1},g=x=>{let b=x.parentNode;for(;b&&b!==document.body;){if(b.classList.contains("gm-style")||b.classList.contains("gm-ui-hover-effect")||location.href.startsWith("https://www.google.com/maps")&&(b.classList.contains("id-scene")||b.id==="minimap"))return!0;b=b.parentNode}return!1},v=x=>!!(location.host==="www.youtube.com"&&(x.closest("ytd-rich-item-renderer")||x.id==="thumbnail"&&x.src&&x.src.startsWith("data:image/"))),y=x=>{let b=x.nodeName.includes("-"),I=x instanceof HTMLElement&&!!x.shadowRoot;return b&&I},E=x=>{let b=window.getComputedStyle(x);if(parseFloat(b.opacity)<1)return"opacity";if(b.visibility==="hidden")return"visibility";if(b.display==="none")return"display";let I=b.backgroundColor;return I==="transparent"?"backgroundColor":["IMG","EMBED","OBJECT","IFRAME","VIDEO","AUDIO","CANVAS"].includes(x.tagName)||y(x)||b.filter.includes("blur")||b.backdropFilter.includes("blur")||b.backgroundImage.includes("linear-gradient")?!1:R(I).getAlpha()<.8?"bgAlpha "+b.backgroundColor:!1},S=x=>{un.commonFirstEnterImage||(un.commonFirstEnterImage=x,un.commonFirstEnterImage.setAttribute("data-first-enter-image","true")),f.lastHoverImage!==x&&(t&&!t(x)||(l.current&&clearTimeout(l.current),f.currentHoverImageSrc=x.src,f.currentHoverImage=x,f.lastHoverImage=x,f.mouseInImage=!0,setTimeout(()=>{m(x),o(),window.removeEventListener("scroll",d),window.addEventListener("scroll",d,!0)},20),e?.()))},C=()=>{f.mouseInImage&&(r==="ON_BOARDING"&&un.onboardingTooltipShowing||(l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{if(!f.mouseInMenu){if(r==="ON_BOARDING"&&un.onboardingTooltipShowing)return;delete f.lastHoverImage,f.mouseInImage=!1,i(),window.removeEventListener("scroll",d)}},50)))};return(0,At.useEffect)(()=>{let x=[],b=ef(I=>{if(f.disable||u.current?.isWhitelistMode||u.current&&!Xc(u.current))return;let T=document.elementsFromPoint(I.x,I.y),_=T.filter((P,H)=>{if(P.tagName!=="IMG")return!1;let j=P;if(j.offsetWidth<120||j.offsetHeight<80||g(j)||v(j)||j.getAttribute("data-maxai-chat-with-image-ignore")==="true")return!1;let B=0;for(;B<H;){if(T[B].id==="USE_CHAT_GPT_AI_ROOT"||!E(T[B]))return!1;B++}return!0});_.length>0?_.forEach(P=>{S(P)}):C()},100);return document.body.addEventListener("mousemove",b),document.body.addEventListener("wheel",b),x.push(()=>{document.body.removeEventListener("mousemove",b),document.body.removeEventListener("wheel",b)}),s(),document.addEventListener("visibilitychange",function I(){document.visibilityState==="visible"&&(s(),x.push(()=>{document.removeEventListener("visibilitychange",I)}))}),()=>{x.forEach(I=>I())}},[]),{host:c}};var Xe=w(O());var xb=e=>{let t=r=>{let{id:n,type:o,data:i}=r.data;if(n===Wc&&o==="iframeSelection"){let{selectionText:a,iframeSelectionRect:s,iframePosition:u}=i;if(!bc()){if(!e)return;let l=window.outerHeight-window.innerHeight,c=[u[0],Math.max(u[1]-l,0)],f=document.querySelectorAll("iframe"),d=0,m=0;if(Array.from(f).find(h=>{let g=h.getBoundingClientRect();if(g){let{left:v,top:y,width:E,height:S}=g;if(c[0]>=v&&c[0]<=v+E&&c[1]>=y&&c[1]<=y+S)return d=y,m=v,!0}return!1})){let h=li(s);if(h.top+=d,h.y=d,h.left+=m,h.x+=m,h){if(a&&!Gc){let g=document.getElementById("a");g&&g.remove();let v=document.createElement("div");v.id="a",v.style.position="fixed",v.style.top=h.top+"px",v.style.left=h.left+"px",v.style.width=h.width+"px",v.style.height=h.height+"px",v.style.border="1px solid red",v.style.pointerEvents="none",document.body.appendChild(v)}e({...i,iframeSelectionRect:h,selectionRect:h,iframePosition:c,isEmbedPage:r.origin.indexOf("maxai.me")>-1&&i.isEmbedPage})}}}}};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}},Wd=xb;var A_=(e,t,r,n)=>new Promise(o=>{let i=!1,a=setTimeout(()=>{i=!0,o(void 0)},n),s=setInterval(()=>{if(!i){let u=e.querySelector(t);u&&(clearInterval(s),clearTimeout(a),o(u))}},r)}),qd=(e,t,r,n,o)=>new Promise(i=>{let a=!1,s=setTimeout(()=>{a=!0,i(void 0)},n),u=setInterval(()=>{if(!a){let l=Array.from(e.querySelectorAll(t));if(o){let c=o(l);c&&(clearInterval(u),clearTimeout(s),i(c))}else l.length>0&&(clearInterval(u),clearTimeout(s),i(l[0]))}},r)}),yb=()=>new Promise(async e=>{let r=setTimeout(()=>{e({success:!1,error:"timeout"})},4e3),n=o=>{clearTimeout(r),e(o)};try{let o=document.getElementById(Yn)?.shadowRoot;if(o){let i=await qd(o,".usechatgpt-ai__context-menu--handle-button",200,2e3,a=>a.find(s=>window.getComputedStyle(s).opacity!=="0"));if(i){setTimeout(()=>{i.click()},100);let a=await qd(o,".floating-context-menu-item",50,2e3,s=>s.find(u=>u.innerText.startsWith("Get answer")));if(a){a.click(),n({success:!0,error:""});return}}}n({success:!1,error:"no context menu"})}catch(o){n({success:!1,error:o?.toString()||""})}}),Kd=yb;var lu=w(Sy());var Rr=()=>{let[e,t]=Be(Yf),[r,n]=Be(sn),o=(f=!1)=>{n(d=>(document.querySelector("#rangeBorderBox")?.remove(),{show:!1,tempSelection:null,currentSelection:f?null:d.currentSelection,lastCursorPosition:null}))},i=f=>{t({loaded:!0,rangy:f})},a=()=>{n(f=>({...f,show:!0}))},s=(f,d)=>{n(m=>({...m,tempSelection:f,lastCursorPosition:d}))},u=async f=>{n(d=>({...d,currentSelection:f}))},l=Le(r.tempSelection),c=Le(r.currentSelection);return{showRangy:a,hideRangy:o,rangy:e.rangy,initRangyCore:i,saveCurrentSelection:u,saveTempSelection:s,show:r.show,tempSelection:r.tempSelection,currentSelection:r.currentSelection,lastMousePosition:r.lastCursorPosition,tempSelectionRef:l,currentSelectionRef:c}};sd(lu.default);ud(lu.default);var pr=new oi("ContextMenu/Rangy"),bb=()=>{let e=(0,Xe.useRef)({x:0,y:0});return(0,Xe.useEffect)(()=>{let t=r=>{e.current.x=r.clientX+window.scrollX,e.current.y=r.clientY+window.scrollY};return document.documentElement.addEventListener("mousemove",t),()=>{document.documentElement.removeEventListener("mousemove",t)}},[]),()=>({...e.current})},Sb=()=>{let{show:e,initRangyCore:t,rangy:r,showRangy:n,hideRangy:o,saveTempSelection:i}=Rr(),a=oe(Jf),{chatBoxShortCutKey:s}=Qf(),u=oe(di),l=ze(Ge),c=ze(pi);od();let f=bb(),d=(0,Xe.useRef)(null),m=(0,Xe.useRef)(null),p=(0,Xe.useRef)(null),{showFloatingContextMenuWithVirtualElement:h}=Lr();ri(()=>{Promise.all([import("./23MDPGPV.js"),import("./XPL4CKD7.js"),import("./QY5IWJZT.js")]).then(([{default:S},{default:C},{default:x}])=>{let b=()=>{t(S)};C(S),x(S),S.init(),S.addInitListener(b)})});let g=Le(e),v=(0,Xe.useCallback)(S=>{{if(g.current&&S instanceof KeyboardEvent&&S.key==="Escape"){pr.info("Escape close floating button"),o(),rd(),nd();return}if(ui()||S.MAX_AI_IGNORE)return;let C=document.getElementById("USE_CHAT_GPT_AI_ROOT");if(d.current&&C&&C.contains(d.current)||S.target?.id==="USE_CHAT_GPT_AI_ROOT_Minimize_Container")return;let x=S.target,b=document.body,I=S instanceof MouseEvent,T=hi(),_=(r?.getSelection().toString()||document.getSelection()?.toString()||"").trim().replace(/\u200B/g,"");if(x){if(x&&(x.id===Cc||x.id===Yn||x.id===Ec))return;if(m.current&&(x=m.current),T&&x?.tagName!=="INPUT"&&x?.tagName!=="TEXTAREA"){let B=ln(T);B.isEditableElement&&(x=B.editableElement)}if(!x||location.href.startsWith("https://docs.google.com/spreadsheets")&&x.id==="waffle-rich-text-editor"&&!x.hasAttribute("aria-label"))return;let{editableElement:j}=ln(x);if(j&&(x=j,b=j.parentElement?ln(j.parentElement,20).editableElement:j,b=b||j),!j&&!_){o(),p.current=null;return}p.current=Ys(x,{target:x,eventType:I?"mouseup":"keyup"}),pr.info(`native selection [${I?"mouse":"keyboard"}]: 	`,p.current,x)}let P=!1,H=!1;if(p.current){if(p.current?.isEditableElement?(P=!0,(p.current?.editableElementSelectionText||r.getSelection()?.toString()||document.getSelection()?.toString())&&(H=!0)):p.current?.selectionText&&(P=!0,H=!0),P){if(p.current&&p.current.relatedContent===void 0&&H){let F=window.getSelection();if(F){let X=ad(F,2e3,b);p.current.relatedContent=X.relatedContent}}let j=p.current?.editableElementSelectionText||p.current.selectionText,B=p.current.relatedContent;i({selectionText:p.current?.editableElementSelectionText||p.current.selectionText,selectionHTML:p.current?.editableElementSelectionText||p.current.selectionHTML,selectionRect:p.current.selectionRect,activeElement:p.current.target,selectionInputAble:p.current?.isEditableElement,selectionElement:p.current,relatedContent:B&&B.length>j.length?B:""},f()),pr.info("save selection temp data",p.current?.isEditableElement,`
`,p.current?.editableElementSelectionText,`
`,p.current?.selectionText)}H?(pr.info("show floating button"),n()):(pr.info("hide floating button"),o())}}},[r,i,n,o]),y=Le(v),E=(0,Xe.useRef)(()=>{});(0,Xe.useEffect)(()=>{let S=$n(y.current,200),C=$n(y.current,200),x=b=>{E.current(),E.current=id(P=>{if(!P.selectionText&&(o(),!P.isEditableElement)){p.current=null;return}p.current=P,P.selectionText&&(P.eventType==="mouseup"?S({target:null}):C({target:null}))});let I=b.target;d.current=I;let{isEditableElement:T,editableElement:_}=ln(I);if(T&&_){if(m.current?.isSameNode(_))return;m.current&&(m.current.removeEventListener("mouseup",S),m.current.removeEventListener("keyup",C)),pr.info("save targetElement ref",_),m.current=_,_.addEventListener("mouseup",S),_.addEventListener("keyup",C)}else pr.info("clear targetElement ref"),m.current=null};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x),m.current&&(m.current.removeEventListener("mouseup",S),m.current.removeEventListener("keyup",C))}},[r,s,a]),(0,Xe.useEffect)(()=>{let S=$n(y.current,200),C=$n(y.current,200),x=()=>{};return r?.initialized&&(document.addEventListener("mouseup",S),document.addEventListener("keyup",C),x=Wd(b=>{if(!b.selectionText&&(o(),!b.isEditableElement)){p.current=null;return}p.current=b,b.selectionText&&(b.eventType==="mouseup"?S({target:null}):C({target:null})),b.isEmbedPage&&b.selectionText&&b?.tagName==="BUTTON"&&Kd(),b.selectionText||l(I=>({...I,open:!1}))})),()=>{document.removeEventListener("mouseup",S),document.removeEventListener("keyup",C),x()}},[r]),ci(async(S,C)=>{switch(S){case"Client_listenOpenChatMessageBox":{let x=window.getSelection()?.rangeCount;if(x&&x>0){let T=window.getSelection()?.getRangeAt(0)?.cloneRange();c({range:T||null,selectionText:window?.getSelection()?.toString()||""})}let{command:b}=C,I=b==="show-floating-menu";if(!p.current){let T=hi(),{editableElement:_,isEditableElement:P}=ln(T);P&&_&&(p.current=Ys(_,{target:_,eventType:"keyup"}))}return pr.info("Client_listenOpenChatMessageBox",p.current?.isEditableElement,p.current?.selectionText),h(p.current,{},I),p.current&&(p.current=null),{success:!0,data:{},message:""}}}}),(0,Xe.useEffect)(()=>{u||c(S=>{if(S.range){window.getSelection()?.removeAllRanges(),window.getSelection()?.addRange(S.range);let C=hi();if(C&&(C.tagName==="INPUT"||C.tagName==="TEXTAREA")){let x=C,b=x.value.indexOf(S.selectionText||""),I=b+(S.selectionText||"").length;x.focus(),x.setSelectionRange(b,I)}setTimeout(()=>{let x=new KeyboardEvent("keyup",{key:" ",code:"Space",location:0,bubbles:!0,cancelable:!0,shiftKey:!1});(C||document.body).focus(),(C||document.body).dispatchEvent(x)},0)}return{...S,range:null}})},[u])};var Cb=w(Sc());var Yd=e=>`ON_BOARDING_TOOLTIP__${e}__OPENED`;var wO=async e=>{let t=Yd(e);return!!(await Wf())[t]},_O=async e=>{let t=Yd(e);await Gf(t,!0)},OO=(e,t=document.body)=>t?.querySelector(`#ONBOARDING_TOOLTIP__${e}`),DO=(e,t)=>{if(Array.isArray(t))for(let r=0;r<t.length;r++){let n=e.querySelector(t[r]);if(n)return n}else return e.querySelector(t)};var cu=w(O()),Eb=()=>cu.default.createElement(ee,{sx:{flexDirection:"row",alignSelf:"flex-end",flex:1}},cu.default.createElement(Jc,{sx:{fontSize:12,color:e=>e.palette.mode==="dark"?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.6)"}})),RO=Eb;var uo=w(O());var Tb=()=>{let{setAppSettingsState:e}=Kt(),{setLocalSettingsState:t}=Dt(),{showFloatingContextMenu:r}=Lr(),n=(0,uo.useRef)(r),o=(0,uo.useRef)(!1);(0,uo.useEffect)(()=>{n.current=r},[r]),ci(async(i,a,s)=>{switch(i){case"Client_updateSidebarChatBoxStyle":return o.current?$s():gi()&&(o.current=!0,$s()),{success:!0,data:{},message:""};case"Client_updateAppSettings":return e(await on()),t(await nf.getLocalSettings()),{success:!0,data:{},message:""};case"Client_listenUpdateIframeInput":return a.startMarkerId&&a.endMarkerId&&await td(a.startMarkerId,a.endMarkerId,a.value,a.type),{success:!0,data:{},message:""};default:break}})},GO=Tb;var mr=vt({key:"LiteContextMenuGroupEditorStateFamily",default:{groupData:null,isOpen:!1,isOpenDeleteGroupConfirm:!1}}),Mb=()=>{let{contextMenuPath:e,panelId:t}=ye(),{isOpen:r,groupData:n,isOpenDeleteGroupConfirm:o}=oe(mr(t||"")),i=q(({set:d})=>async m=>{if(e===null)return;let p=await yt.getContextMenuByPath(e);if(!p)return;let h={prompt_title:"",parent_prompt_id:p.prompt_id,prompt_icon:void 0,visibility_settings:{blocked_domains:[],allowed_domains:[],use_allow_list:!1},prompt_id:""};d(mr(t),{isOpen:!0,groupData:{...h,...m},isOpenDeleteGroupConfirm:!1})},[e,t]),a=q(({set:d})=>m=>{d(mr(t),{isOpen:!0,groupData:m,isOpenDeleteGroupConfirm:!1})},[t]),s=q(({set:d})=>m=>{d(mr(t),p=>({...p,groupData:ur([p.groupData,m])}))},[t]),u=q(({set:d})=>m=>{d(mr(t),p=>({...p,groupData:m,isOpenDeleteGroupConfirm:!0}))},[t]),l=q(({set:d})=>()=>{d(mr(t),m=>({...m,isOpenDeleteGroupConfirm:!1}))},[t]),c=q(({set:d})=>()=>{d(mr(t),m=>({...m,isOpen:!0}))},[t]),f=q(({set:d})=>()=>{d(mr(t),m=>({...m,isOpen:!1}))},[t]);return{isOpen:r,isOpenDeleteGroupConfirm:o,groupData:n,createNewGroup:i,editGroup:a,updateGroup:s,openDeleteGroupConfirm:u,closeDeleteGroupConfirm:l,openEditor:c,closeEditor:f}},Mi=Mb;var $d=w(by()),Ib=e=>"#"+Hc(e).substring(0,6),wb=(e,t)=>{let r=Ib(e);return t?Xd(r,.75,.9):Xd(r,.3,.95)},_b=e=>(0,$d.default)(e,{allowedTags:["span","br"],allowedAttributes:{span:["contenteditable","style","data-variable-name"]},nonBooleanAttributes:[],disallowedTagsMode:"recursiveEscape"}),Ob=(e,t,r)=>`<span contenteditable="false" style="color: ${wb(e,r||!1)}" data-variable-name="${e}">{{${t}}}</span>`,Zd=e=>{let t=document.createElement("div");return t.contentEditable="true",t.innerHTML=_b(e),Array.from(t.childNodes).forEach(n=>{if(n.tagName==="SPAN"){let o=n,a=`{{${o.getAttribute("data-variable-name")}}}`;a&&(o.innerHTML=a)}}),t.innerText},hr=(e,t,r)=>{let n=new Map;t.forEach(u=>{n.set(u.name,u)});let o=new Map;Array.from(n.values()).forEach(u=>{u.hint&&o.set(u.hint,u)});let i=/\{\{([^{}]+?)\}\}/g,a=document.createElement("textarea");a.textContent=e;let s=a.innerHTML;return a.remove(),s.replace(i,(u,l)=>{let c=o.get(l)||n.get(l);if(c){let f=c.name;return Ob(f,c.hint||f,r)}else return u})};function Xd(e,t,r){let n=parseInt(e.slice(1,3),16),o=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16),a=n/255,s=o/255,u=i/255,l=Math.max(a,s,u),c=Math.min(a,s,u),f=0;if(l!==c){let C=l-c;switch(l){case a:f=(s-u)/C+(s<u?6:0);break;case s:f=(u-a)/C+2;break;case u:f=(a-s)/C+4;break}f/=6}let d=Math.max(0,Math.min(1,t)),m=Math.max(0,Math.min(1,r)),p=(C,x,b)=>(b<0&&(b+=1),b>1&&(b-=1),b<1/6?C+(x-C)*6*b:b<1/2?x:b<2/3?C+(x-C)*(2/3-b)*6:C),h=d<.5?d*(1+m):d+m-d*m,g=2*d-h,v=Math.round(p(g,h,f+1/3)*255),y=Math.round(p(g,h,f)*255),E=Math.round(p(g,h,f-1/3)*255);return`#${v.toString(16).padStart(2,"0")}${y.toString(16).padStart(2,"0")}${E.toString(16).padStart(2,"0")}`}var JO=(e,t,r)=>{if(!e)return!1;if((r()?.rangeCount||0)===0)return e.focus(),!1;let i=r()?.getRangeAt(0)?.cloneRange();if(!i)return e.focus(),!1;let a=i.cloneRange();if(!t){a.selectNodeContents(e),a.collapse(!1);let u=r();return u?.removeAllRanges(),u?.addRange(a),!0}let s=Array.from(e.childNodes||[]);for(let u of s){a.setStart(s[0],0);let l=u.nodeType===3?u.nodeValue.length:u.nodeName==="BR"?0:1;a.setEnd(u,l);let c=a?.toString();if(c?.startsWith(t)||c?.startsWith(t.replace(/\n$/,""))){if(u.nodeType===3)for(let d=0;d<=l&&(a.setEnd(u,d),a?.toString()!==t);d++);else a.setStartAfter(u),a.setEndAfter(u);a.collapse(!1),e.focus();let f=r();return f?.removeAllRanges(),f?.addRange(a),u.nodeType!==3&&u?.scrollIntoView(),!0}}return!1};var Lt=vt({key:"PromptTemplateEditorStateFamily",default:{isDarkMode:!1,template:"",variables:[],isOpenEditVariableModal:!1,editVariable:{name:"",hint:"",type:"text"},html:""}}),Jd=()=>{let{panelId:e}=ye(),{isDarkMode:t,template:r,variables:n,editVariable:o,html:i,isOpenEditVariableModal:a}=oe(Lt(e)),s=q(({set:g})=>v=>{let y=Zd(v);g(Lt(e),E=>({...E,template:y,html:hr(y,E.variables,E.isDarkMode)}))},[e]),u=q(({set:g})=>v=>{g(Lt(e),y=>({...y,template:v,html:hr(v,y.variables,y.isDarkMode)}))},[e]),l=q(({set:g})=>v=>{g(Lt(e),y=>({...y,variables:v,html:hr(y.template,v,y.isDarkMode)}))},[e]),c=q(({set:g})=>v=>{g(Lt(e),y=>({...y,isDarkMode:v,html:hr(y.template,y.variables,v)}))},[e]),f=q(({set:g})=>v=>{g(Lt(e),y=>({...y,editVariable:v,isOpenEditVariableModal:!0}))},[e]),d=q(({set:g})=>()=>{g(Lt(e),v=>({...v,isOpenEditVariableModal:!1}))},[e]),m=q(({set:g})=>v=>{g(Lt(e),y=>({...y,editVariable:ur([y.editVariable,v])}))},[e]),p=q(({set:g})=>v=>{g(Lt(e),y=>{let E=y.template.replaceAll(`{{${v.name}}}`,""),S=y.variables.filter(x=>x.name!==v.name),C=hr(E,S,y.isDarkMode);return{...y,template:E,variables:S,html:C}})},[e]),h=q(({set:g})=>v=>{g(Lt(e),y=>{let E=y.variables.find(S=>S.name===v.name);if(E){let S=y.template.replaceAll(`{{${E.hint}}}`,`{{${v.hint}}}`),C=y.variables.map(b=>b.name===v.name?v:b),x=hr(S,C,y.isDarkMode);return{...y,template:S,variables:C,html:x}}else{let S=y.variables.concat(v),C=hr(y.template,S,y.isDarkMode);return{...y,variables:S,html:C}}}),d()},[e]);return{isDarkMode:t,template:r,variables:n,html:i,editVariable:o,htmlToTemplate:s,setTemplate:u,setVariables:l,deleteVariable:p,setIsDarkMode:c,isOpenEditVariableModal:a,openEditVariableModal:f,closeEditVariableModal:d,updateVariable:m,saveEditVariable:h}};var Qd=w(O());var Et=vt({key:"LiteContextMenuPromptEditorStateFamily",default:{isOpenDeletePromptConfirm:!1,isHoverSecondaryElement:!1,isOpen:!1,promptData:null,originalPromptData:null,isOpenDiscardConfirmModal:!1}}),Db=()=>{let{panelId:e}=ye(),{isOpen:t,promptData:r,isHoverSecondaryElement:n,isOpenDeletePromptConfirm:o,isOpenDiscardConfirmModal:i,originalPromptData:a}=oe(Et(e)),{setVariables:s,setTemplate:u}=Jd(),l=q(({set:x})=>b=>{let T={...{prompt_icon:void 0,type:"chat_complete",parent_prompt_id:"",prompt_id:"",prompt_title:"",labels:[],variables:[qt.PRESET_VARIABLE__AI_RESPONSE_TONE,qt.PRESET_VARIABLE__AI_RESPONSE_WRITING_STYLE],output:[qt.OUTPUT_PRESET_VARIABLE__CHAT_COMPLETE],prompt_template:{default:""},optional_prompt_template:{AI_RESPONSE_WRITING_STYLE:"Your response style should be {{AI_RESPONSE_WRITING_STYLE}};",AI_RESPONSE_TONE:"The tone of your response should be {{AI_RESPONSE_TONE}};"},visibility_settings:{allowed_domains:[],blocked_domains:[],use_allow_list:!1},display_order:0,...b},...b};s(T.variables),u(T.prompt_template?.default||""),x(Et(e),{isOpen:!0,promptData:T,isHoverSecondaryElement:!1,isOpenDeletePromptConfirm:!1,isOpenDiscardConfirmModal:!1,originalPromptData:T})},[u,s,e]),c=q(({set:x})=>async b=>{if(b.prompt_id){let I=await yt.getContextMenuDetail(b.prompt_id);I&&(b=I)}s(b.variables),u(b.prompt_template?.default||""),x(Et(e),{isOpen:!0,promptData:b,isHoverSecondaryElement:!1,isOpenDeletePromptConfirm:!1,isOpenDiscardConfirmModal:!1,originalPromptData:b})},[e]),f=q(({set:x})=>async b=>{x(Et(e),I=>({...I,promptData:b,isOpenDeletePromptConfirm:!0}))},[e]),d=q(({set:x})=>()=>{x(Et(e),b=>({...b,isOpenDeletePromptConfirm:!1}))},[e]),m=q(({set:x})=>()=>{x(Et(e),b=>({...b,isOpenDiscardConfirmModal:!0}))},[e]),p=q(({set:x})=>()=>{x(Et(e),b=>({...b,isOpenDiscardConfirmModal:!1}))},[e]),h=q(({set:x})=>b=>{x(Et(e),I=>({...I,promptData:ur([I.promptData,b])}))},[e]),g=q(({set:x})=>()=>{x(Et(e),b=>({...b,isOpen:!0}))},[e]),v=q(({set:x})=>()=>{x(Et(e),b=>({...b,originalPromptData:null,isOpen:!1}))},[e]),y=q(({set:x})=>b=>{x(Et(e),I=>({...I,isHoverSecondaryElement:b}))},[e]),E=(0,Qd.useMemo)(()=>({transition:"opacity 0.3s ease-in-out",opacity:1}),[n]);return{isOpen:t,promptData:r,createNewPrompt:l,editPrompt:c,isOpenDeletePromptConfirm:o,openDeletePromptConfirm:f,closeDeletePromptConfirm:d,updatePrompt:h,openEditor:g,closeEditor:v,isHoverSecondaryElement:n,secondaryElementSx:E,secondaryElementMouseEnter:()=>{y(!0)},secondaryElementMouseLeave:()=>{y(!1)},setIsHoverSecondaryElement:y,isOpenDiscardConfirmModal:i,openDiscardConfirmModal:m,closeDiscardConfirmModal:p,originalPromptData:a}},Ii=Db;var ir=w(O());var Ve=w(O());var fu=w(O()),kb=({label:e,onClick:t})=>fu.default.createElement(Jo,{sx:{padding:"0px 8px!important",borderRadius:"4px"},onClick:t},fu.default.createElement(Qo,{primary:e,sx:{whiteSpace:"nowrap","& .use-chat-gpt-ai--MuiTypography-root":{fontSize:"14px",color:r=>r.palette.mode==="dark"?"#fff":"#000"}}})),ep=kb;var np=w(tp()),op=w(rp());var ue=w(O()),jb=e=>{let{t}=xe(),{isDropTarget:r=!1,disabledDrag:n=!1,isActive:o=!1,node:i,params:{depth:a,isOpen:s,onToggle:u,handleRef:l},onEdit:c,rootId:f,onDelete:d}=e,m=i.parent===f,p=i.data?.type==="group",h=20,[g,v]=(0,ue.useState)(!1),[y,E]=(0,ue.useState)(!1),S=(0,ue.useMemo)(()=>Math.max(0,a)*24+h+8,[h]),C=(0,ue.useMemo)(()=>`lite-context-menu--prompt-item--${i.text.replace(/ /g,"-")}`,[i.text]),x=t(p?"package__features:context_menu__lite_editor__modal__edit_group__title__edit_this":"package__features:context_menu__lite_editor__modal__edit_tool__title__edit_this"),b=t(p?"package__features:context_menu__lite_editor__modal__edit_group__title__delete_this":"package__features:context_menu__lite_editor__modal__edit_tool__title__delete_this");return ue.default.createElement(ee,{"data-testid":C,direction:"row",alignItems:"center",className:r?"dragTarget":"",height:32,sx:{padding:"6px 8px",boxSizing:"border-box",position:"relative",cursor:p?"pointer":"default",bgcolor:I=>y||o?I.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(55, 53, 47, 0.08)":"unset",borderRadius:"6px",pl:S+"px"},onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),onClick:()=>{p&&u()}},!n&&ue.default.createElement(Pe,{sx:{position:"absolute",left:Math.max(0,S-h)+"px",flexShrink:0,height:h,width:h,opacity:n?0:1,"& + *":{'&[data-testid="settings--my-own-prompts--prompt-item--expand-icon"]':{ml:"4px"},ml:"8px"}},"date-testid":"settings--my-own-prompts--prompt-item--drag-handle"},ue.default.createElement("div",{ref:l},ue.default.createElement(np.default,{sx:{fontSize:h,cursor:"move",color:"text.secondary"}}))),p&&ue.default.createElement(op.default,{"data-testid":"settings--my-own-prompts--prompt-item--expand-icon",sx:{mr:1,flexShrink:0,transform:s?"rotate(0)":"rotate(-90deg)",fontSize:20,color:"text.primary"}}),i.data?.prompt_icon&&ue.default.createElement(Te,{icon:i.data.prompt_icon,sx:{mr:1,flexShrink:0,fontSize:16,color:"text.secondary"}}),ue.default.createElement(ee,{direction:"row",alignItems:"center",spacing:1,flex:1,width:0,sx:{height:"100%"}},ue.default.createElement(ee,{flex:1,width:0,direction:"row",alignItems:"center",spacing:1,height:"100%",sx:{}},p&&m?ue.default.createElement(me,{fontSize:12,color:"text.secondary",sx:{overflow:"hidden",textOverflow:"ellipsis",WebkitLineClamp:1,WebkitBoxOrient:"vertical",wordBreak:"break-word",whiteSpace:"nowrap"}},i.data?.prompt_title):ue.default.createElement(me,{fontSize:14,color:"text.primary",sx:{overflow:"hidden",textOverflow:"ellipsis",WebkitLineClamp:1,WebkitBoxOrient:"vertical",wordBreak:"break-word",whiteSpace:"nowrap"}},i.data?.prompt_title)),ue.default.createElement(ee,{direction:"row",alignItems:"center",flexShrink:0,onClick:I=>{I.stopPropagation(),I.preventDefault()},sx:{gap:"8px",height:"100%"}},ue.default.createElement(Ar,{placement:"top-end",disabledClickEvent:!0,onClick:async()=>{i.data&&(v(!0),await c?.(i.data),v(!1))},title:x,tooltipProps:{disableInteractive:!0},sx:{width:"20px",height:"20px"}},ue.default.createElement(Te,{icon:g?"Loading":"PromptEdit",sx:{fontSize:"16px!important",color:"text.secondary",flexShrink:0,scale:g?"0.8":"1"}})),ue.default.createElement(Ar,{placement:"top-end",disabledClickEvent:!0,tooltipProps:{disableInteractive:!0},title:b,sx:{width:"20px",height:"20px"},onClick:()=>{i.data?.prompt_id&&d?.(i.data)}},ue.default.createElement(Te,{icon:"Delete",sx:{fontSize:"16px!important",color:"text.secondary"}})))))},ip=(0,ue.memo)(jb);var Rt=w(O()),zb=e=>{let{liteContextMenuItem:t,suffix:r,hoverSuffix:n,onClick:o,disabled:i,selected:a}=e,[s,u]=(0,Rt.useState)(!1);return t.type==="group"?Rt.default.createElement(ee,{direction:"row",sx:{padding:"0 8px",height:"32px",boxSizing:"border-box",alignItems:"center",width:"100%"}},Rt.default.createElement(me,{textAlign:"left",fontSize:"12px",fontWeight:400,lineHeight:1.5,color:"text.secondary",noWrap:!0},t.prompt_title)):Rt.default.createElement(Xn,{disabled:i,sx:{padding:"6px 8px",height:"32px",boxSizing:"border-box",gap:"12px",alignItems:"center",borderRadius:"4px",color:"text.primary",minHeight:"unset","&:hover":{color:"text.primary"},...a?{bgcolor:l=>l.palette.mode==="dark"?"rgba(255, 255, 255, 0.06)!important":"rgba(0, 0, 0, 0.04)!important"}:{}},onMouseEnter:()=>{u(!0)},onMouseLeave:()=>{u(!1)},onClick:o},t.prompt_icon&&Rt.default.createElement(Te,{sx:{color:"text.secondary",flexShrink:0},icon:t.prompt_icon,size:20}),Rt.default.createElement(me,{fontSize:"14px",fontWeight:400,textAlign:"left",color:"text.primary",noWrap:!0,flex:1,width:0},t.prompt_title),Rt.default.createElement(ee,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"8px","&:empty":{display:"none"}},onClick:l=>{l.stopPropagation()}},!s&&r,s?n||r||Rt.default.createElement(Te,{icon:"KeyboardReturn",sx:{fontSize:"16px",color:"text.secondary"}}):null))},ap=zb;var A=w(O(),1);function du(e){let t=null;return()=>(t==null&&(t=e()),t)}function sp(e,t){return e.filter(r=>r!==t)}function up(e,t){let r=new Set,n=i=>r.add(i);e.forEach(n),t.forEach(n);let o=[];return r.forEach(i=>o.push(i)),o}var Di=class{enter(t){let r=this.entered.length,n=o=>this.isNodeInDocument(o)&&(!o.contains||o.contains(t));return this.entered=up(this.entered.filter(n),[t]),r===0&&this.entered.length>0}leave(t){let r=this.entered.length;return this.entered=sp(this.entered.filter(this.isNodeInDocument),t),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}};var Pi=class{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return null}})})}loadDataTransfer(t){if(t){let r={};Object.keys(this.config.exposeProperties).forEach(n=>{let o=this.config.exposeProperties[n];o!=null&&(r[n]={value:o(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,r){return r===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}};var lo={};xy(lo,{FILE:()=>pu,HTML:()=>gu,TEXT:()=>hu,URL:()=>mu});var pu="__NATIVE_FILE__",mu="__NATIVE_URL__",hu="__NATIVE_TEXT__",gu="__NATIVE_HTML__";function Ai(e,t,r){let n=t.reduce((o,i)=>o||e.getData(i),"");return n??r}var Li={[pu]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[gu]:{exposeProperties:{html:(e,t)=>Ai(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[mu]:{exposeProperties:{urls:(e,t)=>Ai(e,t,"").split(`
`),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[hu]:{exposeProperties:{text:(e,t)=>Ai(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function lp(e,t){let r=Li[e];if(!r)throw new Error(`native type ${e} has no configuration`);let n=new Pi(r);return n.loadDataTransfer(t),n}function Ri(e){if(!e)return null;let t=Array.prototype.slice.call(e.types||[]);return Object.keys(Li).filter(r=>{let n=Li[r];return n?.matchesTypes?n.matchesTypes.some(o=>t.indexOf(o)>-1):!1})[0]||null}var cp=du(()=>/firefox/i.test(navigator.userAgent)),vu=du(()=>!!window.safari);var co=class{interpolate(t){let{xs:r,ys:n,c1s:o,c2s:i,c3s:a}=this,s=r.length-1;if(t===r[s])return n[s];let u=0,l=a.length-1,c;for(;u<=l;){c=Math.floor(.5*(u+l));let m=r[c];if(m<t)u=c+1;else if(m>t)l=c-1;else return n[c]}s=Math.max(0,l);let f=t-r[s],d=f*f;return n[s]+o[s]*f+i[s]*d+a[s]*f*d}constructor(t,r){let{length:n}=t,o=[];for(let p=0;p<n;p++)o.push(p);o.sort((p,h)=>t[p]<t[h]?-1:1);let i=[],a=[],s=[],u,l;for(let p=0;p<n-1;p++)u=t[p+1]-t[p],l=r[p+1]-r[p],a.push(u),i.push(l),s.push(l/u);let c=[s[0]];for(let p=0;p<a.length-1;p++){let h=s[p],g=s[p+1];if(h*g<=0)c.push(0);else{u=a[p];let v=a[p+1],y=u+v;c.push(3*y/((y+v)/h+(y+u)/g))}}c.push(s[s.length-1]);let f=[],d=[],m;for(let p=0;p<c.length-1;p++){m=s[p];let h=c[p],g=1/a[p],v=h+c[p+1]-m-m;f.push((m-h-v)*g),d.push(v*g*g)}this.xs=t,this.ys=r,this.c1s=c,this.c2s=f,this.c3s=d}};var Gb=1;function xu(e){let t=e.nodeType===Gb?e:e.parentElement;if(!t)return null;let{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function fo(e){return{x:e.clientX,y:e.clientY}}function Wb(e){var t;return e.nodeName==="IMG"&&(cp()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(e)))}function qb(e,t,r,n){let o=e?t.width:r,i=e?t.height:n;return vu()&&e&&(i/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:i}}function fp(e,t,r,n,o){let i=Wb(t),s=xu(i?e:t),u={x:r.x-s.x,y:r.y-s.y},{offsetWidth:l,offsetHeight:c}=e,{anchorX:f,anchorY:d}=n,{dragPreviewWidth:m,dragPreviewHeight:p}=qb(i,t,l,c),h=()=>{let x=new co([0,.5,1],[u.y,u.y/c*p,u.y+p-c]).interpolate(d);return vu()&&i&&(x+=(window.devicePixelRatio-1)*p),x},g=()=>new co([0,.5,1],[u.x,u.x/l*m,u.x+m-l]).interpolate(f),{offsetX:v,offsetY:y}=o,E=v===0||v,S=y===0||y;return{x:E?v:g(),y:S?y:h()}}var ki=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,r){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=r}};function Kb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable}))),n.forEach(function(o){Kb(e,o,r[o])})}return e}var Ni=class{profile(){var t,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){let t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){let t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,r,n){this.sourceNodes.set(t,r),this.sourceNodeOptions.set(t,n);let o=a=>this.handleDragStart(a,t),i=a=>this.handleSelectStart(a);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",o),r.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),r.removeEventListener("dragstart",o),r.removeEventListener("selectstart",i),r.setAttribute("draggable","false")}}connectDropTarget(t,r){let n=a=>this.handleDragEnter(a,t),o=a=>this.handleDragOver(a,t),i=a=>this.handleDrop(a,t);return r.addEventListener("dragenter",n),r.addEventListener("dragover",o),r.addEventListener("drop",i),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",o),r.removeEventListener("drop",i)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){let t=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(t);return dp({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){let t=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(t);return dp({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){let t=this.monitor.getItemType();return Object.keys(lo).some(r=>lo[r]===t)}beginDragNativeItem(t,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=lp(t,r),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;let r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,r){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(t,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(t,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(t,r){this.dropTargetIds.unshift(r)}constructor(t,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=o=>{let i=this.sourceNodes.get(o);return i&&xu(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=o=>!!(o&&this.document&&this.document.body&&this.document.body.contains(o)),this.endDragIfSourceWasRemovedFromDOM=()=>{let o=this.currentDragSourceNode;o==null||this.isNodeInDocument(o)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=o=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(o||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=o=>{if(o.defaultPrevented)return;let{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;let a=fo(o);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:a});let{dataTransfer:s}=o,u=Ri(s);if(this.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){let c=this.monitor.getSourceId(),f=this.sourceNodes.get(c),d=this.sourcePreviewNodes.get(c)||f;if(d){let{anchorX:m,anchorY:p,offsetX:h,offsetY:g}=this.getCurrentSourcePreviewNodeOptions(),E=fp(f,d,a,{anchorX:m,anchorY:p},{offsetX:h,offsetY:g});s.setDragImage(d,E.x,E.y)}}try{s?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(o.target);let{captureDraggingState:l}=this.getCurrentSourcePreviewNodeOptions();l?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(u)this.beginDragNativeItem(u);else{if(s&&!s.types&&(o.target&&!o.target.hasAttribute||!o.target.hasAttribute("draggable")))return;o.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=o=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(o.dataTransfer)}if(!this.enterLeaveCounter.enter(o.target)||this.monitor.isDragging())return;let{dataTransfer:s}=o,u=Ri(s);u&&this.beginDragNativeItem(u,s)},this.handleTopDragEnter=o=>{let{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=o.altKey,i.length>0&&this.actions.hover(i,{clientOffset:fo(o)}),i.some(s=>this.monitor.canDropOnTarget(s))&&(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=o=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(o.dataTransfer)}},this.handleTopDragOver=o=>{let{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect="none");return}this.altKeyPressed=o.altKey,this.lastClientOffset=fo(o),this.scheduleHover(i),(i||[]).some(s=>this.monitor.canDropOnTarget(s))?(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?o.preventDefault():(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=o=>{this.isDraggingNativeItem()&&o.preventDefault(),this.enterLeaveCounter.leave(o.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=o=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;o.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(o.dataTransfer)}else Ri(o.dataTransfer)&&o.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=o=>{let{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:fo(o)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=o=>{let i=o.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(o.preventDefault(),i.dragDrop()))},this.options=new ki(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new Di(this.isNodeInDocument)}};var Vi;function yu(){return Vi||(Vi=new Image,Vi.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Vi}var pp=function(t,r,n){return new Ni(t,r,n)};var ot=[];var mp=function(){return ot.some(function(e){return e.activeTargets.length>0})};var hp=function(){return ot.some(function(e){return e.skippedTargets.length>0})};var gp="ResizeObserver loop completed with undelivered notifications.",vp=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:gp}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=gp),window.dispatchEvent(e)};var Nr;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Nr||(Nr={}));var Tt=function(e){return Object.freeze(e)};var bu=function(){function e(t,r){this.inlineSize=t,this.blockSize=r,Tt(this)}return e}();var Su=function(){function e(t,r,n,o){return this.x=t,this.y=r,this.width=n,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Tt(this)}return e.prototype.toJSON=function(){var t=this,r=t.x,n=t.y,o=t.top,i=t.right,a=t.bottom,s=t.left,u=t.width,l=t.height;return{x:r,y:n,top:o,right:i,bottom:a,left:s,width:u,height:l}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}();var po=function(e){return e instanceof SVGElement&&"getBBox"in e},Fi=function(e){if(po(e)){var t=e.getBBox(),r=t.width,n=t.height;return!r&&!n}var o=e,i=o.offsetWidth,a=o.offsetHeight;return!(i||a||e.getClientRects().length)},Cu=function(e){var t;if(e instanceof Element)return!0;var r=(t=e?.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(r&&e instanceof r.Element)},xp=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1};var Vr=typeof window<"u"?window:{};var Bi=new WeakMap,yp=/auto|scroll/,Yb=/^tb|vertical/,Xb=/msie|trident/i.test(Vr.navigator&&Vr.navigator.userAgent),kt=function(e){return parseFloat(e||"0")},cn=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=!1),new bu((r?t:e)||0,(r?e:t)||0)},bp=Tt({devicePixelContentBoxSize:cn(),borderBoxSize:cn(),contentBoxSize:cn(),contentRect:new Su(0,0,0,0)}),Eu=function(e,t){if(t===void 0&&(t=!1),Bi.has(e)&&!t)return Bi.get(e);if(Fi(e))return Bi.set(e,bp),bp;var r=getComputedStyle(e),n=po(e)&&e.ownerSVGElement&&e.getBBox(),o=!Xb&&r.boxSizing==="border-box",i=Yb.test(r.writingMode||""),a=!n&&yp.test(r.overflowY||""),s=!n&&yp.test(r.overflowX||""),u=n?0:kt(r.paddingTop),l=n?0:kt(r.paddingRight),c=n?0:kt(r.paddingBottom),f=n?0:kt(r.paddingLeft),d=n?0:kt(r.borderTopWidth),m=n?0:kt(r.borderRightWidth),p=n?0:kt(r.borderBottomWidth),h=n?0:kt(r.borderLeftWidth),g=f+l,v=u+c,y=h+m,E=d+p,S=s?e.offsetHeight-E-e.clientHeight:0,C=a?e.offsetWidth-y-e.clientWidth:0,x=o?g+y:0,b=o?v+E:0,I=n?n.width:kt(r.width)-x-C,T=n?n.height:kt(r.height)-b-S,_=I+g+C+y,P=T+v+S+E,H=Tt({devicePixelContentBoxSize:cn(Math.round(I*devicePixelRatio),Math.round(T*devicePixelRatio),i),borderBoxSize:cn(_,P,i),contentBoxSize:cn(I,T,i),contentRect:new Su(f,u,I,T)});return Bi.set(e,H),H},Hi=function(e,t,r){var n=Eu(e,r),o=n.borderBoxSize,i=n.contentBoxSize,a=n.devicePixelContentBoxSize;switch(t){case Nr.DEVICE_PIXEL_CONTENT_BOX:return a;case Nr.BORDER_BOX:return o;default:return i}};var Tu=function(){function e(t){var r=Eu(t);this.target=t,this.contentRect=r.contentRect,this.borderBoxSize=Tt([r.borderBoxSize]),this.contentBoxSize=Tt([r.contentBoxSize]),this.devicePixelContentBoxSize=Tt([r.devicePixelContentBoxSize])}return e}();var Ui=function(e){if(Fi(e))return 1/0;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t};var Sp=function(){var e=1/0,t=[];ot.forEach(function(a){if(a.activeTargets.length!==0){var s=[];a.activeTargets.forEach(function(l){var c=new Tu(l.target),f=Ui(l.target);s.push(c),l.lastReportedSize=Hi(l.target,l.observedBox),f<e&&(e=f)}),t.push(function(){a.callback.call(a.observer,s,a.observer)}),a.activeTargets.splice(0,a.activeTargets.length)}});for(var r=0,n=t;r<n.length;r++){var o=n[r];o()}return e};var Mu=function(e){ot.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(o){o.isActive()&&(Ui(o.target)>e?r.activeTargets.push(o):r.skippedTargets.push(o))})})};var Cp=function(){var e=0;for(Mu(e);mp();)e=Sp(),Mu(e);return hp()&&vp(),e>0};var Iu,Ep=[],$b=function(){return Ep.splice(0).forEach(function(e){return e()})},Tp=function(e){if(!Iu){var t=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return $b()}).observe(r,n),Iu=function(){r.textContent="".concat(t?t--:t++)}}Ep.push(e),Iu()};var Mp=function(e){Tp(function(){requestAnimationFrame(e)})};var ji=0,Zb=function(){return!!ji},Jb=250,Qb={attributes:!0,characterData:!0,childList:!0,subtree:!0},Ip=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],wp=function(e){return e===void 0&&(e=0),Date.now()+e},wu=!1,e0=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var r=this;if(t===void 0&&(t=Jb),!wu){wu=!0;var n=wp(t);Mp(function(){var o=!1;try{o=Cp()}finally{if(wu=!1,t=n-wp(),!Zb())return;o?r.run(1e3):t>0?r.run(t):r.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,r=function(){return t.observer&&t.observer.observe(document.body,Qb)};document.body?r():Vr.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Ip.forEach(function(r){return Vr.addEventListener(r,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Ip.forEach(function(r){return Vr.removeEventListener(r,t.listener,!0)}),this.stopped=!0)},e}(),zi=new e0,_u=function(e){!ji&&e>0&&zi.start(),ji+=e,!ji&&zi.stop()};var t0=function(e){return!po(e)&&!xp(e)&&getComputedStyle(e).display==="inline"},_p=function(){function e(t,r){this.target=t,this.observedBox=r||Nr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=Hi(this.target,this.observedBox,!0);return t0(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}();var Op=function(){function e(t,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=r}return e}();var Gi=new WeakMap,Dp=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},mo=function(){function e(){}return e.connect=function(t,r){var n=new Op(t,r);Gi.set(t,n)},e.observe=function(t,r,n){var o=Gi.get(t),i=o.observationTargets.length===0;Dp(o.observationTargets,r)<0&&(i&&ot.push(o),o.observationTargets.push(new _p(r,n&&n.box)),_u(1),zi.schedule())},e.unobserve=function(t,r){var n=Gi.get(t),o=Dp(n.observationTargets,r),i=n.observationTargets.length===1;o>=0&&(i&&ot.splice(ot.indexOf(n),1),n.observationTargets.splice(o,1),_u(-1))},e.disconnect=function(t){var r=this,n=Gi.get(t);n.observationTargets.slice().forEach(function(o){return r.unobserve(t,o.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}();var Ou=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");mo.connect(this,t)}return e.prototype.observe=function(t,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Cu(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");mo.observe(this,t,r)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Cu(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");mo.unobserve(this,t)},e.prototype.disconnect=function(){mo.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();var Du=function(e,t){return Du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Du(e,t)};function Wi(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Du(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var M=function(){return M=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},M.apply(this,arguments)};function pe(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Y(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function we(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var ku=w(O(),1),ho=w(O(),1);var Lp=w(O(),1),Rp=w(O(),1);var r0="production",qi=typeof process>"u"||process.env===void 0?r0:"production";var Xt=function(e){return{isEnabled:function(t){return e.some(function(r){return!!t[r]})}}},Fr={measureLayout:Xt(["layout","layoutId","drag"]),animation:Xt(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:Xt(["exit"]),drag:Xt(["drag","dragControls"]),focus:Xt(["whileFocus"]),hover:Xt(["whileHover","onHoverStart","onHoverEnd"]),tap:Xt(["whileTap","onTap","onTapStart","onTapCancel"]),pan:Xt(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:Xt(["whileInView","onViewportEnter","onViewportLeave"])};function Pp(e){for(var t in e)e[t]!==null&&(t==="projectionNodeConstructor"?Fr.projectionNodeConstructor=e[t]:Fr[t].Component=e[t])}var Br=function(){},Me=function(){};var Ap=w(O(),1),Ki=(0,Ap.createContext)({strict:!1});var kp=Object.keys(Fr),n0=kp.length;function Np(e,t,r){var n=[],o=(0,Rp.useContext)(Ki);if(!t)return null;qi!=="production"&&r&&o.strict&&Me(!1,"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.");for(var i=0;i<n0;i++){var a=kp[i],s=Fr[a],u=s.isEnabled,l=s.Component;u(e)&&l&&n.push(Lp.createElement(l,M({key:a},e,{visualElement:t})))}return n}var Vp=w(O(),1),fn=(0,Vp.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"});var Yi=w(O(),1),Hr=(0,Yi.createContext)({});function Fp(){return(0,Yi.useContext)(Hr).visualElement}var Ur=w(O(),1);var Bp=w(O(),1),gr=(0,Bp.createContext)(null);var Xi=w(O(),1);var Nt=typeof document<"u";var Pu=Nt?Xi.useLayoutEffect:Xi.useEffect;var $i=w(O(),1);var Au={current:null},Hp=!1;function o0(){if(Hp=!0,!!Nt)if(window.matchMedia){var e=window.matchMedia("(prefers-reduced-motion)"),t=function(){return Au.current=e.matches};e.addListener(t),t()}else Au.current=!1}function i0(){!Hp&&o0();var e=Y((0,$i.useState)(Au.current),1),t=e[0];return t}function Up(){var e=i0(),t=(0,$i.useContext)(fn).reducedMotion;return t==="never"?!1:t==="always"?!0:e}function jp(e,t,r,n){var o=(0,Ur.useContext)(Ki),i=Fp(),a=(0,Ur.useContext)(gr),s=Up(),u=(0,Ur.useRef)(void 0);n||(n=o.renderer),!u.current&&n&&(u.current=n(e,{visualState:t,parent:i,props:r,presenceId:a?.id,blockInitialAnimation:a?.initial===!1,shouldReduceMotion:s}));var l=u.current;return Pu(function(){l?.syncRender()}),(0,Ur.useEffect)(function(){var c;(c=l?.animationState)===null||c===void 0||c.animateChanges()}),Pu(function(){return function(){return l?.notifyUnmount()}},[]),l}var zp=w(O(),1);function $t(e){return typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Gp(e,t,r){return(0,zp.useCallback)(function(n){var o;n&&((o=e.mount)===null||o===void 0||o.call(e,n)),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):$t(r)&&(r.current=n))},[t])}var Ji=w(O(),1);function Lu(e){return Array.isArray(e)}function We(e){return typeof e=="string"||Lu(e)}function a0(e){var t={};return e.forEachValue(function(r,n){return t[n]=r.get()}),t}function s0(e){var t={};return e.forEachValue(function(r,n){return t[n]=r.getVelocity()}),t}function Ru(e,t,r,n,o){var i;return n===void 0&&(n={}),o===void 0&&(o={}),typeof t=="function"&&(t=t(r??e.custom,n,o)),typeof t=="string"&&(t=(i=e.variants)===null||i===void 0?void 0:i[t]),typeof t=="function"&&(t=t(r??e.custom,n,o)),t}function jr(e,t,r){var n=e.getProps();return Ru(n,t,r??n.custom,a0(e),s0(e))}function zr(e){var t;return typeof((t=e.animate)===null||t===void 0?void 0:t.start)=="function"||We(e.initial)||We(e.animate)||We(e.whileHover)||We(e.whileDrag)||We(e.whileTap)||We(e.whileFocus)||We(e.exit)}function Zi(e){return!!(zr(e)||e.variants)}function Wp(e,t){if(zr(e)){var r=e.initial,n=e.animate;return{initial:r===!1||We(r)?r:void 0,animate:We(n)?n:void 0}}return e.inherit!==!1?t:{}}function Kp(e){var t=Wp(e,(0,Ji.useContext)(Hr)),r=t.initial,n=t.animate;return(0,Ji.useMemo)(function(){return{initial:r,animate:n}},[qp(r),qp(n)])}function qp(e){return Array.isArray(e)?e.join(" "):e}var Yp=w(O(),1);function vr(e){var t=(0,Yp.useRef)(null);return t.current===null&&(t.current=e()),t.current}var xr={hasAnimatedSinceResize:!0,hasEverUpdated:!1};var u0=1;function Xp(){return vr(function(){if(xr.hasEverUpdated)return u0++})}var $p=w(O(),1),Qi=(0,$p.createContext)({});var Jp=w(O(),1);var Zp=w(O(),1),ea=(0,Zp.createContext)({});function Qp(e,t,r,n){var o,i=t.layoutId,a=t.layout,s=t.drag,u=t.dragConstraints,l=t.layoutScroll,c=(0,Jp.useContext)(ea);!n||!r||r?.projection||(r.projection=new n(e,r.getLatestValues(),(o=r.parent)===null||o===void 0?void 0:o.projection),r.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||u&&$t(u),visualElement:r,scheduleRender:function(){return r.scheduleRender()},animationType:typeof a=="string"?a:"both",initialPromotionConfig:c,layoutScroll:l}))}var em=w(O(),1),tm=function(e){Wi(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},t.prototype.componentDidUpdate=function(){},t.prototype.updateProps=function(){var r=this.props,n=r.visualElement,o=r.props;n&&n.setProps(o)},t.prototype.render=function(){return this.props.children},t}(em.default.Component);function rm(e){var t=e.preloadedFeatures,r=e.createVisualElement,n=e.projectionNodeConstructor,o=e.useRender,i=e.useVisualState,a=e.Component;t&&Pp(t);function s(u,l){var c=l0(u);u=M(M({},u),{layoutId:c});var f=(0,ho.useContext)(fn),d=null,m=Kp(u),p=f.isStatic?void 0:Xp(),h=i(u,f.isStatic);return!f.isStatic&&Nt&&(m.visualElement=jp(a,h,M(M({},f),u),r),Qp(p,u,m.visualElement,n||Fr.projectionNodeConstructor),d=Np(u,m.visualElement,t)),ku.createElement(tm,{visualElement:m.visualElement,props:M(M({},f),u)},d,ku.createElement(Hr.Provider,{value:m},o(a,u,p,Gp(h,m.visualElement,l),h,f.isStatic,m.visualElement)))}return(0,ho.forwardRef)(s)}function l0(e){var t,r=e.layoutId,n=(t=(0,ho.useContext)(Qi))===null||t===void 0?void 0:t.id;return n&&r!==void 0?n+"-"+r:r}function nm(e){function t(n,o){return o===void 0&&(o={}),rm(e(n,o))}if(typeof Proxy>"u")return t;var r=new Map;return new Proxy(t,{get:function(n,o){return r.has(o)||r.set(o,t(o)),r.get(o)}})}var om=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function dn(e){return typeof e!="string"||e.includes("-")?!1:!!(om.indexOf(e)>-1||/[A-Z]/.test(e))}var wm=w(O(),1);var gm=w(O(),1);var pn={};function im(e){Object.assign(pn,e)}var ta=["","X","Y","Z"],c0=["translate","scale","rotate","skew"],mn=["transformPerspective","x","y","z"];c0.forEach(function(e){return ta.forEach(function(t){return mn.push(e+t)})});function am(e,t){return mn.indexOf(e)-mn.indexOf(t)}var f0=new Set(mn);function Vt(e){return f0.has(e)}var d0=new Set(["originX","originY","originZ"]);function ra(e){return d0.has(e)}function na(e,t){var r=t.layout,n=t.layoutId;return Vt(e)||ra(e)||(r||n!==void 0)&&(!!pn[e]||e==="opacity")}var Re=function(e){return!!(e!==null&&typeof e=="object"&&e.getVelocity)};var p0={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function sm(e,t,r,n){var o=e.transform,i=e.transformKeys,a=t.enableHardwareAcceleration,s=a===void 0?!0:a,u=t.allowTransformNone,l=u===void 0?!0:u,c="";i.sort(am);for(var f=!1,d=i.length,m=0;m<d;m++){var p=i[m];c+="".concat(p0[p]||p,"(").concat(o[p],") "),p==="z"&&(f=!0)}return!f&&s?c+="translateZ(0)":c=c.trim(),n?c=n(o,r?"":c):l&&r&&(c="none"),c}function um(e){var t=e.originX,r=t===void 0?"50%":t,n=e.originY,o=n===void 0?"50%":n,i=e.originZ,a=i===void 0?0:i;return"".concat(r," ").concat(o," ").concat(a)}function oa(e){return e.startsWith("--")}var lm=function(e,t){return t&&typeof e=="number"?t.transform(e):e};var ia=(e,t)=>r=>Math.max(Math.min(r,t),e),yr=e=>e%1?Number(e.toFixed(5)):e,br=/(-)?([\d]*\.?[\d])+/g,aa=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,cm=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function Zt(e){return typeof e=="string"}var $e={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Jt=Object.assign(Object.assign({},$e),{transform:ia(0,1)}),hn=Object.assign(Object.assign({},$e),{default:1});var go=e=>({test:t=>Zt(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Mt=go("deg"),ke=go("%"),N=go("px"),Nu=go("vh"),Vu=go("vw"),sa=Object.assign(Object.assign({},ke),{parse:e=>ke.parse(e)/100,transform:e=>ke.transform(e*100)});var gn=(e,t)=>r=>!!(Zt(r)&&cm.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),ua=(e,t,r)=>n=>{if(!Zt(n))return n;let[o,i,a,s]=n.match(br);return{[e]:parseFloat(o),[t]:parseFloat(i),[r]:parseFloat(a),alpha:s!==void 0?parseFloat(s):1}};var Ft={test:gn("hsl","hue"),parse:ua("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+ke.transform(yr(t))+", "+ke.transform(yr(r))+", "+yr(Jt.transform(n))+")"};var m0=ia(0,255),la=Object.assign(Object.assign({},$e),{transform:e=>Math.round(m0(e))}),it={test:gn("rgb","red"),parse:ua("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+la.transform(e)+", "+la.transform(t)+", "+la.transform(r)+", "+yr(Jt.transform(n))+")"};function h0(e){let t="",r="",n="",o="";return e.length>5?(t=e.substr(1,2),r=e.substr(3,2),n=e.substr(5,2),o=e.substr(7,2)):(t=e.substr(1,1),r=e.substr(2,1),n=e.substr(3,1),o=e.substr(4,1),t+=t,r+=r,n+=n,o+=o),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:o?parseInt(o,16)/255:1}}var vn={test:gn("#"),parse:h0,transform:it.transform};var he={test:e=>it.test(e)||vn.test(e)||Ft.test(e),parse:e=>it.test(e)?it.parse(e):Ft.test(e)?Ft.parse(e):vn.parse(e),transform:e=>Zt(e)?e:e.hasOwnProperty("red")?it.transform(e):Ft.transform(e)};var fm="${c}",dm="${n}";function g0(e){var t,r,n,o;return isNaN(e)&&Zt(e)&&((r=(t=e.match(br))===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0)+((o=(n=e.match(aa))===null||n===void 0?void 0:n.length)!==null&&o!==void 0?o:0)>0}function pm(e){typeof e=="number"&&(e=`${e}`);let t=[],r=0,n=e.match(aa);n&&(r=n.length,e=e.replace(aa,fm),t.push(...n.map(he.parse)));let o=e.match(br);return o&&(e=e.replace(br,dm),t.push(...o.map($e.parse))),{values:t,numColors:r,tokenised:e}}function mm(e){return pm(e).values}function hm(e){let{values:t,numColors:r,tokenised:n}=pm(e),o=t.length;return i=>{let a=n;for(let s=0;s<o;s++)a=a.replace(s<r?fm:dm,s<r?he.transform(i[s]):yr(i[s]));return a}}var v0=e=>typeof e=="number"?0:e;function x0(e){let t=mm(e);return hm(e)(t.map(v0))}var _e={test:g0,parse:mm,createTransformer:hm,getAnimatableNone:x0};var y0=new Set(["brightness","contrast","saturate","opacity"]);function b0(e){let[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;let[n]=r.match(br)||[];if(!n)return e;let o=r.replace(n,""),i=y0.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+o+")"}var S0=/([a-z-]*)\(.*?\)/g,xn=Object.assign(Object.assign({},_e),{getAnimatableNone:e=>{let t=e.match(S0);return t?t.map(b0).join(" "):e}});var Fu=M(M({},$e),{transform:Math.round});var ca={borderWidth:N,borderTopWidth:N,borderRightWidth:N,borderBottomWidth:N,borderLeftWidth:N,borderRadius:N,radius:N,borderTopLeftRadius:N,borderTopRightRadius:N,borderBottomRightRadius:N,borderBottomLeftRadius:N,width:N,maxWidth:N,height:N,maxHeight:N,size:N,top:N,right:N,bottom:N,left:N,padding:N,paddingTop:N,paddingRight:N,paddingBottom:N,paddingLeft:N,margin:N,marginTop:N,marginRight:N,marginBottom:N,marginLeft:N,rotate:Mt,rotateX:Mt,rotateY:Mt,rotateZ:Mt,scale:hn,scaleX:hn,scaleY:hn,scaleZ:hn,skew:Mt,skewX:Mt,skewY:Mt,distance:N,translateX:N,translateY:N,translateZ:N,x:N,y:N,z:N,perspective:N,transformPerspective:N,opacity:Jt,originX:sa,originY:sa,originZ:N,zIndex:Fu,fillOpacity:Jt,strokeOpacity:Jt,numOctaves:Fu};function yn(e,t,r,n){var o,i=e.style,a=e.vars,s=e.transform,u=e.transformKeys,l=e.transformOrigin;u.length=0;var c=!1,f=!1,d=!0;for(var m in t){var p=t[m];if(oa(m)){a[m]=p;continue}var h=ca[m],g=lm(p,h);if(Vt(m)){if(c=!0,s[m]=g,u.push(m),!d)continue;p!==((o=h.default)!==null&&o!==void 0?o:0)&&(d=!1)}else ra(m)?(l[m]=g,f=!0):i[m]=g}c?i.transform=sm(e,r,d,n):n?i.transform=n({},""):!t.transform&&i.transform&&(i.transform="none"),f&&(i.transformOrigin=um(l))}var bn=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function Bu(e,t,r){for(var n in t)!Re(t[n])&&!na(n,r)&&(e[n]=t[n])}function C0(e,t,r){var n=e.transformTemplate;return(0,gm.useMemo)(function(){var o=bn();yn(o,t,{enableHardwareAcceleration:!r},n);var i=o.vars,a=o.style;return M(M({},i),a)},[t])}function E0(e,t,r){var n=e.style||{},o={};return Bu(o,n,e),Object.assign(o,C0(e,t,r)),e.transformValues&&(o=e.transformValues(o)),o}function vm(e,t,r){var n={},o=E0(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=e.drag===!0?"none":"pan-".concat(e.drag==="x"?"y":"x")),n.style=o,n}var T0=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function vo(e){return T0.has(e)}var bm=function(e){return!vo(e)};function D0(e){e&&(bm=function(t){return t.startsWith("on")?!vo(t):e(t)})}try{D0(ym().default)}catch{}function Sm(e,t,r){var n={};for(var o in e)(bm(o)||r===!0&&vo(o)||!t&&!vo(o)||e.draggable&&o.startsWith("onDrag"))&&(n[o]=e[o]);return n}var Mm=w(O(),1);function Cm(e,t,r){return typeof e=="string"?e:N.transform(t+r*e)}function Em(e,t,r){var n=Cm(t,e.x,e.width),o=Cm(r,e.y,e.height);return"".concat(n," ").concat(o)}var P0={offset:"stroke-dashoffset",array:"stroke-dasharray"},A0={offset:"strokeDashoffset",array:"strokeDasharray"};function Tm(e,t,r,n,o){r===void 0&&(r=1),n===void 0&&(n=0),o===void 0&&(o=!0),e.pathLength=1;var i=o?P0:A0;e[i.offset]=N.transform(-n);var a=N.transform(t),s=N.transform(r);e[i.array]="".concat(a," ").concat(s)}function Sn(e,t,r,n){var o=t.attrX,i=t.attrY,a=t.originX,s=t.originY,u=t.pathLength,l=t.pathSpacing,c=l===void 0?1:l,f=t.pathOffset,d=f===void 0?0:f,m=pe(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]);yn(e,m,r,n),e.attrs=e.style,e.style={};var p=e.attrs,h=e.style,g=e.dimensions;p.transform&&(g&&(h.transform=p.transform),delete p.transform),g&&(a!==void 0||s!==void 0||h.transform)&&(h.transformOrigin=Em(g,a!==void 0?a:.5,s!==void 0?s:.5)),o!==void 0&&(p.x=o),i!==void 0&&(p.y=i),u!==void 0&&Tm(p,u,c,d,!1)}var fa=function(){return M(M({},bn()),{attrs:{}})};function Im(e,t){var r=(0,Mm.useMemo)(function(){var o=fa();return Sn(o,t,{enableHardwareAcceleration:!1},e.transformTemplate),M(M({},o.attrs),{style:M({},o.style)})},[t]);if(e.style){var n={};Bu(n,e.style,e),r.style=M(M({},n),r.style)}return r}function _m(e){e===void 0&&(e=!1);var t=function(r,n,o,i,a,s){var u=a.latestValues,l=dn(r)?Im:vm,c=l(n,u,s),f=Sm(n,typeof r=="string",e),d=M(M(M({},f),c),{ref:i});return o&&(d["data-projection-id"]=o),(0,wm.createElement)(r,d)};return t}var L0=/([a-z])([A-Z])/g,R0="$1-$2",da=function(e){return e.replace(L0,R0).toLowerCase()};function pa(e,t,r,n){var o=t.style,i=t.vars;Object.assign(e.style,o,n&&n.getProjectionStyles(r));for(var a in i)e.style.setProperty(a,i[a])}var ma=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function ha(e,t,r,n){pa(e,t,void 0,n);for(var o in t.attrs)e.setAttribute(ma.has(o)?o:da(o),t.attrs[o])}function Cn(e){var t=e.style,r={};for(var n in t)(Re(t[n])||na(n,e))&&(r[n]=t[n]);return r}function ga(e){var t=Cn(e);for(var r in e)if(Re(e[r])){var n=r==="x"||r==="y"?"attr"+r.toUpperCase():r;t[n]=e[r]}return t}var ju=w(O(),1);function En(e){return typeof e=="object"&&typeof e.start=="function"}var Qt=function(e){return Array.isArray(e)};var Om=function(e){return!!(e&&typeof e=="object"&&e.mix&&e.toValue)},va=function(e){return Qt(e)?e[e.length-1]||0:e};function Tn(e){var t=Re(e)?e.get():e;return Om(t)?t.toValue():t}function Dm(e,t,r,n){var o=e.scrapeMotionValuesFromProps,i=e.createRenderState,a=e.onMount,s={latestValues:k0(t,r,n,o),renderState:i()};return a&&(s.mount=function(u){return a(t,u,s)}),s}var xa=function(e){return function(t,r){var n=(0,ju.useContext)(Hr),o=(0,ju.useContext)(gr);return r?Dm(e,t,n,o):vr(function(){return Dm(e,t,n,o)})}};function k0(e,t,r,n){var o={},i=r?.initial===!1,a=n(e);for(var s in a)o[s]=Tn(a[s]);var u=e.initial,l=e.animate,c=zr(e),f=Zi(e);t&&f&&!c&&e.inherit!==!1&&(u??(u=t.initial),l??(l=t.animate));var d=i||u===!1,m=d?l:u;if(m&&typeof m!="boolean"&&!En(m)){var p=Array.isArray(m)?m:[m];p.forEach(function(h){var g=Ru(e,h);if(g){var v=g.transitionEnd;g.transition;var y=pe(g,["transitionEnd","transition"]);for(var E in y){var S=y[E];if(Array.isArray(S)){var C=d?S.length-1:0;S=S[C]}S!==null&&(o[E]=S)}for(var E in v)o[E]=v[E]}})}return o}var Pm={useVisualState:xa({scrapeMotionValuesFromProps:ga,createRenderState:fa,onMount:function(e,t,r){var n=r.renderState,o=r.latestValues;try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}Sn(n,o,{enableHardwareAcceleration:!1},e.transformTemplate),ha(t,n)}})};var Am={useVisualState:xa({scrapeMotionValuesFromProps:Cn,createRenderState:bn})};function Lm(e,t,r,n,o){var i=t.forwardMotionProps,a=i===void 0?!1:i,s=dn(e)?Pm:Am;return M(M({},s),{preloadedFeatures:r,useRender:_m(a),createVisualElement:n,projectionNodeConstructor:o,Component:e})}var Q;(function(e){e.Animate="animate",e.Hover="whileHover",e.Tap="whileTap",e.Drag="whileDrag",e.Focus="whileFocus",e.InView="whileInView",e.Exit="exit"})(Q||(Q={}));var Rm=w(O(),1);function Gr(e,t,r,n){return n===void 0&&(n={passive:!0}),e.addEventListener(t,r,n),function(){return e.removeEventListener(t,r)}}function xo(e,t,r,n){(0,Rm.useEffect)(function(){var o=e.current;if(r&&o)return Gr(o,t,r,n)},[e,t,r,n])}function km(e){var t=e.whileFocus,r=e.visualElement,n=function(){var i;(i=r.animationState)===null||i===void 0||i.setActive(Q.Focus,!0)},o=function(){var i;(i=r.animationState)===null||i===void 0||i.setActive(Q.Focus,!1)};xo(r,"focus",t?n:void 0),xo(r,"blur",t?o:void 0)}function ya(e){return typeof PointerEvent<"u"&&e instanceof PointerEvent?e.pointerType==="mouse":e instanceof MouseEvent}function ba(e){var t=!!e.touches;return t}function N0(e){return function(t){var r=t instanceof MouseEvent,n=!r||r&&t.button===0;n&&e(t)}}var V0={pageX:0,pageY:0};function F0(e,t){t===void 0&&(t="page");var r=e.touches[0]||e.changedTouches[0],n=r||V0;return{x:n[t+"X"],y:n[t+"Y"]}}function B0(e,t){return t===void 0&&(t="page"),{x:e[t+"X"],y:e[t+"Y"]}}function yo(e,t){return t===void 0&&(t="page"),{point:ba(e)?F0(e,t):B0(e,t)}}var zu=function(e,t){t===void 0&&(t=!1);var r=function(n){return e(n,yo(n))};return t?N0(r):r};var Nm=function(){return Nt&&window.onpointerdown===null},Vm=function(){return Nt&&window.ontouchstart===null},Fm=function(){return Nt&&window.onmousedown===null};var H0={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},U0={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function Bm(e){return Nm()?e:Vm()?U0[e]:Fm()?H0[e]:e}function er(e,t,r,n){return Gr(e,Bm(t),zu(r,t==="pointerdown"),n)}function Wr(e,t,r,n){return xo(e,Bm(t),r&&zu(r,t==="pointerdown"),n)}function jm(e){var t=null;return function(){var r=function(){t=null};return t===null?(t=e,r):!1}}var Hm=jm("dragHorizontal"),Um=jm("dragVertical");function Gu(e){var t=!1;if(e==="y")t=Um();else if(e==="x")t=Hm();else{var r=Hm(),n=Um();r&&n?t=function(){r(),n()}:(r&&r(),n&&n())}return t}function Sa(){var e=Gu(!0);return e?(e(),!1):!0}function zm(e,t,r){return function(n,o){var i;!ya(n)||Sa()||((i=e.animationState)===null||i===void 0||i.setActive(Q.Hover,t),r?.(n,o))}}function Gm(e){var t=e.onHoverStart,r=e.onHoverEnd,n=e.whileHover,o=e.visualElement;Wr(o,"pointerenter",t||n?zm(o,!0,t):void 0,{passive:!t}),Wr(o,"pointerleave",r||n?zm(o,!1,r):void 0,{passive:!r})}var pl=w(O(),1);var Wu=function(e,t){return t?e===t?!0:Wu(e,t.parentElement):!1};var Wm=w(O(),1);function Ca(e){return(0,Wm.useEffect)(function(){return function(){return e()}},[])}var Sr=(e,t,r)=>Math.min(Math.max(r,e),t);var qu=.001,j0=.01,qm=10,z0=.05,G0=1;function Km({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let o,i;Br(e<=qm*1e3,"Spring duration must be 10 seconds or less");let a=1-t;a=Sr(z0,G0,a),e=Sr(j0,qm,e/1e3),a<1?(o=l=>{let c=l*a,f=c*e,d=c-r,m=Ea(l,a),p=Math.exp(-f);return qu-d/m*p},i=l=>{let f=l*a*e,d=f*r+r,m=Math.pow(a,2)*Math.pow(l,2)*e,p=Math.exp(-f),h=Ea(Math.pow(l,2),a);return(-o(l)+qu>0?-1:1)*((d-m)*p)/h}):(o=l=>{let c=Math.exp(-l*e),f=(l-r)*e+1;return-qu+c*f},i=l=>{let c=Math.exp(-l*e),f=(r-l)*(e*e);return c*f});let s=5/e,u=q0(o,i,s);if(e=e*1e3,isNaN(u))return{stiffness:100,damping:10,duration:e};{let l=Math.pow(u,2)*n;return{stiffness:l,damping:a*2*Math.sqrt(n*l),duration:e}}}var W0=12;function q0(e,t,r){let n=r;for(let o=1;o<W0;o++)n=n-e(n)/t(n);return n}function Ea(e,t){return e*Math.sqrt(1-t*t)}var K0=["duration","bounce"],Y0=["stiffness","damping","mass"];function Ym(e,t){return t.some(r=>e[r]!==void 0)}function X0(e){let t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!Ym(e,Y0)&&Ym(e,K0)){let r=Km(e);t=Object.assign(Object.assign(Object.assign({},t),r),{velocity:0,mass:1}),t.isResolvedFromDuration=!0}return t}function Ta(e){var{from:t=0,to:r=1,restSpeed:n=2,restDelta:o}=e,i=pe(e,["from","to","restSpeed","restDelta"]);let a={done:!1,value:t},{stiffness:s,damping:u,mass:l,velocity:c,duration:f,isResolvedFromDuration:d}=X0(i),m=Xm,p=Xm;function h(){let g=c?-(c/1e3):0,v=r-t,y=u/(2*Math.sqrt(s*l)),E=Math.sqrt(s/l)/1e3;if(o===void 0&&(o=Math.min(Math.abs(r-t)/100,.4)),y<1){let S=Ea(E,y);m=C=>{let x=Math.exp(-y*E*C);return r-x*((g+y*E*v)/S*Math.sin(S*C)+v*Math.cos(S*C))},p=C=>{let x=Math.exp(-y*E*C);return y*E*x*(Math.sin(S*C)*(g+y*E*v)/S+v*Math.cos(S*C))-x*(Math.cos(S*C)*(g+y*E*v)-S*v*Math.sin(S*C))}}else if(y===1)m=S=>r-Math.exp(-E*S)*(v+(g+E*v)*S);else{let S=E*Math.sqrt(y*y-1);m=C=>{let x=Math.exp(-y*E*C),b=Math.min(S*C,300);return r-x*((g+y*E*v)*Math.sinh(b)+S*v*Math.cosh(b))/S}}}return h(),{next:g=>{let v=m(g);if(d)a.done=g>=f;else{let y=p(g)*1e3,E=Math.abs(y)<=n,S=Math.abs(r-v)<=o;a.done=E&&S}return a.value=a.done?r:v,a},flipTarget:()=>{c=-c,[t,r]=[r,t],h()}}}Ta.needsInterpolation=(e,t)=>typeof e=="string"||typeof t=="string";var Xm=e=>0;var tr=(e,t,r)=>{let n=t-e;return n===0?1:(r-e)/n};var Z=(e,t,r)=>-r*e+r*t+e;function Ku(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Yu({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let o=0,i=0,a=0;if(!t)o=i=a=r;else{let s=r<.5?r*(1+t):r+t-r*t,u=2*r-s;o=Ku(u,s,e+1/3),i=Ku(u,s,e),a=Ku(u,s,e-1/3)}return{red:Math.round(o*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:n}}var $0=(e,t,r)=>{let n=e*e,o=t*t;return Math.sqrt(Math.max(0,r*(o-n)+n))},Z0=[vn,it,Ft],$m=e=>Z0.find(t=>t.test(e)),Zm=e=>`'${e}' is not an animatable color. Use the equivalent color code instead.`,Ma=(e,t)=>{let r=$m(e),n=$m(t);Me(!!r,Zm(e)),Me(!!n,Zm(t));let o=r.parse(e),i=n.parse(t);r===Ft&&(o=Yu(o),r=it),n===Ft&&(i=Yu(i),n=it);let a=Object.assign({},o);return s=>{for(let u in a)u!=="alpha"&&(a[u]=$0(o[u],i[u],s));return a.alpha=Z(o.alpha,i.alpha,s),r.transform(a)}};var bo=e=>typeof e=="number";var J0=(e,t)=>r=>t(e(r)),rr=(...e)=>e.reduce(J0);function Qm(e,t){return bo(e)?r=>Z(e,t,r):he.test(e)?Ma(e,t):$u(e,t)}var Xu=(e,t)=>{let r=[...e],n=r.length,o=e.map((i,a)=>Qm(i,t[a]));return i=>{for(let a=0;a<n;a++)r[a]=o[a](i);return r}},eh=(e,t)=>{let r=Object.assign(Object.assign({},e),t),n={};for(let o in r)e[o]!==void 0&&t[o]!==void 0&&(n[o]=Qm(e[o],t[o]));return o=>{for(let i in n)r[i]=n[i](o);return r}};function Jm(e){let t=_e.parse(e),r=t.length,n=0,o=0,i=0;for(let a=0;a<r;a++)n||typeof t[a]=="number"?n++:t[a].hue!==void 0?i++:o++;return{parsed:t,numNumbers:n,numRGB:o,numHSL:i}}var $u=(e,t)=>{let r=_e.createTransformer(t),n=Jm(e),o=Jm(t);return n.numHSL===o.numHSL&&n.numRGB===o.numRGB&&n.numNumbers>=o.numNumbers?rr(Xu(n.parsed,o.parsed),r):(Br(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),a=>`${a>0?t:e}`)};var Q0=(e,t)=>r=>Z(e,t,r);function eS(e){if(typeof e=="number")return Q0;if(typeof e=="string")return he.test(e)?Ma:$u;if(Array.isArray(e))return Xu;if(typeof e=="object")return eh}function tS(e,t,r){let n=[],o=r||eS(e[0]),i=e.length-1;for(let a=0;a<i;a++){let s=o(e[a],e[a+1]);if(t){let u=Array.isArray(t)?t[a]:t;s=rr(u,s)}n.push(s)}return n}function rS([e,t],[r]){return n=>r(tr(e,t,n))}function nS(e,t){let r=e.length,n=r-1;return o=>{let i=0,a=!1;if(o<=e[0]?a=!0:o>=e[n]&&(i=n-1,a=!0),!a){let u=1;for(;u<r&&!(e[u]>o||u===n);u++);i=u-1}let s=tr(e[i],e[i+1],o);return t[i](s)}}function Ia(e,t,{clamp:r=!0,ease:n,mixer:o}={}){let i=e.length;Me(i===t.length,"Both input and output ranges must be the same length"),Me(!n||!Array.isArray(n)||n.length===i-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),e[0]>e[i-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());let a=tS(t,n,o),s=i===2?rS(e,a):nS(e,a);return r?u=>s(Sr(e[0],e[i-1],u)):s}var So=e=>t=>1-e(1-t),wa=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,th=e=>t=>Math.pow(t,e),Zu=e=>t=>t*t*((e+1)*t-e),rh=e=>{let t=Zu(e);return r=>(r*=2)<1?.5*t(r):.5*(2-Math.pow(2,-10*(r-1)))};var nh=1.525,oS=4/11,iS=8/11,aS=9/10,qr=e=>e,Co=th(2),Ju=So(Co),Eo=wa(Co),_a=e=>1-Math.sin(Math.acos(e)),In=So(_a),Qu=wa(In),To=Zu(nh),el=So(To),tl=wa(To),rl=rh(nh),sS=4356/361,uS=35442/1805,lS=16061/1805,Mn=e=>{if(e===1||e===0)return e;let t=e*e;return e<oS?7.5625*t:e<iS?9.075*t-9.9*e+3.4:e<aS?sS*t-uS*e+lS:10.8*e*e-20.52*e+10.72},nl=So(Mn),ol=e=>e<.5?.5*(1-Mn(1-e*2)):.5*Mn(e*2-1)+.5;function cS(e,t){return e.map(()=>t||Eo).splice(0,e.length-1)}function fS(e){let t=e.length;return e.map((r,n)=>n!==0?n/(t-1):0)}function dS(e,t){return e.map(r=>r*t)}function Mo({from:e=0,to:t=1,ease:r,offset:n,duration:o=300}){let i={done:!1,value:e},a=Array.isArray(t)?t:[e,t],s=dS(n&&n.length===a.length?n:fS(a),o);function u(){return Ia(s,a,{ease:Array.isArray(r)?r:cS(a,r)})}let l=u();return{next:c=>(i.value=l(c),i.done=c>=o,i),flipTarget:()=>{a.reverse(),l=u()}}}function oh({velocity:e=0,from:t=0,power:r=.8,timeConstant:n=350,restDelta:o=.5,modifyTarget:i}){let a={done:!1,value:t},s=r*e,u=t+s,l=i===void 0?u:i(u);return l!==u&&(s=l-t),{next:c=>{let f=-s*Math.exp(-c/n);return a.done=!(f>o||f<-o),a.value=a.done?l:l+f,a},flipTarget:()=>{}}}var ih={keyframes:Mo,spring:Ta,decay:oh};function ah(e){if(Array.isArray(e.to))return Mo;if(ih[e.type])return ih[e.type];let t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?Mo:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?Ta:Mo}var il=16.666666666666668,pS=typeof performance<"u"?()=>performance.now():()=>Date.now(),al=typeof window<"u"?e=>window.requestAnimationFrame(e):e=>setTimeout(()=>e(pS()),il);function sh(e){let t=[],r=[],n=0,o=!1,i=!1,a=new WeakSet,s={schedule:(u,l=!1,c=!1)=>{let f=c&&o,d=f?t:r;return l&&a.add(u),d.indexOf(u)===-1&&(d.push(u),f&&o&&(n=t.length)),u},cancel:u=>{let l=r.indexOf(u);l!==-1&&r.splice(l,1),a.delete(u)},process:u=>{if(o){i=!0;return}if(o=!0,[t,r]=[r,t],r.length=0,n=t.length,n)for(let l=0;l<n;l++){let c=t[l];c(u),a.has(c)&&(s.schedule(c),e())}o=!1,i&&(i=!1,s.process(u))}};return s}var mS=40,sl=!0,Io=!1,ul=!1,wn={delta:0,timestamp:0},wo=["read","update","preRender","render","postRender"],Oa=wo.reduce((e,t)=>(e[t]=sh(()=>Io=!0),e),{}),hS=wo.reduce((e,t)=>{let r=Oa[t];return e[t]=(n,o=!1,i=!1)=>(Io||vS(),r.schedule(n,o,i)),e},{}),Bt=wo.reduce((e,t)=>(e[t]=Oa[t].cancel,e),{}),Da=wo.reduce((e,t)=>(e[t]=()=>Oa[t].process(wn),e),{}),gS=e=>Oa[e].process(wn),uh=e=>{Io=!1,wn.delta=sl?il:Math.max(Math.min(e-wn.timestamp,mS),1),wn.timestamp=e,ul=!0,wo.forEach(gS),ul=!1,Io&&(sl=!1,al(uh))},vS=()=>{Io=!0,sl=!0,ul||al(uh)},Kr=()=>wn,Ne=hS;function ll(e,t,r=0){return e-t-r}function lh(e,t,r=0,n=!0){return n?ll(t+-e,t,r):t-(e-t)+r}function ch(e,t,r,n){return n?e>=t+r:e<=-r}var xS=e=>{let t=({delta:r})=>e(r);return{start:()=>Ne.update(t,!0),stop:()=>Bt.update(t)}};function _o(e){var t,r,{from:n,autoplay:o=!0,driver:i=xS,elapsed:a=0,repeat:s=0,repeatType:u="loop",repeatDelay:l=0,onPlay:c,onStop:f,onComplete:d,onRepeat:m,onUpdate:p}=e,h=pe(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let{to:g}=h,v,y=0,E=h.duration,S,C=!1,x=!0,b,I=ah(h);!((r=(t=I).needsInterpolation)===null||r===void 0)&&r.call(t,n,g)&&(b=Ia([0,100],[n,g],{clamp:!1}),n=0,g=100);let T=I(Object.assign(Object.assign({},h),{from:n,to:g}));function _(){y++,u==="reverse"?(x=y%2===0,a=lh(a,E,l,x)):(a=ll(a,E,l),u==="mirror"&&T.flipTarget()),C=!1,m&&m()}function P(){v.stop(),d&&d()}function H(B){if(x||(B=-B),a+=B,!C){let F=T.next(Math.max(0,a));S=F.value,b&&(S=b(S)),C=x?F.done:a<=0}p?.(S),C&&(y===0&&(E??(E=a)),y<s?ch(a,E,l,x)&&_():P())}function j(){c?.(),v=i(H),v.start()}return o&&j(),{stop:()=>{f?.(),v.stop()}}}function Oo(e,t){return t?e*(1e3/t):0}function cl({from:e=0,velocity:t=0,min:r,max:n,power:o=.8,timeConstant:i=750,bounceStiffness:a=500,bounceDamping:s=10,restDelta:u=1,modifyTarget:l,driver:c,onUpdate:f,onComplete:d,onStop:m}){let p;function h(E){return r!==void 0&&E<r||n!==void 0&&E>n}function g(E){return r===void 0?n:n===void 0||Math.abs(r-E)<Math.abs(n-E)?r:n}function v(E){p?.stop(),p=_o(Object.assign(Object.assign({},E),{driver:c,onUpdate:S=>{var C;f?.(S),(C=E.onUpdate)===null||C===void 0||C.call(E,S)},onComplete:d,onStop:m}))}function y(E){v(Object.assign({type:"spring",stiffness:a,damping:s,restDelta:u},E))}if(h(e))y({from:e,velocity:t,to:g(e)});else{let E=o*t+e;typeof l<"u"&&(E=l(E));let S=g(E),C=S===r?-1:1,x,b,I=T=>{x=b,b=T,t=Oo(T-x,Kr().delta),(C===1&&T>S||C===-1&&T<S)&&y({from:T,to:S,velocity:t})};v({type:"decay",from:e,velocity:t,timeConstant:i,power:o,restDelta:u,modifyTarget:l,onUpdate:h(E)?I:void 0})}return{stop:()=>p?.stop()}}var Do=e=>e.hasOwnProperty("x")&&e.hasOwnProperty("y");var fl=e=>Do(e)&&e.hasOwnProperty("z");var Pa=(e,t)=>Math.abs(e-t);function Po(e,t){if(bo(e)&&bo(t))return Pa(e,t);if(Do(e)&&Do(t)){let r=Pa(e.x,t.x),n=Pa(e.y,t.y),o=fl(e)&&fl(t)?Pa(e.z,t.z):0;return Math.sqrt(Math.pow(r,2)+Math.pow(n,2)+Math.pow(o,2))}}var fh=(e,t)=>1-3*t+3*e,dh=(e,t)=>3*t-6*e,ph=e=>3*e,Ra=(e,t,r)=>((fh(t,r)*e+dh(t,r))*e+ph(t))*e,mh=(e,t,r)=>3*fh(t,r)*e*e+2*dh(t,r)*e+ph(t),yS=1e-7,bS=10;function SS(e,t,r,n,o){let i,a,s=0;do a=t+(r-t)/2,i=Ra(a,n,o)-e,i>0?r=a:t=a;while(Math.abs(i)>yS&&++s<bS);return a}var CS=8,ES=.001;function TS(e,t,r,n){for(let o=0;o<CS;++o){let i=mh(t,r,n);if(i===0)return t;let a=Ra(t,r,n)-e;t-=a/i}return t}var La=11,Aa=1/(La-1);function dl(e,t,r,n){if(e===t&&r===n)return qr;let o=new Float32Array(La);for(let a=0;a<La;++a)o[a]=Ra(a*Aa,e,r);function i(a){let s=0,u=1,l=La-1;for(;u!==l&&o[u]<=a;++u)s+=Aa;--u;let c=(a-o[u])/(o[u+1]-o[u]),f=s+c*Aa,d=mh(f,e,r);return d>=ES?TS(a,f,e,r):d===0?f:SS(a,s,s+Aa,e,r)}return a=>a===0||a===1?a:Ra(i(a),t,n)}function hh(e){var t=e.onTap,r=e.onTapStart,n=e.onTapCancel,o=e.whileTap,i=e.visualElement,a=t||r||n||o,s=(0,pl.useRef)(!1),u=(0,pl.useRef)(null),l={passive:!(r||t||n||p)};function c(){var h;(h=u.current)===null||h===void 0||h.call(u),u.current=null}function f(){var h;return c(),s.current=!1,(h=i.animationState)===null||h===void 0||h.setActive(Q.Tap,!1),!Sa()}function d(h,g){f()&&(Wu(i.getInstance(),h.target)?t?.(h,g):n?.(h,g))}function m(h,g){f()&&n?.(h,g)}function p(h,g){var v;c(),!s.current&&(s.current=!0,u.current=rr(er(window,"pointerup",d,l),er(window,"pointercancel",m,l)),(v=i.animationState)===null||v===void 0||v.setActive(Q.Tap,!0),r?.(h,g))}Wr(i,"pointerdown",a?p:void 0,l),Ca(c)}var Ao=w(O(),1);var gh=new Set;function vh(e,t,r){e||gh.has(t)||gh.add(t)}var hl=new WeakMap,ml=new WeakMap,MS=function(e){var t;(t=hl.get(e.target))===null||t===void 0||t(e)},IS=function(e){e.forEach(MS)};function wS(e){var t=e.root,r=pe(e,["root"]),n=t||document;ml.has(n)||ml.set(n,{});var o=ml.get(n),i=JSON.stringify(r);return o[i]||(o[i]=new IntersectionObserver(IS,M({root:t},r))),o[i]}function xh(e,t,r){var n=wS(t);return hl.set(e,r),n.observe(e),function(){hl.delete(e),n.unobserve(e)}}function yh(e){var t=e.visualElement,r=e.whileInView,n=e.onViewportEnter,o=e.onViewportLeave,i=e.viewport,a=i===void 0?{}:i,s=(0,Ao.useRef)({hasEnteredView:!1,isInView:!1}),u=!!(r||n||o);a.once&&s.current.hasEnteredView&&(u=!1);var l=typeof IntersectionObserver>"u"?DS:OS;l(u,s.current,t,a)}var _S={some:0,all:1};function OS(e,t,r,n){var o=n.root,i=n.margin,a=n.amount,s=a===void 0?"some":a,u=n.once;(0,Ao.useEffect)(function(){if(e){var l={root:o?.current,rootMargin:i,threshold:typeof s=="number"?s:_S[s]},c=function(f){var d,m=f.isIntersecting;if(t.isInView!==m&&(t.isInView=m,!(u&&!m&&t.hasEnteredView))){m&&(t.hasEnteredView=!0),(d=r.animationState)===null||d===void 0||d.setActive(Q.InView,m);var p=r.getProps(),h=m?p.onViewportEnter:p.onViewportLeave;h?.(f)}};return xh(r.getInstance(),l,c)}},[e,o,i,s])}function DS(e,t,r,n){var o=n.fallback,i=o===void 0?!0:o;(0,Ao.useEffect)(function(){!e||!i||(qi!=="production"&&vh(!1,"IntersectionObserver not available on this device. whileInView animations will trigger on mount."),requestAnimationFrame(function(){var a;t.hasEnteredView=!0;var s=r.getProps().onViewportEnter;s?.(null),(a=r.animationState)===null||a===void 0||a.setActive(Q.InView,!0)}))},[e])}var It=function(e){return function(t){return e(t),null}};var bh={inView:It(yh),tap:It(hh),focus:It(km),hover:It(Gm)};var Ro=w(O(),1);var ka=w(O(),1);var PS=0,AS=function(){return PS++},Sh=function(){return vr(AS)};function Na(){var e=(0,ka.useContext)(gr);if(e===null)return[!0,null];var t=e.isPresent,r=e.onExitComplete,n=e.register,o=Sh();(0,ka.useEffect)(function(){return n(o)},[]);var i=function(){return r?.(o)};return!t&&r?[!1,i]:[!0]}function gl(e,t){if(!Array.isArray(t))return!1;var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}var _n=function(e){return e*1e3};var Ch={linear:qr,easeIn:Co,easeInOut:Eo,easeOut:Ju,circIn:_a,circInOut:Qu,circOut:In,backIn:To,backInOut:tl,backOut:el,anticipate:rl,bounceIn:nl,bounceInOut:ol,bounceOut:Mn},vl=function(e){if(Array.isArray(e)){Me(e.length===4,"Cubic bezier arrays must contain four numerical values.");var t=Y(e,4),r=t[0],n=t[1],o=t[2],i=t[3];return dl(r,n,o,i)}else if(typeof e=="string")return Me(Ch[e]!==void 0,"Invalid easing type '".concat(e,"'")),Ch[e];return e},Eh=function(e){return Array.isArray(e)&&typeof e[0]!="number"};var xl=function(e,t){return e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&_e.test(t)&&!t.startsWith("url("))};var Yr=function(){return{type:"spring",stiffness:500,damping:25,restSpeed:10}},Va=function(e){return{type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}},yl=function(){return{type:"keyframes",ease:"linear",duration:.3}},LS=function(e){return{type:"keyframes",duration:.8,values:e}},Th={x:Yr,y:Yr,z:Yr,rotate:Yr,rotateX:Yr,rotateY:Yr,rotateZ:Yr,scaleX:Va,scaleY:Va,scale:Va,opacity:yl,backgroundColor:yl,color:yl,default:Va},Mh=function(e,t){var r;return Qt(t)?r=LS:r=Th[e]||Th.default,M({to:t},r(t))};var RS=M(M({},ca),{color:he,backgroundColor:he,outlineColor:he,fill:he,stroke:he,borderColor:he,borderTopColor:he,borderRightColor:he,borderBottomColor:he,borderLeftColor:he,filter:xn,WebkitFilter:xn}),On=function(e){return RS[e]};function Lo(e,t){var r,n=On(e);return n!==xn&&(n=_e),(r=n.getAnimatableNone)===null||r===void 0?void 0:r.call(n,t)}var Ih={current:!1};function kS(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from;var t=pe(e,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(t).length}var wh=!1;function NS(e){var t=e.ease,r=e.times,n=e.yoyo,o=e.flip,i=e.loop,a=pe(e,["ease","times","yoyo","flip","loop"]),s=M({},a);return r&&(s.offset=r),a.duration&&(s.duration=_n(a.duration)),a.repeatDelay&&(s.repeatDelay=_n(a.repeatDelay)),t&&(s.ease=Eh(t)?t.map(vl):vl(t)),a.type==="tween"&&(s.type="keyframes"),(n||i||o)&&(Br(!wh,"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options."),wh=!0,n?s.repeatType="reverse":i?s.repeatType="loop":o&&(s.repeatType="mirror"),s.repeat=i||n||o||a.repeat),a.type!=="spring"&&(s.type="keyframes"),s}function VS(e,t){var r,n,o=Fa(e,t)||{};return(n=(r=o.delay)!==null&&r!==void 0?r:e.delay)!==null&&n!==void 0?n:0}function FS(e){return Array.isArray(e.to)&&e.to[0]===null&&(e.to=we([],Y(e.to),!1),e.to[0]=e.from),e}function BS(e,t,r){var n;return Array.isArray(t.to)&&((n=e.duration)!==null&&n!==void 0||(e.duration=.8)),FS(t),kS(e)||(e=M(M({},e),Mh(r,t.to))),M(M({},t),NS(e))}function HS(e,t,r,n,o){var i,a=Fa(n,e),s=(i=a.from)!==null&&i!==void 0?i:t.get(),u=xl(e,r);s==="none"&&u&&typeof r=="string"?s=Lo(e,r):_h(s)&&typeof r=="string"?s=Oh(r):!Array.isArray(r)&&_h(r)&&typeof s=="string"&&(r=Oh(s));var l=xl(e,s);Br(l===u,"You are trying to animate ".concat(e,' from "').concat(s,'" to "').concat(r,'". ').concat(s," is not an animatable value - to enable this animation set ").concat(s," to a value animatable to ").concat(r," via the `style` property."));function c(){var d={from:s,to:r,velocity:t.getVelocity(),onComplete:o,onUpdate:function(m){return t.set(m)}};return a.type==="inertia"||a.type==="decay"?cl(M(M({},d),a)):_o(M(M({},BS(a,d,e)),{onUpdate:function(m){var p;d.onUpdate(m),(p=a.onUpdate)===null||p===void 0||p.call(a,m)},onComplete:function(){var m;d.onComplete(),(m=a.onComplete)===null||m===void 0||m.call(a)}}))}function f(){var d,m,p=va(r);return t.set(p),o(),(d=a?.onUpdate)===null||d===void 0||d.call(a,p),(m=a?.onComplete)===null||m===void 0||m.call(a),{stop:function(){}}}return!l||!u||a.type===!1?f:c}function _h(e){return e===0||typeof e=="string"&&parseFloat(e)===0&&e.indexOf(" ")===-1}function Oh(e){return typeof e=="number"?0:Lo("",e)}function Fa(e,t){return e[t]||e.default||e}function Dn(e,t,r,n){return n===void 0&&(n={}),Ih.current&&(n={type:!1}),t.start(function(o){var i,a,s=HS(e,t,r,n,o),u=VS(n,e),l=function(){return a=s()};return u?i=window.setTimeout(l,_n(u)):l(),function(){clearTimeout(i),a?.stop()}})}var Dh=function(e){return/^\-?\d*\.?\d+$/.test(e)};var Ph=function(e){return/^0[^.\s]+$/.test(e)};function Pn(e,t){e.indexOf(t)===-1&&e.push(t)}function An(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)}var Cr=function(){function e(){this.subscriptions=[]}return e.prototype.add=function(t){var r=this;return Pn(this.subscriptions,t),function(){return An(r.subscriptions,t)}},e.prototype.notify=function(t,r,n){var o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,r,n);else for(var i=0;i<o;i++){var a=this.subscriptions[i];a&&a(t,r,n)}},e.prototype.getSize=function(){return this.subscriptions.length},e.prototype.clear=function(){this.subscriptions.length=0},e}();var US=function(e){return!isNaN(parseFloat(e))},jS=function(){function e(t){var r=this;this.version="6.5.1",this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new Cr,this.velocityUpdateSubscribers=new Cr,this.renderSubscribers=new Cr,this.canTrackVelocity=!1,this.updateAndNotify=function(n,o){o===void 0&&(o=!0),r.prev=r.current,r.current=n;var i=Kr(),a=i.delta,s=i.timestamp;r.lastUpdated!==s&&(r.timeDelta=a,r.lastUpdated=s,Ne.postRender(r.scheduleVelocityCheck)),r.prev!==r.current&&r.updateSubscribers.notify(r.current),r.velocityUpdateSubscribers.getSize()&&r.velocityUpdateSubscribers.notify(r.getVelocity()),o&&r.renderSubscribers.notify(r.current)},this.scheduleVelocityCheck=function(){return Ne.postRender(r.velocityCheck)},this.velocityCheck=function(n){var o=n.timestamp;o!==r.lastUpdated&&(r.prev=r.current,r.velocityUpdateSubscribers.notify(r.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=US(this.current)}return e.prototype.onChange=function(t){return this.updateSubscribers.add(t)},e.prototype.clearListeners=function(){this.updateSubscribers.clear()},e.prototype.onRenderRequest=function(t){return t(this.get()),this.renderSubscribers.add(t)},e.prototype.attach=function(t){this.passiveEffect=t},e.prototype.set=function(t,r){r===void 0&&(r=!0),!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)},e.prototype.get=function(){return this.current},e.prototype.getPrevious=function(){return this.prev},e.prototype.getVelocity=function(){return this.canTrackVelocity?Oo(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},e.prototype.start=function(t){var r=this;return this.stop(),new Promise(function(n){r.hasAnimated=!0,r.stopAnimation=t(n)}).then(function(){return r.clearAnimation()})},e.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},e.prototype.isAnimating=function(){return!!this.stopAnimation},e.prototype.clearAnimation=function(){this.stopAnimation=null},e.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},e}();function Ht(e){return new jS(e)}var Ba=function(e){return function(t){return t.test(e)}};var Ah={test:function(e){return e==="auto"},parse:function(e){return e}};var bl=[$e,N,ke,Mt,Vu,Nu,Ah],Ln=function(e){return bl.find(Ba(e))};var zS=we(we([],Y(bl),!1),[he,_e],!1),Lh=function(e){return zS.find(Ba(e))};function GS(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Ht(r))}function Rh(e,t){var r=jr(e,t),n=r?e.makeTargetAnimatable(r,!1):{},o=n.transitionEnd,i=o===void 0?{}:o;n.transition;var a=pe(n,["transitionEnd","transition"]);a=M(M({},a),i);for(var s in a){var u=va(a[s]);GS(e,s,u)}}function kh(e,t,r){var n,o,i,a,s=Object.keys(t).filter(function(m){return!e.hasValue(m)}),u=s.length;if(u)for(var l=0;l<u;l++){var c=s[l],f=t[c],d=null;Array.isArray(f)&&(d=f[0]),d===null&&(d=(o=(n=r[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&o!==void 0?o:t[c]),d!=null&&(typeof d=="string"&&(Dh(d)||Ph(d))?d=parseFloat(d):!Lh(d)&&_e.test(f)&&(d=Lo(c,f)),e.addValue(c,Ht(d)),(i=(a=r)[c])!==null&&i!==void 0||(a[c]=d),e.setBaseTarget(c,d))}}function WS(e,t){if(t){var r=t[e]||t.default||t;return r.from}}function Nh(e,t,r){var n,o,i={};for(var a in e)i[a]=(n=WS(a,t))!==null&&n!==void 0?n:(o=r.getValue(a))===null||o===void 0?void 0:o.get();return i}function Vh(e,t,r){r===void 0&&(r={}),e.notifyAnimationStart(t);var n;if(Array.isArray(t)){var o=t.map(function(a){return Sl(e,a,r)});n=Promise.all(o)}else if(typeof t=="string")n=Sl(e,t,r);else{var i=typeof t=="function"?jr(e,t,r.custom):t;n=Fh(e,i,r)}return n.then(function(){return e.notifyAnimationComplete(t)})}function Sl(e,t,r){var n;r===void 0&&(r={});var o=jr(e,t,r.custom),i=(o||{}).transition,a=i===void 0?e.getDefaultTransition()||{}:i;r.transitionOverride&&(a=r.transitionOverride);var s=o?function(){return Fh(e,o,r)}:function(){return Promise.resolve()},u=!((n=e.variantChildren)===null||n===void 0)&&n.size?function(m){m===void 0&&(m=0);var p=a.delayChildren,h=p===void 0?0:p,g=a.staggerChildren,v=a.staggerDirection;return qS(e,t,h+m,g,v,r)}:function(){return Promise.resolve()},l=a.when;if(l){var c=Y(l==="beforeChildren"?[s,u]:[u,s],2),f=c[0],d=c[1];return f().then(d)}else return Promise.all([s(),u(r.delay)])}function Fh(e,t,r){var n,o=r===void 0?{}:r,i=o.delay,a=i===void 0?0:i,s=o.transitionOverride,u=o.type,l=e.makeTargetAnimatable(t),c=l.transition,f=c===void 0?e.getDefaultTransition():c,d=l.transitionEnd,m=pe(l,["transition","transitionEnd"]);s&&(f=s);var p=[],h=u&&((n=e.animationState)===null||n===void 0?void 0:n.getState()[u]);for(var g in m){var v=e.getValue(g),y=m[g];if(!(!v||y===void 0||h&&YS(h,g))){var E=M({delay:a},f);e.shouldReduceMotion&&Vt(g)&&(E=M(M({},E),{type:!1,delay:0}));var S=Dn(g,v,y,E);p.push(S)}}return Promise.all(p).then(function(){d&&Rh(e,d)})}function qS(e,t,r,n,o,i){r===void 0&&(r=0),n===void 0&&(n=0),o===void 0&&(o=1);var a=[],s=(e.variantChildren.size-1)*n,u=o===1?function(l){return l===void 0&&(l=0),l*n}:function(l){return l===void 0&&(l=0),s-l*n};return Array.from(e.variantChildren).sort(KS).forEach(function(l,c){a.push(Sl(l,t,M(M({},i),{delay:r+u(c)})).then(function(){return l.notifyAnimationComplete(t)}))}),Promise.all(a)}function KS(e,t){return e.sortNodePosition(t)}function YS(e,t){var r=e.protectedKeys,n=e.needsAnimating,o=r.hasOwnProperty(t)&&n[t]!==!0;return n[t]=!1,o}var Ha=[Q.Animate,Q.InView,Q.Focus,Q.Hover,Q.Tap,Q.Drag,Q.Exit],XS=we([],Y(Ha),!1).reverse(),$S=Ha.length;function ZS(e){return function(t){return Promise.all(t.map(function(r){var n=r.animation,o=r.options;return Vh(e,n,o)}))}}function Bh(e){var t=ZS(e),r=QS(),n={},o=!0,i=function(c,f){var d=jr(e,f);if(d){d.transition;var m=d.transitionEnd,p=pe(d,["transition","transitionEnd"]);c=M(M(M({},c),p),m)}return c};function a(c){return n[c]!==void 0}function s(c){t=c(e)}function u(c,f){for(var d,m=e.getProps(),p=e.getVariantContext(!0)||{},h=[],g=new Set,v={},y=1/0,E=function(b){var I=XS[b],T=r[I],_=(d=m[I])!==null&&d!==void 0?d:p[I],P=We(_),H=I===f?T.isActive:null;H===!1&&(y=b);var j=_===p[I]&&_!==m[I]&&P;if(j&&o&&e.manuallyAnimateOnMount&&(j=!1),T.protectedKeys=M({},v),!T.isActive&&H===null||!_&&!T.prevProp||En(_)||typeof _=="boolean")return"continue";var B=JS(T.prevProp,_),F=B||I===f&&T.isActive&&!j&&P||b>y&&P,X=Array.isArray(_)?_:[_],$=X.reduce(i,{});H===!1&&($={});var Ce=T.prevResolvedValues,et=Ce===void 0?{}:Ce,mt=M(M({},et),$),te=function(V){F=!0,g.delete(V),T.needsAnimating[V]=!0};for(var ie in mt){var G=$[ie],D=et[ie];v.hasOwnProperty(ie)||(G!==D?Qt(G)&&Qt(D)?!gl(G,D)||B?te(ie):T.protectedKeys[ie]=!0:G!==void 0?te(ie):g.add(ie):G!==void 0&&g.has(ie)?te(ie):T.protectedKeys[ie]=!0)}T.prevProp=_,T.prevResolvedValues=$,T.isActive&&(v=M(M({},v),$)),o&&e.blockInitialAnimation&&(F=!1),F&&!j&&h.push.apply(h,we([],Y(X.map(function(V){return{animation:V,options:M({type:I},c)}})),!1))},S=0;S<$S;S++)E(S);if(n=M({},v),g.size){var C={};g.forEach(function(b){var I=e.getBaseTarget(b);I!==void 0&&(C[b]=I)}),h.push({animation:C})}var x=!!h.length;return o&&m.initial===!1&&!e.manuallyAnimateOnMount&&(x=!1),o=!1,x?t(h):Promise.resolve()}function l(c,f,d){var m;if(r[c].isActive===f)return Promise.resolve();(m=e.variantChildren)===null||m===void 0||m.forEach(function(g){var v;return(v=g.animationState)===null||v===void 0?void 0:v.setActive(c,f)}),r[c].isActive=f;var p=u(d,c);for(var h in r)r[h].protectedKeys={};return p}return{isAnimated:a,animateChanges:u,setActive:l,setAnimateFunction:s,getState:function(){return r}}}function JS(e,t){return typeof t=="string"?t!==e:Lu(t)?!gl(t,e):!1}function Xr(e){return e===void 0&&(e=!1),{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function QS(){var e;return e={},e[Q.Animate]=Xr(!0),e[Q.InView]=Xr(),e[Q.Hover]=Xr(),e[Q.Tap]=Xr(),e[Q.Drag]=Xr(),e[Q.Focus]=Xr(),e[Q.Exit]=Xr(),e}var Hh={animation:It(function(e){var t=e.visualElement,r=e.animate;t.animationState||(t.animationState=Bh(t)),En(r)&&(0,Ro.useEffect)(function(){return r.subscribe(t)},[r])}),exit:It(function(e){var t=e.custom,r=e.visualElement,n=Y(Na(),2),o=n[0],i=n[1],a=(0,Ro.useContext)(gr);(0,Ro.useEffect)(function(){var s,u;r.isPresent=o;var l=(s=r.animationState)===null||s===void 0?void 0:s.setActive(Q.Exit,!o,{custom:(u=a?.custom)!==null&&u!==void 0?u:t});!o&&l?.then(i)},[o])})};var Ol=w(O(),1);var Ua=function(){function e(t,r,n){var o=this,i=n===void 0?{}:n,a=i.transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(o.lastMoveEvent&&o.lastMoveEventInfo){var d=El(o.lastMoveEventInfo,o.history),m=o.startEvent!==null,p=Po(d.offset,{x:0,y:0})>=3;if(!(!m&&!p)){var h=d.point,g=Kr().timestamp;o.history.push(M(M({},h),{timestamp:g}));var v=o.handlers,y=v.onStart,E=v.onMove;m||(y&&y(o.lastMoveEvent,d),o.startEvent=o.lastMoveEvent),E&&E(o.lastMoveEvent,d)}}},this.handlePointerMove=function(d,m){if(o.lastMoveEvent=d,o.lastMoveEventInfo=Cl(m,o.transformPagePoint),ya(d)&&d.buttons===0){o.handlePointerUp(d,m);return}Ne.update(o.updatePoint,!0)},this.handlePointerUp=function(d,m){o.end();var p=o.handlers,h=p.onEnd,g=p.onSessionEnd,v=El(Cl(m,o.transformPagePoint),o.history);o.startEvent&&h&&h(d,v),g&&g(d,v)},!(ba(t)&&t.touches.length>1)){this.handlers=r,this.transformPagePoint=a;var s=yo(t),u=Cl(s,this.transformPagePoint),l=u.point,c=Kr().timestamp;this.history=[M(M({},l),{timestamp:c})];var f=r.onSessionStart;f&&f(t,El(u,this.history)),this.removeListeners=rr(er(window,"pointermove",this.handlePointerMove),er(window,"pointerup",this.handlePointerUp),er(window,"pointercancel",this.handlePointerUp))}}return e.prototype.updateHandlers=function(t){this.handlers=t},e.prototype.end=function(){this.removeListeners&&this.removeListeners(),Bt.update(this.updatePoint)},e}();function Cl(e,t){return t?{point:t(e.point)}:e}function Uh(e,t){return{x:e.x-t.x,y:e.y-t.y}}function El(e,t){var r=e.point;return{point:r,delta:Uh(r,jh(t)),offset:Uh(r,eC(t)),velocity:tC(t,.1)}}function eC(e){return e[0]}function jh(e){return e[e.length-1]}function tC(e,t){if(e.length<2)return{x:0,y:0};for(var r=e.length-1,n=null,o=jh(e);r>=0&&(n=e[r],!(o.timestamp-n.timestamp>_n(t)));)r--;if(!n)return{x:0,y:0};var i=(o.timestamp-n.timestamp)/1e3;if(i===0)return{x:0,y:0};var a={x:(o.x-n.x)/i,y:(o.y-n.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function at(e){return e.max-e.min}function zh(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=.01),Po(e,t)<r}function Gh(e,t,r,n){n===void 0&&(n=.5),e.origin=n,e.originPoint=Z(t.min,t.max,e.origin),e.scale=at(r)/at(t),(zh(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Z(r.min,r.max,e.origin)-e.originPoint,(zh(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Rn(e,t,r,n){Gh(e.x,t.x,r.x,n?.originX),Gh(e.y,t.y,r.y,n?.originY)}function Wh(e,t,r){e.min=r.min+t.min,e.max=e.min+at(t)}function Kh(e,t,r){Wh(e.x,t.x,r.x),Wh(e.y,t.y,r.y)}function qh(e,t,r){e.min=t.min-r.min,e.max=e.min+at(t)}function kn(e,t,r){qh(e.x,t.x,r.x),qh(e.y,t.y,r.y)}function Jh(e,t,r){var n=t.min,o=t.max;return n!==void 0&&e<n?e=r?Z(n,e,r.min):Math.max(e,n):o!==void 0&&e>o&&(e=r?Z(o,e,r.max):Math.min(e,o)),e}function Yh(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function Qh(e,t){var r=t.top,n=t.left,o=t.bottom,i=t.right;return{x:Yh(e.x,n,i),y:Yh(e.y,r,o)}}function Xh(e,t){var r,n=t.min-e.min,o=t.max-e.max;return t.max-t.min<e.max-e.min&&(r=Y([o,n],2),n=r[0],o=r[1]),{min:n,max:o}}function eg(e,t){return{x:Xh(e.x,t.x),y:Xh(e.y,t.y)}}function tg(e,t){var r=.5,n=at(e),o=at(t);return o>n?r=tr(t.min,t.max-n,e.min):n>o&&(r=tr(e.min,e.max-o,t.min)),Sr(0,1,r)}function rg(e,t){var r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}var ja=.35;function ng(e){return e===void 0&&(e=ja),e===!1?e=0:e===!0&&(e=ja),{x:$h(e,"left","right"),y:$h(e,"top","bottom")}}function $h(e,t,r){return{min:Zh(e,t),max:Zh(e,r)}}function Zh(e,t){var r;return typeof e=="number"?e:(r=e[t])!==null&&r!==void 0?r:0}var og=function(){return{translate:0,scale:1,origin:0,originPoint:0}},Nn=function(){return{x:og(),y:og()}},ig=function(){return{min:0,max:0}},Ie=function(){return{x:ig(),y:ig()}};function st(e){return[e("x"),e("y")]}function za(e){var t=e.top,r=e.left,n=e.right,o=e.bottom;return{x:{min:r,max:n},y:{min:t,max:o}}}function ag(e){var t=e.x,r=e.y;return{top:r.min,right:t.max,bottom:r.max,left:t.min}}function sg(e,t){if(!t)return e;var r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Tl(e){return e===void 0||e===1}function Ml(e){var t=e.scale,r=e.scaleX,n=e.scaleY;return!Tl(t)||!Tl(r)||!Tl(n)}function Ut(e){return Ml(e)||ug(e.x)||ug(e.y)||e.z||e.rotate||e.rotateX||e.rotateY}function ug(e){return e&&e!=="0%"}function ko(e,t,r){var n=e-r,o=t*n;return r+o}function lg(e,t,r,n,o){return o!==void 0&&(e=ko(e,o,n)),ko(e,r,n)+t}function Il(e,t,r,n,o){t===void 0&&(t=0),r===void 0&&(r=1),e.min=lg(e.min,t,r,n,o),e.max=lg(e.max,t,r,n,o)}function wl(e,t){var r=t.x,n=t.y;Il(e.x,r.translate,r.scale,r.originPoint),Il(e.y,n.translate,n.scale,n.originPoint)}function fg(e,t,r,n){var o,i;n===void 0&&(n=!1);var a=r.length;if(a){t.x=t.y=1;for(var s,u,l=0;l<a;l++)s=r[l],u=s.projectionDelta,((i=(o=s.instance)===null||o===void 0?void 0:o.style)===null||i===void 0?void 0:i.display)!=="contents"&&(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&$r(e,{x:-s.scroll.x,y:-s.scroll.y}),u&&(t.x*=u.x.scale,t.y*=u.y.scale,wl(e,u)),n&&Ut(s.latestValues)&&$r(e,s.latestValues))}}function jt(e,t){e.min=e.min+t,e.max=e.max+t}function cg(e,t,r){var n=Y(r,3),o=n[0],i=n[1],a=n[2],s=t[a]!==void 0?t[a]:.5,u=Z(e.min,e.max,s);Il(e,t[o],t[i],u,t.scale)}var rC=["x","scaleX","originX"],nC=["y","scaleY","originY"];function $r(e,t){cg(e.x,t,rC),cg(e.y,t,nC)}function _l(e,t){return za(sg(e.getBoundingClientRect(),t))}function dg(e,t,r){var n=_l(e,r),o=t.scroll;return o&&(jt(n.x,o.x),jt(n.y,o.y)),n}var oC=new WeakMap,pg=function(){function e(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ie(),this.visualElement=t}return e.prototype.start=function(t,r){var n=this,o=r===void 0?{}:r,i=o.snapToCursor,a=i===void 0?!1:i;if(this.visualElement.isPresent!==!1){var s=function(f){n.stopAnimation(),a&&n.snapToCursor(yo(f,"page").point)},u=function(f,d){var m,p=n.getProps(),h=p.drag,g=p.dragPropagation,v=p.onDragStart;h&&!g&&(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=Gu(h),!n.openGlobalLock)||(n.isDragging=!0,n.currentDirection=null,n.resolveConstraints(),n.visualElement.projection&&(n.visualElement.projection.isAnimationBlocked=!0,n.visualElement.projection.target=void 0),st(function(y){var E,S,C=n.getAxisMotionValue(y).get()||0;if(ke.test(C)){var x=(S=(E=n.visualElement.projection)===null||E===void 0?void 0:E.layout)===null||S===void 0?void 0:S.actual[y];if(x){var b=at(x);C=b*(parseFloat(C)/100)}}n.originPoint[y]=C}),v?.(f,d),(m=n.visualElement.animationState)===null||m===void 0||m.setActive(Q.Drag,!0))},l=function(f,d){var m=n.getProps(),p=m.dragPropagation,h=m.dragDirectionLock,g=m.onDirectionLock,v=m.onDrag;if(!(!p&&!n.openGlobalLock)){var y=d.offset;if(h&&n.currentDirection===null){n.currentDirection=iC(y),n.currentDirection!==null&&g?.(n.currentDirection);return}n.updateAxis("x",d.point,y),n.updateAxis("y",d.point,y),n.visualElement.syncRender(),v?.(f,d)}},c=function(f,d){return n.stop(f,d)};this.panSession=new Ua(t,{onSessionStart:s,onStart:u,onMove:l,onSessionEnd:c},{transformPagePoint:this.visualElement.getTransformPagePoint()})}},e.prototype.stop=function(t,r){var n=this.isDragging;if(this.cancel(),!!n){var o=r.velocity;this.startAnimation(o);var i=this.getProps().onDragEnd;i?.(t,r)}},e.prototype.cancel=function(){var t,r;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),(t=this.panSession)===null||t===void 0||t.end(),this.panSession=void 0;var n=this.getProps().dragPropagation;!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),(r=this.visualElement.animationState)===null||r===void 0||r.setActive(Q.Drag,!1)},e.prototype.updateAxis=function(t,r,n){var o=this.getProps().drag;if(!(!n||!Ga(t,o,this.currentDirection))){var i=this.getAxisMotionValue(t),a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=Jh(a,this.constraints[t],this.elastic[t])),i.set(a)}},e.prototype.resolveConstraints=function(){var t=this,r=this.getProps(),n=r.dragConstraints,o=r.dragElastic,i=(this.visualElement.projection||{}).layout,a=this.constraints;n&&$t(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=Qh(i.actual,n):this.constraints=!1,this.elastic=ng(o),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&st(function(s){t.getAxisMotionValue(s)&&(t.constraints[s]=rg(i.actual[s],t.constraints[s]))})},e.prototype.resolveRefConstraints=function(){var t=this.getProps(),r=t.dragConstraints,n=t.onMeasureDragConstraints;if(!r||!$t(r))return!1;var o=r.current;Me(o!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");var i=this.visualElement.projection;if(!i||!i.layout)return!1;var a=dg(o,i.root,this.visualElement.getTransformPagePoint()),s=eg(i.layout.actual,a);if(n){var u=n(ag(s));this.hasMutatedConstraints=!!u,u&&(s=za(u))}return s},e.prototype.startAnimation=function(t){var r=this,n=this.getProps(),o=n.drag,i=n.dragMomentum,a=n.dragElastic,s=n.dragTransition,u=n.dragSnapToOrigin,l=n.onDragTransitionEnd,c=this.constraints||{},f=st(function(d){var m;if(Ga(d,o,r.currentDirection)){var p=(m=c?.[d])!==null&&m!==void 0?m:{};u&&(p={min:0,max:0});var h=a?200:1e6,g=a?40:1e7,v=M(M({type:"inertia",velocity:i?t[d]:0,bounceStiffness:h,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10},s),p);return r.startAxisValueAnimation(d,v)}});return Promise.all(f).then(l)},e.prototype.startAxisValueAnimation=function(t,r){var n=this.getAxisMotionValue(t);return Dn(t,n,0,r)},e.prototype.stopAnimation=function(){var t=this;st(function(r){return t.getAxisMotionValue(r).stop()})},e.prototype.getAxisMotionValue=function(t){var r,n,o="_drag"+t.toUpperCase(),i=this.visualElement.getProps()[o];return i||this.visualElement.getValue(t,(n=(r=this.visualElement.getProps().initial)===null||r===void 0?void 0:r[t])!==null&&n!==void 0?n:0)},e.prototype.snapToCursor=function(t){var r=this;st(function(n){var o=r.getProps().drag;if(Ga(n,o,r.currentDirection)){var i=r.visualElement.projection,a=r.getAxisMotionValue(n);if(i&&i.layout){var s=i.layout.actual[n],u=s.min,l=s.max;a.set(t[n]-Z(u,l,.5))}}})},e.prototype.scalePositionWithinConstraints=function(){var t=this,r,n=this.getProps(),o=n.drag,i=n.dragConstraints,a=this.visualElement.projection;if(!(!$t(i)||!a||!this.constraints)){this.stopAnimation();var s={x:0,y:0};st(function(l){var c=t.getAxisMotionValue(l);if(c){var f=c.get();s[l]=tg({min:f,max:f},t.constraints[l])}});var u=this.visualElement.getProps().transformTemplate;this.visualElement.getInstance().style.transform=u?u({},""):"none",(r=a.root)===null||r===void 0||r.updateScroll(),a.updateLayout(),this.resolveConstraints(),st(function(l){if(Ga(l,o,null)){var c=t.getAxisMotionValue(l),f=t.constraints[l],d=f.min,m=f.max;c.set(Z(d,m,s[l]))}})}},e.prototype.addListeners=function(){var t=this,r;oC.set(this.visualElement,this);var n=this.visualElement.getInstance(),o=er(n,"pointerdown",function(l){var c=t.getProps(),f=c.drag,d=c.dragListener,m=d===void 0?!0:d;f&&m&&t.start(l)}),i=function(){var l=t.getProps().dragConstraints;$t(l)&&(t.constraints=t.resolveRefConstraints())},a=this.visualElement.projection,s=a.addEventListener("measure",i);a&&!a.layout&&((r=a.root)===null||r===void 0||r.updateScroll(),a.updateLayout()),i();var u=Gr(window,"resize",function(){return t.scalePositionWithinConstraints()});return a.addEventListener("didUpdate",function(l){var c=l.delta,f=l.hasLayoutChanged;t.isDragging&&f&&(st(function(d){var m=t.getAxisMotionValue(d);m&&(t.originPoint[d]+=c[d].translate,m.set(m.get()+c[d].translate))}),t.visualElement.syncRender())}),function(){u(),o(),s()}},e.prototype.getProps=function(){var t=this.visualElement.getProps(),r=t.drag,n=r===void 0?!1:r,o=t.dragDirectionLock,i=o===void 0?!1:o,a=t.dragPropagation,s=a===void 0?!1:a,u=t.dragConstraints,l=u===void 0?!1:u,c=t.dragElastic,f=c===void 0?ja:c,d=t.dragMomentum,m=d===void 0?!0:d;return M(M({},t),{drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:l,dragElastic:f,dragMomentum:m})},e}();function Ga(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function iC(e,t){t===void 0&&(t=10);var r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}function mg(e){var t=e.dragControls,r=e.visualElement,n=vr(function(){return new pg(r)});(0,Ol.useEffect)(function(){return t&&t.subscribe(n)},[n,t]),(0,Ol.useEffect)(function(){return n.addListeners()},[n])}var Vn=w(O(),1);function hg(e){var t=e.onPan,r=e.onPanStart,n=e.onPanEnd,o=e.onPanSessionStart,i=e.visualElement,a=t||r||n||o,s=(0,Vn.useRef)(null),u=(0,Vn.useContext)(fn).transformPagePoint,l={onSessionStart:o,onStart:r,onMove:t,onEnd:function(f,d){s.current=null,n&&n(f,d)}};(0,Vn.useEffect)(function(){s.current!==null&&s.current.updateHandlers(l)});function c(f){s.current=new Ua(f,l,{transformPagePoint:u})}Wr(i,"pointerdown",a&&c),Ca(function(){return s.current&&s.current.end()})}var gg={pan:It(hg),drag:It(mg)};var Wa=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","LayoutAnimationStart","SetAxisTarget","Unmount"];function vg(){var e=Wa.map(function(){return new Cr}),t={},r={clearAllListeners:function(){return e.forEach(function(n){return n.clear()})},updatePropListeners:function(n){Wa.forEach(function(o){var i,a="on"+o,s=n[a];(i=t[o])===null||i===void 0||i.call(t),s&&(t[o]=r[a](s))})}};return e.forEach(function(n,o){r["on"+Wa[o]]=function(i){return n.add(i)},r["notify"+Wa[o]]=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return n.notify.apply(n,we([],Y(i),!1))}}),r}function xg(e,t,r){var n;for(var o in t){var i=t[o],a=r[o];if(Re(i))e.addValue(o,i);else if(Re(a))e.addValue(o,Ht(i));else if(a!==i)if(e.hasValue(o)){var s=e.getValue(o);!s.hasAnimated&&s.set(i)}else e.addValue(o,Ht((n=e.getStaticValue(o))!==null&&n!==void 0?n:i))}for(var o in r)t[o]===void 0&&e.removeValue(o);return t}var qa=function(e){var t=e.treeType,r=t===void 0?"":t,n=e.build,o=e.getBaseTarget,i=e.makeTargetAnimatable,a=e.measureViewportBox,s=e.render,u=e.readValueFromInstance,l=e.removeValueFromRenderState,c=e.sortNodePosition,f=e.scrapeMotionValuesFromProps;return function(d,m){var p=d.parent,h=d.props,g=d.presenceId,v=d.blockInitialAnimation,y=d.visualState,E=d.shouldReduceMotion;m===void 0&&(m={});var S=!1,C=y.latestValues,x=y.renderState,b,I=vg(),T=new Map,_=new Map,P={},H=M({},C),j;function B(){!b||!S||(F(),s(b,x,h.style,G.projection))}function F(){n(G,x,C,m,h)}function X(){I.notifyUpdate(C)}function $(D,V){var ve=V.onChange(function(K){C[D]=K,h.onUpdate&&Ne.update(X,!1,!0)}),Ke=V.onRenderRequest(G.scheduleRender);_.set(D,function(){ve(),Ke()})}var Ce=f(h);for(var et in Ce){var mt=Ce[et];C[et]!==void 0&&Re(mt)&&mt.set(C[et],!1)}var te=zr(h),ie=Zi(h),G=M(M({treeType:r,current:null,depth:p?p.depth+1:0,parent:p,children:new Set,presenceId:g,shouldReduceMotion:E,variantChildren:ie?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:!!p?.isMounted(),blockInitialAnimation:v,isMounted:function(){return!!b},mount:function(D){S=!0,b=G.current=D,G.projection&&G.projection.mount(D),ie&&p&&!te&&(j=p?.addVariantChild(G)),T.forEach(function(V,ve){return $(ve,V)}),p?.children.add(G),G.setProps(h)},unmount:function(){var D;(D=G.projection)===null||D===void 0||D.unmount(),Bt.update(X),Bt.render(B),_.forEach(function(V){return V()}),j?.(),p?.children.delete(G),I.clearAllListeners(),b=void 0,S=!1},addVariantChild:function(D){var V,ve=G.getClosestVariantNode();if(ve)return(V=ve.variantChildren)===null||V===void 0||V.add(D),function(){return ve.variantChildren.delete(D)}},sortNodePosition:function(D){return!c||r!==D.treeType?0:c(G.getInstance(),D.getInstance())},getClosestVariantNode:function(){return ie?G:p?.getClosestVariantNode()},getLayoutId:function(){return h.layoutId},getInstance:function(){return b},getStaticValue:function(D){return C[D]},setStaticValue:function(D,V){return C[D]=V},getLatestValues:function(){return C},setVisibility:function(D){G.isVisible!==D&&(G.isVisible=D,G.scheduleRender())},makeTargetAnimatable:function(D,V){return V===void 0&&(V=!0),i(G,D,h,V)},measureViewportBox:function(){return a(b,h)},addValue:function(D,V){G.hasValue(D)&&G.removeValue(D),T.set(D,V),C[D]=V.get(),$(D,V)},removeValue:function(D){var V;T.delete(D),(V=_.get(D))===null||V===void 0||V(),_.delete(D),delete C[D],l(D,x)},hasValue:function(D){return T.has(D)},getValue:function(D,V){var ve=T.get(D);return ve===void 0&&V!==void 0&&(ve=Ht(V),G.addValue(D,ve)),ve},forEachValue:function(D){return T.forEach(D)},readValue:function(D){var V;return(V=C[D])!==null&&V!==void 0?V:u(b,D,m)},setBaseTarget:function(D,V){H[D]=V},getBaseTarget:function(D){if(o){var V=o(h,D);if(V!==void 0&&!Re(V))return V}return H[D]}},I),{build:function(){return F(),x},scheduleRender:function(){Ne.render(B,!1,!0)},syncRender:B,setProps:function(D){(D.transformTemplate||h.transformTemplate)&&G.scheduleRender(),h=D,I.updatePropListeners(D),P=xg(G,f(h),P)},getProps:function(){return h},getVariant:function(D){var V;return(V=h.variants)===null||V===void 0?void 0:V[D]},getDefaultTransition:function(){return h.transition},getTransformPagePoint:function(){return h.transformPagePoint},getVariantContext:function(D){if(D===void 0&&(D=!1),D)return p?.getVariantContext();if(!te){var V=p?.getVariantContext()||{};return h.initial!==void 0&&(V.initial=h.initial),V}for(var ve={},Ke=0;Ke<aC;Ke++){var K=yg[Ke],re=h[K];(We(re)||re===!1)&&(ve[K]=re)}return ve}});return G}},yg=we(["initial"],Y(Ha),!1),aC=yg.length;function Dl(e){return typeof e=="string"&&e.startsWith("var(--")}var Al=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function sC(e){var t=Al.exec(e);if(!t)return[,];var r=Y(t,3),n=r[1],o=r[2];return[n,o]}var uC=4;function Pl(e,t,r){r===void 0&&(r=1),Me(r<=uC,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));var n=Y(sC(e),2),o=n[0],i=n[1];if(o){var a=window.getComputedStyle(t).getPropertyValue(o);return a?a.trim():Dl(i)?Pl(i,t,r+1):i}}function bg(e,t,r){var n,o=pe(t,[]),i=e.getInstance();if(!(i instanceof Element))return{target:o,transitionEnd:r};r&&(r=M({},r)),e.forEachValue(function(l){var c=l.get();if(Dl(c)){var f=Pl(c,i);f&&l.set(f)}});for(var a in o){var s=o[a];if(Dl(s)){var u=Pl(s,i);u&&(o[a]=u,r&&((n=r[a])!==null&&n!==void 0||(r[a]=s)))}}return{target:o,transitionEnd:r}}var lC=new Set(["width","height","top","left","right","bottom","x","y"]),Mg=function(e){return lC.has(e)},cC=function(e){return Object.keys(e).some(Mg)},Ig=function(e,t){e.set(t,!1),e.set(t)},Ka=function(e){return e===$e||e===N},Sg;(function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"})(Sg||(Sg={}));var Cg=function(e,t){return parseFloat(e.split(", ")[t])},Eg=function(e,t){return function(r,n){var o=n.transform;if(o==="none"||!o)return 0;var i=o.match(/^matrix3d\((.+)\)$/);if(i)return Cg(i[1],t);var a=o.match(/^matrix\((.+)\)$/);return a?Cg(a[1],e):0}},fC=new Set(["x","y","z"]),dC=mn.filter(function(e){return!fC.has(e)});function pC(e){var t=[];return dC.forEach(function(r){var n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.syncRender(),t}var Tg={width:function(e,t){var r=e.x,n=t.paddingLeft,o=n===void 0?"0":n,i=t.paddingRight,a=i===void 0?"0":i;return r.max-r.min-parseFloat(o)-parseFloat(a)},height:function(e,t){var r=e.y,n=t.paddingTop,o=n===void 0?"0":n,i=t.paddingBottom,a=i===void 0?"0":i;return r.max-r.min-parseFloat(o)-parseFloat(a)},top:function(e,t){var r=t.top;return parseFloat(r)},left:function(e,t){var r=t.left;return parseFloat(r)},bottom:function(e,t){var r=e.y,n=t.top;return parseFloat(n)+(r.max-r.min)},right:function(e,t){var r=e.x,n=t.left;return parseFloat(n)+(r.max-r.min)},x:Eg(4,13),y:Eg(5,14)},mC=function(e,t,r){var n=t.measureViewportBox(),o=t.getInstance(),i=getComputedStyle(o),a=i.display,s={};a==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(function(l){s[l]=Tg[l](n,i)}),t.syncRender();var u=t.measureViewportBox();return r.forEach(function(l){var c=t.getValue(l);Ig(c,s[l]),e[l]=Tg[l](u,i)}),e},hC=function(e,t,r,n){r===void 0&&(r={}),n===void 0&&(n={}),t=M({},t),n=M({},n);var o=Object.keys(t).filter(Mg),i=[],a=!1,s=[];if(o.forEach(function(c){var f=e.getValue(c);if(e.hasValue(c)){var d=r[c],m=Ln(d),p=t[c],h;if(Qt(p)){var g=p.length,v=p[0]===null?1:0;d=p[v],m=Ln(d);for(var y=v;y<g;y++)h?Me(Ln(p[y])===h,"All keyframes must be of the same type"):(h=Ln(p[y]),Me(h===m||Ka(m)&&Ka(h),"Keyframes must be of the same dimension as the current value"))}else h=Ln(p);if(m!==h)if(Ka(m)&&Ka(h)){var E=f.get();typeof E=="string"&&f.set(parseFloat(E)),typeof p=="string"?t[c]=parseFloat(p):Array.isArray(p)&&h===N&&(t[c]=p.map(parseFloat))}else m?.transform&&h?.transform&&(d===0||p===0)?d===0?f.set(h.transform(d)):t[c]=m.transform(p):(a||(i=pC(e),a=!0),s.push(c),n[c]=n[c]!==void 0?n[c]:t[c],Ig(f,p))}}),s.length){var u=s.indexOf("height")>=0?window.pageYOffset:null,l=mC(t,e,s);return i.length&&i.forEach(function(c){var f=Y(c,2),d=f[0],m=f[1];e.getValue(d).set(m)}),e.syncRender(),u!==null&&window.scrollTo({top:u}),{target:l,transitionEnd:n}}else return{target:t,transitionEnd:n}};function wg(e,t,r,n){return cC(t)?hC(e,t,r,n):{target:t,transitionEnd:n}}var _g=function(e,t,r,n){var o=bg(e,t,n);return t=o.target,n=o.transitionEnd,wg(e,t,r,n)};function gC(e){return window.getComputedStyle(e)}var Ll={treeType:"dom",readValueFromInstance:function(e,t){if(Vt(t)){var r=On(t);return r&&r.default||0}else{var n=gC(e);return(oa(t)?n.getPropertyValue(t):n[t])||0}},sortNodePosition:function(e,t){return e.compareDocumentPosition(t)&2?1:-1},getBaseTarget:function(e,t){var r;return(r=e.style)===null||r===void 0?void 0:r[t]},measureViewportBox:function(e,t){var r=t.transformPagePoint;return _l(e,r)},resetTransform:function(e,t,r){var n=r.transformTemplate;t.style.transform=n?n({},""):"none",e.scheduleRender()},restoreTransform:function(e,t){e.style.transform=t.style.transform},removeValueFromRenderState:function(e,t){var r=t.vars,n=t.style;delete r[e],delete n[e]},makeTargetAnimatable:function(e,t,r,n){var o=r.transformValues;n===void 0&&(n=!0);var i=t.transition,a=t.transitionEnd,s=pe(t,["transition","transitionEnd"]),u=Nh(s,i||{},e);if(o&&(a&&(a=o(a)),s&&(s=o(s)),u&&(u=o(u))),n){kh(e,s,u);var l=_g(e,s,u,a);a=l.transitionEnd,s=l.target}return M({transition:i,transitionEnd:a},s)},scrapeMotionValuesFromProps:Cn,build:function(e,t,r,n,o){e.isVisible!==void 0&&(t.style.visibility=e.isVisible?"visible":"hidden"),yn(t,r,n,o.transformTemplate)},render:pa},Og=qa(Ll);var Dg=qa(M(M({},Ll),{getBaseTarget:function(e,t){return e[t]},readValueFromInstance:function(e,t){var r;return Vt(t)?((r=On(t))===null||r===void 0?void 0:r.default)||0:(t=ma.has(t)?t:da(t),e.getAttribute(t))},scrapeMotionValuesFromProps:ga,build:function(e,t,r,n,o){Sn(t,r,n,o.transformTemplate)},render:ha}));var Pg=function(e,t){return dn(e)?Dg(t,{enableHardwareAcceleration:!1}):Og(t,{enableHardwareAcceleration:!0})};var Bn=w(O(),1);function Ag(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var Fn={correct:function(e,t){if(!t.target)return e;if(typeof e=="string")if(N.test(e))e=parseFloat(e);else return e;var r=Ag(e,t.target.x),n=Ag(e,t.target.y);return"".concat(r,"% ").concat(n,"%")}};var Lg="_$css",Rg={correct:function(e,t){var r=t.treeScale,n=t.projectionDelta,o=e,i=e.includes("var("),a=[];i&&(e=e.replace(Al,function(h){return a.push(h),Lg}));var s=_e.parse(e);if(s.length>5)return o;var u=_e.createTransformer(e),l=typeof s[0]!="number"?1:0,c=n.x.scale*r.x,f=n.y.scale*r.y;s[0+l]/=c,s[1+l]/=f;var d=Z(c,f,.5);typeof s[2+l]=="number"&&(s[2+l]/=d),typeof s[3+l]=="number"&&(s[3+l]/=d);var m=u(s);if(i){var p=0;m=m.replace(Lg,function(){var h=a[p];return p++,h})}return m}};var vC=function(e){Wi(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.componentDidMount=function(){var r=this,n=this.props,o=n.visualElement,i=n.layoutGroup,a=n.switchLayoutGroup,s=n.layoutId,u=o.projection;im(xC),u&&(i?.group&&i.group.add(u),a?.register&&s&&a.register(u),u.root.didUpdate(),u.addEventListener("animationComplete",function(){r.safeToRemove()}),u.setOptions(M(M({},u.options),{onExitComplete:function(){return r.safeToRemove()}}))),xr.hasEverUpdated=!0},t.prototype.getSnapshotBeforeUpdate=function(r){var n=this,o=this.props,i=o.layoutDependency,a=o.visualElement,s=o.drag,u=o.isPresent,l=a.projection;return l&&(l.isPresent=u,s||r.layoutDependency!==i||i===void 0?l.willUpdate():this.safeToRemove(),r.isPresent!==u&&(u?l.promote():l.relegate()||Ne.postRender(function(){var c;!((c=l.getStack())===null||c===void 0)&&c.members.length||n.safeToRemove()}))),null},t.prototype.componentDidUpdate=function(){var r=this.props.visualElement.projection;r&&(r.root.didUpdate(),!r.currentAnimation&&r.isLead()&&this.safeToRemove())},t.prototype.componentWillUnmount=function(){var r=this.props,n=r.visualElement,o=r.layoutGroup,i=r.switchLayoutGroup,a=n.projection;a&&(a.scheduleCheckAfterUnmount(),o?.group&&o.group.remove(a),i?.deregister&&i.deregister(a))},t.prototype.safeToRemove=function(){var r=this.props.safeToRemove;r?.()},t.prototype.render=function(){return null},t}(Bn.default.Component);function kg(e){var t=Y(Na(),2),r=t[0],n=t[1],o=(0,Bn.useContext)(Qi);return Bn.default.createElement(vC,M({},e,{layoutGroup:o,switchLayoutGroup:(0,Bn.useContext)(ea),isPresent:r,safeToRemove:n}))}var xC={borderRadius:M(M({},Fn),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Fn,borderTopRightRadius:Fn,borderBottomLeftRadius:Fn,borderBottomRightRadius:Fn,boxShadow:Rg};var Ng={measureLayout:kg};function Vg(e,t,r){r===void 0&&(r={});var n=Re(e)?e:Ht(e);return Dn("",n,t,r),{stop:function(){return n.stop()},isAnimating:function(){return n.isAnimating()}}}var Ug=["TopLeft","TopRight","BottomLeft","BottomRight"],yC=Ug.length,Fg=function(e){return typeof e=="string"?parseFloat(e):e},Bg=function(e){return typeof e=="number"||N.test(e)};function jg(e,t,r,n,o,i){var a,s,u,l;o?(e.opacity=Z(0,(a=r.opacity)!==null&&a!==void 0?a:1,bC(n)),e.opacityExit=Z((s=t.opacity)!==null&&s!==void 0?s:1,0,SC(n))):i&&(e.opacity=Z((u=t.opacity)!==null&&u!==void 0?u:1,(l=r.opacity)!==null&&l!==void 0?l:1,n));for(var c=0;c<yC;c++){var f="border".concat(Ug[c],"Radius"),d=Hg(t,f),m=Hg(r,f);if(!(d===void 0&&m===void 0)){d||(d=0),m||(m=0);var p=d===0||m===0||Bg(d)===Bg(m);p?(e[f]=Math.max(Z(Fg(d),Fg(m),n),0),(ke.test(m)||ke.test(d))&&(e[f]+="%")):e[f]=m}}(t.rotate||r.rotate)&&(e.rotate=Z(t.rotate||0,r.rotate||0,n))}function Hg(e,t){var r;return(r=e[t])!==null&&r!==void 0?r:e.borderRadius}var bC=zg(0,.5,In),SC=zg(.5,.95,qr);function zg(e,t,r){return function(n){return n<e?0:n>t?1:r(tr(e,t,n))}}function Gg(e,t){e.min=t.min,e.max=t.max}function ut(e,t){Gg(e.x,t.x),Gg(e.y,t.y)}function Wg(e,t,r,n,o){return e-=t,e=ko(e,1/r,n),o!==void 0&&(e=ko(e,1/o,n)),e}function CC(e,t,r,n,o,i,a){if(t===void 0&&(t=0),r===void 0&&(r=1),n===void 0&&(n=.5),i===void 0&&(i=e),a===void 0&&(a=e),ke.test(t)){t=parseFloat(t);var s=Z(a.min,a.max,t/100);t=s-a.min}if(typeof t=="number"){var u=Z(i.min,i.max,n);e===i&&(u-=t),e.min=Wg(e.min,t,r,u,o),e.max=Wg(e.max,t,r,u,o)}}function qg(e,t,r,n,o){var i=Y(r,3),a=i[0],s=i[1],u=i[2];CC(e,t[a],t[s],t[u],t.scale,n,o)}var EC=["x","scaleX","originX"],TC=["y","scaleY","originY"];function Rl(e,t,r,n){qg(e.x,t,EC,r?.x,n?.x),qg(e.y,t,TC,r?.y,n?.y)}function Kg(e){return e.translate===0&&e.scale===1}function kl(e){return Kg(e.x)&&Kg(e.y)}function Nl(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}var Yg=function(){function e(){this.members=[]}return e.prototype.add=function(t){Pn(this.members,t),t.scheduleRender()},e.prototype.remove=function(t){if(An(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){var r=this.members[this.members.length-1];r&&this.promote(r)}},e.prototype.relegate=function(t){var r=this.members.findIndex(function(a){return t===a});if(r===0)return!1;for(var n,o=r;o>=0;o--){var i=this.members[o];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1},e.prototype.promote=function(t,r){var n,o=this.lead;if(t!==o&&(this.prevLead=o,this.lead=t,t.show(),o)){o.instance&&o.scheduleRender(),t.scheduleRender(),t.resumeFrom=o,r&&(t.resumeFrom.preserveOpacity=!0),o.snapshot&&(t.snapshot=o.snapshot,t.snapshot.latestValues=o.animationValues||o.latestValues,t.snapshot.isShared=!0),!((n=t.root)===null||n===void 0)&&n.isUpdating&&(t.isLayoutDirty=!0);var i=t.options.crossfade;i===!1&&o.hide()}},e.prototype.exitAnimationComplete=function(){this.members.forEach(function(t){var r,n,o,i,a;(n=(r=t.options).onExitComplete)===null||n===void 0||n.call(r),(a=(o=t.resumingFrom)===null||o===void 0?void 0:(i=o.options).onExitComplete)===null||a===void 0||a.call(i)})},e.prototype.scheduleRender=function(){this.members.forEach(function(t){t.instance&&t.scheduleRender(!1)})},e.prototype.removeLeadSnapshot=function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)},e}();var MC="translate3d(0px, 0px, 0) scale(1, 1) scale(1, 1)";function Vl(e,t,r){var n=e.x.translate/t.x,o=e.y.translate/t.y,i="translate3d(".concat(n,"px, ").concat(o,"px, 0) ");if(i+="scale(".concat(1/t.x,", ").concat(1/t.y,") "),r){var a=r.rotate,s=r.rotateX,u=r.rotateY;a&&(i+="rotate(".concat(a,"deg) ")),s&&(i+="rotateX(".concat(s,"deg) ")),u&&(i+="rotateY(".concat(u,"deg) "))}var l=e.x.scale*t.x,c=e.y.scale*t.y;return i+="scale(".concat(l,", ").concat(c,")"),i===MC?"none":i}var Xg=function(e,t){return e.depth-t.depth};var $g=function(){function e(){this.children=[],this.isDirty=!1}return e.prototype.add=function(t){Pn(this.children,t),this.isDirty=!0},e.prototype.remove=function(t){An(this.children,t),this.isDirty=!0},e.prototype.forEach=function(t){this.isDirty&&this.children.sort(Xg),this.isDirty=!1,this.children.forEach(t)},e}();var Zg=1e3;function Ya(e){var t=e.attachResizeListener,r=e.defaultParent,n=e.measureScroll,o=e.checkIsScrollRoot,i=e.resetTransform;return function(){function a(s,u,l){var c=this;u===void 0&&(u={}),l===void 0&&(l=r?.()),this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){c.isUpdating&&(c.isUpdating=!1,c.clearAllSnapshots())},this.updateProjection=function(){c.nodes.forEach(PC),c.nodes.forEach(AC)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=s,this.latestValues=u,this.root=l?l.root||l:this,this.path=l?we(we([],Y(l.path),!1),[l],!1):[],this.parent=l,this.depth=l?l.depth+1:0,s&&this.root.registerPotentialNode(s,this);for(var f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new $g)}return a.prototype.addEventListener=function(s,u){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new Cr),this.eventHandlers.get(s).add(u)},a.prototype.notifyListeners=function(s){for(var u=[],l=1;l<arguments.length;l++)u[l-1]=arguments[l];var c=this.eventHandlers.get(s);c?.notify.apply(c,we([],Y(u),!1))},a.prototype.hasListeners=function(s){return this.eventHandlers.has(s)},a.prototype.registerPotentialNode=function(s,u){this.potentialNodes.set(s,u)},a.prototype.mount=function(s,u){var l=this,c;if(u===void 0&&(u=!1),!this.instance){this.isSVG=s instanceof SVGElement&&s.tagName!=="svg",this.instance=s;var f=this.options,d=f.layoutId,m=f.layout,p=f.visualElement;if(p&&!p.getInstance()&&p.mount(s),this.root.nodes.add(this),(c=this.parent)===null||c===void 0||c.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),u&&(m||d)&&(this.isLayoutDirty=!0),t){var h,g=function(){return l.root.updateBlockedByResize=!1};t(s,function(){l.root.updateBlockedByResize=!0,clearTimeout(h),h=window.setTimeout(g,250),xr.hasAnimatedSinceResize&&(xr.hasAnimatedSinceResize=!1,l.nodes.forEach(DC))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&p&&(d||m)&&this.addEventListener("didUpdate",function(v){var y,E,S,C,x,b=v.delta,I=v.hasLayoutChanged,T=v.hasRelativeTargetChanged,_=v.layout;if(l.isTreeAnimationBlocked()){l.target=void 0,l.relativeTarget=void 0;return}var P=(E=(y=l.options.transition)!==null&&y!==void 0?y:p.getDefaultTransition())!==null&&E!==void 0?E:VC,H=p.getProps(),j=H.onLayoutAnimationStart,B=H.onLayoutAnimationComplete,F=!l.targetLayout||!Nl(l.targetLayout,_)||T,X=!I&&T;if(!((S=l.resumeFrom)===null||S===void 0)&&S.instance||X||I&&(F||!l.currentAnimation)){l.resumeFrom&&(l.resumingFrom=l.resumeFrom,l.resumingFrom.resumingFrom=void 0),l.setAnimationOrigin(b,X);var $=M(M({},Fa(P,"layout")),{onPlay:j,onComplete:B});p.shouldReduceMotion&&($.delay=0,$.type=!1),l.startAnimation($)}else!I&&l.animationProgress===0&&l.finishAnimation(),l.isLead()&&((x=(C=l.options).onExitComplete)===null||x===void 0||x.call(C));l.targetLayout=_})}},a.prototype.unmount=function(){var s,u;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),(s=this.getStack())===null||s===void 0||s.remove(this),(u=this.parent)===null||u===void 0||u.children.delete(this),this.instance=void 0,Bt.preRender(this.updateProjection)},a.prototype.blockUpdate=function(){this.updateManuallyBlocked=!0},a.prototype.unblockUpdate=function(){this.updateManuallyBlocked=!1},a.prototype.isUpdateBlocked=function(){return this.updateManuallyBlocked||this.updateBlockedByResize},a.prototype.isTreeAnimationBlocked=function(){var s;return this.isAnimationBlocked||((s=this.parent)===null||s===void 0?void 0:s.isTreeAnimationBlocked())||!1},a.prototype.startUpdate=function(){var s;this.isUpdateBlocked()||(this.isUpdating=!0,(s=this.nodes)===null||s===void 0||s.forEach(LC))},a.prototype.willUpdate=function(s){var u,l,c;if(s===void 0&&(s=!0),this.root.isUpdateBlocked()){(l=(u=this.options).onExitComplete)===null||l===void 0||l.call(u);return}if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var f=0;f<this.path.length;f++){var d=this.path[f];d.shouldResetTransform=!0,d.updateScroll()}var m=this.options,p=m.layoutId,h=m.layout;if(!(p===void 0&&!h)){var g=(c=this.options.visualElement)===null||c===void 0?void 0:c.getProps().transformTemplate;this.prevTransformTemplateValue=g?.(this.latestValues,""),this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}}},a.prototype.didUpdate=function(){var s=this.isUpdateBlocked();if(s){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Jg);return}this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(FC),this.potentialNodes.clear()),this.nodes.forEach(OC),this.nodes.forEach(IC),this.nodes.forEach(wC),this.clearAllSnapshots(),Da.update(),Da.preRender(),Da.render())},a.prototype.clearAllSnapshots=function(){this.nodes.forEach(_C),this.sharedNodes.forEach(RC)},a.prototype.scheduleUpdateProjection=function(){Ne.preRender(this.updateProjection,!1,!0)},a.prototype.scheduleCheckAfterUnmount=function(){var s=this;Ne.postRender(function(){s.isLayoutDirty?s.root.didUpdate():s.root.checkUpdateFailed()})},a.prototype.updateSnapshot=function(){if(!(this.snapshot||!this.instance)){var s=this.measure(),u=this.removeTransform(this.removeElementScroll(s));rv(u),this.snapshot={measured:s,layout:u,latestValues:{}}}},a.prototype.updateLayout=function(){var s;if(this.instance&&(this.updateScroll(),!(!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))){if(this.resumeFrom&&!this.resumeFrom.instance)for(var u=0;u<this.path.length;u++){var l=this.path[u];l.updateScroll()}var c=this.measure();rv(c);var f=this.layout;this.layout={measured:c,actual:this.removeElementScroll(c)},this.layoutCorrected=Ie(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),(s=this.options.visualElement)===null||s===void 0||s.notifyLayoutMeasure(this.layout.actual,f?.actual)}},a.prototype.updateScroll=function(){this.options.layoutScroll&&this.instance&&(this.isScrollRoot=o(this.instance),this.scroll=n(this.instance))},a.prototype.resetTransform=function(){var s;if(i){var u=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!kl(this.projectionDelta),c=(s=this.options.visualElement)===null||s===void 0?void 0:s.getProps().transformTemplate,f=c?.(this.latestValues,""),d=f!==this.prevTransformTemplateValue;u&&(l||Ut(this.latestValues)||d)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}},a.prototype.measure=function(){var s=this.options.visualElement;if(!s)return Ie();var u=s.measureViewportBox(),l=this.root.scroll;return l&&(jt(u.x,l.x),jt(u.y,l.y)),u},a.prototype.removeElementScroll=function(s){var u=Ie();ut(u,s);for(var l=0;l<this.path.length;l++){var c=this.path[l],f=c.scroll,d=c.options,m=c.isScrollRoot;if(c!==this.root&&f&&d.layoutScroll){if(m){ut(u,s);var p=this.root.scroll;p&&(jt(u.x,-p.x),jt(u.y,-p.y))}jt(u.x,f.x),jt(u.y,f.y)}}return u},a.prototype.applyTransform=function(s,u){u===void 0&&(u=!1);var l=Ie();ut(l,s);for(var c=0;c<this.path.length;c++){var f=this.path[c];!u&&f.options.layoutScroll&&f.scroll&&f!==f.root&&$r(l,{x:-f.scroll.x,y:-f.scroll.y}),Ut(f.latestValues)&&$r(l,f.latestValues)}return Ut(this.latestValues)&&$r(l,this.latestValues),l},a.prototype.removeTransform=function(s){var u,l=Ie();ut(l,s);for(var c=0;c<this.path.length;c++){var f=this.path[c];if(f.instance&&Ut(f.latestValues)){Ml(f.latestValues)&&f.updateSnapshot();var d=Ie(),m=f.measure();ut(d,m),Rl(l,f.latestValues,(u=f.snapshot)===null||u===void 0?void 0:u.layout,d)}}return Ut(this.latestValues)&&Rl(l,this.latestValues),l},a.prototype.setTargetDelta=function(s){this.targetDelta=s,this.root.scheduleUpdateProjection()},a.prototype.setOptions=function(s){var u;this.options=M(M(M({},this.options),s),{crossfade:(u=s.crossfade)!==null&&u!==void 0?u:!0})},a.prototype.clearMeasurements=function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1},a.prototype.resolveTargetDelta=function(){var s,u=this.options,l=u.layout,c=u.layoutId;!this.layout||!(l||c)||(!this.targetDelta&&!this.relativeTarget&&(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget=Ie(),this.relativeTargetOrigin=Ie(),kn(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),ut(this.relativeTarget,this.relativeTargetOrigin))),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ie(),this.targetWithTransforms=Ie()),this.relativeTarget&&this.relativeTargetOrigin&&(!((s=this.relativeParent)===null||s===void 0)&&s.target)?Kh(this.target,this.relativeTarget,this.relativeParent.target):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.actual):ut(this.target,this.layout.actual),wl(this.target,this.targetDelta)):ut(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&!!this.relativeParent.resumingFrom==!!this.resumingFrom&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget=Ie(),this.relativeTargetOrigin=Ie(),kn(this.relativeTargetOrigin,this.target,this.relativeParent.target),ut(this.relativeTarget,this.relativeTargetOrigin)))))},a.prototype.getClosestProjectingParent=function(){if(!(!this.parent||Ut(this.parent.latestValues)))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()},a.prototype.calcProjection=function(){var s,u=this.options,l=u.layout,c=u.layoutId;if(this.isTreeAnimating=!!(!((s=this.parent)===null||s===void 0)&&s.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!(!this.layout||!(l||c))){var f=this.getLead();ut(this.layoutCorrected,this.layout.actual),fg(this.layoutCorrected,this.treeScale,this.path,!!this.resumingFrom||this!==f);var d=f.target;if(d){this.projectionDelta||(this.projectionDelta=Nn(),this.projectionDeltaWithTransform=Nn());var m=this.treeScale.x,p=this.treeScale.y,h=this.projectionTransform;Rn(this.projectionDelta,this.layoutCorrected,d,this.latestValues),this.projectionTransform=Vl(this.projectionDelta,this.treeScale),(this.projectionTransform!==h||this.treeScale.x!==m||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",d))}}},a.prototype.hide=function(){this.isVisible=!1},a.prototype.show=function(){this.isVisible=!0},a.prototype.scheduleRender=function(s){var u,l,c;s===void 0&&(s=!0),(l=(u=this.options).scheduleRender)===null||l===void 0||l.call(u),s&&((c=this.getStack())===null||c===void 0||c.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)},a.prototype.setAnimationOrigin=function(s,u){var l=this,c;u===void 0&&(u=!1);var f=this.snapshot,d=f?.latestValues||{},m=M({},this.latestValues),p=Nn();this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!u;var h=Ie(),g=f?.isShared,v=(((c=this.getStack())===null||c===void 0?void 0:c.members.length)||0)<=1,y=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(NC));this.animationProgress=0,this.mixTargetDelta=function(E){var S,C=E/1e3;Qg(p.x,s.x,C),Qg(p.y,s.y,C),l.setTargetDelta(p),l.relativeTarget&&l.relativeTargetOrigin&&l.layout&&(!((S=l.relativeParent)===null||S===void 0)&&S.layout)&&(kn(h,l.layout.actual,l.relativeParent.layout.actual),kC(l.relativeTarget,l.relativeTargetOrigin,h,C)),g&&(l.animationValues=m,jg(m,d,l.latestValues,C,y,v)),l.root.scheduleUpdateProjection(),l.scheduleRender(),l.animationProgress=C},this.mixTargetDelta(0)},a.prototype.startAnimation=function(s){var u=this,l,c;this.notifyListeners("animationStart"),(l=this.currentAnimation)===null||l===void 0||l.stop(),this.resumingFrom&&((c=this.resumingFrom.currentAnimation)===null||c===void 0||c.stop()),this.pendingAnimation&&(Bt.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ne.update(function(){xr.hasAnimatedSinceResize=!0,u.currentAnimation=Vg(0,Zg,M(M({},s),{onUpdate:function(f){var d;u.mixTargetDelta(f),(d=s.onUpdate)===null||d===void 0||d.call(s,f)},onComplete:function(){var f;(f=s.onComplete)===null||f===void 0||f.call(s),u.completeAnimation()}})),u.resumingFrom&&(u.resumingFrom.currentAnimation=u.currentAnimation),u.pendingAnimation=void 0})},a.prototype.completeAnimation=function(){var s;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),(s=this.getStack())===null||s===void 0||s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")},a.prototype.finishAnimation=function(){var s;this.currentAnimation&&((s=this.mixTargetDelta)===null||s===void 0||s.call(this,Zg),this.currentAnimation.stop()),this.completeAnimation()},a.prototype.applyTransformsToTarget=function(){var s=this.getLead(),u=s.targetWithTransforms,l=s.target,c=s.layout,f=s.latestValues;!u||!l||!c||(ut(u,l),$r(u,f),Rn(this.projectionDeltaWithTransform,this.layoutCorrected,u,f))},a.prototype.registerSharedNode=function(s,u){var l,c,f;this.sharedNodes.has(s)||this.sharedNodes.set(s,new Yg);var d=this.sharedNodes.get(s);d.add(u),u.promote({transition:(l=u.options.initialPromotionConfig)===null||l===void 0?void 0:l.transition,preserveFollowOpacity:(f=(c=u.options.initialPromotionConfig)===null||c===void 0?void 0:c.shouldPreserveFollowOpacity)===null||f===void 0?void 0:f.call(c,u)})},a.prototype.isLead=function(){var s=this.getStack();return s?s.lead===this:!0},a.prototype.getLead=function(){var s,u=this.options.layoutId;return u?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this},a.prototype.getPrevLead=function(){var s,u=this.options.layoutId;return u?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0},a.prototype.getStack=function(){var s=this.options.layoutId;if(s)return this.root.sharedNodes.get(s)},a.prototype.promote=function(s){var u=s===void 0?{}:s,l=u.needsReset,c=u.transition,f=u.preserveFollowOpacity,d=this.getStack();d&&d.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})},a.prototype.relegate=function(){var s=this.getStack();return s?s.relegate(this):!1},a.prototype.resetRotation=function(){var s=this.options.visualElement;if(s){for(var u=!1,l={},c=0;c<ta.length;c++){var f=ta[c],d="rotate"+f;s.getStaticValue(d)&&(u=!0,l[d]=s.getStaticValue(d),s.setStaticValue(d,0))}if(u){s?.syncRender();for(var d in l)s.setStaticValue(d,l[d]);s.scheduleRender()}}},a.prototype.getProjectionStyles=function(s){var u,l,c,f,d,m;s===void 0&&(s={});var p={};if(!this.instance||this.isSVG)return p;if(this.isVisible)p.visibility="";else return{visibility:"hidden"};var h=(u=this.options.visualElement)===null||u===void 0?void 0:u.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=Tn(s.pointerEvents)||"",p.transform=h?h(this.latestValues,""):"none",p;var g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){var v={};return this.options.layoutId&&(v.opacity=(l=this.latestValues.opacity)!==null&&l!==void 0?l:1,v.pointerEvents=Tn(s.pointerEvents)||""),this.hasProjected&&!Ut(this.latestValues)&&(v.transform=h?h({},""):"none",this.hasProjected=!1),v}var y=g.animationValues||g.latestValues;this.applyTransformsToTarget(),p.transform=Vl(this.projectionDeltaWithTransform,this.treeScale,y),h&&(p.transform=h(y,p.transform));var E=this.projectionDelta,S=E.x,C=E.y;p.transformOrigin="".concat(S.origin*100,"% ").concat(C.origin*100,"% 0"),g.animationValues?p.opacity=g===this?(f=(c=y.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:p.opacity=g===this?(d=y.opacity)!==null&&d!==void 0?d:"":(m=y.opacityExit)!==null&&m!==void 0?m:0;for(var x in pn)if(y[x]!==void 0){var b=pn[x],I=b.correct,T=b.applyTo,_=I(y[x],g);if(T)for(var P=T.length,H=0;H<P;H++)p[T[H]]=_;else p[x]=_}return this.options.layoutId&&(p.pointerEvents=g===this?Tn(s.pointerEvents)||"":"none"),p},a.prototype.clearSnapshot=function(){this.resumeFrom=this.snapshot=void 0},a.prototype.resetTree=function(){this.root.nodes.forEach(function(s){var u;return(u=s.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Jg),this.root.sharedNodes.clear()},a}()}function IC(e){e.updateLayout()}function wC(e){var t,r,n,o,i=(r=(t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)!==null&&r!==void 0?r:e.snapshot;if(e.isLead()&&e.layout&&i&&e.hasListeners("didUpdate")){var a=e.layout,s=a.actual,u=a.measured;e.options.animationType==="size"?st(function(y){var E=i.isShared?i.measured[y]:i.layout[y],S=at(E);E.min=s[y].min,E.max=E.min+S}):e.options.animationType==="position"&&st(function(y){var E=i.isShared?i.measured[y]:i.layout[y],S=at(s[y]);E.max=E.min+S});var l=Nn();Rn(l,s,i.layout);var c=Nn();i.isShared?Rn(c,e.applyTransform(u,!0),i.measured):Rn(c,s,i.layout);var f=!kl(l),d=!1;if(!e.resumeFrom&&(e.relativeParent=e.getClosestProjectingParent(),e.relativeParent&&!e.relativeParent.resumeFrom)){var m=e.relativeParent,p=m.snapshot,h=m.layout;if(p&&h){var g=Ie();kn(g,i.layout,p.layout);var v=Ie();kn(v,s,h.actual),Nl(g,v)||(d=!0)}}e.notifyListeners("didUpdate",{layout:s,snapshot:i,delta:c,layoutDelta:l,hasLayoutChanged:f,hasRelativeTargetChanged:d})}else e.isLead()&&((o=(n=e.options).onExitComplete)===null||o===void 0||o.call(n));e.options.transition=void 0}function _C(e){e.clearSnapshot()}function Jg(e){e.clearMeasurements()}function OC(e){var t=e.options.visualElement;t?.getProps().onBeforeLayoutMeasure&&t.notifyBeforeLayoutMeasure(),e.resetTransform()}function DC(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function PC(e){e.resolveTargetDelta()}function AC(e){e.calcProjection()}function LC(e){e.resetRotation()}function RC(e){e.removeLeadSnapshot()}function Qg(e,t,r){e.translate=Z(t.translate,0,r),e.scale=Z(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function ev(e,t,r,n){e.min=Z(t.min,r.min,n),e.max=Z(t.max,r.max,n)}function kC(e,t,r,n){ev(e.x,t.x,r.x,n),ev(e.y,t.y,r.y,n)}function NC(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}var VC={duration:.45,ease:[.4,0,.1,1]};function FC(e,t){for(var r=e.root,n=e.path.length-1;n>=0;n--)if(e.path[n].instance){r=e.path[n];break}var o=r&&r!==e.root?r.instance:document,i=o.querySelector('[data-projection-id="'.concat(t,'"]'));i&&e.mount(i,!0)}function tv(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function rv(e){tv(e.x),tv(e.y)}var nv=Ya({attachResizeListener:function(e,t){return Gr(e,"resize",t)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}});var Fl={current:void 0},ov=Ya({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!Fl.current){var e=new nv(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),Fl.current=e}return Fl.current},resetTransform:function(e,t){e.style.transform=t??"none"},checkIsScrollRoot:function(e){return window.getComputedStyle(e).position==="fixed"}});var BC=M(M(M(M({},Hh),bh),gg),Ng),Bl=nm(function(e,t){return Lm(e,t,BC,Pg,ov)});var Ze=w(O()),Ul=w(av());function sv(e){let{debounce:t,scroll:r,polyfill:n,offsetSize:o}=e===void 0?{debounce:0,scroll:!1,offsetSize:!1}:e,i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");let[a,s]=(0,Ze.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=(0,Ze.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a}),l=t?typeof t=="number"?t:t.scroll:null,c=t?typeof t=="number"?t:t.resize:null,f=(0,Ze.useRef)(!1);(0,Ze.useEffect)(()=>(f.current=!0,()=>void(f.current=!1)));let[d,m,p]=(0,Ze.useMemo)(()=>{let y=()=>{if(!u.current.element)return;let{left:E,top:S,width:C,height:x,bottom:b,right:I,x:T,y:_}=u.current.element.getBoundingClientRect(),P={left:E,top:S,width:C,height:x,bottom:b,right:I,x:T,y:_};u.current.element instanceof HTMLElement&&o&&(P.height=u.current.element.offsetHeight,P.width=u.current.element.offsetWidth),Object.freeze(P),f.current&&!zC(u.current.lastBounds,P)&&s(u.current.lastBounds=P)};return[y,c?(0,Ul.default)(y,c):y,l?(0,Ul.default)(y,l):y]},[s,o,l,c]);function h(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",p,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null)}function g(){u.current.element&&(u.current.resizeObserver=new i(p),u.current.resizeObserver.observe(u.current.element),r&&u.current.scrollContainers&&u.current.scrollContainers.forEach(y=>y.addEventListener("scroll",p,{capture:!0,passive:!0})))}let v=y=>{!y||y===u.current.element||(h(),u.current.element=y,u.current.scrollContainers=uv(y),g())};return UC(p,!!r),HC(m),(0,Ze.useEffect)(()=>{h(),g()},[r,p,m]),(0,Ze.useEffect)(()=>h,[]),[v,a,d]}function HC(e){(0,Ze.useEffect)(()=>{let t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function UC(e,t){(0,Ze.useEffect)(()=>{if(t){let r=e;return window.addEventListener("scroll",r,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",r,!0)}},[e,t])}function uv(e){let t=[];if(!e||e===document.body)return t;let{overflow:r,overflowX:n,overflowY:o}=window.getComputedStyle(e);return[r,n,o].some(i=>i==="auto"||i==="scroll")&&t.push(e),[...t,...uv(e.parentElement)]}var jC=["x","y","top","bottom","left","right","width","height"],zC=(e,t)=>jC.every(r=>e[r]===t[r]);var lv=w(O(),1),Xa=(0,lv.createContext)({dragDropManager:void 0});var Zv=w(sr(),1);function lt(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var cv=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),jl=function(){return Math.random().toString(36).substring(7).split("").join(".")},fv={INIT:"@@redux/INIT"+jl(),REPLACE:"@@redux/REPLACE"+jl(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+jl()}};function GC(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function zl(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(lt(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(lt(1));return r(zl)(e,t)}if(typeof e!="function")throw new Error(lt(2));var o=e,i=t,a=[],s=a,u=!1;function l(){s===a&&(s=a.slice())}function c(){if(u)throw new Error(lt(3));return i}function f(h){if(typeof h!="function")throw new Error(lt(4));if(u)throw new Error(lt(5));var g=!0;return l(),s.push(h),function(){if(g){if(u)throw new Error(lt(6));g=!1,l();var y=s.indexOf(h);s.splice(y,1),a=null}}}function d(h){if(!GC(h))throw new Error(lt(7));if(typeof h.type>"u")throw new Error(lt(8));if(u)throw new Error(lt(9));try{u=!0,i=o(i,h)}finally{u=!1}for(var g=a=s,v=0;v<g.length;v++){var y=g[v];y()}return h}function m(h){if(typeof h!="function")throw new Error(lt(10));o=h,d({type:fv.REPLACE})}function p(){var h,g=f;return h={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(lt(11));function E(){y.next&&y.next(c())}E();var S=g(E);return{unsubscribe:S}}},h[cv]=function(){return this},h}return d({type:fv.INIT}),n={dispatch:d,subscribe:f,getState:c,replaceReducer:m},n[cv]=p,n}function k(e,t,...r){if(WC()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let o=0;n=new Error(t.replace(/%s/g,function(){return r[o++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function WC(){return typeof process<"u"&&!0}function dv(e,t,r){return t.split(".").reduce((n,o)=>n&&n[o]?n[o]:r||null,e)}function pv(e,t){return e.filter(r=>r!==t)}function $a(e){return typeof e=="object"}function mv(e,t){let r=new Map,n=i=>{r.set(i,r.has(i)?r.get(i)+1:1)};e.forEach(n),t.forEach(n);let o=[];return r.forEach((i,a)=>{i===1&&o.push(a)}),o}function hv(e,t){return e.filter(r=>t.indexOf(r)>-1)}var Hn="dnd-core/INIT_COORDS",Er="dnd-core/BEGIN_DRAG",Un="dnd-core/PUBLISH_DRAG_SOURCE",Tr="dnd-core/HOVER",Mr="dnd-core/DROP",Ir="dnd-core/END_DRAG";function Gl(e,t){return{type:Hn,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}var qC={type:Hn,payload:{clientOffset:null,sourceClientOffset:null}};function gv(e){return function(r=[],n={publishSource:!0}){let{publishSource:o=!0,clientOffset:i,getSourceClientOffset:a}=n,s=e.getMonitor(),u=e.getRegistry();e.dispatch(Gl(i)),KC(r,s,u);let l=$C(r,s);if(l==null){e.dispatch(qC);return}let c=null;if(i){if(!a)throw new Error("getSourceClientOffset must be defined");YC(a),c=a(l)}e.dispatch(Gl(i,c));let d=u.getSource(l).beginDrag(s,l);if(d==null)return;XC(d),u.pinSource(l);let m=u.getSourceType(l);return{type:Er,payload:{itemType:m,item:d,sourceId:l,clientOffset:i||null,sourceClientOffset:c||null,isSourcePublic:!!o}}}}function KC(e,t,r){k(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){k(r.getSource(n),"Expected sourceIds to be registered.")})}function YC(e){k(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function XC(e){k($a(e),"Item must be an object.")}function $C(e,t){let r=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}function ZC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable}))),n.forEach(function(o){ZC(e,o,r[o])})}return e}function vv(e){return function(r={}){let n=e.getMonitor(),o=e.getRegistry();QC(n),rE(n).forEach((a,s)=>{let u=eE(a,s,o,n),l={type:Mr,payload:{dropResult:JC({},r,u)}};e.dispatch(l)})}}function QC(e){k(e.isDragging(),"Cannot call drop while not dragging."),k(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function eE(e,t,r,n){let o=r.getTarget(e),i=o?o.drop(n,e):void 0;return tE(i),typeof i>"u"&&(i=t===0?{}:n.getDropResult()),i}function tE(e){k(typeof e>"u"||$a(e),"Drop result must either be an object or undefined.")}function rE(e){let t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function xv(e){return function(){let r=e.getMonitor(),n=e.getRegistry();nE(r);let o=r.getSourceId();return o!=null&&(n.getSource(o,!0).endDrag(r,o),n.unpinSource()),{type:Ir}}}function nE(e){k(e.isDragging(),"Cannot call endDrag while not dragging.")}function No(e,t){return t===null?e===null:Array.isArray(e)?e.some(r=>r===t):e===t}function yv(e){return function(r,{clientOffset:n}={}){oE(r);let o=r.slice(0),i=e.getMonitor(),a=e.getRegistry(),s=i.getItemType();return aE(o,a,s),iE(o,i,a),sE(o,i,a),{type:Tr,payload:{targetIds:o,clientOffset:n||null}}}}function oE(e){k(Array.isArray(e),"Expected targetIds to be an array.")}function iE(e,t,r){k(t.isDragging(),"Cannot call hover while not dragging."),k(!t.didDrop(),"Cannot call hover after drop.");for(let n=0;n<e.length;n++){let o=e[n];k(e.lastIndexOf(o)===n,"Expected targetIds to be unique in the passed array.");let i=r.getTarget(o);k(i,"Expected targetIds to be registered.")}}function aE(e,t,r){for(let n=e.length-1;n>=0;n--){let o=e[n],i=t.getTargetType(o);No(i,r)||e.splice(n,1)}}function sE(e,t,r){e.forEach(function(n){r.getTarget(n).hover(t,n)})}function bv(e){return function(){if(e.getMonitor().isDragging())return{type:Un}}}function Sv(e){return{beginDrag:gv(e),publishDragSource:bv(e),hover:yv(e),drop:vv(e),endDrag:xv(e)}}var Za=class{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){let t=this,{dispatch:r}=this.store;function n(i){return(...a)=>{let s=i.apply(t,a);typeof s<"u"&&r(s)}}let o=Sv(this);return Object.keys(o).reduce((i,a)=>{let s=o[a];return i[a]=n(s),i},{})}dispatch(t){this.store.dispatch(t)}constructor(t,r){this.isSetUp=!1,this.handleRefCountChange=()=>{let n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}};function uE(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Cv(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Ev(e){let{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:n}=e;return!t||!r||!n?null:Cv(uE(t,n),r)}function Tv(e){let{clientOffset:t,initialClientOffset:r}=e;return!t||!r?null:Cv(t,r)}var jn=[],Ja=[];jn.__IS_NONE__=!0;Ja.__IS_ALL__=!0;function Mv(e,t){return e===jn?!1:e===Ja||typeof t>"u"?!0:hv(t,e).length>0}var Qa=class{subscribeToStateChange(t,r={}){let{handlerIds:n}=r;k(typeof t=="function","listener must be a function."),k(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let o=this.store.getState().stateId,i=()=>{let a=this.store.getState(),s=a.stateId;try{s===o||s===o+1&&!Mv(a.dirtyHandlerIds,n)||t()}finally{o=s}};return this.store.subscribe(i)}subscribeToOffsetChange(t){k(typeof t=="function","listener must be a function.");let r=this.store.getState().dragOffset,n=()=>{let o=this.store.getState().dragOffset;o!==r&&(r=o,t())};return this.store.subscribe(n)}canDragSource(t){if(!t)return!1;let r=this.registry.getSource(t);return k(r,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:r.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;let r=this.registry.getTarget(t);if(k(r,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;let n=this.registry.getTargetType(t),o=this.getItemType();return No(n,o)&&r.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;let r=this.registry.getSource(t,!0);if(k(r,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;let n=this.registry.getSourceType(t),o=this.getItemType();return n!==o?!1:r.isDragging(this,t)}isOverTarget(t,r={shallow:!1}){if(!t)return!1;let{shallow:n}=r;if(!this.isDragging())return!1;let o=this.registry.getTargetType(t),i=this.getItemType();if(i&&!No(o,i))return!1;let a=this.getTargetIds();if(!a.length)return!1;let s=a.indexOf(t);return n?s===a.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return Ev(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Tv(this.store.getState().dragOffset)}constructor(t,r){this.store=t,this.registry=r}};var Iv=typeof global<"u"?global:self,wv=Iv.MutationObserver||Iv.WebKitMutationObserver;function Wl(e){return function(){let r=setTimeout(o,0),n=setInterval(o,50);function o(){clearTimeout(r),clearInterval(n),e()}}}function lE(e){let t=1,r=new wv(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}var _v=typeof wv=="function"?lE:Wl;var es=class{enqueueTask(t){let{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:t}=this;for(;this.index<t.length;){let r=this.index;if(this.index++,t[r].call(),this.index>this.capacity){for(let n=0,o=t.length-this.index;n<o;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=_v(this.flush),this.requestErrorThrow=Wl(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}};var ts=class{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,r){this.onError=t,this.release=r,this.task=null}};var rs=class{create(t){let r=this.freeTasks,n=r.length?r.pop():new ts(this.onError,o=>r[r.length]=o);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}};var Ov=new es,cE=new rs(Ov.registerPendingError);function Dv(e){Ov.enqueueTask(cE.create(e))}var Vo="dnd-core/ADD_SOURCE",Fo="dnd-core/ADD_TARGET",Bo="dnd-core/REMOVE_SOURCE",Zr="dnd-core/REMOVE_TARGET";function Pv(e){return{type:Vo,payload:{sourceId:e}}}function Av(e){return{type:Fo,payload:{targetId:e}}}function Lv(e){return{type:Bo,payload:{sourceId:e}}}function Rv(e){return{type:Zr,payload:{targetId:e}}}function kv(e){k(typeof e.canDrag=="function","Expected canDrag to be a function."),k(typeof e.beginDrag=="function","Expected beginDrag to be a function."),k(typeof e.endDrag=="function","Expected endDrag to be a function.")}function Nv(e){k(typeof e.canDrop=="function","Expected canDrop to be a function."),k(typeof e.hover=="function","Expected hover to be a function."),k(typeof e.drop=="function","Expected beginDrag to be a function.")}function ns(e,t){if(t&&Array.isArray(e)){e.forEach(r=>ns(r,!1));return}k(typeof e=="string"||typeof e=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Je;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(Je||(Je={}));var fE=0;function Vv(){return fE++}function dE(e){let t=Vv().toString();switch(e){case Je.SOURCE:return`S${t}`;case Je.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function Fv(e){switch(e[0]){case"S":return Je.SOURCE;case"T":return Je.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function Bv(e,t){let r=e.entries(),n=!1;do{let{done:o,value:[,i]}=r.next();if(i===t)return!0;n=!!o}while(!n);return!1}var os=class{addSource(t,r){ns(t),kv(r);let n=this.addHandler(Je.SOURCE,t,r);return this.store.dispatch(Pv(n)),n}addTarget(t,r){ns(t,!0),Nv(r);let n=this.addHandler(Je.TARGET,t,r);return this.store.dispatch(Av(n)),n}containsHandler(t){return Bv(this.dragSources,t)||Bv(this.dropTargets,t)}getSource(t,r=!1){return k(this.isSourceId(t),"Expected a valid source ID."),r&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return k(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return k(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return k(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return Fv(t)===Je.SOURCE}isTargetId(t){return Fv(t)===Je.TARGET}removeSource(t){k(this.getSource(t),"Expected an existing source."),this.store.dispatch(Lv(t)),Dv(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){k(this.getTarget(t),"Expected an existing target."),this.store.dispatch(Rv(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){let r=this.getSource(t);k(r,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=r}unpinSource(){k(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,r,n){let o=dE(t);return this.types.set(o,r),t===Je.SOURCE?this.dragSources.set(o,n):t===Je.TARGET&&this.dropTargets.set(o,n),o}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}};var pE=(e,t)=>e===t;function Hv(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function Uv(e,t,r=pE){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function jv(e=jn,t){switch(t.type){case Tr:break;case Vo:case Fo:case Zr:case Bo:return jn;case Er:case Un:case Ir:case Mr:default:return Ja}let{targetIds:r=[],prevTargetIds:n=[]}=t.payload,o=mv(r,n);if(!(o.length>0||!Uv(r,n)))return jn;let a=n[n.length-1],s=r[r.length-1];return a!==s&&(a&&o.push(a),s&&o.push(s)),o}function mE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable}))),n.forEach(function(o){mE(e,o,r[o])})}return e}var zv={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Gv(e=zv,t){let{payload:r}=t;switch(t.type){case Hn:case Er:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case Tr:return Hv(e.clientOffset,r.clientOffset)?e:hE({},e,{clientOffset:r.clientOffset});case Ir:case Mr:return zv;default:return e}}function gE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable}))),n.forEach(function(o){gE(e,o,r[o])})}return e}var vE={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Wv(e=vE,t){let{payload:r}=t;switch(t.type){case Er:return zn({},e,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case Un:return zn({},e,{isSourcePublic:!0});case Tr:return zn({},e,{targetIds:r.targetIds});case Zr:return e.targetIds.indexOf(r.targetId)===-1?e:zn({},e,{targetIds:pv(e.targetIds,r.targetId)});case Mr:return zn({},e,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case Ir:return zn({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function qv(e=0,t){switch(t.type){case Vo:case Fo:return e+1;case Bo:case Zr:return e-1;default:return e}}function Kv(e=0){return e+1}function xE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable}))),n.forEach(function(o){xE(e,o,r[o])})}return e}function Yv(e={},t){return{dirtyHandlerIds:jv(e.dirtyHandlerIds,{type:t.type,payload:yE({},t.payload,{prevTargetIds:dv(e,"dragOperation.targetIds",[])})}),dragOffset:Gv(e.dragOffset,t),refCount:qv(e.refCount,t),dragOperation:Wv(e.dragOperation,t),stateId:Kv(e.stateId)}}function Xv(e,t=void 0,r={},n=!1){let o=bE(n),i=new Qa(o,new os(o)),a=new Za(o,i),s=e(a,t,r);return a.receiveBackend(s),a}function bE(e){let t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return zl(Yv,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var as=w(O(),1);function SE(e,t){if(e==null)return{};var r=CE(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function CE(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var $v=0,is=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),Jv=(0,as.memo)(function(t){var{children:r}=t,n=SE(t,["children"]);let[o,i]=EE(n);return(0,as.useEffect)(()=>{if(i){let a=Qv();return++$v,()=>{--$v===0&&(a[is]=null)}}},[]),(0,Zv.jsx)(Xa.Provider,{value:o,children:r})});function EE(e){if("manager"in e)return[{dragDropManager:e.manager},!1];let t=TE(e.backend,e.context,e.options,e.debugMode),r=!e.context;return[t,r]}function TE(e,t=Qv(),r,n){let o=t;return o[is]||(o[is]={dragDropManager:Xv(e,t,r,n)}),o[is]}function Qv(){return typeof global<"u"?global:window}var rx=w(tx(),1),us=w(O(),1);var ss=w(O(),1),Qe=typeof window<"u"?ss.useLayoutEffect:ss.useEffect;function ls(e,t,r){let[n,o]=(0,us.useState)(()=>t(e)),i=(0,us.useCallback)(()=>{let a=t(e);(0,rx.default)(n,a)||(o(a),r&&r())},[n,e,r]);return Qe(i),[n,i]}function nx(e,t,r){let[n,o]=ls(e,t,r);return Qe(function(){let a=e.getHandlerId();if(a!=null)return e.subscribeToStateChange(o,{handlerIds:[a]})},[e,o]),n}function cs(e,t,r){return nx(t,e||(()=>({})),()=>r.reconnect())}var ox=w(O(),1);function fs(e,t){let r=[...t||[]];return t==null&&typeof e!="function"&&r.push(e),(0,ox.useMemo)(()=>typeof e=="function"?e():e,r)}var ql=w(O(),1);function ix(e){return(0,ql.useMemo)(()=>e.hooks.dragSource(),[e])}function ax(e){return(0,ql.useMemo)(()=>e.hooks.dragPreview(),[e])}var fx=w(O(),1);var Kl=!1,Yl=!1,ds=class{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){k(!Kl,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Kl=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Kl=!1}}isDragging(){if(!this.sourceId)return!1;k(!Yl,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Yl=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Yl=!1}}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,r){return this.internalMonitor.isOverTarget(t,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}};var Xl=!1,ps=class{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}canDrop(){if(!this.targetId)return!1;k(!Xl,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Xl=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Xl=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}};function sx(e,t,r){let n=r.getRegistry(),o=n.addTarget(e,t);return[o,()=>n.removeTarget(o)]}function ux(e,t,r){let n=r.getRegistry(),o=n.addSource(e,t);return[o,()=>n.removeSource(o)]}function Ho(e,t,r,n){let o=r?r.call(n,e,t):void 0;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;let i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;let s=Object.prototype.hasOwnProperty.bind(t);for(let u=0;u<i.length;u++){let l=i[u];if(!s(l))return!1;let c=e[l],f=t[l];if(o=r?r.call(n,c,f,l):void 0,o===!1||o===void 0&&c!==f)return!1}return!0}function Uo(e){return e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}var jo=w(O(),1);function ME(e){if(typeof e.type=="string")return;let t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function IE(e){return(t=null,r=null)=>{if(!(0,jo.isValidElement)(t)){let i=t;return e(i,r),i}let n=t;return ME(n),wE(n,r?i=>e(i,r):e)}}function ms(e){let t={};return Object.keys(e).forEach(r=>{let n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{let o=IE(n);t[r]=()=>o}}),t}function lx(e,t){typeof e=="function"?e(t):e.current=t}function wE(e,t){let r=e.ref;return k(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?(0,jo.cloneElement)(e,{ref:n=>{lx(r,n),lx(t,n)}}):(0,jo.cloneElement)(e,{ref:t})}var hs=class{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){let t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){let t=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?t?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),r):(this.lastConnectedDragSource=t,r):r}reconnectDragPreview(t=!1){let r=this.dragPreview,n=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Ho(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Ho(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=ms({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Uo(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Uo(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}};var gs=class{get connectTarget(){return this.dropTarget}reconnect(){let t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();let r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Ho(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=ms({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Uo(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}};var cx=w(O(),1);function Oe(){let{dragDropManager:e}=(0,cx.useContext)(Xa);return k(e!=null,"Expected drag drop context"),e}function dx(e,t){let r=Oe(),n=(0,fx.useMemo)(()=>new hs(r.getBackend()),[r]);return Qe(()=>(n.dragSourceOptions=e||null,n.reconnect(),()=>n.disconnectDragSource()),[n,e]),Qe(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}var px=w(O(),1);function mx(){let e=Oe();return(0,px.useMemo)(()=>new ds(e),[e])}var xs=w(O(),1);var vs=class{beginDrag(){let t=this.spec,r=this.monitor,n=null;return typeof t.item=="object"?n=t.item:typeof t.item=="function"?n=t.item(r):n={},n??null}canDrag(){let t=this.spec,r=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(r):!0}isDragging(t,r){let n=this.spec,o=this.monitor,{isDragging:i}=n;return i?i(o):r===t.getSourceId()}endDrag(){let t=this.spec,r=this.monitor,n=this.connector,{end:o}=t;o&&o(r.getItem(),r),n.reconnect()}constructor(t,r,n){this.spec=t,this.monitor=r,this.connector=n}};function hx(e,t,r){let n=(0,xs.useMemo)(()=>new vs(e,t,r),[t,r]);return(0,xs.useEffect)(()=>{n.spec=e},[e]),n}var gx=w(O(),1);function vx(e){return(0,gx.useMemo)(()=>{let t=e.type;return k(t!=null,"spec.type must be defined"),t},[e])}function xx(e,t,r){let n=Oe(),o=hx(e,t,r),i=vx(e);Qe(function(){if(i!=null){let[s,u]=ux(i,o,n);return t.receiveHandlerId(s),r.receiveHandlerId(s),u}},[n,t,r,o,i])}function yx(e,t){let r=fs(e,t);k(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");let n=mx(),o=dx(r.options,r.previewOptions);return xx(r,n,o),[cs(r.collect,n,o),ix(o),ax(o)]}var $l=w(O(),1);function bx(e){let r=Oe().getMonitor(),[n,o]=ls(r,e);return(0,$l.useEffect)(()=>r.subscribeToOffsetChange(o)),(0,$l.useEffect)(()=>r.subscribeToStateChange(o)),n}var Sx=w(O(),1);function Cx(e){return(0,Sx.useMemo)(()=>e.hooks.dropTarget(),[e])}var Ex=w(O(),1);function Tx(e){let t=Oe(),r=(0,Ex.useMemo)(()=>new gs(t.getBackend()),[t]);return Qe(()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget()),[e]),r}var Mx=w(O(),1);function Ix(){let e=Oe();return(0,Mx.useMemo)(()=>new ps(e),[e])}var wx=w(O(),1);function _x(e){let{accept:t}=e;return(0,wx.useMemo)(()=>(k(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}var bs=w(O(),1);var ys=class{canDrop(){let t=this.spec,r=this.monitor;return t.canDrop?t.canDrop(r.getItem(),r):!0}hover(){let t=this.spec,r=this.monitor;t.hover&&t.hover(r.getItem(),r)}drop(){let t=this.spec,r=this.monitor;if(t.drop)return t.drop(r.getItem(),r)}constructor(t,r){this.spec=t,this.monitor=r}};function Ox(e,t){let r=(0,bs.useMemo)(()=>new ys(e,t),[t]);return(0,bs.useEffect)(()=>{r.spec=e},[e]),r}function Dx(e,t,r){let n=Oe(),o=Ox(e,t),i=_x(e);Qe(function(){let[s,u]=sx(i,o,n);return t.receiveHandlerId(s),r.receiveHandlerId(s),u},[n,t,o,r,i.map(a=>a.toString()).join("|")])}function Zl(e,t){let r=fs(e,t),n=Ix(),o=Tx(r.options);return Dx(r,n,o),[cs(r.collect,n,o),Cx(o)]}function Jl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _E(e,t,r){OE(e,t),t.set(e,r)}function OE(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ss(e,t){var r=Px(e,t,"get");return DE(e,r)}function DE(e,t){return t.get?t.get.call(e):t.value}function PE(e,t,r){var n=Px(e,t,"set");return AE(e,n,r),r}function Px(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function AE(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}var Gn=new WeakMap,Cs=class{constructor(){_E(this,Gn,{writable:!0,value:void 0}),Jl(this,"register",t=>{Ss(this,Gn).push(t)}),Jl(this,"unregister",t=>{let r;for(;(r=Ss(this,Gn).indexOf(t))!==-1;)Ss(this,Gn).splice(r,1)}),Jl(this,"backendChanged",t=>{for(let r of Ss(this,Gn))r.backendChanged(t)}),PE(this,Gn,[])}};function wt(e,t,r){LE(e,t),t.set(e,r)}function LE(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e,t){var r=kx(e,t,"get");return RE(e,r)}function RE(e,t){return t.get?t.get.call(e):t.value}function Wn(e,t,r){var n=kx(e,t,"set");return kE(e,n,r),r}function kx(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function kE(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}var ct=new WeakMap,Es=new WeakMap,ft=new WeakMap,wr=new WeakMap,Jr=new WeakMap,Ax=new WeakMap,Lx=new WeakMap,Rx=new WeakMap,Ql=new WeakMap,ec=new WeakMap,Ts=new WeakMap,zo=class e{constructor(t,r,n){if(wt(this,ct,{writable:!0,value:void 0}),wt(this,Es,{writable:!0,value:void 0}),wt(this,ft,{writable:!0,value:void 0}),wt(this,wr,{writable:!0,value:void 0}),wt(this,Jr,{writable:!0,value:void 0}),wt(this,Ax,{writable:!0,value:(o,i,a)=>{var s,u;if(!a.backend)throw new Error("You must specify a 'backend' property in your Backend entry: ".concat(JSON.stringify(a)));let l=a.backend(o,i,a.options),c=a.id,f=!a.id&&l&&l.constructor;if(f&&(c=l.constructor.name),!c)throw new Error("You must specify an 'id' property in your Backend entry: ".concat(JSON.stringify(a),`
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-5xx`));if(W(this,ft)[c])throw new Error(`You must specify a unique 'id' property in your Backend entry:
        `.concat(JSON.stringify(a)," (conflicts with: ").concat(JSON.stringify(W(this,ft)[c]),")"));return{id:c,instance:l,preview:(s=a.preview)!==null&&s!==void 0?s:!1,transition:a.transition,skipDispatchOnTransition:(u=a.skipDispatchOnTransition)!==null&&u!==void 0?u:!1}}}),zt(this,"setup",()=>{if(!(typeof window>"u")){if(e.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");e.isSetUp=!0,W(this,Lx).call(this,window),W(this,ft)[W(this,ct)].instance.setup()}}),zt(this,"teardown",()=>{typeof window>"u"||(e.isSetUp=!1,W(this,Rx).call(this,window),W(this,ft)[W(this,ct)].instance.teardown())}),zt(this,"connectDragSource",(o,i,a)=>W(this,Ts).call(this,"connectDragSource",o,i,a)),zt(this,"connectDragPreview",(o,i,a)=>W(this,Ts).call(this,"connectDragPreview",o,i,a)),zt(this,"connectDropTarget",(o,i,a)=>W(this,Ts).call(this,"connectDropTarget",o,i,a)),zt(this,"profile",()=>W(this,ft)[W(this,ct)].instance.profile()),zt(this,"previewEnabled",()=>W(this,ft)[W(this,ct)].preview),zt(this,"previewsList",()=>W(this,Es)),zt(this,"backendsList",()=>W(this,wr)),wt(this,Lx,{writable:!0,value:o=>{W(this,wr).forEach(i=>{i.transition&&o.addEventListener(i.transition.event,W(this,Ql))})}}),wt(this,Rx,{writable:!0,value:o=>{W(this,wr).forEach(i=>{i.transition&&o.removeEventListener(i.transition.event,W(this,Ql))})}}),wt(this,Ql,{writable:!0,value:o=>{let i=W(this,ct);if(W(this,wr).some(s=>s.id!==W(this,ct)&&s.transition&&s.transition.check(o)?(Wn(this,ct,s.id),!0):!1),W(this,ct)!==i){var a;W(this,ft)[i].instance.teardown(),Object.keys(W(this,Jr)).forEach(c=>{let f=W(this,Jr)[c];f.unsubscribe(),f.unsubscribe=W(this,ec).call(this,f.func,...f.args)}),W(this,Es).backendChanged(this);let s=W(this,ft)[W(this,ct)];if(s.instance.setup(),s.skipDispatchOnTransition)return;let u=o.constructor,l=new u(o.type,o);(a=o.target)===null||a===void 0||a.dispatchEvent(l)}}}),wt(this,ec,{writable:!0,value:(o,i,a,s)=>W(this,ft)[W(this,ct)].instance[o](i,a,s)}),wt(this,Ts,{writable:!0,value:(o,i,a,s)=>{let u="".concat(o,"_").concat(i),l=W(this,ec).call(this,o,i,a,s);return W(this,Jr)[u]={func:o,args:[i,a,s],unsubscribe:l},()=>{W(this,Jr)[u].unsubscribe(),delete W(this,Jr)[u]}}}),!n||!n.backends||n.backends.length<1)throw new Error(`You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx`);Wn(this,Es,new Cs),Wn(this,ft,{}),Wn(this,wr,[]),n.backends.forEach(o=>{let i=W(this,Ax).call(this,t,r,o);W(this,ft)[i.id]=i,W(this,wr).push(i)}),Wn(this,ct,W(this,wr)[0].id),Wn(this,Jr,{})}};zt(zo,"isSetUp",!1);var Ms=(e,t,r)=>new zo(e,t,r);var Go=(e,t)=>({event:e,check:t});var tc=Go("touchstart",e=>{let t=e;return t.touches!==null&&t.touches!==void 0}),NE=Go("dragstart",e=>e.type.indexOf("drag")!==-1||e.type.indexOf("drop")!==-1),VE=Go("mousedown",e=>e.type.indexOf("touch")===-1&&e.type.indexOf("mouse")!==-1),rc=Go("pointerdown",e=>e.pointerType=="mouse");var nr;(function(e){e.mouse="mouse",e.touch="touch",e.keyboard="keyboard"})(nr||(nr={}));var Is=class{get delay(){var t;return(t=this.args.delay)!==null&&t!==void 0?t:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var t;return(t=this.args.ignoreContextMenu)!==null&&t!==void 0?t:!1}get enableHoverOutsideTarget(){var t;return(t=this.args.enableHoverOutsideTarget)!==null&&t!==void 0?t:!1}get enableKeyboardEvents(){var t;return(t=this.args.enableKeyboardEvents)!==null&&t!==void 0?t:!1}get enableMouseEvents(){var t;return(t=this.args.enableMouseEvents)!==null&&t!==void 0?t:!1}get enableTouchEvents(){var t;return(t=this.args.enableTouchEvents)!==null&&t!==void 0?t:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var t,r,n,o;return(o=(n=(t=this.args)===null||t===void 0?void 0:t.delayTouchStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&o!==void 0?o:0}get delayMouseStart(){var t,r,n,o;return(o=(n=(t=this.args)===null||t===void 0?void 0:t.delayMouseStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&o!==void 0?o:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var t;if(!((t=this.context)===null||t===void 0)&&t.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var t;return((t=this.args)===null||t===void 0?void 0:t.rootElement)||this.document}constructor(t,r){this.args=t,this.context=r}};function Nx(e,t,r,n){return Math.sqrt(Math.pow(Math.abs(r-e),2)+Math.pow(Math.abs(n-t),2))}function Vx(e,t,r,n,o){if(!o)return!1;let i=Math.atan2(n-t,r-e)*180/Math.PI+180;for(let a=0;a<o.length;++a){let s=o[a];if(s&&(s.start==null||i>=s.start)&&(s.end==null||i<=s.end))return!0}return!1}var FE={Left:1,Right:2,Center:4},BE={Left:0,Center:1,Right:2};function ws(e){return e.button===void 0||e.button===BE.Left}function Fx(e){return e.buttons===void 0||(e.buttons&FE.Left)===0}function _s(e){return!!e.targetTouches}var HE=1;function Bx(e){let t=e.nodeType===HE?e:e.parentElement;if(!t)return;let{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function UE(e,t){if(e.targetTouches.length===1)return Wo(e.targetTouches[0]);if(t&&e.touches.length===1&&e.touches[0].target===t.target)return Wo(e.touches[0])}function Wo(e,t){return _s(e)?UE(e,t):{x:e.clientX,y:e.clientY}}var nc=(()=>{let e=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return e=!0,!0}}))}catch{}return e})();var qo={[nr.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[nr.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[nr.keyboard]:{keydown:"keydown"}},Os=class e{profile(){var t;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get document(){return this.options.document}setup(){let t=this.options.rootElement;t&&(k(!e.isSetUp,"Cannot have two Touch backends at the same time."),e.isSetUp=!0,this.addEventListener(t,"start",this.getTopMoveStartHandler()),this.addEventListener(t,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(t,"move",this.handleTopMove),this.addEventListener(t,"move",this.handleTopMoveCapture,!0),this.addEventListener(t,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(t,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(t,"keydown",this.handleCancelOnEscape,!0))}teardown(){let t=this.options.rootElement;t&&(e.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(t,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(t,"start",this.handleTopMoveStart),this.removeEventListener(t,"move",this.handleTopMoveCapture,!0),this.removeEventListener(t,"move",this.handleTopMove),this.removeEventListener(t,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(t,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(t,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(t,r,n,o=!1){let i=nc?{capture:o,passive:!1}:o;this.listenerTypes.forEach(function(a){let s=qo[a][r];s&&t.addEventListener(s,n,i)})}removeEventListener(t,r,n,o=!1){let i=nc?{capture:o,passive:!1}:o;this.listenerTypes.forEach(function(a){let s=qo[a][r];s&&t.removeEventListener(s,n,i)})}connectDragSource(t,r){let n=this.handleMoveStart.bind(this,t);return this.sourceNodes.set(t,r),this.addEventListener(r,"start",n),()=>{this.sourceNodes.delete(t),this.removeEventListener(r,"start",n)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDropTarget(t,r){let n=this.options.rootElement;if(!this.document||!n)return()=>{};let o=i=>{if(!this.document||!n||!this.monitor.isDragging())return;let a;switch(i.type){case qo.mouse.move:a={x:i.clientX,y:i.clientY};break;case qo.touch.move:var s,u;a={x:((s=i.touches[0])===null||s===void 0?void 0:s.clientX)||0,y:((u=i.touches[0])===null||u===void 0?void 0:u.clientY)||0};break}let l=a!=null?this.document.elementFromPoint(a.x,a.y):void 0,c=l&&r.contains(l);if(l===r||c)return this.handleMove(i,t)};return this.addEventListener(this.document.body,"move",o),this.targetNodes.set(t,r),()=>{this.document&&(this.targetNodes.delete(t),this.removeEventListener(this.document.body,"move",o))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(t){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=t,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{t&&!t.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!t||!t.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(t.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(t,r,n){this.getSourceClientOffset=o=>{let i=this.sourceNodes.get(o);return i&&Bx(i)},this.handleTopMoveStartCapture=o=>{ws(o)&&(this.moveStartSourceIds=[])},this.handleMoveStart=o=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(o)},this.handleTopMoveStart=o=>{if(!ws(o))return;let i=Wo(o);i&&(_s(o)&&(this.lastTargetTouchFallback=o.targetTouches[0]),this._mouseClientOffset=i),this.waitingForDelay=!1},this.handleTopMoveStartDelay=o=>{if(!ws(o))return;let i=o.type===qo.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,o),i),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(o,i)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(i)},this.handleTopMove=o=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;let{moveStartSourceIds:i,dragOverTargetIds:a}=this,s=this.options.enableHoverOutsideTarget,u=Wo(o,this.lastTargetTouchFallback);if(!u)return;if(this._isScrolling||!this.monitor.isDragging()&&Vx(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,u.x,u.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&i&&Nx(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,u.x,u.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(i,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;let l=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(l),this.actions.publishDragSource(),o.cancelable&&o.preventDefault();let c=(a||[]).map(p=>this.targetNodes.get(p)).filter(p=>!!p),f=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(u.x,u.y,c):this.document.elementsFromPoint(u.x,u.y),d=[];for(let p in f){if(!f.hasOwnProperty(p))continue;let h=f[p];for(h!=null&&d.push(h);h;)h=h.parentElement,h&&d.indexOf(h)===-1&&d.push(h)}let m=d.filter(p=>c.indexOf(p)>-1).map(p=>this._getDropTargetId(p)).filter(p=>!!p).filter((p,h,g)=>g.indexOf(p)===h);if(s)for(let p in this.targetNodes){let h=this.targetNodes.get(p);if(l&&h&&h.contains(l)&&m.indexOf(p)===-1){m.unshift(p);break}}m.reverse(),this.actions.hover(m,{clientOffset:u})},this._getDropTargetId=o=>{let i=this.targetNodes.keys(),a=i.next();for(;a.done===!1;){let s=a.value;if(o===this.targetNodes.get(s))return s;a=i.next()}},this.handleTopMoveEndCapture=o=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!Fx(o)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}o.cancelable&&o.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=o=>{o.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new Is(n,r),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(nr.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(nr.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(nr.keyboard)}};var Hx=function(t,r={},n={}){return new Os(t,r,n)};var dt=function(){return dt=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},dt.apply(this,arguments)};function je(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function jE(e){var t=e.isVisible,r=e.ease,n=r===void 0?"easeIn":r,o=e.duration,i=e.variants,a=i===void 0?{open:{opacity:1,height:"auto"},close:{opacity:0,height:0}}:i,s=e.children,u=sv({polyfill:Ou}),l=u[0],c=u[1].height,f=(0,A.useState)(t),d=f[0],m=f[1],p=(0,A.useState)(t),h=p[0],g=p[1],v=(0,A.useState)(!1),y=v[0],E=v[1],S=function(){E(!1),t||m(!1)};return(0,A.useEffect)(function(){E(!0),t?m(!0):g(!1)},[t]),(0,A.useEffect)(function(){d&&g(!0)},[c]),A.default.createElement(Bl.div,{style:y?{overflow:"hidden"}:void 0,onAnimationComplete:S,initial:h?"open":"close",animate:h?"open":"close",inherit:!1,variants:a,transition:{ease:n,duration:zE(c,o)}},A.default.createElement("div",{ref:l},d&&s))}function zE(e,t){if(t)return t;if(!e)return 0;var r=e/36;return Math.round((4+10*Math.pow(r,.25)+r/5)*10)/1500}var GE=function(e,t){return e.text>t.text?1:e.text<t.text?-1:0},Ko=function(e,t){return e.find(function(r){return r.id===t})},Wx=function(e,t,r){if(r===0)return!1;var n=e.find(function(o){return o.id===r});return n===void 0?!1:n.parent===t?!0:Wx(e,t,n.parent)},sc=function(e){return e.id!==void 0&&e.parent!==void 0&&e.text!==void 0},_r=function(e,t,r){var n=r.tree,o=r.rootId,i=r.canDrop;if(e===null){if(t===o)return!0;var a=n.find(function(c){return c.id===t});return!!(a&&a.droppable)}else{var s=sc(e)?e.id:null;if(i){var u=i(s,t);if(u!==void 0)return u}if(s===t)return!1;var l=n.find(function(f){return f.id===s}),a=n.find(function(f){return f.id===t});return l===void 0||s===null?t===o||!!a?.droppable:a===void 0?l.parent!==0:l.parent===t||!a.droppable?!1:!Wx(n,s,t)}},WE=function(e,t,r){return e.map(function(n){return n.id===t?dt(dt({},n),{parent:r}):n})},qx=function(e,t,r){if(r===0)return 0;var n=e.filter(function(o){return o.parent===t});return n[r]?e.findIndex(function(o){return o.id===n[r].id}):e.findIndex(function(o){return o.id===n[r-1].id})+1},qE=function(e,t){return e.findIndex(function(r){return r.id===t})},Kx=function(e,t,r,n){var o=qE(e,t),i=qx(e,r,n);return i=i>o?i-1:i,[o,i]},KE=function(e,t,r){var n=t<0?e.length+t:t;if(n>=0&&n<e.length){var o=r<0?e.length+r:r,i=e.splice(t,1)[0];e.splice(o,0,i)}},YE=function(e,t,r,n){var o=Kx(e,t,r,n),i=o[0],a=o[1],s=je([],e,!0);return KE(s,i,a),s.map(function(u){return u.id===t?dt(dt({},u),{parent:r}):u})},XE=function(e,t){var r=e.getBoundingClientRect(),n=r.top+r.height/2;return t>n?"down":"up"},oc=function(e,t){var r="",n=0;return e.forEach(function(o,i){var a,s=XE(o,((a=t.getClientOffset())===null||a===void 0?void 0:a.y)||0);r===""?r=s:r!==s&&(r=s,n=i),i===e.length-1&&s==="down"&&(n=i+1)}),n},Ux=function(e,t,r){var n=t.closest('[role="list"]'),o=n?.querySelectorAll(':scope > [role="listitem"]');return o?oc(o,r):null},$E=function(e,t,r){var n=e.getBoundingClientRect(),o=r.dropTargetOffset,i=n.top+o,a=n.bottom-o;return t>a?"lower":t<i?"upper":"middle"},ic=function(e,t,r,n){var o;if(!t)return null;if(e===null){var i=t.querySelectorAll(':scope > [role="listitem"]');return{id:n.rootId,index:oc(i,r)}}var a=r.getItem(),s=t.querySelector('[role="list"]'),u=$E(t,((o=r.getClientOffset())===null||o===void 0?void 0:o.y)||0,n);if(s){if(u==="upper")if(_r(a,e.parent,n)){var l=Ux(e,t,r);return l===null?null:{id:e.parent,index:l}}else return{id:e.id,index:0};var i=s.querySelectorAll(':scope > [role="listitem"]');return{id:e.id,index:oc(i,r)}}else{if(u==="middle")return{id:e.id,index:0};if(_r(a,e.parent,n)){var l=Ux(e,t,r);return l===null?null:{id:e.parent,index:l}}return null}};var Yx=function(e){return e===void 0&&(e={}),{backends:[{id:"html5",backend:pp,options:e.html5,transition:rc},{id:"touch",backend:Hx,options:e.touch||{enableMouseEvents:!0},preview:!0,transition:tc}]}},Ps=function(e,t){return e.some(function(r){return r.parent===t})},Xx=(0,A.createContext)({}),ZE=function(e){var t=aT(e.tree,e.initialOpen),r=t[0],n=t[1],o=n.handleToggle,i=n.handleCloseAll,a=n.handleOpenAll,s=n.handleOpen,u=n.handleClose;(0,A.useImperativeHandle)(e.treeRef,function(){return{open:function(m){return s(m,e.onChangeOpen)},close:function(m){return u(m,e.onChangeOpen)},openAll:function(){return a(e.onChangeOpen)},closeAll:function(){return i(e.onChangeOpen)}}});var l=Oe().getMonitor(),c=e.canDrop,f=e.canDrag,d=dt(dt({extraAcceptTypes:[],listComponent:"ul",listItemComponent:"li",placeholderComponent:"li",sort:!0,insertDroppableFirst:!0,enableAnimateExpand:!1,dropTargetOffset:0,initialOpen:!1},e),{openIds:r,onDrop:function(m,p,h){if(m){var g={dragSourceId:m.id,dropTargetId:p,dragSource:m,dropTarget:Ko(e.tree,p),monitor:l},v=e.tree;if(Ko(v,m.id)||(v=je(je([],v,!0),[m],!1)),e.sort===!1){var y=Kx(v,m.id,p,h),E=y[1];g.destinationIndex=E,g.relativeIndex=h,e.onDrop(YE(v,m.id,p,h),g);return}e.onDrop(WE(v,m.id,p),g)}else{var g={dropTargetId:p,dropTarget:Ko(e.tree,p),monitor:l};e.sort===!1&&(g.destinationIndex=qx(e.tree,p,h),g.relativeIndex=h),e.onDrop(e.tree,g)}},canDrop:c?function(m,p){return c(e.tree,{dragSourceId:m??void 0,dropTargetId:p,dragSource:l.getItem(),dropTarget:Ko(e.tree,p),monitor:l})}:void 0,canDrag:f?function(m){return f(Ko(e.tree,m))}:void 0,onToggle:function(m){return o(m,e.onChangeOpen)}});return A.default.createElement(Xx.Provider,{value:d},e.children)},$x=(0,A.createContext)({}),JE={isLock:!1},QE=function(e){var t=(0,A.useState)(JE.isLock),r=t[0],n=t[1];return A.default.createElement($x.Provider,{value:{isLock:r,lock:function(){return n(!0)},unlock:function(){return n(!1)}}},e.children)},Yo=(0,A.createContext)({}),Ds={dropTargetId:void 0,index:void 0},eT=function(e){var t=(0,A.useState)(Ds.dropTargetId),r=t[0],n=t[1],o=(0,A.useState)(Ds.index),i=o[0],a=o[1],s=function(l,c){n(l),a(c)},u=function(){n(Ds.dropTargetId),a(Ds.index)};return A.default.createElement(Yo.Provider,{value:{dropTargetId:r,index:i,showPlaceholder:s,hidePlaceholder:u}},e.children)},tT=function(e){return A.default.createElement(ZE,dt({},e),A.default.createElement(QE,null,A.default.createElement(eT,null,e.children)))},rT=function(e){var t=(0,A.useContext)($x);(0,A.useEffect)(function(){if(e.current){var r=e.current,n=function(c){var f=c.target;(f instanceof HTMLInputElement||f instanceof HTMLTextAreaElement)&&t.lock()},o=function(c){var f=c.target;(f instanceof HTMLInputElement||f instanceof HTMLTextAreaElement)&&t.unlock()},i=function(c){return n(c)},a=function(c){return o(c)},s=function(c){return n(c)},u=function(c){return o(c)},l=new MutationObserver(function(){document.activeElement===document.body&&t.unlock()});return l.observe(r,{subtree:!0,childList:!0}),r.addEventListener("mouseover",i),r.addEventListener("mouseout",a),r.addEventListener("focusin",s),r.addEventListener("focusout",u),function(){l.disconnect(),r.removeEventListener("mouseover",i),r.removeEventListener("mouseout",a),r.removeEventListener("focusin",s),r.removeEventListener("focusout",u)}}},[e,t]),(0,A.useEffect)(function(){var r;(r=e.current)===null||r===void 0||r.setAttribute("draggable",t.isLock?"false":"true")},[e,t.isLock])},As={TREE_ITEM:Symbol()},Zx=null,Jx=function(e){var t=e.target;if(t instanceof HTMLElement){var r=t.closest('[role="listitem"]');e.currentTarget===r&&(Zx=r)}},jx=function(e){return Jx(e)},zx=function(e){return Jx(e)},nT=function(e,t){var r=Or();(0,A.useEffect)(function(){var s=t.current;return s?.addEventListener("dragstart",jx),s?.addEventListener("touchstart",zx,{passive:!0}),function(){s?.removeEventListener("dragstart",jx),s?.removeEventListener("touchstart",zx)}},[t]);var n=yx({type:As.TREE_ITEM,item:function(s){var u=dt({ref:t},e);return r.onDragStart&&r.onDragStart(u,s),u},end:function(s,u){var l=s;r.onDragEnd&&r.onDragEnd(l,u)},canDrag:function(){var s=r.canDrag;return Zx!==t.current?!1:s?s(e.id):!0},collect:function(s){return{isDragging:s.isDragging()}}}),o=n[0].isDragging,i=n[1],a=n[2];return[o,i,a]};var oT=function(e){var t=Or(),r=(0,A.useContext)(Yo),n=Zl({accept:je([As.TREE_ITEM],t.extraAcceptTypes,!0),drop:function(u,l){var c=t.rootId,f=t.onDrop,d=r.dropTargetId,m=r.index;l.isOver({shallow:!0})&&d!==void 0&&m!==void 0&&f(sc(u)?u:null,c,m),r.hidePlaceholder()},canDrop:function(u,l){var c=t.rootId;return l.isOver({shallow:!0})?u===void 0?!1:_r(u,c,t):!1},hover:function(u,l){if(l.isOver({shallow:!0})){var c=t.rootId,f=r.dropTargetId,d=r.index,m=r.showPlaceholder,p=r.hidePlaceholder,h=ic(null,e.current,l,t);if(h===null||!_r(u,c,t)){p();return}(h.id!==f||h.index!==d)&&m(h.id,h.index)}},collect:function(u){var l=u.getItem();return{isOver:u.isOver({shallow:!0})&&u.canDrop(),dragSource:l}}}),o=n[0],i=o.isOver,a=o.dragSource,s=n[1];return[i,a,s]},iT=function(e,t){var r=Or(),n=(0,A.useContext)(Yo),o=Zl({accept:je([As.TREE_ITEM],r.extraAcceptTypes,!0),drop:function(l,c){var f=n.dropTargetId,d=n.index;c.isOver({shallow:!0})&&f!==void 0&&d!==void 0&&r.onDrop(sc(l)?l:null,f,d),n.hidePlaceholder()},canDrop:function(l,c){if(c.isOver({shallow:!0})){var f=ic(e,t.current,c,r);return f===null?!1:_r(l,f.id,r)}return!1},hover:function(l,c){if(c.isOver({shallow:!0})){var f=n.dropTargetId,d=n.index,m=n.showPlaceholder,p=n.hidePlaceholder,h=ic(e,t.current,c,r);if(h===null||!_r(l,h.id,r)){p();return}(h.id!==f||h.index!==d)&&m(h.id,h.index)}},collect:function(l){var c=l.getItem();return{isOver:l.isOver({shallow:!0})&&l.canDrop(),dragSource:c}}}),i=o[0],a=i.isOver,s=i.dragSource,u=o[1];return[a,s,u]},aT=function(e,t){var r=(0,A.useMemo)(function(){return t===!0?e.filter(function(f){return Ps(e,f.id)}).map(function(f){return f.id}):Array.isArray(t)?t:[]},[t]),n=(0,A.useState)(r),o=n[0],i=n[1];(0,A.useEffect)(function(){return i(r)},[t]);var a=function(f,d){var m=o.includes(f)?o.filter(function(p){return p!==f}):je(je([],o,!0),[f],!1);i(m),d&&d(m)},s=function(f){i([]),f&&f([])},u=function(f){var d=e.filter(function(m){return Ps(e,m.id)}).map(function(m){return m.id});i(d),f&&f(d)},l=function(f,d){var m=[];if(Array.isArray(f)){var p=e.filter(function(h){return f.includes(h.id)&&Ps(e,h.id)});m=je(je([],o,!0),p.map(function(h){return h.id}),!0).filter(function(h,g,v){return v.indexOf(h)===g})}else m=o.includes(f)?o:je(je([],o,!0),[f],!1);i(m),d&&d(m)},c=function(f,d){var m=o.filter(function(p){return Array.isArray(f)?!f.includes(p):p!==f});i(m),d&&d(m)};return[o,{handleToggle:a,handleCloseAll:s,handleOpenAll:u,handleOpen:l,handleClose:c}]},sT=function(){return bx(function(e){var t=e.getItemType();return{item:e.getItem(),clientOffset:e.getClientOffset(),isDragging:e.isDragging()&&t===As.TREE_ITEM}})},Or=function(){var e=(0,A.useContext)(Xx);if(!e)throw new Error("useTreeContext must be used under TreeProvider");return e},uT=function(e,t){var r=Or(),n=r.rootId,o=r.rootProps,i=r.classes,a=i?.container||"";return t&&i?.dropTarget&&(a="".concat(a," ").concat(i.dropTarget)),e===n&&i?.root&&(a="".concat(a," ").concat(i.root)),e===n&&o?.className&&(a="".concat(a," ").concat(o.className)),a=a.trim(),a},lT=function(e,t,r){t.current?r(t):r(e),(0,A.useEffect)(function(){t.current?r(t):r(e)},[t.current])},cT=function(e){var t=Or(),r=(0,A.useContext)(Yo),n=(0,A.useRef)(null),o=(0,A.useRef)(null),i=t.tree.find(function(I){return I.id===e.id}),a=t.openIds,s=t.classes,u=t.enableAnimateExpand,l=a.includes(e.id),c=nT(i,n),f=c[0],d=c[1],m=c[2],p=iT(i,n),h=p[0],g=p[1],v=p[2];lT(n,o,d),_r(g,e.id,t)&&v(n),(0,A.useEffect)(function(){t.dragPreviewRender?m(yu(),{captureDraggingState:!0}):o.current&&m(n)},[m,t.dragPreviewRender]),rT(n);var y=function(){return t.onToggle(i.id)},E=t.listItemComponent,S=s?.listItem||"";h&&s?.dropTarget&&(S="".concat(S," ").concat(s.dropTarget)),f&&s?.draggingSource&&(S="".concat(S," ").concat(s.draggingSource));var C=t.canDrag?t.canDrag(e.id):!0,x=r.dropTargetId===e.id,b={depth:e.depth,isOpen:l,isDragging:f,isDropTarget:x,draggable:C,hasChild:Ps(t.tree,e.id),containerRef:n,handleRef:o,onToggle:y};return A.default.createElement(E,{ref:n,className:S,role:"listitem"},t.render(i,b),u&&b.hasChild&&A.default.createElement(jE,{isVisible:l},A.default.createElement(ac,{parentId:e.id,depth:e.depth+1})),!u&&b.hasChild&&l&&A.default.createElement(ac,{parentId:e.id,depth:e.depth+1}))},Gx=function(e){var t=Or(),r=t.placeholderRender,n=t.placeholderComponent,o=t.classes,i=(0,A.useContext)(Yo),a=Oe(),s=a.getMonitor(),u=s.getItem();if(!r||!u)return null;var l=e.dropTargetId===i.dropTargetId&&(e.index===i.index||e.index===void 0&&e.listCount===i.index);return l?A.default.createElement(n,{className:o?.placeholder||""},r(u,{depth:e.depth})):null},ac=function(e){var t=Or(),r=(0,A.useRef)(null),n=t.tree.filter(function(h){return h.parent===e.parentId}),o=n,i=typeof t.sort=="function"?t.sort:GE;if(t.insertDroppableFirst){var a=n.filter(function(h){return h.droppable}),s=n.filter(function(h){return!h.droppable});t.sort===!1?o=je(je([],a,!0),s,!0):(a=a.sort(i),s=s.sort(i),o=je(je([],a,!0),s,!0))}else t.sort!==!1&&(o=n.sort(i));var u=oT(r),l=u[0],c=u[1],f=u[2];e.parentId===t.rootId&&_r(c,t.rootId,t)&&f(r);var d=uT(e.parentId,l),m=t.rootProps||{},p=t.listComponent;return A.default.createElement(p,dt({ref:r,role:"list"},m,{className:d}),o.map(function(h,g){return A.default.createElement(A.default.Fragment,{key:h.id},A.default.createElement(Gx,{depth:e.depth,listCount:o.length,dropTargetId:e.parentId,index:g}),A.default.createElement(cT,{id:h.id,depth:e.depth}))}),A.default.createElement(Gx,{depth:e.depth,listCount:o.length,dropTargetId:e.parentId}))},fT={height:"100%",left:0,pointerEvents:"none",position:"fixed",top:0,width:"100%",zIndex:100},dT=function(e){var t=e.clientOffset;if(!t)return{};var r=t.x,n=t.y,o="translate(".concat(r,"px, ").concat(n,"px)");return{pointerEvents:"none",transform:o}},pT=function(){var e=Or(),t=sT(),r=t.isDragging,n=t.clientOffset;return!r||!n?null:A.default.createElement("div",{style:fT},A.default.createElement("div",{style:dT(t)},e.dragPreviewRender&&e.dragPreviewRender(t)))};function mT(e,t){return A.default.createElement(tT,dt({},e,{treeRef:t}),e.dragPreviewRender&&A.default.createElement(pT,null),A.default.createElement(ac,{parentId:e.rootId,depth:0}))}var Qx=(0,A.forwardRef)(mT);var De=w(O());var hT=e=>{let t=[];return e.forEach(r=>{let n={id:r.prompt_id,parent:r.parent_prompt_id,data:r,droppable:r.type==="group",text:r.prompt_title};t.push(n)}),t},gT=e=>{let{sx:t}=e,{originLiteContextMenuListWithRoot:r}=Pt(),{editGroup:n,openDeleteGroupConfirm:o,createNewGroup:i}=Mi(),{editPrompt:a,openDeletePromptConfirm:s}=Ii(),[u,l]=(0,De.useState)([]),[c,f]=(0,De.useState)(0),[d,m]=(0,De.useState)([]),p=(0,De.useMemo)(()=>ti(u,C=>C.data?.path?C.data.path.split("/").length:1e6,"asc")?.[0],[u]),h=String(p?.id)||"",g=async C=>{m(C)},v=async C=>{C.type==="group"?n(C):await a(C)},y=C=>{C.type==="group"?o(C):s(C)},E=async(C,x)=>{let b=x.dragSource?.data,I=b?.prompt_id,T=b?.type==="group",_=x.dragSource?.data?.parent_prompt_id,P=T?h:x.dropTargetId,H=0;if(I&&_&&P){let j=x.dragSource?.id,B={};C.forEach(F=>{if(F.data?.path){let X=F.data.path.split("/").slice(0,-1).join("/"),$=B[X]||0;F.data.display_order=$,F.data.prompt_id===I&&(H=$),B[X]=$+1}}),j&&yt.moveContextMenuNode(I,_,String(P),H).then().catch(),l(C)}};(0,De.useEffect)(()=>{if(r){let C=cr(r),x=hT(C);l(x),f(b=>b+1),m(x.filter(b=>b.data?.type==="group").map(b=>b.id))}},[r]);let{setDisableDrop:S}=Nf();return De.default.createElement(Pe,{onMouseEnter:()=>{S(!0)},onMouseLeave:()=>{S(!1)},onMouseDown:()=>{S(!0)},onMouseUp:()=>{S(!1)},sx:{flex:1,position:"relative",zIndex:2,display:"flex",flexDirection:"column",outline:"none!important","&::-webkit-scrollbar":{webkitAppearance:"none",width:"7px"},"&::-webkit-scrollbar-thumb":{borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, .5)",boxShadow:"0 0 1px rgba(255, 255, 255, .5)"},"& ul":{padding:0,margin:0,listStyle:"none"},"& > ul li":{padding:0,margin:0,listStyle:"none"},li:{"&:has(> .dragTarget)":{borderRadius:"4px",outline:C=>(C.palette.mode==="dark","3px solid #EBEBEB!important"),bgcolor:C=>C.palette.mode==="dark"?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.02)"}},"& > ul":{p:.5,"&:empty":{display:"none"}},".context-menu__placeholder":{position:"relative"},...t}},De.default.createElement(Jv,{backend:Ms,options:Yx()},De.default.createElement(Qx,{key:c,onChangeOpen:g,initialOpen:d,tree:u,rootId:h,onDrop:E,sort:!1,classes:{root:"context-menu__root",placeholder:"context-menu__placeholder",dropTarget:"context-menu__drop-target"},canDrop:(C,{dragSource:x,dropTargetId:b,dropTarget:I})=>x?x.data?.type==="group"?b===h:b!==h&&I?.data?.type==="group"?!C.filter(_=>_.parent===b).find(_=>_.data?.prompt_title===x.data?.prompt_title&&_.data?.prompt_id!==x.data?.prompt_id):!1:!1,placeholderRender:(C,x)=>De.default.createElement(xT,{node:C,depth:x.depth}),dragPreviewRender:C=>De.default.createElement(vT,{...C}),dropTargetOffset:0,insertDroppableFirst:!1,render:(C,x)=>De.default.createElement(ip,{rootId:h,isDropTarget:C.data?.type==="group"&&x.isDropTarget,node:C,params:x,onEdit:v,onDelete:y})})))},vT=e=>{let{item:t}=e;return t.data?De.default.createElement(ap,{liteContextMenuItem:t.data}):null},xT=({node:e,depth:t})=>De.default.createElement(Pe,{sx:{bgcolor:"#666",height:3,position:"absolute",right:0,transform:"translateY(-50%)",top:0,zIndex:100},style:{left:t*24}}),ey=gT;var uc=w(O()),yT=e=>{let{sx:t}=e;return uc.default.createElement(ee,{sx:{width:"100%",height:"100%",...t}},uc.default.createElement(ey,{sx:{height:0,flex:1,overflowY:"auto"}}))},ty=yT;var Ls=w(O()),bT=()=>{let{t:e}=xe(),{mode:t,changeMode:r}=ye(),{refetch:n}=Pt(),o=e(t==="list"?"package__features:context_menu__lite_editor__change_mode_button__edit":"package__features:context_menu__lite_editor__change_mode_button__done");return Ls.default.createElement(Ar,{key:o,placement:"top-end",title:o,disabledClickEvent:!0,onClick:async()=>{await xt({emitEvent:!0})&&((t==="list"?"edit":"list")==="edit"&&yt.checkUpdate().then(a=>{a&&n("ChangePanelModeButton")}),n("ChangePanelModeButton"),r(t==="list"?"edit":"list"))}},t==="list"&&Ls.default.createElement(Te,{icon:"PromptEdit"}),t==="edit"&&Ls.default.createElement(Te,{icon:"Done"}))},ry=bT;var or=w(O()),ST=e=>{let{sx:t,promptData:r}=e,{t:n}=xe(),{originLiteContextMenuList:o}=Pt(),{createNewPrompt:i,isOpen:a}=Ii(),{createNewGroup:s}=Mi(),{selectedType:u}=sf(),l=or.default.useRef(null),[c,f]=or.default.useState(void 0);(0,or.useEffect)(()=>{if(u==="MY_OWN_TOOLS"&&o.length===0&&!a){f(!0);let p=setTimeout(()=>{let h=new MouseEvent("mouseover",{bubbles:!0,cancelable:!0,view:window});l.current?.dispatchEvent(h)},0);return()=>clearTimeout(p)}else{let p=new MouseEvent("mouseout",{bubbles:!0,cancelable:!0,view:window});l.current?.dispatchEvent(p),f(!1)}},[u,o]),(0,or.useEffect)(()=>{},[c]);let d=r?.prompt_id?n("package__features:context_menu__lite_editor__modal__edit_tool__title__edit"):n("package__features:context_menu__lite_editor__modal__edit_tool__title__add"),m=r?.prompt_id?void 0:[{icon:null,label:n("package__features:context_menu__lite_editor__modal__edit_group__title__add"),value:"add-new-group"},{icon:null,label:d,value:"add-new-tool"}];return(0,or.useEffect)(()=>{},[c]),or.default.createElement(Ar,{disabledClickEvent:!0,buttonRefBind:p=>{l.current=p},placement:"top-end",defaultOptionValue:"add-new-tool",options:m,...c?{PopoverProps:{open:!0},actived:!0}:{},tooltipProps:{PopperProps:{disablePortal:!0},disableInteractive:!0},PopoverProps:{sx:{zIndex:"2147483620"}},OptionsCardProps:{sx:{width:"144px",position:"relative",right:"-8px"}},title:m&&m.length<1?d:null,sx:t,onSelectOption:async p=>{await xt({emitEvent:!0})&&(p==="add-new-tool"?i(r):s())}},or.default.createElement(Te,{icon:"Add"}))},ny=ST;var Rs=w(O()),CT=e=>{let{sx:t}=e;return Rs.default.createElement(ee,{direction:"row",alignItems:"center",justifyContent:"end",p:"4px",gap:"8px",bgcolor:r=>r.palette.mode==="dark"?"#363839":"#f9f9f9",sx:t},Rs.default.createElement(ny,null),Rs.default.createElement(ry,null))},oy=CT;var pt=w(O()),ET=e=>{let{sx:t,children:r,manualFetch:n=!1,LiteContextMenuEditViewProps:o,LiteContextMenuPositionSettingsProps:i,showToolbar:a}=e,[s,u]=(0,pt.useState)(""),{mode:l,contextMenuPath:c}=ye(),{refetch:f}=Pt(),d=(0,pt.useMemo)(()=>c==="/rewrite"?l==="edit"?!0:s==="":c==="/compose_reply",[c,s,l]);return(0,pt.useEffect)(()=>{if(c==="/rewrite"){let m=p=>{u(p)};return lr("floatingMenuInputMediator").subscribe(m),()=>{lr("floatingMenuInputMediator").unsubscribe(m)}}},[c]),(0,pt.useEffect)(()=>{n||f("FloatingLiteContextMenuLayout")},[n,c]),pt.default.createElement(ee,{sx:{width:"100%",height:"100%",maxHeight:"inherit",overflowY:"hidden",...t}},l==="edit"&&pt.default.createElement(bd,{...i}),l==="list"&&r,l==="edit"&&pt.default.createElement(ty,{...o,sx:{minHeight:"192px",...i?.sx}}),d&&a&&pt.default.createElement(oy,null))},iy=ET;var cc=w(ay()),uy=w(sy());var U=w(O()),ge=w(O());function Xo(){let e=!!navigator.userAgent.match("Windows"),t=!!navigator.userAgent.match("Linux"),r=!!navigator.userAgent.match("Chrome")&&!navigator.userAgent.match("Edg");return e&&r||t?"thin":"auto"}var DT=(e,t,r)=>Oc(e,t,r,{animationFrame:!0}),fc=U.forwardRef(({label:e,icon:t,CustomRenderNode:r,onClick:n,isGroup:o,sx:i,onCustomMouseEnter:a,...s},u)=>{let l=s,c=(0,ge.useMemo)(()=>Xo(),[]),f=a?{...s,onMouseEnter:d=>{a(d)}}:s;return U.createElement(Pe,{...f,sx:{boxSizing:"border-box",borderRadius:"3px",height:"28px",fontSize:"14px",width:"100%",cursor:"pointer",scrollbarColor:d=>d.palette.scrollbarColor,scrollbarWidth:c,"&.floating-context-menu-item--active":{bgcolor:d=>d.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(55, 53, 47, 0.08)","& .floating-context-menu-item__footer-icon":{display:"flex"}},"& .floating-context-menu-item__footer-icon":{display:"none",flexShrink:0},"& .floating-context-menu-item__footer-icon--active":{display:"flex"},"&:hover":{bgcolor:d=>d.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(55, 53, 47, 0.08)","& .floating-context-menu-item__footer-icon":{display:"flex"}},...i},ref:u,component:"div",role:"menuitem",onClick:d=>{n?.(d),l?.onClick?.(d)}},U.createElement(Pe,null,r??U.createElement(ee,{direction:"row",spacing:1,px:1,alignItems:"center"},t&&U.createElement(Te,{size:16,icon:t||"Empty",sx:{color:"primary.main",flexShrink:0}}),U.createElement(me,{fontSize:14,textAlign:"left",color:"text.primary",width:0,noWrap:!0,flex:1,lineHeight:"28px"},e),o&&U.createElement(cc.default,{sx:{ml:"auto",mr:0,flexShrink:0,color:d=>d.palette.mode==="dark"?"#ffffff85":"rgba(55, 53, 47, 0.45)",fontSize:16}}))))});fc.displayName="LiteDropdownMenuItem";var PT=U.forwardRef(({menuItem:e,hoverIcon:t,...r},n)=>{let o=r,{t:i}=xe(),a=oe($f),[s,u]=Be(eo),l=(0,ge.useMemo)(()=>{let h=`context_menu__prompt__${e.prompt_id.replace(bt,"")}`,g=`package__features:${h}`,v=i(g);return v!==g&&v!==h?v:e.prompt_title},[e.prompt_title,i,e.prompt_id]),c=(0,ge.useMemo)(()=>a.includes(e.prompt_id)||e.prompt_id===s.lastHoverContextMenuId,[a,s.lastHoverContextMenuId,e.prompt_id]),f=(0,ge.useMemo)(()=>s.lastHoverContextMenuId===e.prompt_id&&c,[c,s.lastHoverContextMenuId,e.prompt_id]),d=(0,ge.useMemo)(()=>Xo(),[]),m=(0,ge.useMemo)(()=>{try{return`dropdown-menu--item--${e.prompt_title.replace(/\s+/g,"-").toLowerCase()}`}catch{return""}},[e.prompt_title]),p=(0,ge.useMemo)(()=>{let h=e.parent_prompt_id,g=e.prompt_title;return h==="4d226b15-9e21-42ba-8af8-57d6fbae5a3d"&&(g=`Translate > ${e.prompt_title}`),h==="718dae5a-8c58-47a7-9089-5dc02cedbc3c"&&(g=`Change tone > ${e.prompt_title}`),h===de.REWRITE&&(g=`Rewrite > ${e.prompt_title}`),g},[e.prompt_title,e.parent_prompt_id]);return U.createElement(Pe,{...r,"data-id":e.prompt_id,"data-testid":m,"data-button-clicked-name":p,className:`floating-context-menu-item ${c?"floating-context-menu-item--active":""}`,tabIndex:c?0:-1,sx:{display:"flex",alignItems:"center",flexDirection:"row",gap:"12px",boxSizing:"border-box",p:"6px 8px",borderRadius:"4px",fontSize:"14px",width:"100%",cursor:"pointer",scrollbarColor:h=>h.palette.scrollbarColor,scrollbarWidth:d,"&.floating-context-menu-item--active":{bgcolor:h=>h.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(55, 53, 47, 0.08)","& .floating-context-menu-item__footer-icon":{display:"flex"}},"& .floating-context-menu-item__footer-icon":{display:"none",flexShrink:0},"& .floating-context-menu-item__footer-icon--active":{display:"flex"},"&:hover":{bgcolor:h=>h.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(55, 53, 47, 0.08)","& .floating-context-menu-item__footer-icon":{display:"flex"}}},ref:n,component:"div",role:"menuitem",onKeyDown:async h=>{if(o?.onKeyDown?.(h),h.code==="Enter"){if(!await xt({emitEvent:!0})){h.stopPropagation();return}if(Ue()?.querySelector('div[data-testid="maxai--conversation--rename-chat--input"] input'))return;u(v=>({...v,selectedContextMenuId:e.prompt_id})),h.stopPropagation()}},onClick:async()=>{await xt({emitEvent:!0})&&u(h=>({...h,selectedContextMenuId:e.prompt_id}))}},e?.prompt_icon&&U.createElement(Te,{size:20,icon:e.prompt_icon,sx:{color:"text.secondary",flexShrink:0}}),U.createElement(me,{fontSize:14,textAlign:"left",color:"text.primary",width:0,noWrap:!0,flex:1,lineHeight:"21px"},l),U.createElement("span",{className:"floating-context-menu-item__footer-icon "+(e.type==="group"?"floating-context-menu-item__footer-icon--active":"")},e.type==="group"?U.createElement(cc.default,{sx:{color:h=>h.palette.mode==="dark"?"#ffffff85":"rgba(55, 53, 47, 0.45)",fontSize:16}}):f&&t?t:U.createElement(uy.default,{className:"floating-context-menu-item__footer-hover-icon",sx:{color:h=>h.palette.mode==="dark"?"#ffffff85":"rgba(55, 53, 47, 0.45)",fontSize:16}})))});PT.displayName="DropdownMenuItem";var lc=U.forwardRef(({referenceElement:e,referenceElementOpen:t,referenceElementRef:r,zIndex:n,children:o,label:i,root:a,hoverOpen:s=!0,customOpen:u=!1,needAutoUpdate:l=!1,menuSx:c,defaultPlacement:f,defaultFallbackPlacements:d,onClickContextMenu:m,onClickReferenceElement:p,menuWidth:h=400,onOpenChange:g,customOffset:v={},...y},E)=>{let S=lf(),C=cf(),x=js(),{currentFloatingContextMenuDraft:b}=io(),I=!x&&n===2147483601,[T,_]=Be(eo),P=x!=null,[H,j]=U.useState(u?t:!1),B=L=>{X.current&&clearTimeout(X.current),j(L)},F=oe(Ge),X=(0,ge.useRef)(null);(0,ge.useEffect)(()=>{let L=1;return F.openAutoExecute===!0&&(L=2e3),X.current&&clearTimeout(X.current),X.current=setTimeout(()=>{B(t)},L),()=>{X.current&&clearTimeout(X.current)}},[t]);let[$,Ce]=U.useState(I?1:null),[et,mt]=U.useState(!1),te=(0,ge.useRef)(null),ie=(0,ge.useRef)(null),G=U.useRef([]),D=f||(I?"bottom-start":"right-start"),V=d||(I?["bottom-start","top-start","right"]:["right","right-start","right-end","left","left-start","left-end"]),ve=()=>{Ce(null),ie.current=null,te.current=null},Ke=U.Children.count(o);(0,ge.useEffect)(()=>{Ke||(Ce(null),ie.current=null,te.current=null)},[Ke]);let K=Le(F.open),{open:re}=rf(),{x:J,y:Ot,strategy:ht,refs:Fe,context:Ee}=xf({nodeId:C,open:H,onOpenChange:async L=>{re&&!L||(g?.(L),L||ve(),!u&&B(L))},placement:D,middleware:[Dc({mainAxis:I?4:0,alignmentAxis:I?0:-4,...v}),Ac({fallbackPlacements:V}),Pc()],whileElementsMounted:l?DT:void 0}),qn=pf(Ee,{enabled:s&&et,delay:{open:75,close:0},handleClose:Cf({blockPointerEvents:!1})}),en=gf(Ee,{event:"mousedown",toggle:!P||!et,ignoreMouse:P}),tn=Sf(Ee,{role:"menu"}),Hs=vf(Ee),Kn=(0,ge.useRef)(null),my=bf(Ee,{listRef:G,activeIndex:$,nested:P,onNavigate(){let L=()=>{if(!K.current)return;let ce=Ue()?.querySelector(`#${nn}`);ce&&ce?.focus()},le=x?"[\u5B50\u7EA7]":"[\u6839\u7EA7]",z=Kn.current?.key;if(z){let ce=!1,ae=null;ie.current&&(ce=!0,ae=Vs(ie.current));let ne=[];G.current?.forEach((fe,$o)=>{let tt=fe?.getAttribute("data-id");tt&&ne.push({floatingUIId:fe?.id?.replace(/:/g,"\\:")||"",contextMenuId:tt,contextMenuIndex:$o})}),_(fe=>{let $o=fe.hoverContextMenuIdMap[C]||fe.lastHoverContextMenuId||"";ce&&ae?.contextMenuId&&($o=ae.contextMenuId);let tt=ne.findIndex(rn=>rn.contextMenuId===$o);if(z==="ArrowLeft")return Ce(null),L(),{...fe,lastHoverContextMenuId:null,hoverContextMenuIdMap:{...fe.hoverContextMenuIdMap,[C]:""}};if(z==="ArrowRight")if(ne.length>0){let rn=ne[0];return Ce(rn.contextMenuIndex),L(),{...fe,hoverContextMenuIdMap:{...fe.hoverContextMenuIdMap,[C]:""},lastHoverContextMenuId:rn.contextMenuId}}else return Ce(null),L(),{...fe,lastHoverContextMenuId:null,hoverContextMenuIdMap:{...fe.hoverContextMenuIdMap,[C]:""}};let gc=!1,vc=Kn.current?.target,xc=vc?.getAttribute("data-lastid");if(xc&&(tt=ne.findIndex(rn=>rn.floatingUIId===xc),vc.removeAttribute("data-lastid"),gc=!0),tt===-1&&(x||(tt=0)),tt===-1)return L(),fe;let Gt=null;return z==="ArrowDown"?gc||ce?Gt=ne[tt]:ne[tt+1]?Gt=ne[tt+1]:Gt=ne[0]:z==="ArrowUp"&&(ne[tt-1]?Gt=ne[tt-1]:Gt=ne[ne.length-1]),Gt?(Ce(Gt.contextMenuIndex),L(),{...fe,hoverContextMenuIdMap:{...fe.hoverContextMenuIdMap,[C||""]:Gt.contextMenuId},lastHoverContextMenuId:Gt.contextMenuId}):(L(),fe)}),Kn.current=null}},loop:!0,virtual:!0}),{getReferenceProps:pc,getFloatingProps:hy,getItemProps:gy}=yf([qn,en,tn,Hs,my]);U.useEffect(()=>{if(!S)return;function L(){u||B(!1)}function le(z){z.nodeId!==C&&z.parentId===x&&B(!1)}return S.events.on("click",L),S.events.on("menuopen",le),()=>{S.events.off("click",L),S.events.off("menuopen",le)}},[S,C,x,u]),U.useEffect(()=>{H&&S&&S.events.emit("menuopen",{parentId:x,nodeId:C})},[S,H,C,x]),U.useEffect(()=>{function L({pointerType:z}){z!=="touch"&&mt(!0)}function le(){mt(!1)}return window.addEventListener("pointermove",L,{once:!0,capture:!0}),window.addEventListener("keydown",le,!0),()=>{window.removeEventListener("pointermove",L,{capture:!0}),window.removeEventListener("keydown",le,!0)}},[et]),(0,ge.useEffect)(()=>{let L=!1;return I&&T.lastHoverContextMenuId&&o&&setTimeout(()=>{L||Ce(le=>{let z=o.findIndex(ce=>ce?.key===T.lastHoverContextMenuId);return z!==-1&&le===null?z:le})},0),()=>{L=!0}},[T.lastHoverContextMenuId,o]);let mc=uf([Fe.setReference,E,r]),hc=(0,ge.useCallback)(()=>{let L=T.lastHoverContextMenuId;if(L){let le=Ue()?.querySelector(`[data-id="${L}"]`);le&&le.dispatchEvent(new KeyboardEvent("keydown",{key:"Enter",bubbles:!0,cancelable:!0,code:"Enter",keyCode:13}))}},[T]);(0,ge.useEffect)(()=>{F.open||(ve(),_(L=>({...L,hoverContextMenuIdMap:{},lastHoverContextMenuId:null})))},[F.open]);let vy=(0,ge.useMemo)(()=>Xo(),[]);return U.createElement(ff,{id:C},e?U.isValidElement(e)&&U.cloneElement(e,{...pc({...y,className:`${P?"MenuItem":"RootMenu"}`,onClick(L){L.stopPropagation(),p?.(L)},async onKeyDownCapture(L){if(Ue()?.querySelector(".LANGUAGE_SELECTOR_AUTOCOMPLETE_OPEN")||Ue()?.querySelector(".MAXAI_CLIENT__UI__SELECT"))return!1;if(L.key==="Enter"&&!L.shiftKey&&!x){if(!await xt({emitEvent:!0}))return;if($!==null){x||L.stopPropagation();let le=G.current[$];if(te.current){let z=te.current?.getAttribute("aria-controls")?.replace(/:/g,"\\:"),ce=Ue()?.querySelector(`#${z}`);if(ce){let ae=ce.getAttribute("aria-activedescendant")?.replace(/:/g,"\\:");if(ae){let ne=ce.querySelector(`#${ae}`);ne.id&&ne.getAttribute("aria-haspopup")&&(le=ne)}else hc()}}if(le&&le.getAttribute("aria-haspopup")==="menu"){le.focus(),le.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowRight",bubbles:!0,cancelable:!0})),te.current=le;return}else hc()}return}if(L.key==="ArrowDown"||L.key==="ArrowUp"||L.key==="ArrowLeft"||L.key==="ArrowRight"){if(ie.current=null,L.key==="ArrowLeft"){if(!x&&te.current){let z=Vs(te.current);z?.parentDropdownSelectedItem&&(z.dropdownSelectedItem.focus(),z.dropdownSelectedItem.dispatchEvent(new KeyboardEvent("keydown",{key:L.key,bubbles:!0,cancelable:!0})),z.parentDropdownSelectedItem&&z.id&&(z.parentDropdownSelectedItem.setAttribute("data-lastid",z.id),z.parentDropdownSelectedItem.focus(),z.parentDropdownSelectedItem.classList.contains("RootMenu")?te.current=null:te.current=z.parentDropdownSelectedItem,z.parentDropdownSelectedItem.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown",bubbles:!0,cancelable:!0}))))}return}else if(L.key==="ArrowRight"&&!x&&$!==null){let z=G.current[$];if(te.current){let ce=te.current?.getAttribute("aria-controls")?.replace(/:/g,"\\:"),ae=Ue()?.querySelector(`#${ce}`);if(ae){let ne=ae.getAttribute("aria-activedescendant")?.replace(/:/g,"\\:"),fe=ae.querySelector(`#${ne}`);fe.id&&fe.getAttribute("aria-haspopup")&&(z=fe)}}z&&z.getAttribute("aria-haspopup")==="menu"&&(z.focus(),z.dispatchEvent(new KeyboardEvent("keydown",{key:L.key,bubbles:!0,cancelable:!0})),te.current=z);return}else if(te.current&&Ue()?.contains(te.current)){te.current.focus(),te.current.dispatchEvent(new KeyboardEvent("keydown",{key:L.key,bubbles:!0,cancelable:!0}));return}Ue()?.querySelector(`#${nn}`)?.focus(),Kn.current=L}},...P&&{role:"menuitem"},ref:mc})}):U.createElement(Wt,{ref:mc,...pc({...y,className:`${P?"MenuItem":"RootMenu"}`,onClick(L){L.stopPropagation()},...P&&{role:"menuitem"}}),startIcon:U.createElement(Zc,{sx:{fontSize:16,color:"inherit"}}),variant:"outlined"},i||"Use ChatGPT"),U.createElement(mf,{root:a},H&&U.Children.count(o)&&U.createElement(hf,{context:Ee,modal:!1,returnFocus:P,initialFocus:-1,visuallyHiddenDismiss:!0},U.createElement(Pe,{sx:{zIndex:(n||0)+1,display:H?"flex":"none",flexDirection:"column",outline:"none!important",width:h,maxHeight:340,boxSizing:"border-box",overflowY:"auto",bgcolor:"background.paper",borderRadius:"8px",border:L=>L.palette.mode==="dark"?"1px solid rgba(255,255,255,0.08)":"1px solid rgba(0,0,0,0.08)",boxShadow:"0px 4px 6px -2px rgba(16, 24, 40, 0.03), 0px 12px 16px -4px rgba(16, 24, 40, 0.08)","& *":{outline:"none!important"},"&:has(.max-ai--popper-wrapper)":{overflowY:"unset"},scrollbarColor:L=>L.palette.scrollbarColor,scrollbarWidth:vy,...c},component:"div",ref:Fe.setFloating,className:"Menu dropdown-menu",style:{position:ht,top:Ot??0,left:J??0},onWheel:L=>{L.stopPropagation()},...hy()},U.createElement(iy,{manualFetch:!0,showToolbar:I&&!b},U.createElement(ee,{flex:1,height:0,p:.5,sx:{overflowY:"auto"}},U.Children.map(o,(L,le)=>U.isValidElement(L)&&U.cloneElement(L,gy({tabIndex:$===le?0:-1,ref(z){G.current[le]=z},async onMouseDown(z){await xt({emitEvent:!0})&&m&&(S?.events.emit("click"),L.props?.menuItem?.actions?.length&&m?.(L.props.menuItem,z))},onClick(z){m||(L.props.onClick?.(z),S?.events.emit("click"))},onKeyDownCapture(z){Kn.current=z},onMouseEnter(z){z.stopPropagation(),z.preventDefault();let ce=z.currentTarget;if(ce.getAttribute("data-id")){te.current=ce;let ae=Vs(ce);if((ae?.id||ae?.contextMenuId)&&ae.expandedSiblingMenuItem){if(ae.expandedSiblingMenuItem?.getAttribute("data-id")===ae.contextMenuId)return;let ne=Vs(ae.expandedSiblingMenuItem);if(ne?.dropdownSelectedItem){let fe=new KeyboardEvent("keydown",{key:"ArrowLeft",bubbles:!0,cancelable:!0});ie.current=ne.dropdownSelectedItem,ne.dropdownSelectedItem.focus(),ne.dropdownSelectedItem.dispatchEvent(fe),ae.expandedSiblingMenuItem.setAttribute("data-lastid",ae.contextMenuId),ae.expandedSiblingMenuItem.classList.contains("RootMenu")?te.current=null:te.current=ne.parentDropdownSelectedItem,ae.expandedSiblingMenuItem.focus(),ae.expandedSiblingMenuItem.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown",bubbles:!0,cancelable:!0}))}}if(ae?.id){let ne=new KeyboardEvent("keydown",{key:"ArrowDown",bubbles:!0,cancelable:!0});ie.current=ce,ae.keydownEmitElement?.dispatchEvent(ne);let fe=new KeyboardEvent("keydown",{key:"ArrowRight",bubbles:!0,cancelable:!0});ie.current=ce,ce.dispatchEvent(fe)}else if(ae?.contextMenuId){let ne=new KeyboardEvent("keydown",{key:"ArrowDown",bubbles:!0,cancelable:!0});ie.current=ce,ce.dispatchEvent(ne)}}}})))))))))});lc.displayName="MenuComponent";var AT=U.forwardRef((e,t)=>js()===null?U.createElement(df,null,U.createElement(lc,{...e,ref:t})):U.createElement(lc,{...e,ref:t}));AT.displayName="DropdownMenu";var Vs=e=>{let t=Ue();if(!e||!t)return null;let r=e.getAttribute("id")?.replace(/:/g,"\\:")||"",n=e.getAttribute("data-id")||"",o=e.getAttribute("aria-haspopup")==="menu",i=t.querySelector(`div[aria-haspopup="menu"][aria-activedescendant="${r}"]`),a=i?.getAttribute("aria-controls")?.replace(/:/g,"\\:"),s=a?t.querySelector(`[id="${a}"]`):null,u=e.getAttribute("aria-controls")?.replace(/:/g,"\\:"),l=u?t.querySelector(`[id="${u}"]`):null,c=null;l&&!c&&(c=l.querySelector('.floating-context-menu-item--active:not([aria-haspopup="menu"])'),c||(c=l.querySelector('.floating-context-menu-item:not([aria-haspopup="menu"])')));let f=e.parentElement?.querySelector('.floating-context-menu-item:not([aria-haspopup="menu"])'),d=e.parentElement?.querySelector('.floating-context-menu-item[aria-expanded="true"]');return{id:r,contextMenuId:n,isMenu:o,parentDropdownSelectedItem:i,parentDropdown:s,dropdownMenu:l,dropdownSelectedItem:c,keydownEmitElement:f,expandedSiblingMenuItem:d}};var qe=w(O());var ly=w(yy());var _t=w(O()),LT=e=>{let{sx:t,...r}=e,[n,o]=(0,_t.useState)(!0),[i,a]=(0,_t.useState)(!0);return(0,_t.useEffect)(()=>{n||setTimeout(()=>a(!1),500)},[n]),_t.default.createElement(ee,{direction:"row",sx:{display:i?"flex":"none",width:t?.width||"100%"}},_t.default.createElement(Ic,{in:n,sx:{width:t?.width||"100%"}},_t.default.createElement(_c,{sx:t,severity:"info",...r,action:e.action?e.action:_t.default.createElement(wc,{"aria-label":"close",color:"inherit",size:"small",onClick:()=>{o(!1)}},_t.default.createElement(ly.default,{fontSize:"inherit"}))})))},cy=LT;var RT=zf("/images/settings/entry/settings-entry-small.png"),kT=({liteMode:e,onClickSettings:t})=>{let r=qe.default.createElement(me,{fontSize:14,color:"text.primary",sx:{cursor:"pointer"},onClick:t},qe.default.createElement(Zo,{i18nKey:"client:floating_menu__button__hide_menu__this_site__tooltip__description",components:[qe.default.createElement(me,{key:"settings",component:"span",color:"primary.main",fontSize:"inherit",fontWeight:"inherit",sx:{textDecoration:"underline"}})]}));return qe.default.createElement(qe.default.Fragment,null,e?qe.default.createElement(Pe,{sx:{borderRadius:"4px",bgcolor:n=>n.palette.mode==="dark"?"rgb(7, 19, 24)":"rgb(229, 246, 253)",color:n=>n.palette.mode==="dark"?"rgb(184, 231, 251)":"rgb(1, 67, 97)",p:2,overflow:"hidden"}},qe.default.createElement(ee,{spacing:1,alignItems:"center"},r,qe.default.createElement("img",{src:RT,alt:"settings-entry",width:217,height:162}))):qe.default.createElement(cy,{icon:qe.default.createElement(qe.default.Fragment,null),sx:{mt:1,mb:2}},qe.default.createElement(ee,{spacing:1},r,qe.default.createElement("img",{src:"https://www.maxai.co/assets/chrome-extension/settings-entry.png",alt:"settings-entry",width:466,height:121}))))},fy=kT;var NT=e=>{let{dataButtonClickedName:t,onClickSettings:r,onClickConfirmOk:n,onClickConfirmCancel:o,confirmTitle:i,confirmOkText:a,confirmCancelText:s,itemText:u}=e,[l,c]=(0,Ve.useState)(!1);return Ve.default.createElement(fc,{"data-button-clicked-name":t,sx:{height:"auto",position:"relative"},onMouseLeave:()=>{c(!1)},CustomRenderNode:Ve.default.createElement(Ve.default.Fragment,null,Ve.default.createElement(Fc,{componentsProps:{tooltip:{sx:{bgcolor:"transparent",p:0}}},PopperProps:{disablePortal:!0},placement:"top",title:Ve.default.createElement(Lc,{sx:{p:3,width:288,boxSizing:"border-box",cursor:"auto",boxShadow:f=>f.palette.mode==="dark"?"0 0 4px rgba(255,255,255,0.2)":"0 0 4px rgba(0,0,0,0.2)"}},Ve.default.createElement(ee,{spacing:1},Ve.default.createElement(me,{textAlign:"center",fontWeight:"600",fontSize:"16px",color:"text.primary"},i),Ve.default.createElement(fy,{liteMode:!0,onClickSettings:f=>{r?.(f),c(!1)}}),Ve.default.createElement(Pe,null),Ve.default.createElement(Wt,{variant:"outlined",color:"primary",onClick:async f=>{await n?.(f),c(!1)}},a),Ve.default.createElement(Wt,{variant:"contained",color:"primary",onClick:f=>{o?.(f),c(!1)}},s))),open:l,disableHoverListener:!0},Ve.default.createElement("span",null,Ve.default.createElement(ep,{label:u,onClick:async()=>{await xt({emitEvent:!0})&&c(!l)}}))))})},dc=NT;var Qr=w(O()),VT=e=>{let{i18nKey:t="client:floating_menu__button__menu_settings",onClick:r}=e;return Qr.default.createElement(Nc,{sx:{padding:"4px!important",borderRadius:"0 0 6px 6px"},onClick:r},Qr.default.createElement(Jo,{sx:{padding:"0px 8px!important",borderRadius:"4px"}},Qr.default.createElement(Qo,{primary:Qr.default.createElement(me,{noWrap:!0,fontSize:"13px",color:n=>n.palette.mode==="dark"?"rgba(255,255,255,0.38)":"rgba(0,0,0,0.38)"},Qr.default.createElement(Zo,{i18nKey:t,components:[Qr.default.createElement(me,{key:"settings",component:"span",color:"primary.main",fontSize:"inherit",fontWeight:"inherit",sx:{textDecoration:"underline"}})]}))})))},dy=VT;var py=(0,ir.forwardRef)((e,t)=>{let{t:r}=xe(["common","client"]),{sx:n,hideThisSiteItemDataButtonClickedName:o,hideThisSiteItemText:i,hideThisSiteConfirmCardTitle:a,hideThisSiteConfirmCardOkText:s,hideThisSiteConfirmCardCancelText:u=r("common:cancel"),onHideThisSiteConfirmCardClickCancel:l,onHideThisSiteConfirmCardClickOk:c,hideAllSitesItemDataButtonClickedName:f,hideAllSitesItemText:d,hideAllSitesConfirmCardTitle:m,hideAllSitesConfirmCardOkText:p,hideAllSitesConfirmCardCancelText:h=r("common:cancel"),onHideAllSitesConfirmCardClickCancel:g,onHideAllSitesConfirmCardClickOk:v,openSettingsItemTextI18nKey:y="client:floating_menu__button__menu_settings",onClickSettings:E}=e;return ir.default.createElement(kc,{component:"div",ref:t,sx:{padding:"0px!important",bgcolor:S=>S.palette.background.paper,border:S=>S.palette.mode==="dark"?"1px solid rgba(255,255,255,0.08)":"1px solid rgba(0,0,0,0.08)",borderRadius:"8px",boxShadow:"0px 4px 6px -2px rgba(16, 24, 40, 0.03), 0px 12px 16px -4px rgba(16, 24, 40, 0.08)",...n}},ir.default.createElement(Pe,{sx:{padding:"4px"}},ir.default.createElement(dc,{dataButtonClickedName:o,onClickSettings:E,onClickConfirmOk:c,onClickConfirmCancel:l,itemText:i,confirmTitle:a,confirmOkText:s,confirmCancelText:u}),ir.default.createElement(dc,{dataButtonClickedName:f,onClickSettings:E,onClickConfirmOk:v,onClickConfirmCancel:g,itemText:d,confirmTitle:m,confirmOkText:p,confirmCancelText:h})),ir.default.createElement(Rc,null),ir.default.createElement(dy,{i18nKey:y,onClick:E}))});py.displayName="HideMenuOptions";var x4=py;export{Mi as a,Pt as b,wb as c,Xd as d,JO as e,Jd as f,Ii as g,JT as h,cM as i,bd as j,Td as k,uI as l,oo as m,Dy as n,wd as o,ay as p,sy as q,Od as r,ty as s,oy as t,Rb as u,gd as v,ro as w,Le as x,Fy as y,au as z,By as A,Lr as B,io as C,zy as D,Gy as E,gb as F,vb as G,M_ as H,A_ as I,Rr as J,Sb as K,Ty as L,Rd as M,PT as N,AT as O,wO as P,_O as Q,OO as R,DO as S,UT as T,WT as U,x4 as V,RO as W,GO as X};
