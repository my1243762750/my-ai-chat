import{G as Es,Va as xs,Wa as Is,a as gs,h as bs,i as qi,k as ws,n as Ss,y as Lr}from"./VE4EMEBO.js";import{f as vs,s as On}from"./AUJ76673.js";import{a as lc}from"./4B6UFNBQ.js";import{I as _s,V as ys,c as Ki,h as ps,l as hs,m as ms,n as kn}from"./XZ5AIA7R.js";import{a as cc}from"./PJ57C2TE.js";import{c as uc,f as Ui}from"./GAV6HCJA.js";var Ba=uc((Co,Mo)=>{(function(e,t){typeof Co=="object"&&typeof Mo<"u"?Mo.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self,e.Dexie=t())})(Co,function(){"use strict";var e=function(r,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},e(r,n)};function t(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(r,n);function o(){this.constructor=r}r.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}var i=function(){return i=Object.assign||function(n){for(var o,a=1,c=arguments.length;a<c;a++){o=arguments[a];for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&(n[f]=o[f])}return n},i.apply(this,arguments)};function s(r,n,o){if(o||arguments.length===2)for(var a=0,c=n.length,f;a<c;a++)(f||!(a in n))&&(f||(f=Array.prototype.slice.call(n,0,a)),f[a]=n[a]);return r.concat(f||Array.prototype.slice.call(n))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,l=Object.keys,p=Array.isArray;typeof Promise<"u"&&!u.Promise&&(u.Promise=Promise);function _(r,n){return typeof n!="object"||l(n).forEach(function(o){r[o]=n[o]}),r}var h=Object.getPrototypeOf,b={}.hasOwnProperty;function g(r,n){return b.call(r,n)}function E(r,n){typeof n=="function"&&(n=n(h(r))),(typeof Reflect>"u"?l:Reflect.ownKeys)(n).forEach(function(o){x(r,o,n[o])})}var w=Object.defineProperty;function x(r,n,o,a){w(r,n,_(o&&g(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},a))}function C(r){return{from:function(n){return r.prototype=Object.create(n.prototype),x(r.prototype,"constructor",r),{extend:E.bind(null,r.prototype)}}}}var O=Object.getOwnPropertyDescriptor;function L(r,n){var o=O(r,n),a;return o||(a=h(r))&&L(a,n)}var H=[].slice;function $(r,n,o){return H.call(r,n,o)}function K(r,n){return n(r)}function Y(r){if(!r)throw new Error("Assertion Failed")}function re(r){u.setImmediate?setImmediate(r):setTimeout(r,0)}function Oe(r,n){return r.reduce(function(o,a,c){var f=n(a,c);return f&&(o[f[0]]=f[1]),o},{})}function me(r,n){if(typeof n=="string"&&g(r,n))return r[n];if(!n)return r;if(typeof n!="string"){for(var o=[],a=0,c=n.length;a<c;++a){var f=me(r,n[a]);o.push(f)}return o}var m=n.indexOf(".");if(m!==-1){var y=r[n.substr(0,m)];return y==null?void 0:me(y,n.substr(m+1))}}function se(r,n,o){if(!(!r||n===void 0)&&!("isFrozen"in Object&&Object.isFrozen(r)))if(typeof n!="string"&&"length"in n){Y(typeof o!="string"&&"length"in o);for(var a=0,c=n.length;a<c;++a)se(r,n[a],o[a])}else{var f=n.indexOf(".");if(f!==-1){var m=n.substr(0,f),y=n.substr(f+1);if(y==="")o===void 0?p(r)&&!isNaN(parseInt(m))?r.splice(m,1):delete r[m]:r[m]=o;else{var v=r[m];(!v||!g(r,m))&&(v=r[m]={}),se(v,y,o)}}else o===void 0?p(r)&&!isNaN(parseInt(n))?r.splice(n,1):delete r[n]:r[n]=o}}function ge(r,n){typeof n=="string"?se(r,n,void 0):"length"in n&&[].map.call(n,function(o){se(r,o,void 0)})}function Le(r){var n={};for(var o in r)g(r,o)&&(n[o]=r[o]);return n}var qe=[].concat;function le(r){return qe.apply([],r)}var pt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(le([8,16,32,64].map(function(r){return["Int","Uint","Float"].map(function(n){return n+r+"Array"})}))).filter(function(r){return u[r]}),Re=new Set(pt.map(function(r){return u[r]}));function Ge(r){var n={};for(var o in r)if(g(r,o)){var a=r[o];n[o]=!a||typeof a!="object"||Re.has(a.constructor)?a:Ge(a)}return n}function ze(r){for(var n in r)if(g(r,n))return!1;return!0}var it=null;function Ye(r){it=new WeakMap;var n=Kt(r);return it=null,n}function Kt(r){if(!r||typeof r!="object")return r;var n=it.get(r);if(n)return n;if(p(r)){n=[],it.set(r,n);for(var o=0,a=r.length;o<a;++o)n.push(Kt(r[o]))}else if(Re.has(r.constructor))n=r;else{var c=h(r);n=c===Object.prototype?{}:Object.create(c),it.set(r,n);for(var f in r)g(r,f)&&(n[f]=Kt(r[f]))}return n}var Jr={}.toString;function qt(r){return Jr.call(r).slice(8,-1)}var tr=typeof Symbol<"u"?Symbol.iterator:"@@iterator",rr=typeof tr=="symbol"?function(r){var n;return r!=null&&(n=r[tr])&&n.apply(r)}:function(){return null};function ot(r,n){var o=r.indexOf(n);return o>=0&&r.splice(o,1),o>=0}var ht={};function Xe(r){var n,o,a,c;if(arguments.length===1){if(p(r))return r.slice();if(this===ht&&typeof r=="string")return[r];if(c=rr(r)){for(o=[];a=c.next(),!a.done;)o.push(a.value);return o}if(r==null)return[r];if(n=r.length,typeof n=="number"){for(o=new Array(n);n--;)o[n]=r[n];return o}return[r]}for(n=arguments.length,o=new Array(n);n--;)o[n]=arguments[n];return o}var Qe=typeof Symbol<"u"?function(r){return r[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},mt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],nr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],St=mt.concat(nr),oe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function De(r,n){this.name=r,this.message=n}C(De).from(Error).extend({toString:function(){return this.name+": "+this.message}});function we(r,n){return r+". Errors: "+Object.keys(n).map(function(o){return n[o].toString()}).filter(function(o,a,c){return c.indexOf(o)===a}).join(`
`)}function Ce(r,n,o,a){this.failures=n,this.failedKeys=a,this.successCount=o,this.message=we(r,n)}C(Ce).from(De);function $e(r,n){this.name="BulkError",this.failures=Object.keys(n).map(function(o){return n[o]}),this.failuresByPos=n,this.message=we(r,this.failures)}C($e).from(De);var _e=St.reduce(function(r,n){return r[n]=n+"Error",r},{}),wr=De,Q=St.reduce(function(r,n){var o=n+"Error";function a(c,f){this.name=o,c?typeof c=="string"?(this.message="".concat(c).concat(f?`
 `+f:""),this.inner=f||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=oe[n]||o,this.inner=null)}return C(a).from(wr),r[n]=a,r},{});Q.Syntax=SyntaxError,Q.Type=TypeError,Q.Range=RangeError;var To=nr.reduce(function(r,n){return r[n+"Error"]=Q[n],r},{});function Fa(r,n){if(!r||r instanceof De||r instanceof TypeError||r instanceof SyntaxError||!r.name||!To[r.name])return r;var o=new To[r.name](n||r.message,r);return"stack"in r&&x(o,"stack",{get:function(){return this.inner.stack}}),o}var Zr=St.reduce(function(r,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(r[n+"Error"]=Q[n]),r},{});Zr.ModifyError=Ce,Zr.DexieError=De,Zr.BulkError=$e;function ye(){}function Sr(r){return r}function Ua(r,n){return r==null||r===Sr?n:function(o){return n(r(o))}}function jt(r,n){return function(){r.apply(this,arguments),n.apply(this,arguments)}}function Ka(r,n){return r===ye?n:function(){var o=r.apply(this,arguments);o!==void 0&&(arguments[0]=o);var a=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var f=n.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?jt(a,this.onsuccess):a),c&&(this.onerror=this.onerror?jt(c,this.onerror):c),f!==void 0?f:o}}function qa(r,n){return r===ye?n:function(){r.apply(this,arguments);var o=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?jt(o,this.onsuccess):o),a&&(this.onerror=this.onerror?jt(a,this.onerror):a)}}function ja(r,n){return r===ye?n:function(o){var a=r.apply(this,arguments);_(o,a);var c=this.onsuccess,f=this.onerror;this.onsuccess=null,this.onerror=null;var m=n.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?jt(c,this.onsuccess):c),f&&(this.onerror=this.onerror?jt(f,this.onerror):f),a===void 0?m===void 0?void 0:m:_(a,m)}}function $a(r,n){return r===ye?n:function(){return n.apply(this,arguments)===!1?!1:r.apply(this,arguments)}}function ei(r,n){return r===ye?n:function(){var o=r.apply(this,arguments);if(o&&typeof o.then=="function"){for(var a=this,c=arguments.length,f=new Array(c);c--;)f[c]=arguments[c];return o.then(function(){return n.apply(a,f)})}return n.apply(this,arguments)}}var st=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ao(r,n){st=r}var Er={},Ro=100,ti=typeof Promise>"u"?[]:function(){var r=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[r,h(r),r];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,h(n),r]}(),Do=ti[0],No=ti[1],Wa=ti[2],za=No&&No.then,xr=Do&&Do.constructor,ri=!!Wa;function Va(){queueMicrotask(Ga)}var Ir=function(r,n){kr.push([r,n]),en&&(Va(),en=!1)},ni=!0,en=!0,$t=[],tn=[],ii=Sr,Et={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ye,pgp:!1,env:{},finalize:ye},X=Et,kr=[],Wt=0,rn=[];function W(r){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=X;if(typeof r!="function"){if(r!==Er)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&si(this,this._value);return}this._state=null,this._value=null,++n.ref,Bo(this,r)}var oi={get:function(){var r=X,n=an;function o(a,c){var f=this,m=!r.global&&(r!==X||n!==an),y=m&&!It(),v=new W(function(S,M){ai(f,new Po(Uo(a,r,m,y),Uo(c,r,m,y),S,M,r))});return this._consoleTask&&(v._consoleTask=this._consoleTask),v}return o.prototype=Er,o},set:function(r){x(this,"then",r&&r.prototype===Er?oi:{get:function(){return r},set:oi.set})}};E(W.prototype,{then:oi,_then:function(r,n){ai(this,new Po(null,null,r,n,X))},catch:function(r){if(arguments.length===1)return this.then(null,r);var n=arguments[0],o=arguments[1];return typeof n=="function"?this.then(null,function(a){return a instanceof n?o(a):nn(a)}):this.then(null,function(a){return a&&a.name===n?o(a):nn(a)})},finally:function(r){return this.then(function(n){return W.resolve(r()).then(function(){return n})},function(n){return W.resolve(r()).then(function(){return nn(n)})})},timeout:function(r,n){var o=this;return r<1/0?new W(function(a,c){var f=setTimeout(function(){return c(new Q.Timeout(n))},r);o.then(a,c).finally(clearTimeout.bind(null,f))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&x(W.prototype,Symbol.toStringTag,"Dexie.Promise"),Et.env=Fo();function Po(r,n,o,a,c){this.onFulfilled=typeof r=="function"?r:null,this.onRejected=typeof n=="function"?n:null,this.resolve=o,this.reject=a,this.psd=c}E(W,{all:function(){var r=Xe.apply(null,arguments).map(un);return new W(function(n,o){r.length===0&&n([]);var a=r.length;r.forEach(function(c,f){return W.resolve(c).then(function(m){r[f]=m,--a||n(r)},o)})})},resolve:function(r){if(r instanceof W)return r;if(r&&typeof r.then=="function")return new W(function(o,a){r.then(o,a)});var n=new W(Er,!0,r);return n},reject:nn,race:function(){var r=Xe.apply(null,arguments).map(un);return new W(function(n,o){r.map(function(a){return W.resolve(a).then(n,o)})})},PSD:{get:function(){return X},set:function(r){return X=r}},totalEchoes:{get:function(){return an}},newPSD:xt,usePSD:zt,scheduler:{get:function(){return Ir},set:function(r){Ir=r}},rejectionMapper:{get:function(){return ii},set:function(r){ii=r}},follow:function(r,n){return new W(function(o,a){return xt(function(c,f){var m=X;m.unhandleds=[],m.onunhandled=f,m.finalize=jt(function(){var y=this;Ya(function(){y.unhandleds.length===0?c():f(y.unhandleds[0])})},m.finalize),r()},n,o,a)})}}),xr&&(xr.allSettled&&x(W,"allSettled",function(){var r=Xe.apply(null,arguments).map(un);return new W(function(n){r.length===0&&n([]);var o=r.length,a=new Array(o);r.forEach(function(c,f){return W.resolve(c).then(function(m){return a[f]={status:"fulfilled",value:m}},function(m){return a[f]={status:"rejected",reason:m}}).then(function(){return--o||n(a)})})})}),xr.any&&typeof AggregateError<"u"&&x(W,"any",function(){var r=Xe.apply(null,arguments).map(un);return new W(function(n,o){r.length===0&&o(new AggregateError([]));var a=r.length,c=new Array(a);r.forEach(function(f,m){return W.resolve(f).then(function(y){return n(y)},function(y){c[m]=y,--a||o(new AggregateError(c))})})})}));function Bo(r,n){try{n(function(o){if(r._state===null){if(o===r)throw new TypeError("A promise cannot be resolved with itself.");var a=r._lib&&ir();o&&typeof o.then=="function"?Bo(r,function(c,f){o instanceof W?o._then(c,f):o.then(c,f)}):(r._state=!0,r._value=o,Lo(r)),a&&or()}},si.bind(null,r))}catch(o){si(r,o)}}function si(r,n){if(tn.push(n),r._state===null){var o=r._lib&&ir();n=ii(n),r._state=!1,r._value=n,Xa(r),Lo(r),o&&or()}}function Lo(r){var n=r._listeners;r._listeners=[];for(var o=0,a=n.length;o<a;++o)ai(r,n[o]);var c=r._PSD;--c.ref||c.finalize(),Wt===0&&(++Wt,Ir(function(){--Wt===0&&ui()},[]))}function ai(r,n){if(r._state===null){r._listeners.push(n);return}var o=r._state?n.onFulfilled:n.onRejected;if(o===null)return(r._state?n.resolve:n.reject)(r._value);++n.psd.ref,++Wt,Ir(Ha,[o,r,n])}function Ha(r,n,o){try{var a,c=n._value;!n._state&&tn.length&&(tn=[]),a=st&&n._consoleTask?n._consoleTask.run(function(){return r(c)}):r(c),!n._state&&tn.indexOf(c)===-1&&Qa(n),o.resolve(a)}catch(f){o.reject(f)}finally{--Wt===0&&ui(),--o.psd.ref||o.psd.finalize()}}function Ga(){zt(Et,function(){ir()&&or()})}function ir(){var r=ni;return ni=!1,en=!1,r}function or(){var r,n,o;do for(;kr.length>0;)for(r=kr,kr=[],o=r.length,n=0;n<o;++n){var a=r[n];a[0].apply(null,a[1])}while(kr.length>0);ni=!0,en=!0}function ui(){var r=$t;$t=[],r.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var n=rn.slice(0),o=n.length;o;)n[--o]()}function Ya(r){function n(){r(),rn.splice(rn.indexOf(n),1)}rn.push(n),++Wt,Ir(function(){--Wt===0&&ui()},[])}function Xa(r){$t.some(function(n){return n._value===r._value})||$t.push(r)}function Qa(r){for(var n=$t.length;n;)if($t[--n]._value===r._value){$t.splice(n,1);return}}function nn(r){return new W(Er,!1,r)}function xe(r,n){var o=X;return function(){var a=ir(),c=X;try{return kt(o,!0),r.apply(this,arguments)}catch(f){n&&n(f)}finally{kt(c,!1),a&&or()}}}var Ne={awaits:0,echoes:0,id:0},Ja=0,on=[],sn=0,an=0,Za=0;function xt(r,n,o,a){var c=X,f=Object.create(c);f.parent=c,f.ref=0,f.global=!1,f.id=++Za,Et.env,f.env=ri?{Promise:W,PromiseProp:{value:W,configurable:!0,writable:!0},all:W.all,race:W.race,allSettled:W.allSettled,any:W.any,resolve:W.resolve,reject:W.reject}:{},n&&_(f,n),++c.ref,f.finalize=function(){--this.parent.ref||this.parent.finalize()};var m=zt(f,r,o,a);return f.ref===0&&f.finalize(),m}function sr(){return Ne.id||(Ne.id=++Ja),++Ne.awaits,Ne.echoes+=Ro,Ne.id}function It(){return Ne.awaits?(--Ne.awaits===0&&(Ne.id=0),Ne.echoes=Ne.awaits*Ro,!0):!1}(""+za).indexOf("[native code]")===-1&&(sr=It=ye);function un(r){return Ne.echoes&&r&&r.constructor===xr?(sr(),r.then(function(n){return It(),n},function(n){return It(),ke(n)})):r}function eu(r){++an,(!Ne.echoes||--Ne.echoes===0)&&(Ne.echoes=Ne.awaits=Ne.id=0),on.push(X),kt(r,!0)}function tu(){var r=on[on.length-1];on.pop(),kt(r,!1)}function kt(r,n){var o=X;if((n?Ne.echoes&&(!sn++||r!==X):sn&&(!--sn||r!==X))&&queueMicrotask(n?eu.bind(null,r):tu),r!==X&&(X=r,o===Et&&(Et.env=Fo()),ri)){var a=Et.env.Promise,c=r.env;(o.global||r.global)&&(Object.defineProperty(u,"Promise",c.PromiseProp),a.all=c.all,a.race=c.race,a.resolve=c.resolve,a.reject=c.reject,c.allSettled&&(a.allSettled=c.allSettled),c.any&&(a.any=c.any))}}function Fo(){var r=u.Promise;return ri?{Promise:r,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:r.all,race:r.race,allSettled:r.allSettled,any:r.any,resolve:r.resolve,reject:r.reject}:{}}function zt(r,n,o,a,c){var f=X;try{return kt(r,!0),n(o,a,c)}finally{kt(f,!1)}}function Uo(r,n,o,a){return typeof r!="function"?r:function(){var c=X;o&&sr(),kt(n,!0);try{return r.apply(this,arguments)}finally{kt(c,!1),a&&queueMicrotask(It)}}}function ci(r){Promise===xr&&Ne.echoes===0?sn===0?r():enqueueNativeMicroTask(r):setTimeout(r,0)}var ke=W.reject;function li(r,n,o,a){if(!r.idbdb||!r._state.openComplete&&!X.letThrough&&!r._vip){if(r._state.openComplete)return ke(new Q.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen)return ke(new Q.DatabaseClosed);r.open().catch(ye)}return r._state.dbReadyPromise.then(function(){return li(r,n,o,a)})}else{var c=r._createTransaction(n,o,r._dbSchema);try{c.create(),r._state.PR1398_maxLoop=3}catch(f){return f.name===_e.InvalidState&&r.isOpen()&&--r._state.PR1398_maxLoop>0?(r.close({disableAutoOpen:!1}),r.open().then(function(){return li(r,n,o,a)})):ke(f)}return c._promise(n,function(f,m){return xt(function(){return X.trans=c,a(f,m,c)})}).then(function(f){if(n==="readwrite")try{c.idbtrans.commit()}catch{}return n==="readonly"?f:c._completion.then(function(){return f})})}}var Ko="4.0.8",Vt="\uFFFF",fi=-1/0,_t="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",qo="String expected.",ar=[],cn="__dbnames",di="readonly",pi="readwrite";function Ht(r,n){return r?n?function(){return r.apply(this,arguments)&&n.apply(this,arguments)}:r:n}var jo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ln(r){return typeof r=="string"&&!/\./.test(r)?function(n){return n[r]===void 0&&r in n&&(n=Ye(n),delete n[r]),n}:function(n){return n}}function $o(){throw Q.Type()}function de(r,n){try{var o=Wo(r),a=Wo(n);if(o!==a)return o==="Array"?1:a==="Array"?-1:o==="binary"?1:a==="binary"?-1:o==="string"?1:a==="string"?-1:o==="Date"?1:a!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return r>n?1:r<n?-1:0;case"binary":return nu(zo(r),zo(n));case"Array":return ru(r,n)}}catch{}return NaN}function ru(r,n){for(var o=r.length,a=n.length,c=o<a?o:a,f=0;f<c;++f){var m=de(r[f],n[f]);if(m!==0)return m}return o===a?0:o<a?-1:1}function nu(r,n){for(var o=r.length,a=n.length,c=o<a?o:a,f=0;f<c;++f)if(r[f]!==n[f])return r[f]<n[f]?-1:1;return o===a?0:o<a?-1:1}function Wo(r){var n=typeof r;if(n!=="object")return n;if(ArrayBuffer.isView(r))return"binary";var o=qt(r);return o==="ArrayBuffer"?"binary":o}function zo(r){return r instanceof Uint8Array?r:ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r)}var Vo=function(){function r(){}return r.prototype._trans=function(n,o,a){var c=this._tx||X.trans,f=this.name,m=st&&typeof console<"u"&&console.createTask&&void 0;function y(M,I,A){if(!A.schema[f])throw new Q.NotFound("Table "+f+" not part of transaction");return o(A.idbtrans,A)}var v=ir();try{var S=c&&c.db._novip===this.db._novip?c===X.trans?c._promise(n,y,a):xt(function(){return c._promise(n,y,a)},{trans:c,transless:X.transless||X}):li(this.db,n,[this.name],y);return m&&(S._consoleTask=m,S=S.catch(function(M){return ke(M)})),S}finally{v&&or()}},r.prototype.get=function(n,o){var a=this;return n&&n.constructor===Object?this.where(n).first(o):n==null?ke(new Q.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return a.core.get({trans:c,key:n}).then(function(f){return a.hook.reading.fire(f)})}).then(o)},r.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(p(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var o=l(n);if(o.length===1)return this.where(o[0]).equals(n[o[0]]);var a=this.schema.indexes.concat(this.schema.primKey).filter(function(I){if(I.compound&&o.every(function(q){return I.keyPath.indexOf(q)>=0})){for(var A=0;A<o.length;++A)if(o.indexOf(I.keyPath[A])===-1)return!1;return!0}return!1}).sort(function(I,A){return I.keyPath.length-A.keyPath.length})[0];if(a&&this.db._maxKey!==Vt){var c=a.keyPath.slice(0,o.length);return this.where(c).equals(c.map(function(I){return n[I]}))}var f=this.schema.idxByName,m=this.db._deps.indexedDB;function y(I,A){return m.cmp(I,A)===0}var v=o.reduce(function(I,A){var q=I[0],k=I[1],T=f[A],R=n[A];return[q||T,q||!T?Ht(k,T&&T.multi?function(D){var P=me(D,A);return p(P)&&P.some(function(F){return y(R,F)})}:function(D){return y(R,me(D,A))}):k]},[null,null]),S=v[0],M=v[1];return S?this.where(S.name).equals(n[S.keyPath]).filter(M):a?this.filter(M):this.where(o).equals("")},r.prototype.filter=function(n){return this.toCollection().and(n)},r.prototype.count=function(n){return this.toCollection().count(n)},r.prototype.offset=function(n){return this.toCollection().offset(n)},r.prototype.limit=function(n){return this.toCollection().limit(n)},r.prototype.each=function(n){return this.toCollection().each(n)},r.prototype.toArray=function(n){return this.toCollection().toArray(n)},r.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},r.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,p(n)?"[".concat(n.join("+"),"]"):n))},r.prototype.reverse=function(){return this.toCollection().reverse()},r.prototype.mapToClass=function(n){var o=this,a=o.db,c=o.name;this.schema.mappedClass=n,n.prototype instanceof $o&&(n=function(v){t(S,v);function S(){return v!==null&&v.apply(this,arguments)||this}return Object.defineProperty(S.prototype,"db",{get:function(){return a},enumerable:!1,configurable:!0}),S.prototype.table=function(){return c},S}(n));for(var f=new Set,m=n.prototype;m;m=h(m))Object.getOwnPropertyNames(m).forEach(function(v){return f.add(v)});var y=function(v){if(!v)return v;var S=Object.create(n.prototype);for(var M in v)if(!f.has(M))try{S[M]=v[M]}catch{}return S};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=y,this.hook("reading",y),n},r.prototype.defineClass=function(){function n(o){_(this,o)}return this.mapToClass(n)},r.prototype.add=function(n,o){var a=this,c=this.schema.primKey,f=c.auto,m=c.keyPath,y=n;return m&&f&&(y=ln(m)(n)),this._trans("readwrite",function(v){return a.core.mutate({trans:v,type:"add",keys:o!=null?[o]:null,values:[y]})}).then(function(v){return v.numFailures?W.reject(v.failures[0]):v.lastResult}).then(function(v){if(m)try{se(n,m,v)}catch{}return v})},r.prototype.update=function(n,o){if(typeof n=="object"&&!p(n)){var a=me(n,this.schema.primKey.keyPath);return a===void 0?ke(new Q.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(a).modify(o)}else return this.where(":id").equals(n).modify(o)},r.prototype.put=function(n,o){var a=this,c=this.schema.primKey,f=c.auto,m=c.keyPath,y=n;return m&&f&&(y=ln(m)(n)),this._trans("readwrite",function(v){return a.core.mutate({trans:v,type:"put",values:[y],keys:o!=null?[o]:null})}).then(function(v){return v.numFailures?W.reject(v.failures[0]):v.lastResult}).then(function(v){if(m)try{se(n,m,v)}catch{}return v})},r.prototype.delete=function(n){var o=this;return this._trans("readwrite",function(a){return o.core.mutate({trans:a,type:"delete",keys:[n]})}).then(function(a){return a.numFailures?W.reject(a.failures[0]):void 0})},r.prototype.clear=function(){var n=this;return this._trans("readwrite",function(o){return n.core.mutate({trans:o,type:"deleteRange",range:jo})}).then(function(o){return o.numFailures?W.reject(o.failures[0]):void 0})},r.prototype.bulkGet=function(n){var o=this;return this._trans("readonly",function(a){return o.core.getMany({keys:n,trans:a}).then(function(c){return c.map(function(f){return o.hook.reading.fire(f)})})})},r.prototype.bulkAdd=function(n,o,a){var c=this,f=Array.isArray(o)?o:void 0;a=a||(f?void 0:o);var m=a?a.allKeys:void 0;return this._trans("readwrite",function(y){var v=c.schema.primKey,S=v.auto,M=v.keyPath;if(M&&f)throw new Q.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(f&&f.length!==n.length)throw new Q.InvalidArgument("Arguments objects and keys must have the same length");var I=n.length,A=M&&S?n.map(ln(M)):n;return c.core.mutate({trans:y,type:"add",keys:f,values:A,wantResults:m}).then(function(q){var k=q.numFailures,T=q.results,R=q.lastResult,D=q.failures,P=m?T:R;if(k===0)return P;throw new $e("".concat(c.name,".bulkAdd(): ").concat(k," of ").concat(I," operations failed"),D)})})},r.prototype.bulkPut=function(n,o,a){var c=this,f=Array.isArray(o)?o:void 0;a=a||(f?void 0:o);var m=a?a.allKeys:void 0;return this._trans("readwrite",function(y){var v=c.schema.primKey,S=v.auto,M=v.keyPath;if(M&&f)throw new Q.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(f&&f.length!==n.length)throw new Q.InvalidArgument("Arguments objects and keys must have the same length");var I=n.length,A=M&&S?n.map(ln(M)):n;return c.core.mutate({trans:y,type:"put",keys:f,values:A,wantResults:m}).then(function(q){var k=q.numFailures,T=q.results,R=q.lastResult,D=q.failures,P=m?T:R;if(k===0)return P;throw new $e("".concat(c.name,".bulkPut(): ").concat(k," of ").concat(I," operations failed"),D)})})},r.prototype.bulkUpdate=function(n){var o=this,a=this.core,c=n.map(function(y){return y.key}),f=n.map(function(y){return y.changes}),m=[];return this._trans("readwrite",function(y){return a.getMany({trans:y,keys:c,cache:"clone"}).then(function(v){var S=[],M=[];n.forEach(function(A,q){var k=A.key,T=A.changes,R=v[q];if(R){for(var D=0,P=Object.keys(T);D<P.length;D++){var F=P[D],U=T[F];if(F===o.schema.primKey.keyPath){if(de(U,k)!==0)throw new Q.Constraint("Cannot update primary key in bulkUpdate()")}else se(R,F,U)}m.push(q),S.push(k),M.push(R)}});var I=S.length;return a.mutate({trans:y,type:"put",keys:S,values:M,updates:{keys:c,changeSpecs:f}}).then(function(A){var q=A.numFailures,k=A.failures;if(q===0)return I;for(var T=0,R=Object.keys(k);T<R.length;T++){var D=R[T],P=m[Number(D)];if(P!=null){var F=k[D];delete k[D],k[P]=F}}throw new $e("".concat(o.name,".bulkUpdate(): ").concat(q," of ").concat(I," operations failed"),k)})})})},r.prototype.bulkDelete=function(n){var o=this,a=n.length;return this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"delete",keys:n})}).then(function(c){var f=c.numFailures,m=c.lastResult,y=c.failures;if(f===0)return m;throw new $e("".concat(o.name,".bulkDelete(): ").concat(f," of ").concat(a," operations failed"),y)})},r}();function Or(r){var n={},o=function(y,v){if(v){for(var S=arguments.length,M=new Array(S-1);--S;)M[S-1]=arguments[S];return n[y].subscribe.apply(null,M),r}else if(typeof y=="string")return n[y]};o.addEventType=f;for(var a=1,c=arguments.length;a<c;++a)f(arguments[a]);return o;function f(y,v,S){if(typeof y=="object")return m(y);v||(v=$a),S||(S=ye);var M={subscribers:[],fire:S,subscribe:function(I){M.subscribers.indexOf(I)===-1&&(M.subscribers.push(I),M.fire=v(M.fire,I))},unsubscribe:function(I){M.subscribers=M.subscribers.filter(function(A){return A!==I}),M.fire=M.subscribers.reduce(v,S)}};return n[y]=o[y]=M,M}function m(y){l(y).forEach(function(v){var S=y[v];if(p(S))f(v,y[v][0],y[v][1]);else if(S==="asap")var M=f(v,Sr,function(){for(var A=arguments.length,q=new Array(A);A--;)q[A]=arguments[A];M.subscribers.forEach(function(k){re(function(){k.apply(null,q)})})});else throw new Q.InvalidArgument("Invalid event config")})}}function Cr(r,n){return C(n).from({prototype:r}),n}function iu(r){return Cr(Vo.prototype,function(o,a,c){this.db=r,this._tx=c,this.name=o,this.schema=a,this.hook=r._allTables[o]?r._allTables[o].hook:Or(null,{creating:[Ka,ye],reading:[Ua,Sr],updating:[ja,ye],deleting:[qa,ye]})})}function ur(r,n){return!(r.filter||r.algorithm||r.or)&&(n?r.justLimit:!r.replayFilter)}function hi(r,n){r.filter=Ht(r.filter,n)}function mi(r,n,o){var a=r.replayFilter;r.replayFilter=a?function(){return Ht(a(),n())}:n,r.justLimit=o&&!a}function ou(r,n){r.isMatch=Ht(r.isMatch,n)}function fn(r,n){if(r.isPrimKey)return n.primaryKey;var o=n.getIndexByKeyPath(r.index);if(!o)throw new Q.Schema("KeyPath "+r.index+" on object store "+n.name+" is not indexed");return o}function Ho(r,n,o){var a=fn(r,n.schema);return n.openCursor({trans:o,values:!r.keysOnly,reverse:r.dir==="prev",unique:!!r.unique,query:{index:a,range:r.range}})}function dn(r,n,o,a){var c=r.replayFilter?Ht(r.filter,r.replayFilter()):r.filter;if(r.or){var f={},m=function(y,v,S){if(!c||c(v,S,function(A){return v.stop(A)},function(A){return v.fail(A)})){var M=v.primaryKey,I=""+M;I==="[object ArrayBuffer]"&&(I=""+new Uint8Array(M)),g(f,I)||(f[I]=!0,n(y,v,S))}};return Promise.all([r.or._iterate(m,o),Go(Ho(r,a,o),r.algorithm,m,!r.keysOnly&&r.valueMapper)])}else return Go(Ho(r,a,o),Ht(r.algorithm,c),n,!r.keysOnly&&r.valueMapper)}function Go(r,n,o,a){var c=a?function(m,y,v){return o(a(m),y,v)}:o,f=xe(c);return r.then(function(m){if(m)return m.start(function(){var y=function(){return m.continue()};(!n||n(m,function(v){return y=v},function(v){m.stop(v),y=ye},function(v){m.fail(v),y=ye}))&&f(m.value,m,function(v){return y=v}),y()})})}var su=Symbol(),Mr=function(){function r(n){Object.assign(this,n)}return r.prototype.execute=function(n){var o;if(this.add!==void 0){var a=this.add;if(p(a))return s(s([],p(n)?n:[],!0),a,!0).sort();if(typeof a=="number")return(Number(n)||0)+a;if(typeof a=="bigint")try{return BigInt(n)+a}catch{return BigInt(0)+a}throw new TypeError("Invalid term ".concat(a))}if(this.remove!==void 0){var c=this.remove;if(p(c))return p(n)?n.filter(function(m){return!c.includes(m)}).sort():[];if(typeof c=="number")return Number(n)-c;if(typeof c=="bigint")try{return BigInt(n)-c}catch{return BigInt(0)-c}throw new TypeError("Invalid subtrahend ".concat(c))}var f=(o=this.replacePrefix)===null||o===void 0?void 0:o[0];return f&&typeof n=="string"&&n.startsWith(f)?this.replacePrefix[1]+n.substring(f.length):n},r}(),au=function(){function r(){}return r.prototype._read=function(n,o){var a=this._ctx;return a.error?a.table._trans(null,ke.bind(null,a.error)):a.table._trans("readonly",n).then(o)},r.prototype._write=function(n){var o=this._ctx;return o.error?o.table._trans(null,ke.bind(null,o.error)):o.table._trans("readwrite",n,"locked")},r.prototype._addAlgorithm=function(n){var o=this._ctx;o.algorithm=Ht(o.algorithm,n)},r.prototype._iterate=function(n,o){return dn(this._ctx,n,o,this._ctx.table.core)},r.prototype.clone=function(n){var o=Object.create(this.constructor.prototype),a=Object.create(this._ctx);return n&&_(a,n),o._ctx=a,o},r.prototype.raw=function(){return this._ctx.valueMapper=null,this},r.prototype.each=function(n){var o=this._ctx;return this._read(function(a){return dn(o,n,a,o.table.core)})},r.prototype.count=function(n){var o=this;return this._read(function(a){var c=o._ctx,f=c.table.core;if(ur(c,!0))return f.count({trans:a,query:{index:fn(c,f.schema),range:c.range}}).then(function(y){return Math.min(y,c.limit)});var m=0;return dn(c,function(){return++m,!1},a,f).then(function(){return m})}).then(n)},r.prototype.sortBy=function(n,o){var a=n.split(".").reverse(),c=a[0],f=a.length-1;function m(S,M){return M?m(S[a[M]],M-1):S[c]}var y=this._ctx.dir==="next"?1:-1;function v(S,M){var I=m(S,f),A=m(M,f);return I<A?-y:I>A?y:0}return this.toArray(function(S){return S.sort(v)}).then(o)},r.prototype.toArray=function(n){var o=this;return this._read(function(a){var c=o._ctx;if(c.dir==="next"&&ur(c,!0)&&c.limit>0){var f=c.valueMapper,m=fn(c,c.table.core.schema);return c.table.core.query({trans:a,limit:c.limit,values:!0,query:{index:m,range:c.range}}).then(function(v){var S=v.result;return f?S.map(f):S})}else{var y=[];return dn(c,function(v){return y.push(v)},a,c.table.core).then(function(){return y})}},n)},r.prototype.offset=function(n){var o=this._ctx;return n<=0?this:(o.offset+=n,ur(o)?mi(o,function(){var a=n;return function(c,f){return a===0?!0:a===1?(--a,!1):(f(function(){c.advance(a),a=0}),!1)}}):mi(o,function(){var a=n;return function(){return--a<0}}),this)},r.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),mi(this._ctx,function(){var o=n;return function(a,c,f){return--o<=0&&c(f),o>=0}},!0),this},r.prototype.until=function(n,o){return hi(this._ctx,function(a,c,f){return n(a.value)?(c(f),o):!0}),this},r.prototype.first=function(n){return this.limit(1).toArray(function(o){return o[0]}).then(n)},r.prototype.last=function(n){return this.reverse().first(n)},r.prototype.filter=function(n){return hi(this._ctx,function(o){return n(o.value)}),ou(this._ctx,n),this},r.prototype.and=function(n){return this.filter(n)},r.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},r.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},r.prototype.desc=function(){return this.reverse()},r.prototype.eachKey=function(n){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(a,c){n(c.key,c)})},r.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},r.prototype.eachPrimaryKey=function(n){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(a,c){n(c.primaryKey,c)})},r.prototype.keys=function(n){var o=this._ctx;o.keysOnly=!o.isMatch;var a=[];return this.each(function(c,f){a.push(f.key)}).then(function(){return a}).then(n)},r.prototype.primaryKeys=function(n){var o=this._ctx;if(o.dir==="next"&&ur(o,!0)&&o.limit>0)return this._read(function(c){var f=fn(o,o.table.core.schema);return o.table.core.query({trans:c,values:!1,limit:o.limit,query:{index:f,range:o.range}})}).then(function(c){var f=c.result;return f}).then(n);o.keysOnly=!o.isMatch;var a=[];return this.each(function(c,f){a.push(f.primaryKey)}).then(function(){return a}).then(n)},r.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},r.prototype.firstKey=function(n){return this.limit(1).keys(function(o){return o[0]}).then(n)},r.prototype.lastKey=function(n){return this.reverse().firstKey(n)},r.prototype.distinct=function(){var n=this._ctx,o=n.index&&n.table.schema.idxByName[n.index];if(!o||!o.multi)return this;var a={};return hi(this._ctx,function(c){var f=c.primaryKey.toString(),m=g(a,f);return a[f]=!0,!m}),this},r.prototype.modify=function(n){var o=this,a=this._ctx;return this._write(function(c){var f;if(typeof n=="function")f=n;else{var m=l(n),y=m.length;f=function(D){for(var P=!1,F=0;F<y;++F){var U=m[F],B=n[U],j=me(D,U);B instanceof Mr?(se(D,U,B.execute(j)),P=!0):j!==B&&(se(D,U,B),P=!0)}return P}}var v=a.table.core,S=v.schema.primaryKey,M=S.outbound,I=S.extractKey,A=o.db._options.modifyChunkSize||200,q=[],k=0,T=[],R=function(D,P){var F=P.failures,U=P.numFailures;k+=D-U;for(var B=0,j=l(F);B<j.length;B++){var z=j[B];q.push(F[z])}};return o.clone().primaryKeys().then(function(D){var P=ur(a)&&a.limit===1/0&&(typeof n!="function"||n===_i)&&{index:a.index,range:a.range},F=function(U){var B=Math.min(A,D.length-U);return v.getMany({trans:c,keys:D.slice(U,U+B),cache:"immutable"}).then(function(j){for(var z=[],V=[],ee=M?[]:null,G=[],J=0;J<B;++J){var ue=j[J],te={value:Ye(ue),primKey:D[U+J]};f.call(te,te.value,te)!==!1&&(te.value==null?G.push(D[U+J]):!M&&de(I(ue),I(te.value))!==0?(G.push(D[U+J]),z.push(te.value)):(V.push(te.value),M&&ee.push(D[U+J])))}return Promise.resolve(z.length>0&&v.mutate({trans:c,type:"add",values:z}).then(function(ve){for(var Z in ve.failures)G.splice(parseInt(Z),1);R(z.length,ve)})).then(function(){return(V.length>0||P&&typeof n=="object")&&v.mutate({trans:c,type:"put",keys:ee,values:V,criteria:P,changeSpec:typeof n!="function"&&n,isAdditionalChunk:U>0}).then(function(ve){return R(V.length,ve)})}).then(function(){return(G.length>0||P&&n===_i)&&v.mutate({trans:c,type:"delete",keys:G,criteria:P,isAdditionalChunk:U>0}).then(function(ve){return R(G.length,ve)})}).then(function(){return D.length>U+B&&F(U+A)})})};return F(0).then(function(){if(q.length>0)throw new Ce("Error modifying one or more objects",q,k,T);return D.length})})})},r.prototype.delete=function(){var n=this._ctx,o=n.range;return ur(n)&&(n.isPrimKey||o.type===3)?this._write(function(a){var c=n.table.core.schema.primaryKey,f=o;return n.table.core.count({trans:a,query:{index:c,range:f}}).then(function(m){return n.table.core.mutate({trans:a,type:"deleteRange",range:f}).then(function(y){var v=y.failures;y.lastResult,y.results;var S=y.numFailures;if(S)throw new Ce("Could not delete some values",Object.keys(v).map(function(M){return v[M]}),m-S);return m-S})})}):this.modify(_i)},r}(),_i=function(r,n){return n.value=null};function uu(r){return Cr(au.prototype,function(o,a){this.db=r;var c=jo,f=null;if(a)try{c=a()}catch(S){f=S}var m=o._ctx,y=m.table,v=y.hook.reading.fire;this._ctx={table:y,index:m.index,isPrimKey:!m.index||y.schema.primKey.keyPath&&m.index===y.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:m.or,valueMapper:v!==Sr?v:null}})}function cu(r,n){return r<n?-1:r===n?0:1}function lu(r,n){return r>n?-1:r===n?0:1}function We(r,n,o){var a=r instanceof Xo?new r.Collection(r):r;return a._ctx.error=o?new o(n):new TypeError(n),a}function cr(r){return new r.Collection(r,function(){return Yo("")}).limit(0)}function fu(r){return r==="next"?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function du(r){return r==="next"?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function pu(r,n,o,a,c,f){for(var m=Math.min(r.length,a.length),y=-1,v=0;v<m;++v){var S=n[v];if(S!==a[v])return c(r[v],o[v])<0?r.substr(0,v)+o[v]+o.substr(v+1):c(r[v],a[v])<0?r.substr(0,v)+a[v]+o.substr(v+1):y>=0?r.substr(0,y)+n[y]+o.substr(y+1):null;c(r[v],S)<0&&(y=v)}return m<a.length&&f==="next"?r+o.substr(r.length):m<r.length&&f==="prev"?r.substr(0,o.length):y<0?null:r.substr(0,y)+a[y]+o.substr(y+1)}function pn(r,n,o,a){var c,f,m,y,v,S,M,I=o.length;if(!o.every(function(T){return typeof T=="string"}))return We(r,qo);function A(T){c=fu(T),f=du(T),m=T==="next"?cu:lu;var R=o.map(function(D){return{lower:f(D),upper:c(D)}}).sort(function(D,P){return m(D.lower,P.lower)});y=R.map(function(D){return D.upper}),v=R.map(function(D){return D.lower}),S=T,M=T==="next"?"":a}A("next");var q=new r.Collection(r,function(){return Ot(y[0],v[I-1]+a)});q._ondirectionchange=function(T){A(T)};var k=0;return q._addAlgorithm(function(T,R,D){var P=T.key;if(typeof P!="string")return!1;var F=f(P);if(n(F,v,k))return!0;for(var U=null,B=k;B<I;++B){var j=pu(P,F,y[B],v[B],m,S);j===null&&U===null?k=B+1:(U===null||m(U,j)>0)&&(U=j)}return R(U!==null?function(){T.continue(U+M)}:D),!1}),q}function Ot(r,n,o,a){return{type:2,lower:r,upper:n,lowerOpen:o,upperOpen:a}}function Yo(r){return{type:1,lower:r,upper:r}}var Xo=function(){function r(){}return Object.defineProperty(r.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),r.prototype.between=function(n,o,a,c){a=a!==!1,c=c===!0;try{return this._cmp(n,o)>0||this._cmp(n,o)===0&&(a||c)&&!(a&&c)?cr(this):new this.Collection(this,function(){return Ot(n,o,!a,!c)})}catch{return We(this,_t)}},r.prototype.equals=function(n){return n==null?We(this,_t):new this.Collection(this,function(){return Yo(n)})},r.prototype.above=function(n){return n==null?We(this,_t):new this.Collection(this,function(){return Ot(n,void 0,!0)})},r.prototype.aboveOrEqual=function(n){return n==null?We(this,_t):new this.Collection(this,function(){return Ot(n,void 0,!1)})},r.prototype.below=function(n){return n==null?We(this,_t):new this.Collection(this,function(){return Ot(void 0,n,!1,!0)})},r.prototype.belowOrEqual=function(n){return n==null?We(this,_t):new this.Collection(this,function(){return Ot(void 0,n)})},r.prototype.startsWith=function(n){return typeof n!="string"?We(this,qo):this.between(n,n+Vt,!0,!0)},r.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):pn(this,function(o,a){return o.indexOf(a[0])===0},[n],Vt)},r.prototype.equalsIgnoreCase=function(n){return pn(this,function(o,a){return o===a[0]},[n],"")},r.prototype.anyOfIgnoreCase=function(){var n=Xe.apply(ht,arguments);return n.length===0?cr(this):pn(this,function(o,a){return a.indexOf(o)!==-1},n,"")},r.prototype.startsWithAnyOfIgnoreCase=function(){var n=Xe.apply(ht,arguments);return n.length===0?cr(this):pn(this,function(o,a){return a.some(function(c){return o.indexOf(c)===0})},n,Vt)},r.prototype.anyOf=function(){var n=this,o=Xe.apply(ht,arguments),a=this._cmp;try{o.sort(a)}catch{return We(this,_t)}if(o.length===0)return cr(this);var c=new this.Collection(this,function(){return Ot(o[0],o[o.length-1])});c._ondirectionchange=function(m){a=m==="next"?n._ascending:n._descending,o.sort(a)};var f=0;return c._addAlgorithm(function(m,y,v){for(var S=m.key;a(S,o[f])>0;)if(++f,f===o.length)return y(v),!1;return a(S,o[f])===0?!0:(y(function(){m.continue(o[f])}),!1)}),c},r.prototype.notEqual=function(n){return this.inAnyRange([[fi,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},r.prototype.noneOf=function(){var n=Xe.apply(ht,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return We(this,_t)}var o=n.reduce(function(a,c){return a?a.concat([[a[a.length-1][1],c]]):[[fi,c]]},null);return o.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},r.prototype.inAnyRange=function(n,o){var a=this,c=this._cmp,f=this._ascending,m=this._descending,y=this._min,v=this._max;if(n.length===0)return cr(this);if(!n.every(function(B){return B[0]!==void 0&&B[1]!==void 0&&f(B[0],B[1])<=0}))return We(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Q.InvalidArgument);var S=!o||o.includeLowers!==!1,M=o&&o.includeUppers===!0;function I(B,j){for(var z=0,V=B.length;z<V;++z){var ee=B[z];if(c(j[0],ee[1])<0&&c(j[1],ee[0])>0){ee[0]=y(ee[0],j[0]),ee[1]=v(ee[1],j[1]);break}}return z===V&&B.push(j),B}var A=f;function q(B,j){return A(B[0],j[0])}var k;try{k=n.reduce(I,[]),k.sort(q)}catch{return We(this,_t)}var T=0,R=M?function(B){return f(B,k[T][1])>0}:function(B){return f(B,k[T][1])>=0},D=S?function(B){return m(B,k[T][0])>0}:function(B){return m(B,k[T][0])>=0};function P(B){return!R(B)&&!D(B)}var F=R,U=new this.Collection(this,function(){return Ot(k[0][0],k[k.length-1][1],!S,!M)});return U._ondirectionchange=function(B){B==="next"?(F=R,A=f):(F=D,A=m),k.sort(q)},U._addAlgorithm(function(B,j,z){for(var V=B.key;F(V);)if(++T,T===k.length)return j(z),!1;return P(V)?!0:(a._cmp(V,k[T][1])===0||a._cmp(V,k[T][0])===0||j(function(){A===f?B.continue(k[T][0]):B.continue(k[T][1])}),!1)}),U},r.prototype.startsWithAnyOf=function(){var n=Xe.apply(ht,arguments);return n.every(function(o){return typeof o=="string"})?n.length===0?cr(this):this.inAnyRange(n.map(function(o){return[o,o+Vt]})):We(this,"startsWithAnyOf() only works with strings")},r}();function hu(r){return Cr(Xo.prototype,function(o,a,c){if(this.db=r,this._ctx={table:o,index:a===":id"?null:a,or:c},this._cmp=this._ascending=de,this._descending=function(f,m){return de(m,f)},this._max=function(f,m){return de(f,m)>0?f:m},this._min=function(f,m){return de(f,m)<0?f:m},this._IDBKeyRange=r._deps.IDBKeyRange,!this._IDBKeyRange)throw new Q.MissingAPI})}function at(r){return xe(function(n){return Tr(n),r(n.target.error),!1})}function Tr(r){r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault()}var Ar="storagemutated",yi="x-storagemutated-1",Ct=Or(null,Ar),mu=function(){function r(){}return r.prototype._lock=function(){return Y(!X.global),++this._reculock,this._reculock===1&&!X.global&&(X.lockOwnerFor=this),this},r.prototype._unlock=function(){if(Y(!X.global),--this._reculock===0)for(X.global||(X.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{zt(n[1],n[0])}catch{}}return this},r.prototype._locked=function(){return this._reculock&&X.lockOwnerFor!==this},r.prototype.create=function(n){var o=this;if(!this.mode)return this;var a=this.db.idbdb,c=this.db._state.dbOpenError;if(Y(!this.idbtrans),!n&&!a)switch(c&&c.name){case"DatabaseClosedError":throw new Q.DatabaseClosed(c);case"MissingAPIError":throw new Q.MissingAPI(c.message,c);default:throw new Q.OpenFailed(c)}if(!this.active)throw new Q.TransactionInactive;return Y(this._completion._state===null),n=this.idbtrans=n||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):a.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),n.onerror=xe(function(f){Tr(f),o._reject(n.error)}),n.onabort=xe(function(f){Tr(f),o.active&&o._reject(new Q.Abort(n.error)),o.active=!1,o.on("abort").fire(f)}),n.oncomplete=xe(function(){o.active=!1,o._resolve(),"mutatedParts"in n&&Ct.storagemutated.fire(n.mutatedParts)}),this},r.prototype._promise=function(n,o,a){var c=this;if(n==="readwrite"&&this.mode!=="readwrite")return ke(new Q.ReadOnly("Transaction is readonly"));if(!this.active)return ke(new Q.TransactionInactive);if(this._locked())return new W(function(m,y){c._blockedFuncs.push([function(){c._promise(n,o,a).then(m,y)},X])});if(a)return xt(function(){var m=new W(function(y,v){c._lock();var S=o(y,v,c);S&&S.then&&S.then(y,v)});return m.finally(function(){return c._unlock()}),m._lib=!0,m});var f=new W(function(m,y){var v=o(m,y,c);v&&v.then&&v.then(m,y)});return f._lib=!0,f},r.prototype._root=function(){return this.parent?this.parent._root():this},r.prototype.waitFor=function(n){var o=this._root(),a=W.resolve(n);if(o._waitingFor)o._waitingFor=o._waitingFor.then(function(){return a});else{o._waitingFor=a,o._waitingQueue=[];var c=o.idbtrans.objectStore(o.storeNames[0]);(function m(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(c.get(-1/0).onsuccess=m)})()}var f=o._waitingFor;return new W(function(m,y){a.then(function(v){return o._waitingQueue.push(xe(m.bind(null,v)))},function(v){return o._waitingQueue.push(xe(y.bind(null,v)))}).finally(function(){o._waitingFor===f&&(o._waitingFor=null)})})},r.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Q.Abort))},r.prototype.table=function(n){var o=this._memoizedTables||(this._memoizedTables={});if(g(o,n))return o[n];var a=this.schema[n];if(!a)throw new Q.NotFound("Table "+n+" not part of transaction");var c=new this.db.Table(n,a,this);return c.core=this.db.core.table(n),o[n]=c,c},r}();function _u(r){return Cr(mu.prototype,function(o,a,c,f,m){var y=this;this.db=r,this.mode=o,this.storeNames=a,this.schema=c,this.chromeTransactionDurability=f,this.idbtrans=null,this.on=Or(this,"complete","error","abort"),this.parent=m||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new W(function(v,S){y._resolve=v,y._reject=S}),this._completion.then(function(){y.active=!1,y.on.complete.fire()},function(v){var S=y.active;return y.active=!1,y.on.error.fire(v),y.parent?y.parent._reject(v):S&&y.idbtrans&&y.idbtrans.abort(),ke(v)})})}function vi(r,n,o,a,c,f,m){return{name:r,keyPath:n,unique:o,multi:a,auto:c,compound:f,src:(o&&!m?"&":"")+(a?"*":"")+(c?"++":"")+Qo(n)}}function Qo(r){return typeof r=="string"?r:r?"["+[].join.call(r,"+")+"]":""}function gi(r,n,o){return{name:r,primKey:n,indexes:o,mappedClass:null,idxByName:Oe(o,function(a){return[a.name,a]})}}function yu(r){return r.length===1?r[0]:r}var Rr=function(r){try{return r.only([[]]),Rr=function(){return[[]]},[[]]}catch{return Rr=function(){return Vt},Vt}};function bi(r){return r==null?function(){}:typeof r=="string"?vu(r):function(n){return me(n,r)}}function vu(r){var n=r.split(".");return n.length===1?function(o){return o[r]}:function(o){return me(o,r)}}function Jo(r){return[].slice.call(r)}var gu=0;function Dr(r){return r==null?":id":typeof r=="string"?r:"[".concat(r.join("+"),"]")}function bu(r,n,o){function a(I,A){var q=Jo(I.objectStoreNames);return{schema:{name:I.name,tables:q.map(function(k){return A.objectStore(k)}).map(function(k){var T=k.keyPath,R=k.autoIncrement,D=p(T),P=T==null,F={},U={name:k.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:P,compound:D,keyPath:T,autoIncrement:R,unique:!0,extractKey:bi(T)},indexes:Jo(k.indexNames).map(function(B){return k.index(B)}).map(function(B){var j=B.name,z=B.unique,V=B.multiEntry,ee=B.keyPath,G=p(ee),J={name:j,compound:G,keyPath:ee,unique:z,multiEntry:V,extractKey:bi(ee)};return F[Dr(ee)]=J,J}),getIndexByKeyPath:function(B){return F[Dr(B)]}};return F[":id"]=U.primaryKey,T!=null&&(F[Dr(T)]=U.primaryKey),U})},hasGetAll:q.length>0&&"getAll"in A.objectStore(q[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function c(I){if(I.type===3)return null;if(I.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var A=I.lower,q=I.upper,k=I.lowerOpen,T=I.upperOpen,R=A===void 0?q===void 0?null:n.upperBound(q,!!T):q===void 0?n.lowerBound(A,!!k):n.bound(A,q,!!k,!!T);return R}function f(I){var A=I.name;function q(R){var D=R.trans,P=R.type,F=R.keys,U=R.values,B=R.range;return new Promise(function(j,z){j=xe(j);var V=D.objectStore(A),ee=V.keyPath==null,G=P==="put"||P==="add";if(!G&&P!=="delete"&&P!=="deleteRange")throw new Error("Invalid operation type: "+P);var J=(F||U||{length:1}).length;if(F&&U&&F.length!==U.length)throw new Error("Given keys array must have same length as given values array.");if(J===0)return j({numFailures:0,failures:{},results:[],lastResult:void 0});var ue,te=[],ve=[],Z=0,Pe=function(ct){++Z,Tr(ct)};if(P==="deleteRange"){if(B.type===4)return j({numFailures:Z,failures:ve,results:[],lastResult:void 0});B.type===3?te.push(ue=V.clear()):te.push(ue=V.delete(c(B)))}else{var Je=G?ee?[U,F]:[U,null]:[F,null],At=Je[0],ut=Je[1];if(G)for(var Ve=0;Ve<J;++Ve)te.push(ue=ut&&ut[Ve]!==void 0?V[P](At[Ve],ut[Ve]):V[P](At[Ve])),ue.onerror=Pe;else for(var Ve=0;Ve<J;++Ve)te.push(ue=V[P](At[Ve])),ue.onerror=Pe}var Rt=function(ct){var Br=ct.target.result;te.forEach(function(Ze,In){return Ze.error!=null&&(ve[In]=Ze.error)}),j({numFailures:Z,failures:ve,results:P==="delete"?F:te.map(function(Ze){return Ze.result}),lastResult:Br})};ue.onerror=function(ct){Pe(ct),Rt(ct)},ue.onsuccess=Rt})}function k(R){var D=R.trans,P=R.values,F=R.query,U=R.reverse,B=R.unique;return new Promise(function(j,z){j=xe(j);var V=F.index,ee=F.range,G=D.objectStore(A),J=V.isPrimaryKey?G:G.index(V.name),ue=U?B?"prevunique":"prev":B?"nextunique":"next",te=P||!("openKeyCursor"in J)?J.openCursor(c(ee),ue):J.openKeyCursor(c(ee),ue);te.onerror=at(z),te.onsuccess=xe(function(ve){var Z=te.result;if(!Z){j(null);return}Z.___id=++gu,Z.done=!1;var Pe=Z.continue.bind(Z),Je=Z.continuePrimaryKey;Je&&(Je=Je.bind(Z));var At=Z.advance.bind(Z),ut=function(){throw new Error("Cursor not started")},Ve=function(){throw new Error("Cursor not stopped")};Z.trans=D,Z.stop=Z.continue=Z.continuePrimaryKey=Z.advance=ut,Z.fail=xe(z),Z.next=function(){var Rt=this,ct=1;return this.start(function(){return ct--?Rt.continue():Rt.stop()}).then(function(){return Rt})},Z.start=function(Rt){var ct=new Promise(function(Ze,In){Ze=xe(Ze),te.onerror=at(In),Z.fail=In,Z.stop=function(ac){Z.stop=Z.continue=Z.continuePrimaryKey=Z.advance=Ve,Ze(ac)}}),Br=function(){if(te.result)try{Rt()}catch(Ze){Z.fail(Ze)}else Z.done=!0,Z.start=function(){throw new Error("Cursor behind last entry")},Z.stop()};return te.onsuccess=xe(function(Ze){te.onsuccess=Br,Br()}),Z.continue=Pe,Z.continuePrimaryKey=Je,Z.advance=At,Br(),ct},j(Z)},z)})}function T(R){return function(D){return new Promise(function(P,F){P=xe(P);var U=D.trans,B=D.values,j=D.limit,z=D.query,V=j===1/0?void 0:j,ee=z.index,G=z.range,J=U.objectStore(A),ue=ee.isPrimaryKey?J:J.index(ee.name),te=c(G);if(j===0)return P({result:[]});if(R){var ve=B?ue.getAll(te,V):ue.getAllKeys(te,V);ve.onsuccess=function(At){return P({result:At.target.result})},ve.onerror=at(F)}else{var Z=0,Pe=B||!("openKeyCursor"in ue)?ue.openCursor(te):ue.openKeyCursor(te),Je=[];Pe.onsuccess=function(At){var ut=Pe.result;if(!ut)return P({result:Je});if(Je.push(B?ut.value:ut.primaryKey),++Z===j)return P({result:Je});ut.continue()},Pe.onerror=at(F)}})}}return{name:A,schema:I,mutate:q,getMany:function(R){var D=R.trans,P=R.keys;return new Promise(function(F,U){F=xe(F);for(var B=D.objectStore(A),j=P.length,z=new Array(j),V=0,ee=0,G,J=function(Z){var Pe=Z.target;(z[Pe._pos]=Pe.result)!=null,++ee===V&&F(z)},ue=at(U),te=0;te<j;++te){var ve=P[te];ve!=null&&(G=B.get(P[te]),G._pos=te,G.onsuccess=J,G.onerror=ue,++V)}V===0&&F(z)})},get:function(R){var D=R.trans,P=R.key;return new Promise(function(F,U){F=xe(F);var B=D.objectStore(A),j=B.get(P);j.onsuccess=function(z){return F(z.target.result)},j.onerror=at(U)})},query:T(v),openCursor:k,count:function(R){var D=R.query,P=R.trans,F=D.index,U=D.range;return new Promise(function(B,j){var z=P.objectStore(A),V=F.isPrimaryKey?z:z.index(F.name),ee=c(U),G=ee?V.count(ee):V.count();G.onsuccess=xe(function(J){return B(J.target.result)}),G.onerror=at(j)})}}}var m=a(r,o),y=m.schema,v=m.hasGetAll,S=y.tables.map(function(I){return f(I)}),M={};return S.forEach(function(I){return M[I.name]=I}),{stack:"dbcore",transaction:r.transaction.bind(r),table:function(I){var A=M[I];if(!A)throw new Error("Table '".concat(I,"' not found"));return M[I]},MIN_KEY:-1/0,MAX_KEY:Rr(n),schema:y}}function wu(r,n){return n.reduce(function(o,a){var c=a.create;return i(i({},o),c(o))},r)}function Su(r,n,o,a){var c=o.IDBKeyRange;o.indexedDB;var f=wu(bu(n,c,a),r.dbcore);return{dbcore:f}}function hn(r,n){var o=n.db,a=Su(r._middlewares,o,r._deps,n);r.core=a.dbcore,r.tables.forEach(function(c){var f=c.name;r.core.schema.tables.some(function(m){return m.name===f})&&(c.core=r.core.table(f),r[f]instanceof r.Table&&(r[f].core=c.core))})}function mn(r,n,o,a){o.forEach(function(c){var f=a[c];n.forEach(function(m){var y=L(m,c);(!y||"value"in y&&y.value===void 0)&&(m===r.Transaction.prototype||m instanceof r.Transaction?x(m,c,{get:function(){return this.table(c)},set:function(v){w(this,c,{value:v,writable:!0,configurable:!0,enumerable:!0})}}):m[c]=new r.Table(c,f))})})}function wi(r,n){n.forEach(function(o){for(var a in o)o[a]instanceof r.Table&&delete o[a]})}function Eu(r,n){return r._cfg.version-n._cfg.version}function xu(r,n,o,a){var c=r._dbSchema;o.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=gi("$meta",es("")[0],[]),r._storeNames.push("$meta"));var f=r._createTransaction("readwrite",r._storeNames,c);f.create(o),f._completion.catch(a);var m=f._reject.bind(f),y=X.transless||X;xt(function(){if(X.trans=f,X.transless=y,n===0)l(c).forEach(function(v){Ei(o,v,c[v].primKey,c[v].indexes)}),hn(r,o),W.follow(function(){return r.on.populate.fire(f)}).catch(m);else return hn(r,o),ku(r,f,n).then(function(v){return Ou(r,v,f,o)}).catch(m)})}function Iu(r,n){Zo(r._dbSchema,n),n.db.version%10===0&&!n.objectStoreNames.contains("$meta")&&n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var o=yn(r,r.idbdb,n);vn(r,r._dbSchema,n);for(var a=Si(o,r._dbSchema),c=function(S){if(S.change.length||S.recreate)return{value:void 0};var M=n.objectStore(S.name);S.add.forEach(function(I){_n(M,I)})},f=0,m=a.change;f<m.length;f++){var y=m[f],v=c(y);if(typeof v=="object")return v.value}}function ku(r,n,o){return n.storeNames.includes("$meta")?n.table("$meta").get("version").then(function(a){return a??o}):W.resolve(o)}function Ou(r,n,o,a){var c=[],f=r._versions,m=r._dbSchema=yn(r,r.idbdb,a),y=f.filter(function(S){return S._cfg.version>=n});if(y.length===0)return W.resolve();y.forEach(function(S){c.push(function(){var M=m,I=S._cfg.dbschema;vn(r,M,a),vn(r,I,a),m=r._dbSchema=I;var A=Si(M,I);A.add.forEach(function(P){Ei(a,P[0],P[1].primKey,P[1].indexes)}),A.change.forEach(function(P){if(P.recreate)throw new Q.Upgrade("Not yet support for changing primary key");var F=a.objectStore(P.name);P.add.forEach(function(U){return _n(F,U)}),P.change.forEach(function(U){F.deleteIndex(U.name),_n(F,U)}),P.del.forEach(function(U){return F.deleteIndex(U)})});var q=S._cfg.contentUpgrade;if(q&&S._cfg.version>n){hn(r,a),o._memoizedTables={};var k=Le(I);A.del.forEach(function(P){k[P]=M[P]}),wi(r,[r.Transaction.prototype]),mn(r,[r.Transaction.prototype],l(k),k),o.schema=k;var T=Qe(q);T&&sr();var R,D=W.follow(function(){if(R=q(o),R&&T){var P=It.bind(null,null);R.then(P,P)}});return R&&typeof R.then=="function"?W.resolve(R):D.then(function(){return R})}}),c.push(function(M){var I=S._cfg.dbschema;Cu(I,M),wi(r,[r.Transaction.prototype]),mn(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),o.schema=r._dbSchema}),c.push(function(M){r.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(r.idbdb.version/10)===S._cfg.version?(r.idbdb.deleteObjectStore("$meta"),delete r._dbSchema.$meta,r._storeNames=r._storeNames.filter(function(I){return I!=="$meta"})):M.objectStore("$meta").put(S._cfg.version,"version"))})});function v(){return c.length?W.resolve(c.shift()(o.idbtrans)).then(v):W.resolve()}return v().then(function(){Zo(m,a)})}function Si(r,n){var o={del:[],add:[],change:[]},a;for(a in r)n[a]||o.del.push(a);for(a in n){var c=r[a],f=n[a];if(!c)o.add.push([a,f]);else{var m={name:a,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(f.primKey.keyPath||"")||c.primKey.auto!==f.primKey.auto)m.recreate=!0,o.change.push(m);else{var y=c.idxByName,v=f.idxByName,S=void 0;for(S in y)v[S]||m.del.push(S);for(S in v){var M=y[S],I=v[S];M?M.src!==I.src&&m.change.push(I):m.add.push(I)}(m.del.length>0||m.add.length>0||m.change.length>0)&&o.change.push(m)}}}return o}function Ei(r,n,o,a){var c=r.db.createObjectStore(n,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return a.forEach(function(f){return _n(c,f)}),c}function Zo(r,n){l(r).forEach(function(o){n.db.objectStoreNames.contains(o)||Ei(n,o,r[o].primKey,r[o].indexes)})}function Cu(r,n){[].slice.call(n.db.objectStoreNames).forEach(function(o){return r[o]==null&&n.db.deleteObjectStore(o)})}function _n(r,n){r.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function yn(r,n,o){var a={},c=$(n.objectStoreNames,0);return c.forEach(function(f){for(var m=o.objectStore(f),y=m.keyPath,v=vi(Qo(y),y||"",!0,!1,!!m.autoIncrement,y&&typeof y!="string",!0),S=[],M=0;M<m.indexNames.length;++M){var I=m.index(m.indexNames[M]);y=I.keyPath;var A=vi(I.name,y,!!I.unique,!!I.multiEntry,!1,y&&typeof y!="string",!1);S.push(A)}a[f]=gi(f,v,S)}),a}function Mu(r,n,o){r.verno=n.version/10;var a=r._dbSchema=yn(r,n,o);r._storeNames=$(n.objectStoreNames,0),mn(r,[r._allTables],l(a),a)}function Tu(r,n){var o=yn(r,r.idbdb,n),a=Si(o,r._dbSchema);return!(a.add.length||a.change.some(function(c){return c.add.length||c.change.length}))}function vn(r,n,o){for(var a=o.db.objectStoreNames,c=0;c<a.length;++c){var f=a[c],m=o.objectStore(f);r._hasGetAll="getAll"in m;for(var y=0;y<m.indexNames.length;++y){var v=m.indexNames[y],S=m.index(v).keyPath,M=typeof S=="string"?S:"["+$(S).join("+")+"]";if(n[f]){var I=n[f].idxByName[M];I&&(I.name=v,delete n[f].idxByName[M],n[f].idxByName[v]=I)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function es(r){return r.split(",").map(function(n,o){n=n.trim();var a=n.replace(/([&*]|\+\+)/g,""),c=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return vi(a,c||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),p(c),o===0)})}var Au=function(){function r(){}return r.prototype._parseStoresSpec=function(n,o){l(n).forEach(function(a){if(n[a]!==null){var c=es(n[a]),f=c.shift();if(f.unique=!0,f.multi)throw new Q.Schema("Primary key cannot be multi-valued");c.forEach(function(m){if(m.auto)throw new Q.Schema("Only primary key can be marked as autoIncrement (++)");if(!m.keyPath)throw new Q.Schema("Index must have a name and cannot be an empty string")}),o[a]=gi(a,f,c)}})},r.prototype.stores=function(n){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,n):n;var a=o._versions,c={},f={};return a.forEach(function(m){_(c,m._cfg.storesSource),f=m._cfg.dbschema={},m._parseStoresSpec(c,f)}),o._dbSchema=f,wi(o,[o._allTables,o,o.Transaction.prototype]),mn(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],l(f),f),o._storeNames=l(f),this},r.prototype.upgrade=function(n){return this._cfg.contentUpgrade=ei(this._cfg.contentUpgrade||ye,n),this},r}();function Ru(r){return Cr(Au.prototype,function(o){this.db=r,this._cfg={version:o,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function xi(r,n){var o=r._dbNamesDB;return o||(o=r._dbNamesDB=new yt(cn,{addons:[],indexedDB:r,IDBKeyRange:n}),o.version(1).stores({dbnames:"name"})),o.table("dbnames")}function Ii(r){return r&&typeof r.databases=="function"}function Du(r){var n=r.indexedDB,o=r.IDBKeyRange;return Ii(n)?Promise.resolve(n.databases()).then(function(a){return a.map(function(c){return c.name}).filter(function(c){return c!==cn})}):xi(n,o).toCollection().primaryKeys()}function Nu(r,n){var o=r.indexedDB,a=r.IDBKeyRange;!Ii(o)&&n!==cn&&xi(o,a).put({name:n}).catch(ye)}function Pu(r,n){var o=r.indexedDB,a=r.IDBKeyRange;!Ii(o)&&n!==cn&&xi(o,a).delete(n).catch(ye)}function ki(r){return xt(function(){return X.letThrough=!0,r()})}function Bu(){var r=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!r||!indexedDB.databases)return Promise.resolve();var n;return new Promise(function(o){var a=function(){return indexedDB.databases().finally(o)};n=setInterval(a,100),a()}).finally(function(){return clearInterval(n)})}var Oi;function Ci(r){return!("from"in r)}var Fe=function(r,n){if(this)_(this,arguments.length?{d:1,from:r,to:arguments.length>1?n:r}:{d:0});else{var o=new Fe;return r&&"d"in r&&_(o,r),o}};E(Fe.prototype,(Oi={add:function(r){return Pr(this,r),this},addKey:function(r){return Nr(this,r,r),this},addKeys:function(r){var n=this;return r.forEach(function(o){return Nr(n,o,o)}),this},hasKey:function(r){var n=gn(this).next(r).value;return n&&de(n.from,r)<=0&&de(n.to,r)>=0}},Oi[tr]=function(){return gn(this)},Oi));function Nr(r,n,o){var a=de(n,o);if(!isNaN(a)){if(a>0)throw RangeError();if(Ci(r))return _(r,{from:n,to:o,d:1});var c=r.l,f=r.r;if(de(o,r.from)<0)return c?Nr(c,n,o):r.l={from:n,to:o,d:1,l:null,r:null},rs(r);if(de(n,r.to)>0)return f?Nr(f,n,o):r.r={from:n,to:o,d:1,l:null,r:null},rs(r);de(n,r.from)<0&&(r.from=n,r.l=null,r.d=f?f.d+1:1),de(o,r.to)>0&&(r.to=o,r.r=null,r.d=r.l?r.l.d+1:1);var m=!r.r;c&&!r.l&&Pr(r,c),f&&m&&Pr(r,f)}}function Pr(r,n){function o(a,c){var f=c.from,m=c.to,y=c.l,v=c.r;Nr(a,f,m),y&&o(a,y),v&&o(a,v)}Ci(n)||o(r,n)}function ts(r,n){var o=gn(n),a=o.next();if(a.done)return!1;for(var c=a.value,f=gn(r),m=f.next(c.from),y=m.value;!a.done&&!m.done;){if(de(y.from,c.to)<=0&&de(y.to,c.from)>=0)return!0;de(c.from,y.from)<0?c=(a=o.next(y.from)).value:y=(m=f.next(c.from)).value}return!1}function gn(r){var n=Ci(r)?null:{s:0,n:r};return{next:function(o){for(var a=arguments.length>0;n;)switch(n.s){case 0:if(n.s=1,a)for(;n.n.l&&de(o,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!a||de(o,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function rs(r){var n,o,a=(((n=r.r)===null||n===void 0?void 0:n.d)||0)-(((o=r.l)===null||o===void 0?void 0:o.d)||0),c=a>1?"r":a<-1?"l":"";if(c){var f=c==="r"?"l":"r",m=i({},r),y=r[c];r.from=y.from,r.to=y.to,r[c]=y[c],m[c]=y[f],r[f]=m,m.d=ns(m)}r.d=ns(r)}function ns(r){var n=r.r,o=r.l;return(n?o?Math.max(n.d,o.d):n.d:o?o.d:0)+1}function bn(r,n){return l(n).forEach(function(o){r[o]?Pr(r[o],n[o]):r[o]=Ge(n[o])}),r}function Mi(r,n){return r.all||n.all||Object.keys(r).some(function(o){return n[o]&&ts(n[o],r[o])})}var Gt={},Ti={},Ai=!1;function wn(r,n){bn(Ti,r),Ai||(Ai=!0,setTimeout(function(){Ai=!1;var o=Ti;Ti={},Ri(o,!1)},0))}function Ri(r,n){n===void 0&&(n=!1);var o=new Set;if(r.all)for(var a=0,c=Object.values(Gt);a<c.length;a++){var f=c[a];is(f,r,o,n)}else for(var m in r){var y=/^idb\:\/\/(.*)\/(.*)\//.exec(m);if(y){var v=y[1],S=y[2],f=Gt["idb://".concat(v,"/").concat(S)];f&&is(f,r,o,n)}}o.forEach(function(M){return M()})}function is(r,n,o,a){for(var c=[],f=0,m=Object.entries(r.queries.query);f<m.length;f++){for(var y=m[f],v=y[0],S=y[1],M=[],I=0,A=S;I<A.length;I++){var q=A[I];Mi(n,q.obsSet)?q.subscribers.forEach(function(D){return o.add(D)}):a&&M.push(q)}a&&c.push([v,M])}if(a)for(var k=0,T=c;k<T.length;k++){var R=T[k],v=R[0],M=R[1];r.queries.query[v]=M}}function Lu(r){var n=r._state,o=r._deps.indexedDB;if(n.isBeingOpened||r.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?ke(n.dbOpenError):r});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var a=n.openCanceller,c=Math.round(r.verno*10),f=!1;function m(){if(n.openCanceller!==a)throw new Q.DatabaseClosed("db.open() was cancelled")}var y=n.dbReadyResolve,v=null,S=!1,M=function(){return new W(function(I,A){if(m(),!o)throw new Q.MissingAPI;var q=r.name,k=n.autoSchema||!c?o.open(q):o.open(q,c);if(!k)throw new Q.MissingAPI;k.onerror=at(A),k.onblocked=xe(r._fireOnBlocked),k.onupgradeneeded=xe(function(T){if(v=k.transaction,n.autoSchema&&!r._options.allowEmptyDB){k.onerror=Tr,v.abort(),k.result.close();var R=o.deleteDatabase(q);R.onsuccess=R.onerror=xe(function(){A(new Q.NoSuchDatabase("Database ".concat(q," doesnt exist")))})}else{v.onerror=at(A);var D=T.oldVersion>Math.pow(2,62)?0:T.oldVersion;S=D<1,r.idbdb=k.result,f&&Iu(r,v),xu(r,D/10,v,A)}},A),k.onsuccess=xe(function(){v=null;var T=r.idbdb=k.result,R=$(T.objectStoreNames);if(R.length>0)try{var D=T.transaction(yu(R),"readonly");if(n.autoSchema)Mu(r,T,D);else if(vn(r,r._dbSchema,D),!Tu(r,D)&&!f)return T.close(),c=T.version+1,f=!0,I(M());hn(r,D)}catch{}ar.push(r),T.onversionchange=xe(function(P){n.vcFired=!0,r.on("versionchange").fire(P)}),T.onclose=xe(function(P){r.on("close").fire(P)}),S&&Nu(r._deps,q),I()},A)}).catch(function(I){switch(I?.name){case"UnknownError":if(n.PR1398_maxLoop>0)return n.PR1398_maxLoop--,M();break;case"VersionError":if(c>0)return c=0,M();break}return W.reject(I)})};return W.race([a,(typeof navigator>"u"?W.resolve():Bu()).then(M)]).then(function(){return m(),n.onReadyBeingFired=[],W.resolve(ki(function(){return r.on.ready.fire(r.vip)})).then(function I(){if(n.onReadyBeingFired.length>0){var A=n.onReadyBeingFired.reduce(ei,ye);return n.onReadyBeingFired=[],W.resolve(ki(function(){return A(r.vip)})).then(I)}})}).finally(function(){n.openCanceller===a&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(I){n.dbOpenError=I;try{v&&v.abort()}catch{}return a===n.openCanceller&&r._close(),ke(I)}).finally(function(){n.openComplete=!0,y()}).then(function(){if(S){var I={};r.tables.forEach(function(A){A.schema.indexes.forEach(function(q){q.name&&(I["idb://".concat(r.name,"/").concat(A.name,"/").concat(q.name)]=new Fe(-1/0,[[[]]]))}),I["idb://".concat(r.name,"/").concat(A.name,"/")]=I["idb://".concat(r.name,"/").concat(A.name,"/:dels")]=new Fe(-1/0,[[[]]])}),Ct(Ar).fire(I),Ri(I,!0)}return r})}function Di(r){var n=function(m){return r.next(m)},o=function(m){return r.throw(m)},a=f(n),c=f(o);function f(m){return function(y){var v=m(y),S=v.value;return v.done?S:!S||typeof S.then!="function"?p(S)?Promise.all(S).then(a,c):a(S):S.then(a,c)}}return f(n)()}function Fu(r,n,o){var a=arguments.length;if(a<2)throw new Q.InvalidArgument("Too few arguments");for(var c=new Array(a-1);--a;)c[a-1]=arguments[a];o=c.pop();var f=le(c);return[r,f,o]}function os(r,n,o,a,c){return W.resolve().then(function(){var f=X.transless||X,m=r._createTransaction(n,o,r._dbSchema,a);m.explicit=!0;var y={trans:m,transless:f};if(a)m.idbtrans=a.idbtrans;else try{m.create(),m.idbtrans._explicit=!0,r._state.PR1398_maxLoop=3}catch(I){return I.name===_e.InvalidState&&r.isOpen()&&--r._state.PR1398_maxLoop>0?(r.close({disableAutoOpen:!1}),r.open().then(function(){return os(r,n,o,null,c)})):ke(I)}var v=Qe(c);v&&sr();var S,M=W.follow(function(){if(S=c.call(m,m),S)if(v){var I=It.bind(null,null);S.then(I,I)}else typeof S.next=="function"&&typeof S.throw=="function"&&(S=Di(S))},y);return(S&&typeof S.then=="function"?W.resolve(S).then(function(I){return m.active?I:ke(new Q.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):M.then(function(){return S})).then(function(I){return a&&m._resolve(),m._completion.then(function(){return I})}).catch(function(I){return m._reject(I),ke(I)})})}function Sn(r,n,o){for(var a=p(r)?r.slice():[r],c=0;c<o;++c)a.push(n);return a}function Uu(r){return i(i({},r),{table:function(n){var o=r.table(n),a=o.schema,c={},f=[];function m(T,R,D){var P=Dr(T),F=c[P]=c[P]||[],U=T==null?0:typeof T=="string"?1:T.length,B=R>0,j=i(i({},D),{name:B?"".concat(P,"(virtual-from:").concat(D.name,")"):D.name,lowLevelIndex:D,isVirtual:B,keyTail:R,keyLength:U,extractKey:bi(T),unique:!B&&D.unique});if(F.push(j),j.isPrimaryKey||f.push(j),U>1){var z=U===2?T[0]:T.slice(0,U-1);m(z,R+1,D)}return F.sort(function(V,ee){return V.keyTail-ee.keyTail}),j}var y=m(a.primaryKey.keyPath,0,a.primaryKey);c[":id"]=[y];for(var v=0,S=a.indexes;v<S.length;v++){var M=S[v];m(M.keyPath,0,M)}function I(T){var R=c[Dr(T)];return R&&R[0]}function A(T,R){return{type:T.type===1?2:T.type,lower:Sn(T.lower,T.lowerOpen?r.MAX_KEY:r.MIN_KEY,R),lowerOpen:!0,upper:Sn(T.upper,T.upperOpen?r.MIN_KEY:r.MAX_KEY,R),upperOpen:!0}}function q(T){var R=T.query.index;return R.isVirtual?i(i({},T),{query:{index:R.lowLevelIndex,range:A(T.query.range,R.keyTail)}}):T}var k=i(i({},o),{schema:i(i({},a),{primaryKey:y,indexes:f,getIndexByKeyPath:I}),count:function(T){return o.count(q(T))},query:function(T){return o.query(q(T))},openCursor:function(T){var R=T.query.index,D=R.keyTail,P=R.isVirtual,F=R.keyLength;if(!P)return o.openCursor(T);function U(B){function j(V){V!=null?B.continue(Sn(V,T.reverse?r.MAX_KEY:r.MIN_KEY,D)):T.unique?B.continue(B.key.slice(0,F).concat(T.reverse?r.MIN_KEY:r.MAX_KEY,D)):B.continue()}var z=Object.create(B,{continue:{value:j},continuePrimaryKey:{value:function(V,ee){B.continuePrimaryKey(Sn(V,r.MAX_KEY,D),ee)}},primaryKey:{get:function(){return B.primaryKey}},key:{get:function(){var V=B.key;return F===1?V[0]:V.slice(0,F)}},value:{get:function(){return B.value}}});return z}return o.openCursor(q(T)).then(function(B){return B&&U(B)})}});return k}})}var Ku={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Uu};function Ni(r,n,o,a){return o=o||{},a=a||"",l(r).forEach(function(c){if(!g(n,c))o[a+c]=void 0;else{var f=r[c],m=n[c];if(typeof f=="object"&&typeof m=="object"&&f&&m){var y=qt(f),v=qt(m);y!==v?o[a+c]=n[c]:y==="Object"?Ni(f,m,o,a+c+"."):f!==m&&(o[a+c]=n[c])}else f!==m&&(o[a+c]=n[c])}}),l(n).forEach(function(c){g(r,c)||(o[a+c]=n[c])}),o}function Pi(r,n){return n.type==="delete"?n.keys:n.keys||n.values.map(r.extractKey)}var qu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(r){return i(i({},r),{table:function(n){var o=r.table(n),a=o.schema.primaryKey,c=i(i({},o),{mutate:function(f){var m=X.trans,y=m.table(n).hook,v=y.deleting,S=y.creating,M=y.updating;switch(f.type){case"add":if(S.fire===ye)break;return m._promise("readwrite",function(){return I(f)},!0);case"put":if(S.fire===ye&&M.fire===ye)break;return m._promise("readwrite",function(){return I(f)},!0);case"delete":if(v.fire===ye)break;return m._promise("readwrite",function(){return I(f)},!0);case"deleteRange":if(v.fire===ye)break;return m._promise("readwrite",function(){return A(f)},!0)}return o.mutate(f);function I(k){var T=X.trans,R=k.keys||Pi(a,k);if(!R)throw new Error("Keys missing");return k=k.type==="add"||k.type==="put"?i(i({},k),{keys:R}):i({},k),k.type!=="delete"&&(k.values=s([],k.values,!0)),k.keys&&(k.keys=s([],k.keys,!0)),ju(o,k,R).then(function(D){var P=R.map(function(F,U){var B=D[U],j={onerror:null,onsuccess:null};if(k.type==="delete")v.fire.call(j,F,B,T);else if(k.type==="add"||B===void 0){var z=S.fire.call(j,F,k.values[U],T);F==null&&z!=null&&(F=z,k.keys[U]=F,a.outbound||se(k.values[U],a.keyPath,F))}else{var V=Ni(B,k.values[U]),ee=M.fire.call(j,V,F,B,T);if(ee){var G=k.values[U];Object.keys(ee).forEach(function(J){g(G,J)?G[J]=ee[J]:se(G,J,ee[J])})}}return j});return o.mutate(k).then(function(F){for(var U=F.failures,B=F.results,j=F.numFailures,z=F.lastResult,V=0;V<R.length;++V){var ee=B?B[V]:R[V],G=P[V];ee==null?G.onerror&&G.onerror(U[V]):G.onsuccess&&G.onsuccess(k.type==="put"&&D[V]?k.values[V]:ee)}return{failures:U,results:B,numFailures:j,lastResult:z}}).catch(function(F){return P.forEach(function(U){return U.onerror&&U.onerror(F)}),Promise.reject(F)})})}function A(k){return q(k.trans,k.range,1e4)}function q(k,T,R){return o.query({trans:k,values:!1,query:{index:a,range:T},limit:R}).then(function(D){var P=D.result;return I({type:"delete",keys:P,trans:k}).then(function(F){return F.numFailures>0?Promise.reject(F.failures[0]):P.length<R?{failures:[],numFailures:0,lastResult:void 0}:q(k,i(i({},T),{lower:P[P.length-1],lowerOpen:!0}),R)})})}}});return c}})}};function ju(r,n,o){return n.type==="add"?Promise.resolve([]):r.getMany({trans:n.trans,keys:o,cache:"immutable"})}function ss(r,n,o){try{if(!n||n.keys.length<r.length)return null;for(var a=[],c=0,f=0;c<n.keys.length&&f<r.length;++c)de(n.keys[c],r[f])===0&&(a.push(o?Ye(n.values[c]):n.values[c]),++f);return a.length===r.length?a:null}catch{return null}}var $u={stack:"dbcore",level:-1,create:function(r){return{table:function(n){var o=r.table(n);return i(i({},o),{getMany:function(a){if(!a.cache)return o.getMany(a);var c=ss(a.keys,a.trans._cache,a.cache==="clone");return c?W.resolve(c):o.getMany(a).then(function(f){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?Ye(f):f},f})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),o.mutate(a)}})}}}};function as(r,n){return r.trans.mode==="readonly"&&!!r.subscr&&!r.trans.explicit&&r.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function us(r,n){switch(r){case"query":return n.values&&!n.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Wu={stack:"dbcore",level:0,name:"Observability",create:function(r){var n=r.schema.name,o=new Fe(r.MIN_KEY,r.MAX_KEY);return i(i({},r),{transaction:function(a,c,f){if(X.subscr&&c!=="readonly")throw new Q.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(X.querier));return r.transaction(a,c,f)},table:function(a){var c=r.table(a),f=c.schema,m=f.primaryKey,y=f.indexes,v=m.extractKey,S=m.outbound,M=m.autoIncrement&&y.filter(function(k){return k.compound&&k.keyPath.includes(m.keyPath)}),I=i(i({},c),{mutate:function(k){var T=k.trans,R=k.mutatedParts||(k.mutatedParts={}),D=function(J){var ue="idb://".concat(n,"/").concat(a,"/").concat(J);return R[ue]||(R[ue]=new Fe)},P=D(""),F=D(":dels"),U=k.type,B=k.type==="deleteRange"?[k.range]:k.type==="delete"?[k.keys]:k.values.length<50?[Pi(m,k).filter(function(J){return J}),k.values]:[],j=B[0],z=B[1],V=k.trans._cache;if(p(j)){P.addKeys(j);var ee=U==="delete"||j.length===z.length?ss(j,V):null;ee||F.addKeys(j),(ee||z)&&zu(D,f,ee,z)}else if(j){var G={from:j.lower,to:j.upper};F.add(G),P.add(G)}else P.add(o),F.add(o),f.indexes.forEach(function(J){return D(J.name).add(o)});return c.mutate(k).then(function(J){return j&&(k.type==="add"||k.type==="put")&&(P.addKeys(J.results),M&&M.forEach(function(ue){var te=k.values.map(function(Z){return ue.extractKey(Z)}),ve=ue.keyPath.findIndex(function(Z){return Z===m.keyPath});J.results.forEach(function(Z){return te[ve]=Z}),D(ue.name).addKeys(te)})),T.mutatedParts=bn(T.mutatedParts||{},R),J})}}),A=function(k){var T,R,D=k.query,P=D.index,F=D.range;return[P,new Fe((T=F.lower)!==null&&T!==void 0?T:r.MIN_KEY,(R=F.upper)!==null&&R!==void 0?R:r.MAX_KEY)]},q={get:function(k){return[m,new Fe(k.key)]},getMany:function(k){return[m,new Fe().addKeys(k.keys)]},count:A,query:A,openCursor:A};return l(q).forEach(function(k){I[k]=function(T){var R=X.subscr,D=!!R,P=as(X,c)&&us(k,T),F=P?T.obsSet={}:R;if(D){var U=function(J){var ue="idb://".concat(n,"/").concat(a,"/").concat(J);return F[ue]||(F[ue]=new Fe)},B=U(""),j=U(":dels"),z=q[k](T),V=z[0],ee=z[1];if(k==="query"&&V.isPrimaryKey&&!T.values?j.add(ee):U(V.name||"").add(ee),!V.isPrimaryKey)if(k==="count")j.add(o);else{var G=k==="query"&&S&&T.values&&c.query(i(i({},T),{values:!1}));return c[k].apply(this,arguments).then(function(J){if(k==="query"){if(S&&T.values)return G.then(function(Z){var Pe=Z.result;return B.addKeys(Pe),J});var ue=T.values?J.result.map(v):J.result;T.values?B.addKeys(ue):j.addKeys(ue)}else if(k==="openCursor"){var te=J,ve=T.values;return te&&Object.create(te,{key:{get:function(){return j.addKey(te.primaryKey),te.key}},primaryKey:{get:function(){var Z=te.primaryKey;return j.addKey(Z),Z}},value:{get:function(){return ve&&B.addKey(te.primaryKey),te.value}}})}return J})}}return c[k].apply(this,arguments)}}),I}})}};function zu(r,n,o,a){function c(f){var m=r(f.name||"");function y(S){return S!=null?f.extractKey(S):null}var v=function(S){return f.multiEntry&&p(S)?S.forEach(function(M){return m.addKey(M)}):m.addKey(S)};(o||a).forEach(function(S,M){var I=o&&y(o[M]),A=a&&y(a[M]);de(I,A)!==0&&(I!=null&&v(I),A!=null&&v(A))})}n.indexes.forEach(c)}function cs(r,n,o){if(o.numFailures===0)return n;if(n.type==="deleteRange")return null;var a=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;if(o.numFailures===a)return null;var c=i({},n);return p(c.keys)&&(c.keys=c.keys.filter(function(f,m){return!(m in o.failures)})),"values"in c&&p(c.values)&&(c.values=c.values.filter(function(f,m){return!(m in o.failures)})),c}function Vu(r,n){return n.lower===void 0?!0:n.lowerOpen?de(r,n.lower)>0:de(r,n.lower)>=0}function Hu(r,n){return n.upper===void 0?!0:n.upperOpen?de(r,n.upper)<0:de(r,n.upper)<=0}function Bi(r,n){return Vu(r,n)&&Hu(r,n)}function ls(r,n,o,a,c,f){if(!o||o.length===0)return r;var m=n.query.index,y=m.multiEntry,v=n.query.range,S=a.schema.primaryKey,M=S.extractKey,I=m.extractKey,A=(m.lowLevelIndex||m).extractKey,q=o.reduce(function(k,T){var R=k,D=[];if(T.type==="add"||T.type==="put")for(var P=new Fe,F=T.values.length-1;F>=0;--F){var U=T.values[F],B=M(U);if(!P.hasKey(B)){var j=I(U);(y&&p(j)?j.some(function(G){return Bi(G,v)}):Bi(j,v))&&(P.addKey(B),D.push(U))}}switch(T.type){case"add":R=k.concat(n.values?D:D.map(function(G){return M(G)}));break;case"put":var z=new Fe().addKeys(T.values.map(function(G){return M(G)}));R=k.filter(function(G){return!z.hasKey(n.values?M(G):G)}).concat(n.values?D:D.map(function(G){return M(G)}));break;case"delete":var V=new Fe().addKeys(T.keys);R=k.filter(function(G){return!V.hasKey(n.values?M(G):G)});break;case"deleteRange":var ee=T.range;R=k.filter(function(G){return!Bi(M(G),ee)});break}return R},r);return q===r?r:(q.sort(function(k,T){return de(A(k),A(T))||de(M(k),M(T))}),n.limit&&n.limit<1/0&&(q.length>n.limit?q.length=n.limit:r.length===n.limit&&q.length<n.limit&&(c.dirty=!0)),f?Object.freeze(q):q)}function fs(r,n){return de(r.lower,n.lower)===0&&de(r.upper,n.upper)===0&&!!r.lowerOpen==!!n.lowerOpen&&!!r.upperOpen==!!n.upperOpen}function Gu(r,n,o,a){if(r===void 0)return n!==void 0?-1:0;if(n===void 0)return 1;var c=de(r,n);if(c===0){if(o&&a)return 0;if(o)return 1;if(a)return-1}return c}function Yu(r,n,o,a){if(r===void 0)return n!==void 0?1:0;if(n===void 0)return-1;var c=de(r,n);if(c===0){if(o&&a)return 0;if(o)return-1;if(a)return 1}return c}function Xu(r,n){return Gu(r.lower,n.lower,r.lowerOpen,n.lowerOpen)<=0&&Yu(r.upper,n.upper,r.upperOpen,n.upperOpen)>=0}function Qu(r,n,o,a){var c=Gt["idb://".concat(r,"/").concat(n)];if(!c)return[];var f=c.queries[o];if(!f)return[null,!1,c,null];var m=a.query?a.query.index.name:null,y=f[m||""];if(!y)return[null,!1,c,null];switch(o){case"query":var v=y.find(function(I){return I.req.limit===a.limit&&I.req.values===a.values&&fs(I.req.query.range,a.query.range)});if(v)return[v,!0,c,y];var S=y.find(function(I){var A="limit"in I.req?I.req.limit:1/0;return A>=a.limit&&(a.values?I.req.values:!0)&&Xu(I.req.query.range,a.query.range)});return[S,!1,c,y];case"count":var M=y.find(function(I){return fs(I.req.query.range,a.query.range)});return[M,!!M,c,y]}}function Ju(r,n,o,a){r.subscribers.add(o),a.addEventListener("abort",function(){r.subscribers.delete(o),r.subscribers.size===0&&Zu(r,n)})}function Zu(r,n){setTimeout(function(){r.subscribers.size===0&&ot(n,r)},3e3)}var ec={stack:"dbcore",level:0,name:"Cache",create:function(r){var n=r.schema.name,o=i(i({},r),{transaction:function(a,c,f){var m=r.transaction(a,c,f);if(c==="readwrite"){var y=new AbortController,v=y.signal,S=function(M){return function(){if(y.abort(),c==="readwrite"){for(var I=new Set,A=0,q=a;A<q.length;A++){var k=q[A],T=Gt["idb://".concat(n,"/").concat(k)];if(T){var R=r.table(k),D=T.optimisticOps.filter(function(ve){return ve.trans===m});if(m._explicit&&M&&m.mutatedParts)for(var P=0,F=Object.values(T.queries.query);P<F.length;P++)for(var U=F[P],B=0,j=U.slice();B<j.length;B++){var z=j[B];Mi(z.obsSet,m.mutatedParts)&&(ot(U,z),z.subscribers.forEach(function(ve){return I.add(ve)}))}else if(D.length>0){T.optimisticOps=T.optimisticOps.filter(function(ve){return ve.trans!==m});for(var V=0,ee=Object.values(T.queries.query);V<ee.length;V++)for(var U=ee[V],G=0,J=U.slice();G<J.length;G++){var z=J[G];if(z.res!=null&&m.mutatedParts)if(M&&!z.dirty){var ue=Object.isFrozen(z.res),te=ls(z.res,z.req,D,R,z,ue);z.dirty?(ot(U,z),z.subscribers.forEach(function(Pe){return I.add(Pe)})):te!==z.res&&(z.res=te,z.promise=W.resolve({result:te}))}else z.dirty&&ot(U,z),z.subscribers.forEach(function(Pe){return I.add(Pe)})}}}}I.forEach(function(ve){return ve()})}}};m.addEventListener("abort",S(!1),{signal:v}),m.addEventListener("error",S(!1),{signal:v}),m.addEventListener("complete",S(!0),{signal:v})}return m},table:function(a){var c=r.table(a),f=c.schema.primaryKey,m=i(i({},c),{mutate:function(y){var v=X.trans;if(f.outbound||v.db._options.cache==="disabled"||v.explicit)return c.mutate(y);var S=Gt["idb://".concat(n,"/").concat(a)];if(!S)return c.mutate(y);var M=c.mutate(y);return(y.type==="add"||y.type==="put")&&(y.values.length>=50||Pi(f,y).some(function(I){return I==null}))?M.then(function(I){var A=i(i({},y),{values:y.values.map(function(k,T){var R,D=!((R=f.keyPath)===null||R===void 0)&&R.includes(".")?Ye(k):i({},k);return se(D,f.keyPath,I.results[T]),D})}),q=cs(S,A,I);S.optimisticOps.push(q),queueMicrotask(function(){return y.mutatedParts&&wn(y.mutatedParts)})}):(S.optimisticOps.push(y),y.mutatedParts&&wn(y.mutatedParts),M.then(function(I){if(I.numFailures>0){ot(S.optimisticOps,y);var A=cs(S,y,I);A&&S.optimisticOps.push(A),y.mutatedParts&&wn(y.mutatedParts)}}),M.catch(function(){ot(S.optimisticOps,y),y.mutatedParts&&wn(y.mutatedParts)})),M},query:function(y){var v;if(!as(X,c)||!us("query",y))return c.query(y);var S=((v=X.trans)===null||v===void 0?void 0:v.db._options.cache)==="immutable",M=X,I=M.requery,A=M.signal,q=Qu(n,a,"query",y),k=q[0],T=q[1],R=q[2],D=q[3];if(k&&T)k.obsSet=y.obsSet;else{var P=c.query(y).then(function(F){var U=F.result;if(k&&(k.res=U),S){for(var B=0,j=U.length;B<j;++B)Object.freeze(U[B]);Object.freeze(U)}else F.result=Ye(U);return F}).catch(function(F){return D&&k&&ot(D,k),Promise.reject(F)});k={obsSet:y.obsSet,promise:P,subscribers:new Set,type:"query",req:y,dirty:!1},D?D.push(k):(D=[k],R||(R=Gt["idb://".concat(n,"/").concat(a)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),R.queries.query[y.query.index.name||""]=D)}return Ju(k,D,I,A),k.promise.then(function(F){return{result:ls(F.result,y,R?.optimisticOps,c,k,S)}})}});return m}});return o}};function En(r,n){return new Proxy(r,{get:function(o,a,c){return a==="db"?n:Reflect.get(o,a,c)}})}var yt=function(){function r(n,o){var a=this;this._middlewares={},this.verno=0;var c=r.dependencies;this._options=o=i({addons:r.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange};var f=o.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var m={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ye,dbReadyPromise:null,cancelOpen:ye,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};m.dbReadyPromise=new W(function(v){m.dbReadyResolve=v}),m.openCanceller=new W(function(v,S){m.cancelOpen=S}),this._state=m,this.name=n,this.on=Or(this,"populate","blocked","versionchange","close",{ready:[ei,ye]}),this.on.ready.subscribe=K(this.on.ready.subscribe,function(v){return function(S,M){r.vip(function(){var I=a._state;if(I.openComplete)I.dbOpenError||W.resolve().then(S),M&&v(S);else if(I.onReadyBeingFired)I.onReadyBeingFired.push(S),M&&v(S);else{v(S);var A=a;M||v(function q(){A.on.ready.unsubscribe(S),A.on.ready.unsubscribe(q)})}})}}),this.Collection=uu(this),this.Table=iu(this),this.Transaction=_u(this),this.Version=Ru(this),this.WhereClause=hu(this),this.on("versionchange",function(v){v.newVersion>0,a.close({disableAutoOpen:!1})}),this.on("blocked",function(v){!v.newVersion||v.newVersion<v.oldVersion}),this._maxKey=Rr(o.IDBKeyRange),this._createTransaction=function(v,S,M,I){return new a.Transaction(v,S,M,a._options.chromeTransactionDurability,I)},this._fireOnBlocked=function(v){a.on("blocked").fire(v),ar.filter(function(S){return S.name===a.name&&S!==a&&!S._state.vcFired}).map(function(S){return S.on("versionchange").fire(v)})},this.use($u),this.use(ec),this.use(Wu),this.use(Ku),this.use(qu);var y=new Proxy(this,{get:function(v,S,M){if(S==="_vip")return!0;if(S==="table")return function(A){return En(a.table(A),y)};var I=Reflect.get(v,S,M);return I instanceof Vo?En(I,y):S==="tables"?I.map(function(A){return En(A,y)}):S==="_createTransaction"?function(){var A=I.apply(this,arguments);return En(A,y)}:I}});this.vip=y,f.forEach(function(v){return v(a)})}return r.prototype.version=function(n){if(isNaN(n)||n<.1)throw new Q.Type("Given version is not a positive number");if(n=Math.round(n*10)/10,this.idbdb||this._state.isBeingOpened)throw new Q.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var o=this._versions,a=o.filter(function(c){return c._cfg.version===n})[0];return a||(a=new this.Version(n),o.push(a),o.sort(Eu),a.stores({}),this._state.autoSchema=!1,a)},r.prototype._whenReady=function(n){var o=this;return this.idbdb&&(this._state.openComplete||X.letThrough||this._vip)?n():new W(function(a,c){if(o._state.openComplete)return c(new Q.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen){c(new Q.DatabaseClosed);return}o.open().catch(ye)}o._state.dbReadyPromise.then(a,c)}).then(n)},r.prototype.use=function(n){var o=n.stack,a=n.create,c=n.level,f=n.name;f&&this.unuse({stack:o,name:f});var m=this._middlewares[o]||(this._middlewares[o]=[]);return m.push({stack:o,create:a,level:c??10,name:f}),m.sort(function(y,v){return y.level-v.level}),this},r.prototype.unuse=function(n){var o=n.stack,a=n.name,c=n.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(f){return c?f.create!==c:a?f.name!==a:!1})),this},r.prototype.open=function(){var n=this;return zt(Et,function(){return Lu(n)})},r.prototype._close=function(){var n=this._state,o=ar.indexOf(this);if(o>=0&&ar.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new W(function(a){n.dbReadyResolve=a}),n.openCanceller=new W(function(a,c){n.cancelOpen=c}))},r.prototype.close=function(n){var o=n===void 0?{disableAutoOpen:!0}:n,a=o.disableAutoOpen,c=this._state;a?(c.isBeingOpened&&c.cancelOpen(new Q.DatabaseClosed),this._close(),c.autoOpen=!1,c.dbOpenError=new Q.DatabaseClosed):(this._close(),c.autoOpen=this._options.autoOpen||c.isBeingOpened,c.openComplete=!1,c.dbOpenError=null)},r.prototype.delete=function(n){var o=this;n===void 0&&(n={disableAutoOpen:!0});var a=arguments.length>0&&typeof arguments[0]!="object",c=this._state;return new W(function(f,m){var y=function(){o.close(n);var v=o._deps.indexedDB.deleteDatabase(o.name);v.onsuccess=xe(function(){Pu(o._deps,o.name),f()}),v.onerror=at(m),v.onblocked=o._fireOnBlocked};if(a)throw new Q.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(y):y()})},r.prototype.backendDB=function(){return this.idbdb},r.prototype.isOpen=function(){return this.idbdb!==null},r.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},r.prototype.hasFailed=function(){return this._state.dbOpenError!==null},r.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(r.prototype,"tables",{get:function(){var n=this;return l(this._allTables).map(function(o){return n._allTables[o]})},enumerable:!1,configurable:!0}),r.prototype.transaction=function(){var n=Fu.apply(this,arguments);return this._transaction.apply(this,n)},r.prototype._transaction=function(n,o,a){var c=this,f=X.trans;(!f||f.db!==this||n.indexOf("!")!==-1)&&(f=null);var m=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");var y,v;try{if(v=o.map(function(M){var I=M instanceof c.Table?M.name:M;if(typeof I!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return I}),n=="r"||n===di)y=di;else if(n=="rw"||n==pi)y=pi;else throw new Q.InvalidArgument("Invalid transaction mode: "+n);if(f){if(f.mode===di&&y===pi)if(m)f=null;else throw new Q.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");f&&v.forEach(function(M){if(f&&f.storeNames.indexOf(M)===-1)if(m)f=null;else throw new Q.SubTransaction("Table "+M+" not included in parent transaction.")}),m&&f&&!f.active&&(f=null)}}catch(M){return f?f._promise(null,function(I,A){A(M)}):ke(M)}var S=os.bind(null,this,y,v,f,a);return f?f._promise(y,S,"lock"):X.trans?zt(X.transless,function(){return c._whenReady(S)}):this._whenReady(S)},r.prototype.table=function(n){if(!g(this._allTables,n))throw new Q.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},r}(),tc=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",rc=function(){function r(n){this._subscribe=n}return r.prototype.subscribe=function(n,o,a){return this._subscribe(!n||typeof n=="function"?{next:n,error:o,complete:a}:n)},r.prototype[tc]=function(){return this},r}(),xn;try{xn={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{xn={indexedDB:null,IDBKeyRange:null}}function ds(r){var n=!1,o,a=new rc(function(c){var f=Qe(r);function m(D){var P=ir();try{f&&sr();var F=xt(r,D);return f&&(F=F.finally(It)),F}finally{P&&or()}}var y=!1,v,S={},M={},I={get closed(){return y},unsubscribe:function(){y||(y=!0,v&&v.abort(),A&&Ct.storagemutated.unsubscribe(T))}};c.start&&c.start(I);var A=!1,q=function(){return ci(R)};function k(){return Mi(M,S)}var T=function(D){bn(S,D),k()&&q()},R=function(){if(!(y||!xn.indexedDB)){S={};var D={};v&&v.abort(),v=new AbortController;var P={subscr:D,signal:v.signal,requery:q,querier:r,trans:null},F=m(P);Promise.resolve(F).then(function(U){n=!0,o=U,!(y||P.signal.aborted)&&(S={},M=D,!ze(M)&&!A&&(Ct(Ar,T),A=!0),ci(function(){return!y&&c.next&&c.next(U)}))},function(U){n=!1,["DatabaseClosedError","AbortError"].includes(U?.name)||y||ci(function(){y||c.error&&c.error(U)})})}};return setTimeout(q,0),I});return a.hasValue=function(){return n},a.getValue=function(){return o},a}var Yt=yt;E(Yt,i(i({},Zr),{delete:function(r){var n=new Yt(r,{addons:[]});return n.delete()},exists:function(r){return new Yt(r,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(r){try{return Du(Yt.dependencies).then(r)}catch{return ke(new Q.MissingAPI)}},defineClass:function(){function r(n){_(this,n)}return r},ignoreTransaction:function(r){return X.trans?zt(X.transless,r):r()},vip:ki,async:function(r){return function(){try{var n=Di(r.apply(this,arguments));return!n||typeof n.then!="function"?W.resolve(n):n}catch(o){return ke(o)}}},spawn:function(r,n,o){try{var a=Di(r.apply(o,n||[]));return!a||typeof a.then!="function"?W.resolve(a):a}catch(c){return ke(c)}},currentTransaction:{get:function(){return X.trans||null}},waitFor:function(r,n){var o=W.resolve(typeof r=="function"?Yt.ignoreTransaction(r):r).timeout(n||6e4);return X.trans?X.trans.waitFor(o):o},Promise:W,debug:{get:function(){return st},set:function(r){Ao(r)}},derive:C,extend:_,props:E,override:K,Events:Or,on:Ct,liveQuery:ds,extendObservabilitySet:bn,getByKeyPath:me,setByKeyPath:se,delByKeyPath:ge,shallowClone:Le,deepClone:Ye,getObjectDiff:Ni,cmp:de,asap:re,minKey:fi,addons:[],connections:ar,errnames:_e,dependencies:xn,cache:Gt,semVer:Ko,version:Ko.split(".").map(function(r){return parseInt(r)}).reduce(function(r,n,o){return r+n/Math.pow(10,o*2)})})),Yt.maxKey=Rr(Yt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ct(Ar,function(r){if(!Mt){var n;n=new CustomEvent(yi,{detail:r}),Mt=!0,dispatchEvent(n),Mt=!1}}),addEventListener(yi,function(r){var n=r.detail;Mt||Li(n)}));function Li(r){var n=Mt;try{Mt=!0,Ct.storagemutated.fire(r),Ri(r,!0)}finally{Mt=n}}var Mt=!1,Tt,Fi=function(){};typeof BroadcastChannel<"u"&&(Fi=function(){Tt=new BroadcastChannel(yi),Tt.onmessage=function(r){return r.data&&Li(r.data)}},Fi(),typeof Tt.unref=="function"&&Tt.unref(),Ct(Ar,function(r){Mt||Tt.postMessage(r)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(r){if(!yt.disableBfCache&&r.persisted){Tt?.close();for(var n=0,o=ar;n<o.length;n++){var a=o[n];a.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(r){!yt.disableBfCache&&r.persisted&&(Fi(),Li({all:new Fe(-1/0,[[]])}))}));function nc(r){return new Mr({add:r})}function ic(r){return new Mr({remove:r})}function oc(r,n){return new Mr({replacePrefix:[r,n]})}W.rejectionMapper=Fa,Ao(st);var sc=Object.freeze({__proto__:null,Dexie:yt,liveQuery:ds,Entity:$o,cmp:de,PropModSymbol:su,PropModification:Mr,replacePrefix:oc,add:nc,remove:ic,default:yt,RangeSet:Fe,mergeRanges:Pr,rangesOverlap:ts});return i(yt,sc,{default:yt}),yt})});var ks=Ui(lc());var fc="MAXAI_CLIENT__FEATURES__AB_TEST__APP_UPGRADE_ONBOARDING_VERSION",dc="1-1",Os=async()=>await On.getItem(fc);var of=vs({key:"AppUpgradeOnboardingABTestAtom",default:{loaded:!1,version:dc}});var Cs=async()=>qi;var Ms=kn?"web":"browser",pf="ANALYTICS_PLATFORM_FEATURE";var Ts=async()=>{try{return{browser:ys().name,current_domain:_s(),current_url:location.href,time_zone:Intl.DateTimeFormat().resolvedOptions().timeZone,screen_height:window.screen.height,screen_width:window.screen.width,is_desktop:window.screen.width>window.screen.height,...await pc(),...await hc(),...await mc(),...await _c()}}catch{return{}}},pc=async()=>{let e=await Lr.getUserInfo(!1),t=e?.role?.name??"guest",i=e?.role?.subscription_plan_name??"GUEST";i==="GUEST"&&t?.startsWith("free")&&(i="FREE");let s=e?.client_user_id??await Ss();return{current_plan:i,current_role:t,distinct_id:s}},hc=async()=>{let e=await Lr.getUserInfo(!1),t=await Cs(),i=e?.user_status?.onboarding_version??await Is()??xs,s=e?.user_status?.user_acquisition_channel??await ws(),u=await Os();return{test_version_appearance:e?.user_status?.register_version,test_version_pricing:t,test_version_onboarding:i,user_acquisition_channel:s,test_version_paywall:e?.user_status?.paywall_version??"",test_version_app_upgrade_onboarding:kn?u:void 0}},mc=async()=>({event_source:Ms}),_c=()=>{let e=Ki;return ms?e=Ki:e=Es()??"",{extensionVersion:e}};var ji="d47c608087b3dfe5cf5e8a7621b09340";var Ae;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(Ae||(Ae={}));function yc(e){return e.nodeType===e.ELEMENT_NODE}function Ur(e){let t=e?.host;return t?.shadowRoot===e}function Kr(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function vc(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function gc(e){let{cssText:t}=e;if(t.split('"').length<3)return t;let i=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?i.push("layer"):e.layerName&&i.push(`layer(${e.layerName})`),e.supportsText&&i.push(`supports(${e.supportsText})`),e.media.length&&i.push(e.media.mediaText),i.join(" ")+";"}function Dn(e){try{let t=e.rules||e.cssRules;return t?vc(Array.from(t,Js).join("")):null}catch{return null}}function Js(e){let t;if(wc(e))try{t=Dn(e.styleSheet)||gc(e)}catch{}else if(Sc(e)&&e.selectorText.includes(":"))return bc(e.cssText);return t||e.cssText}function bc(e){let t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function wc(e){return"styleSheet"in e}function Sc(e){return"selectorText"in e}var Nn=class{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){var i;if(!t)return-1;let s=(i=this.getMeta(t))===null||i===void 0?void 0:i.id;return s??-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){let i=this.getId(t);this.idNodeMap.delete(i),t.childNodes&&t.childNodes.forEach(s=>this.removeNodeFromMap(s))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,i){let s=i.id;this.idNodeMap.set(s,t),this.nodeMetaMap.set(t,i)}replace(t,i){let s=this.getNode(t);if(s){let u=this.nodeMetaMap.get(s);u&&this.nodeMetaMap.set(i,u)}this.idNodeMap.set(t,i)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function Ec(){return new Nn}function co({element:e,maskInputOptions:t,tagName:i,type:s,value:u,maskInputFn:l}){let p=u||"",_=s&&Jt(s);return(t[i.toLowerCase()]||_&&t[_])&&(l?p=l(p,e):p="*".repeat(p.length)),p}function Jt(e){return e.toLowerCase()}var As="__rrweb_original__";function xc(e){let t=e.getContext("2d");if(!t)return!0;let i=50;for(let s=0;s<e.width;s+=i)for(let u=0;u<e.height;u+=i){let l=t.getImageData,p=As in l?l[As]:l;if(new Uint32Array(p.call(t,s,u,Math.min(i,e.width-s),Math.min(i,e.height-u)).data.buffer).some(h=>h!==0))return!1}return!0}function lo(e){let t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Jt(t):null}function Zs(e,t){var i;let s;try{s=new URL(e,t??window.location.href)}catch{return null}let u=/\.([0-9a-z]+)(?:$)/i,l=s.pathname.match(u);return(i=l?.[1])!==null&&i!==void 0?i:null}var Ic=1,kc=new RegExp("[^a-z0-9-_:]"),Wr=-2;function ea(){return Ic++}function Oc(e){if(e instanceof HTMLFormElement)return"form";let t=Jt(e.tagName);return kc.test(t)?"div":t}function Cc(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var lr,Rs,Mc=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Tc=/^(?:[a-z+]+:)?\/\//i,Ac=/^www\..*/i,Rc=/^(data:)([^,]*),(.*)/i;function Pn(e,t){return(e||"").replace(Mc,(i,s,u,l,p,_)=>{let h=u||p||_,b=s||l||"";if(!h)return i;if(Tc.test(h)||Ac.test(h))return`url(${b}${h}${b})`;if(Rc.test(h))return`url(${b}${h}${b})`;if(h[0]==="/")return`url(${b}${Cc(t)+h}${b})`;let g=t.split("/"),E=h.split("/");g.pop();for(let w of E)w!=="."&&(w===".."?g.pop():g.push(w));return`url(${b}${g.join("/")}${b})`})}var Dc=/^[^ \t\n\r\u000c]+/,Nc=/^[, \t\n\r\u000c]+/;function Pc(e,t){if(t.trim()==="")return t;let i=0;function s(l){let p,_=l.exec(t.substring(i));return _?(p=_[0],i+=p.length,p):""}let u=[];for(;s(Nc),!(i>=t.length);){let l=s(Dc);if(l.slice(-1)===",")l=fr(e,l.substring(0,l.length-1)),u.push(l);else{let p="";l=fr(e,l);let _=!1;for(;;){let h=t.charAt(i);if(h===""){u.push((l+p).trim());break}else if(_)h===")"&&(_=!1);else if(h===","){i+=1,u.push((l+p).trim());break}else h==="("&&(_=!0);p+=h,i+=1}}}return u.join(", ")}function fr(e,t){if(!t||t.trim()==="")return t;let i=e.createElement("a");return i.href=t,i.href}function Bc(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function fo(){let e=document.createElement("a");return e.href="",e.href}function ta(e,t,i,s){return s&&(i==="src"||i==="href"&&!(t==="use"&&s[0]==="#")||i==="xlink:href"&&s[0]!=="#"||i==="background"&&(t==="table"||t==="td"||t==="th")?fr(e,s):i==="srcset"?Pc(e,s):i==="style"?Pn(s,fo()):t==="object"&&i==="data"?fr(e,s):s)}function ra(e,t,i){return(e==="video"||e==="audio")&&t==="autoplay"}function Lc(e,t,i){try{if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let s=e.classList.length;s--;){let u=e.classList[s];if(t.test(u))return!0}if(i)return e.matches(i)}catch{}return!1}function Bn(e,t,i){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return i?Bn(e.parentNode,t,i):!1;for(let s=e.classList.length;s--;){let u=e.classList[s];if(t.test(u))return!0}return i?Bn(e.parentNode,t,i):!1}function na(e,t,i,s){try{let u=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(u===null)return!1;if(typeof t=="string"){if(s){if(u.closest(`.${t}`))return!0}else if(u.classList.contains(t))return!0}else if(Bn(u,t,s))return!0;if(i){if(s){if(u.closest(i))return!0}else if(u.matches(i))return!0}}catch{}return!1}function Fc(e,t,i){let s=e.contentWindow;if(!s)return;let u=!1,l;try{l=s.document.readyState}catch{return}if(l!=="complete"){let _=setTimeout(()=>{u||(t(),u=!0)},i);e.addEventListener("load",()=>{clearTimeout(_),u=!0,t()});return}let p="about:blank";if(s.location.href!==p||e.src===p||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function Uc(e,t,i){let s=!1,u;try{u=e.sheet}catch{return}if(u)return;let l=setTimeout(()=>{s||(t(),s=!0)},i);e.addEventListener("load",()=>{clearTimeout(l),s=!0,t()})}function Kc(e,t){let{doc:i,mirror:s,blockClass:u,blockSelector:l,needsMask:p,inlineStylesheet:_,maskInputOptions:h={},maskTextFn:b,maskInputFn:g,dataURLOptions:E={},inlineImages:w,recordCanvas:x,keepIframeSrcFn:C,newlyAddedElement:O=!1}=t,L=qc(i,s);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:Ae.Document,childNodes:[],compatMode:e.compatMode}:{type:Ae.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Ae.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:L};case e.ELEMENT_NODE:return $c(e,{doc:i,blockClass:u,blockSelector:l,inlineStylesheet:_,maskInputOptions:h,maskInputFn:g,dataURLOptions:E,inlineImages:w,recordCanvas:x,keepIframeSrcFn:C,newlyAddedElement:O,rootId:L});case e.TEXT_NODE:return jc(e,{needsMask:p,maskTextFn:b,rootId:L});case e.CDATA_SECTION_NODE:return{type:Ae.CDATA,textContent:"",rootId:L};case e.COMMENT_NODE:return{type:Ae.Comment,textContent:e.textContent||"",rootId:L};default:return!1}}function qc(e,t){if(!t.hasNode(e))return;let i=t.getId(e);return i===1?void 0:i}function jc(e,t){var i;let{needsMask:s,maskTextFn:u,rootId:l}=t,p=e.parentNode&&e.parentNode.tagName,_=e.textContent,h=p==="STYLE"?!0:void 0,b=p==="SCRIPT"?!0:void 0;if(h&&_){try{e.nextSibling||e.previousSibling||!((i=e.parentNode.sheet)===null||i===void 0)&&i.cssRules&&(_=Dn(e.parentNode.sheet))}catch{}_=Pn(_,fo())}return b&&(_="SCRIPT_PLACEHOLDER"),!h&&!b&&_&&s&&(_=u?u(_,e.parentElement):_.replace(/[\S]/g,"*")),{type:Ae.Text,textContent:_||"",isStyle:h,rootId:l}}function $c(e,t){let{doc:i,blockClass:s,blockSelector:u,inlineStylesheet:l,maskInputOptions:p={},maskInputFn:_,dataURLOptions:h={},inlineImages:b,recordCanvas:g,keepIframeSrcFn:E,newlyAddedElement:w=!1,rootId:x}=t,C=Lc(e,s,u),O=Oc(e),L={},H=e.attributes.length;for(let K=0;K<H;K++){let Y=e.attributes[K];ra(O,Y.name,Y.value)||(L[Y.name]=ta(i,O,Jt(Y.name),Y.value))}if(O==="link"&&l){let K=Array.from(i.styleSheets).find(re=>re.href===e.href),Y=null;K&&(Y=Dn(K)),Y&&(delete L.rel,delete L.href,L._cssText=Pn(Y,K.href))}if(O==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){let K=Dn(e.sheet);K&&(L._cssText=Pn(K,fo()))}if(O==="input"||O==="textarea"||O==="select"){let K=e.value,Y=e.checked;L.type!=="radio"&&L.type!=="checkbox"&&L.type!=="submit"&&L.type!=="button"&&K?L.value=co({element:e,type:lo(e),tagName:O,value:K,maskInputOptions:p,maskInputFn:_}):Y&&(L.checked=Y)}if(O==="option"&&(e.selected&&!p.select?L.selected=!0:delete L.selected),O==="canvas"&&g){if(e.__context==="2d")xc(e)||(L.rr_dataURL=e.toDataURL(h.type,h.quality));else if(!("__context"in e)){let K=e.toDataURL(h.type,h.quality),Y=document.createElement("canvas");Y.width=e.width,Y.height=e.height;let re=Y.toDataURL(h.type,h.quality);K!==re&&(L.rr_dataURL=K)}}if(O==="img"&&b){lr||(lr=i.createElement("canvas"),Rs=lr.getContext("2d"));let K=e,Y=K.crossOrigin;K.crossOrigin="anonymous";let re=()=>{K.removeEventListener("load",re);try{lr.width=K.naturalWidth,lr.height=K.naturalHeight,Rs.drawImage(K,0,0),L.rr_dataURL=lr.toDataURL(h.type,h.quality)}catch{}Y?L.crossOrigin=Y:K.removeAttribute("crossorigin")};K.complete&&K.naturalWidth!==0?re():K.addEventListener("load",re)}if(O==="audio"||O==="video"){let K=L;K.rr_mediaState=e.paused?"paused":"played",K.rr_mediaCurrentTime=e.currentTime,K.rr_mediaPlaybackRate=e.playbackRate,K.rr_mediaMuted=e.muted,K.rr_mediaLoop=e.loop,K.rr_mediaVolume=e.volume}if(w||(e.scrollLeft&&(L.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(L.rr_scrollTop=e.scrollTop)),C){let{width:K,height:Y}=e.getBoundingClientRect();L={class:L.class,rr_width:`${K}px`,rr_height:`${Y}px`}}O==="iframe"&&!E(L.src)&&(e.contentDocument||(L.rr_src=L.src),delete L.src);let $;try{customElements.get(O)&&($=!0)}catch{}return{type:Ae.Element,tagName:O,attributes:L,childNodes:[],isSVG:Bc(e)||void 0,needBlock:C,rootId:x,isCustom:$}}function Se(e){return e==null?"":e.toLowerCase()}function Wc(e,t){if(t.comment&&e.type===Ae.Comment)return!0;if(e.type===Ae.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&Zs(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(Se(e.attributes.name).match(/^msapplication-tile(image|color)$/)||Se(e.attributes.name)==="application-name"||Se(e.attributes.rel)==="icon"||Se(e.attributes.rel)==="apple-touch-icon"||Se(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&Se(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Se(e.attributes.property).match(/^(og|twitter|fb):/)||Se(e.attributes.name).match(/^(og|twitter):/)||Se(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(Se(e.attributes.name)==="robots"||Se(e.attributes.name)==="googlebot"||Se(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(Se(e.attributes.name)==="author"||Se(e.attributes.name)==="generator"||Se(e.attributes.name)==="framework"||Se(e.attributes.name)==="publisher"||Se(e.attributes.name)==="progid"||Se(e.attributes.property).match(/^article:/)||Se(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(Se(e.attributes.name)==="google-site-verification"||Se(e.attributes.name)==="yandex-verification"||Se(e.attributes.name)==="csrf-token"||Se(e.attributes.name)==="p:domain_verify"||Se(e.attributes.name)==="verify-v1"||Se(e.attributes.name)==="verification"||Se(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function dr(e,t){let{doc:i,mirror:s,blockClass:u,blockSelector:l,maskTextClass:p,maskTextSelector:_,skipChild:h=!1,inlineStylesheet:b=!0,maskInputOptions:g={},maskTextFn:E,maskInputFn:w,slimDOMOptions:x,dataURLOptions:C={},inlineImages:O=!1,recordCanvas:L=!1,onSerialize:H,onIframeLoad:$,iframeLoadTimeout:K=5e3,onStylesheetLoad:Y,stylesheetLoadTimeout:re=5e3,keepIframeSrcFn:Oe=()=>!1,newlyAddedElement:me=!1}=t,{needsMask:se}=t,{preserveWhiteSpace:ge=!0}=t;!se&&e.childNodes&&(se=na(e,p,_,se===void 0));let Le=Kc(e,{doc:i,mirror:s,blockClass:u,blockSelector:l,needsMask:se,inlineStylesheet:b,maskInputOptions:g,maskTextFn:E,maskInputFn:w,dataURLOptions:C,inlineImages:O,recordCanvas:L,keepIframeSrcFn:Oe,newlyAddedElement:me});if(!Le)return null;let qe;s.hasNode(e)?qe=s.getId(e):Wc(Le,x)||!ge&&Le.type===Ae.Text&&!Le.isStyle&&!Le.textContent.replace(/^\s+|\s+$/gm,"").length?qe=Wr:qe=ea();let le=Object.assign(Le,{id:qe});if(s.add(e,le),qe===Wr)return null;H&&H(e);let pt=!h;if(le.type===Ae.Element){pt=pt&&!le.needBlock,delete le.needBlock;let Re=e.shadowRoot;Re&&Kr(Re)&&(le.isShadowHost=!0)}if((le.type===Ae.Document||le.type===Ae.Element)&&pt){x.headWhitespace&&le.type===Ae.Element&&le.tagName==="head"&&(ge=!1);let Re={doc:i,mirror:s,blockClass:u,blockSelector:l,needsMask:se,maskTextClass:p,maskTextSelector:_,skipChild:h,inlineStylesheet:b,maskInputOptions:g,maskTextFn:E,maskInputFn:w,slimDOMOptions:x,dataURLOptions:C,inlineImages:O,recordCanvas:L,preserveWhiteSpace:ge,onSerialize:H,onIframeLoad:$,iframeLoadTimeout:K,onStylesheetLoad:Y,stylesheetLoadTimeout:re,keepIframeSrcFn:Oe};if(!(le.type===Ae.Element&&le.tagName==="textarea"&&le.attributes.value!==void 0))for(let Ge of Array.from(e.childNodes)){let ze=dr(Ge,Re);ze&&le.childNodes.push(ze)}if(yc(e)&&e.shadowRoot)for(let Ge of Array.from(e.shadowRoot.childNodes)){let ze=dr(Ge,Re);ze&&(Kr(e.shadowRoot)&&(ze.isShadow=!0),le.childNodes.push(ze))}}return e.parentNode&&Ur(e.parentNode)&&Kr(e.parentNode)&&(le.isShadow=!0),le.type===Ae.Element&&le.tagName==="iframe"&&Fc(e,()=>{let Re=e.contentDocument;if(Re&&$){let Ge=dr(Re,{doc:Re,mirror:s,blockClass:u,blockSelector:l,needsMask:se,maskTextClass:p,maskTextSelector:_,skipChild:!1,inlineStylesheet:b,maskInputOptions:g,maskTextFn:E,maskInputFn:w,slimDOMOptions:x,dataURLOptions:C,inlineImages:O,recordCanvas:L,preserveWhiteSpace:ge,onSerialize:H,onIframeLoad:$,iframeLoadTimeout:K,onStylesheetLoad:Y,stylesheetLoadTimeout:re,keepIframeSrcFn:Oe});Ge&&$(e,Ge)}},K),le.type===Ae.Element&&le.tagName==="link"&&typeof le.attributes.rel=="string"&&(le.attributes.rel==="stylesheet"||le.attributes.rel==="preload"&&typeof le.attributes.href=="string"&&Zs(le.attributes.href)==="css")&&Uc(e,()=>{if(Y){let Re=dr(e,{doc:i,mirror:s,blockClass:u,blockSelector:l,needsMask:se,maskTextClass:p,maskTextSelector:_,skipChild:!1,inlineStylesheet:b,maskInputOptions:g,maskTextFn:E,maskInputFn:w,slimDOMOptions:x,dataURLOptions:C,inlineImages:O,recordCanvas:L,preserveWhiteSpace:ge,onSerialize:H,onIframeLoad:$,iframeLoadTimeout:K,onStylesheetLoad:Y,stylesheetLoadTimeout:re,keepIframeSrcFn:Oe});Re&&Y(e,Re)}},re),le}function zc(e,t){let{mirror:i=new Nn,blockClass:s="rr-block",blockSelector:u=null,maskTextClass:l="rr-mask",maskTextSelector:p=null,inlineStylesheet:_=!0,inlineImages:h=!1,recordCanvas:b=!1,maskAllInputs:g=!1,maskTextFn:E,maskInputFn:w,slimDOM:x=!1,dataURLOptions:C,preserveWhiteSpace:O,onSerialize:L,onIframeLoad:H,iframeLoadTimeout:$,onStylesheetLoad:K,stylesheetLoadTimeout:Y,keepIframeSrcFn:re=()=>!1}=t||{};return dr(e,{doc:e,mirror:i,blockClass:s,blockSelector:u,maskTextClass:l,maskTextSelector:p,skipChild:!1,inlineStylesheet:_,maskInputOptions:g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:g===!1?{password:!0}:g,maskTextFn:E,maskInputFn:w,slimDOMOptions:x===!0||x==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:x==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:x===!1?{}:x,dataURLOptions:C,inlineImages:h,recordCanvas:b,preserveWhiteSpace:O,onSerialize:L,onIframeLoad:H,iframeLoadTimeout:$,onStylesheetLoad:K,stylesheetLoadTimeout:Y,keepIframeSrcFn:re,newlyAddedElement:!1})}function Ue(e,t,i=document){let s={capture:!0,passive:!0};return i.addEventListener(e,t,s),()=>i.removeEventListener(e,t,s)}var Ds={map:{},getId(){return-1},getNode(){return null},removeNodeFromMap(){},has(){return!1},reset(){}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Ds=new Proxy(Ds,{get(e,t,i){return Reflect.get(e,t,i)}}));function zr(e,t,i={}){let s=null,u=0;return function(...l){let p=Date.now();!u&&i.leading===!1&&(u=p);let _=t-(p-u),h=this;_<=0||_>t?(s&&(clearTimeout(s),s=null),u=p,e.apply(h,l)):!s&&i.trailing!==!1&&(s=setTimeout(()=>{u=i.leading===!1?0:Date.now(),s=null,e.apply(h,l)},_))}}function Hn(e,t,i,s,u=window){let l=u.Object.getOwnPropertyDescriptor(e,t);return u.Object.defineProperty(e,t,s?i:{set(p){setTimeout(()=>{i.set.call(this,p)},0),l&&l.set&&l.set.call(this,p)}}),()=>Hn(e,t,l||{},!0)}function gr(e,t,i){try{if(!(t in e))return()=>{};let s=e[t],u=i(s);return typeof u=="function"&&(u.prototype=u.prototype||{},Object.defineProperties(u,{__rrweb_original__:{enumerable:!1,value:s}})),e[t]=u,()=>{e[t]=s}}catch{return()=>{}}}var Ln=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Ln=()=>new Date().getTime());function ia(e){var t,i,s,u,l,p;let _=e.document;return{left:_.scrollingElement?_.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:_?.documentElement.scrollLeft||((i=(t=_?.body)===null||t===void 0?void 0:t.parentElement)===null||i===void 0?void 0:i.scrollLeft)||((s=_?.body)===null||s===void 0?void 0:s.scrollLeft)||0,top:_.scrollingElement?_.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:_?.documentElement.scrollTop||((l=(u=_?.body)===null||u===void 0?void 0:u.parentElement)===null||l===void 0?void 0:l.scrollTop)||((p=_?.body)===null||p===void 0?void 0:p.scrollTop)||0}}function oa(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function sa(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function aa(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function Ke(e,t,i,s){if(!e)return!1;let u=aa(e);if(!u)return!1;try{if(typeof t=="string"){if(u.classList.contains(t)||s&&u.closest("."+t)!==null)return!0}else if(Bn(u,t,s))return!0}catch{}return!!(i&&(u.matches(i)||s&&u.closest(i)!==null))}function Vc(e,t){return t.getId(e)!==-1}function $i(e,t){return t.getId(e)===Wr}function ua(e,t){if(Ur(e))return!1;let i=t.getId(e);return t.has(i)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?ua(e.parentNode,t):!0:!0}function Xi(e){return!!e.changedTouches}function Hc(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let i=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===i)return!0;while(i=i&&i.parentNode);return!1})}function ca(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function la(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Qi(e){return!!e?.shadowRoot}var Ji=class{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var i;return(i=this.styleIDMap.get(t))!==null&&i!==void 0?i:-1}has(t){return this.styleIDMap.has(t)}add(t,i){if(this.has(t))return this.getId(t);let s;return i===void 0?s=this.id++:s=i,this.styleIDMap.set(t,s),this.idStyleMap.set(s,t),s}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function fa(e){var t,i;let s=null;return((i=(t=e.getRootNode)===null||t===void 0?void 0:t.call(e))===null||i===void 0?void 0:i.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(s=e.getRootNode().host),s}function Gc(e){let t=e,i;for(;i=fa(t);)t=i;return t}function Yc(e){let t=e.ownerDocument;if(!t)return!1;let i=Gc(e);return t.contains(i)}function da(e){let t=e.ownerDocument;return t?t.contains(e)||Yc(e):!1}var pe=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(pe||{}),ce=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(ce||{}),je=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(je||{}),vt=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(vt||{}),_r=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(_r||{});function Ns(e){return"__ln"in e}var Zi=class{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let i=this.head;for(let s=0;s<t;s++)i=i?.next||null;return i}addNode(t){let i={value:t,previous:null,next:null};if(t.__ln=i,t.previousSibling&&Ns(t.previousSibling)){let s=t.previousSibling.__ln.next;i.next=s,i.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=i,s&&(s.previous=i)}else if(t.nextSibling&&Ns(t.nextSibling)&&t.nextSibling.__ln.previous){let s=t.nextSibling.__ln.previous;i.previous=s,i.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=i,s&&(s.next=i)}else this.head&&(this.head.previous=i),i.next=this.head,this.head=i;i.next===null&&(this.tail=i),this.length++}removeNode(t){let i=t.__ln;this.head&&(i.previous?(i.previous.next=i.next,i.next?i.next.previous=i.previous:this.tail=i.previous):(this.head=i.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}},Ps=(e,t)=>`${e}@${t}`,eo=class{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let t=[],i=new Set,s=new Zi,u=h=>{let b=h,g=Wr;for(;g===Wr;)b=b&&b.nextSibling,g=b&&this.mirror.getId(b);return g},l=h=>{if(!h.parentNode||!da(h)||h.parentNode.tagName==="TEXTAREA")return;let b=Ur(h.parentNode)?this.mirror.getId(fa(h)):this.mirror.getId(h.parentNode),g=u(h);if(b===-1||g===-1)return s.addNode(h);let E=dr(h,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:w=>{ca(w,this.mirror)&&this.iframeManager.addIframe(w),la(w,this.mirror)&&this.stylesheetManager.trackLinkElement(w),Qi(h)&&this.shadowDomManager.addShadowRoot(h.shadowRoot,this.doc)},onIframeLoad:(w,x)=>{this.iframeManager.attachIframe(w,x),this.shadowDomManager.observeAttachShadow(w)},onStylesheetLoad:(w,x)=>{this.stylesheetManager.attachLinkElement(w,x)}});E&&(t.push({parentId:b,nextId:g,node:E}),i.add(E.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let h of this.movedSet)Bs(this.removes,h,this.mirror)&&!this.movedSet.has(h.parentNode)||l(h);for(let h of this.addedSet)!Ls(this.droppedSet,h)&&!Bs(this.removes,h,this.mirror)||Ls(this.movedSet,h)?l(h):this.droppedSet.add(h);let p=null;for(;s.length;){let h=null;if(p){let b=this.mirror.getId(p.value.parentNode),g=u(p.value);b!==-1&&g!==-1&&(h=p)}if(!h){let b=s.tail;for(;b;){let g=b;if(b=b.previous,g){let E=this.mirror.getId(g.value.parentNode);if(u(g.value)===-1)continue;if(E!==-1){h=g;break}else{let x=g.value;if(x.parentNode&&x.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let C=x.parentNode.host;if(this.mirror.getId(C)!==-1){h=g;break}}}}}}if(!h){for(;s.head;)s.removeNode(s.head.value);break}p=h.previous,s.removeNode(h.value),l(h.value)}let _={texts:this.texts.map(h=>{let b=h.node;return b.parentNode&&b.parentNode.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(b.parentNode),{id:this.mirror.getId(b),value:h.value}}).filter(h=>!i.has(h.id)).filter(h=>this.mirror.has(h.id)),attributes:this.attributes.map(h=>{let{attributes:b}=h;if(typeof b.style=="string"){let g=JSON.stringify(h.styleDiff),E=JSON.stringify(h._unchangedStyles);g.length<b.style.length&&(g+E).split("var(").length===b.style.split("var(").length&&(b.style=h.styleDiff)}return{id:this.mirror.getId(h.node),attributes:b}}).filter(h=>!i.has(h.id)).filter(h=>this.mirror.has(h.id)),removes:this.removes,adds:t};!_.texts.length&&!_.attributes.length&&!_.removes.length&&!_.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(_))},this.genTextAreaValueMutation=t=>{let i=this.attributeMap.get(t);i||(i={node:t,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t,i)),i.attributes.value=Array.from(t.childNodes,s=>s.textContent||"").join("")},this.processMutation=t=>{if(!$i(t.target,this.mirror))switch(t.type){case"characterData":{let i=t.target.textContent;!Ke(t.target,this.blockClass,this.blockSelector,!1)&&i!==t.oldValue&&this.texts.push({value:na(t.target,this.maskTextClass,this.maskTextSelector,!0)&&i?this.maskTextFn?this.maskTextFn(i,aa(t.target)):i.replace(/[\S]/g,"*"):i,node:t.target});break}case"attributes":{let i=t.target,s=t.attributeName,u=t.target.getAttribute(s);if(s==="value"){let p=lo(i);u=co({element:i,maskInputOptions:this.maskInputOptions,tagName:i.tagName,type:p,value:u,maskInputFn:this.maskInputFn})}if(Ke(t.target,this.blockClass,this.blockSelector,!1)||u===t.oldValue)return;let l=this.attributeMap.get(t.target);if(i.tagName==="IFRAME"&&s==="src"&&!this.keepIframeSrcFn(u))if(!i.contentDocument)s="rr_src";else return;if(l||(l={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(l),this.attributeMap.set(t.target,l)),s==="type"&&i.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&i.setAttribute("data-rr-is-password","true"),!ra(i.tagName,s)&&(l.attributes[s]=ta(this.doc,Jt(i.tagName),Jt(s),u),s==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}let p=this.unattachedDoc.createElement("span");t.oldValue&&p.setAttribute("style",t.oldValue);for(let _ of Array.from(i.style)){let h=i.style.getPropertyValue(_),b=i.style.getPropertyPriority(_);h!==p.style.getPropertyValue(_)||b!==p.style.getPropertyPriority(_)?b===""?l.styleDiff[_]=h:l.styleDiff[_]=[h,b]:l._unchangedStyles[_]=[h,b]}for(let _ of Array.from(p.style))i.style.getPropertyValue(_)===""&&(l.styleDiff[_]=!1)}break}case"childList":{if(Ke(t.target,this.blockClass,this.blockSelector,!0))return;if(t.target.tagName==="TEXTAREA"){this.genTextAreaValueMutation(t.target);return}t.addedNodes.forEach(i=>this.genAdds(i,t.target)),t.removedNodes.forEach(i=>{let s=this.mirror.getId(i),u=Ur(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Ke(t.target,this.blockClass,this.blockSelector,!1)||$i(i,this.mirror)||!Vc(i,this.mirror)||(this.addedSet.has(i)?(to(this.addedSet,i),this.droppedSet.add(i)):this.addedSet.has(t.target)&&s===-1||ua(t.target,this.mirror)||(this.movedSet.has(i)&&this.movedMap[Ps(s,u)]?to(this.movedSet,i):this.removes.push({parentId:u,id:s,isShadow:Ur(t.target)&&Kr(t.target)?!0:void 0})),this.mapRemoves.push(i))});break}}},this.genAdds=(t,i)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if($i(t,this.mirror))return;this.movedSet.add(t);let s=null;i&&this.mirror.hasNode(i)&&(s=this.mirror.getId(i)),s&&s!==-1&&(this.movedMap[Ps(this.mirror.getId(t),s)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Ke(t,this.blockClass,this.blockSelector,!1)||(t.childNodes.forEach(s=>this.genAdds(s)),Qi(t)&&t.shadowRoot.childNodes.forEach(s=>{this.processedNodeManager.add(s,this),this.genAdds(s,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(i=>{this[i]=t[i]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function to(e,t){e.delete(t),t.childNodes.forEach(i=>to(e,i))}function Bs(e,t,i){return e.length===0?!1:pa(e,t,i)}function pa(e,t,i){let{parentNode:s}=t;if(!s)return!1;let u=i.getId(s);return e.some(l=>l.id===u)?!0:pa(e,s,i)}function Ls(e,t){return e.size===0?!1:ha(e,t)}function ha(e,t){let{parentNode:i}=t;return i?e.has(i)?!0:ha(e,i):!1}var qr;function Xc(e){qr=e}function Qc(){qr=void 0}var fe=e=>qr?(...i)=>{try{return e(...i)}catch(s){if(qr&&qr(s)===!0)return;throw s}}:e,Xt=[];function Gr(e){try{if("composedPath"in e){let t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function ma(e,t){var i,s;let u=new eo;Xt.push(u),u.init(e);let l=window.MutationObserver||window.__rrMutationObserver,p=(s=(i=window?.Zone)===null||i===void 0?void 0:i.__symbol__)===null||s===void 0?void 0:s.call(i,"MutationObserver");p&&window[p]&&(l=window[p]);let _=new l(fe(u.processMutations.bind(u)));return _.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),_}function Jc({mousemoveCb:e,sampling:t,doc:i,mirror:s}){if(t.mousemove===!1)return()=>{};let u=typeof t.mousemove=="number"?t.mousemove:50,l=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500,p=[],_,h=zr(fe(E=>{let w=Date.now()-_;e(p.map(x=>(x.timeOffset-=w,x)),E),p=[],_=null}),l),b=fe(zr(fe(E=>{let w=Gr(E),{clientX:x,clientY:C}=Xi(E)?E.changedTouches[0]:E;_||(_=Ln()),p.push({x,y:C,id:s.getId(w),timeOffset:Ln()-_}),h(typeof DragEvent<"u"&&E instanceof DragEvent?ce.Drag:E instanceof MouseEvent?ce.MouseMove:ce.TouchMove)}),u,{trailing:!1})),g=[Ue("mousemove",b,i),Ue("touchmove",b,i),Ue("drag",b,i)];return fe(()=>{g.forEach(E=>E())})}function Zc({mouseInteractionCb:e,doc:t,mirror:i,blockClass:s,blockSelector:u,sampling:l}){if(l.mouseInteraction===!1)return()=>{};let p=l.mouseInteraction===!0||l.mouseInteraction===void 0?{}:l.mouseInteraction,_=[],h=null,b=g=>E=>{let w=Gr(E);if(Ke(w,s,u,!0))return;let x=null,C=g;if("pointerType"in E){switch(E.pointerType){case"mouse":x=vt.Mouse;break;case"touch":x=vt.Touch;break;case"pen":x=vt.Pen;break}x===vt.Touch?je[g]===je.MouseDown?C="TouchStart":je[g]===je.MouseUp&&(C="TouchEnd"):vt.Pen}else Xi(E)&&(x=vt.Touch);x!==null?(h=x,(C.startsWith("Touch")&&x===vt.Touch||C.startsWith("Mouse")&&x===vt.Mouse)&&(x=null)):je[g]===je.Click&&(x=h,h=null);let O=Xi(E)?E.changedTouches[0]:E;if(!O)return;let L=i.getId(w),{clientX:H,clientY:$}=O;fe(e)(Object.assign({type:je[C],id:L,x:H,y:$},x!==null&&{pointerType:x}))};return Object.keys(je).filter(g=>Number.isNaN(Number(g))&&!g.endsWith("_Departed")&&p[g]!==!1).forEach(g=>{let E=Jt(g),w=b(g);if(window.PointerEvent)switch(je[g]){case je.MouseDown:case je.MouseUp:E=E.replace("mouse","pointer");break;case je.TouchStart:case je.TouchEnd:return}_.push(Ue(E,w,t))}),fe(()=>{_.forEach(g=>g())})}function _a({scrollCb:e,doc:t,mirror:i,blockClass:s,blockSelector:u,sampling:l}){let p=fe(zr(fe(_=>{let h=Gr(_);if(!h||Ke(h,s,u,!0))return;let b=i.getId(h);if(h===t&&t.defaultView){let g=ia(t.defaultView);e({id:b,x:g.left,y:g.top})}else e({id:b,x:h.scrollLeft,y:h.scrollTop})}),l.scroll||100));return Ue("scroll",p,t)}function el({viewportResizeCb:e},{win:t}){let i=-1,s=-1,u=fe(zr(fe(()=>{let l=oa(),p=sa();(i!==l||s!==p)&&(e({width:Number(p),height:Number(l)}),i=l,s=p)}),200));return Ue("resize",u,t)}var tl=["INPUT","TEXTAREA","SELECT"],Fs=new WeakMap;function rl({inputCb:e,doc:t,mirror:i,blockClass:s,blockSelector:u,ignoreClass:l,ignoreSelector:p,maskInputOptions:_,maskInputFn:h,sampling:b,userTriggeredOnInput:g}){function E($){let K=Gr($),Y=$.isTrusted,re=K&&K.tagName;if(K&&re==="OPTION"&&(K=K.parentElement),!K||!re||tl.indexOf(re)<0||Ke(K,s,u,!0)||K.classList.contains(l)||p&&K.matches(p))return;let Oe=K.value,me=!1,se=lo(K)||"";se==="radio"||se==="checkbox"?me=K.checked:(_[re.toLowerCase()]||_[se])&&(Oe=co({element:K,maskInputOptions:_,tagName:re,type:se,value:Oe,maskInputFn:h})),w(K,g?{text:Oe,isChecked:me,userTriggered:Y}:{text:Oe,isChecked:me});let ge=K.name;se==="radio"&&ge&&me&&t.querySelectorAll(`input[type="radio"][name="${ge}"]`).forEach(Le=>{if(Le!==K){let qe=Le.value;w(Le,g?{text:qe,isChecked:!me,userTriggered:!1}:{text:qe,isChecked:!me})}})}function w($,K){let Y=Fs.get($);if(!Y||Y.text!==K.text||Y.isChecked!==K.isChecked){Fs.set($,K);let re=i.getId($);fe(e)(Object.assign(Object.assign({},K),{id:re}))}}let C=(b.input==="last"?["change"]:["input","change"]).map($=>Ue($,fe(E),t)),O=t.defaultView;if(!O)return()=>{C.forEach($=>$())};let L=O.Object.getOwnPropertyDescriptor(O.HTMLInputElement.prototype,"value"),H=[[O.HTMLInputElement.prototype,"value"],[O.HTMLInputElement.prototype,"checked"],[O.HTMLSelectElement.prototype,"value"],[O.HTMLTextAreaElement.prototype,"value"],[O.HTMLSelectElement.prototype,"selectedIndex"],[O.HTMLOptionElement.prototype,"selected"]];return L&&L.set&&C.push(...H.map($=>Hn($[0],$[1],{set(){fe(E)({target:this,isTrusted:!1})}},!1,O))),fe(()=>{C.forEach($=>$())})}function Fn(e){let t=[];function i(s,u){if(Cn("CSSGroupingRule")&&s.parentRule instanceof CSSGroupingRule||Cn("CSSMediaRule")&&s.parentRule instanceof CSSMediaRule||Cn("CSSSupportsRule")&&s.parentRule instanceof CSSSupportsRule||Cn("CSSConditionRule")&&s.parentRule instanceof CSSConditionRule){let p=Array.from(s.parentRule.cssRules).indexOf(s);u.unshift(p)}else if(s.parentStyleSheet){let p=Array.from(s.parentStyleSheet.cssRules).indexOf(s);u.unshift(p)}return u}return i(e,t)}function Dt(e,t,i){let s,u;return e?(e.ownerNode?s=t.getId(e.ownerNode):u=i.getId(e),{styleId:u,id:s}):{}}function nl({styleSheetRuleCb:e,mirror:t,stylesheetManager:i},{win:s}){if(!s.CSSStyleSheet||!s.CSSStyleSheet.prototype)return()=>{};let u=s.CSSStyleSheet.prototype.insertRule;s.CSSStyleSheet.prototype.insertRule=new Proxy(u,{apply:fe((g,E,w)=>{let[x,C]=w,{id:O,styleId:L}=Dt(E,t,i.styleMirror);return(O&&O!==-1||L&&L!==-1)&&e({id:O,styleId:L,adds:[{rule:x,index:C}]}),g.apply(E,w)})});let l=s.CSSStyleSheet.prototype.deleteRule;s.CSSStyleSheet.prototype.deleteRule=new Proxy(l,{apply:fe((g,E,w)=>{let[x]=w,{id:C,styleId:O}=Dt(E,t,i.styleMirror);return(C&&C!==-1||O&&O!==-1)&&e({id:C,styleId:O,removes:[{index:x}]}),g.apply(E,w)})});let p;s.CSSStyleSheet.prototype.replace&&(p=s.CSSStyleSheet.prototype.replace,s.CSSStyleSheet.prototype.replace=new Proxy(p,{apply:fe((g,E,w)=>{let[x]=w,{id:C,styleId:O}=Dt(E,t,i.styleMirror);return(C&&C!==-1||O&&O!==-1)&&e({id:C,styleId:O,replace:x}),g.apply(E,w)})}));let _;s.CSSStyleSheet.prototype.replaceSync&&(_=s.CSSStyleSheet.prototype.replaceSync,s.CSSStyleSheet.prototype.replaceSync=new Proxy(_,{apply:fe((g,E,w)=>{let[x]=w,{id:C,styleId:O}=Dt(E,t,i.styleMirror);return(C&&C!==-1||O&&O!==-1)&&e({id:C,styleId:O,replaceSync:x}),g.apply(E,w)})}));let h={};Mn("CSSGroupingRule")?h.CSSGroupingRule=s.CSSGroupingRule:(Mn("CSSMediaRule")&&(h.CSSMediaRule=s.CSSMediaRule),Mn("CSSConditionRule")&&(h.CSSConditionRule=s.CSSConditionRule),Mn("CSSSupportsRule")&&(h.CSSSupportsRule=s.CSSSupportsRule));let b={};return Object.entries(h).forEach(([g,E])=>{b[g]={insertRule:E.prototype.insertRule,deleteRule:E.prototype.deleteRule},E.prototype.insertRule=new Proxy(b[g].insertRule,{apply:fe((w,x,C)=>{let[O,L]=C,{id:H,styleId:$}=Dt(x.parentStyleSheet,t,i.styleMirror);return(H&&H!==-1||$&&$!==-1)&&e({id:H,styleId:$,adds:[{rule:O,index:[...Fn(x),L||0]}]}),w.apply(x,C)})}),E.prototype.deleteRule=new Proxy(b[g].deleteRule,{apply:fe((w,x,C)=>{let[O]=C,{id:L,styleId:H}=Dt(x.parentStyleSheet,t,i.styleMirror);return(L&&L!==-1||H&&H!==-1)&&e({id:L,styleId:H,removes:[{index:[...Fn(x),O]}]}),w.apply(x,C)})})}),fe(()=>{s.CSSStyleSheet.prototype.insertRule=u,s.CSSStyleSheet.prototype.deleteRule=l,p&&(s.CSSStyleSheet.prototype.replace=p),_&&(s.CSSStyleSheet.prototype.replaceSync=_),Object.entries(h).forEach(([g,E])=>{E.prototype.insertRule=b[g].insertRule,E.prototype.deleteRule=b[g].deleteRule})})}function ya({mirror:e,stylesheetManager:t},i){var s,u,l;let p=null;i.nodeName==="#document"?p=e.getId(i):p=e.getId(i.host);let _=i.nodeName==="#document"?(s=i.defaultView)===null||s===void 0?void 0:s.Document:(l=(u=i.ownerDocument)===null||u===void 0?void 0:u.defaultView)===null||l===void 0?void 0:l.ShadowRoot,h=_?.prototype?Object.getOwnPropertyDescriptor(_?.prototype,"adoptedStyleSheets"):void 0;return p===null||p===-1||!_||!h?()=>{}:(Object.defineProperty(i,"adoptedStyleSheets",{configurable:h.configurable,enumerable:h.enumerable,get(){var b;return(b=h.get)===null||b===void 0?void 0:b.call(this)},set(b){var g;let E=(g=h.set)===null||g===void 0?void 0:g.call(this,b);if(p!==null&&p!==-1)try{t.adoptStyleSheets(b,p)}catch{}return E}}),fe(()=>{Object.defineProperty(i,"adoptedStyleSheets",{configurable:h.configurable,enumerable:h.enumerable,get:h.get,set:h.set})}))}function il({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:i,stylesheetManager:s},{win:u}){let l=u.CSSStyleDeclaration.prototype.setProperty;u.CSSStyleDeclaration.prototype.setProperty=new Proxy(l,{apply:fe((_,h,b)=>{var g;let[E,w,x]=b;if(i.has(E))return l.apply(h,[E,w,x]);let{id:C,styleId:O}=Dt((g=h.parentRule)===null||g===void 0?void 0:g.parentStyleSheet,t,s.styleMirror);return(C&&C!==-1||O&&O!==-1)&&e({id:C,styleId:O,set:{property:E,value:w,priority:x},index:Fn(h.parentRule)}),_.apply(h,b)})});let p=u.CSSStyleDeclaration.prototype.removeProperty;return u.CSSStyleDeclaration.prototype.removeProperty=new Proxy(p,{apply:fe((_,h,b)=>{var g;let[E]=b;if(i.has(E))return p.apply(h,[E]);let{id:w,styleId:x}=Dt((g=h.parentRule)===null||g===void 0?void 0:g.parentStyleSheet,t,s.styleMirror);return(w&&w!==-1||x&&x!==-1)&&e({id:w,styleId:x,remove:{property:E},index:Fn(h.parentRule)}),_.apply(h,b)})}),fe(()=>{u.CSSStyleDeclaration.prototype.setProperty=l,u.CSSStyleDeclaration.prototype.removeProperty=p})}function ol({mediaInteractionCb:e,blockClass:t,blockSelector:i,mirror:s,sampling:u,doc:l}){let p=fe(h=>zr(fe(b=>{let g=Gr(b);if(!g||Ke(g,t,i,!0))return;let{currentTime:E,volume:w,muted:x,playbackRate:C,loop:O}=g;e({type:h,id:s.getId(g),currentTime:E,volume:w,muted:x,playbackRate:C,loop:O})}),u.media||500)),_=[Ue("play",p(0),l),Ue("pause",p(1),l),Ue("seeked",p(2),l),Ue("volumechange",p(3),l),Ue("ratechange",p(4),l)];return fe(()=>{_.forEach(h=>h())})}function sl({fontCb:e,doc:t}){let i=t.defaultView;if(!i)return()=>{};let s=[],u=new WeakMap,l=i.FontFace;i.FontFace=function(h,b,g){let E=new l(h,b,g);return u.set(E,{family:h,buffer:typeof b!="string",descriptors:g,fontSource:typeof b=="string"?b:JSON.stringify(Array.from(new Uint8Array(b)))}),E};let p=gr(t.fonts,"add",function(_){return function(h){return setTimeout(fe(()=>{let b=u.get(h);b&&(e(b),u.delete(h))}),0),_.apply(this,[h])}});return s.push(()=>{i.FontFace=l}),s.push(p),fe(()=>{s.forEach(_=>_())})}function al(e){let{doc:t,mirror:i,blockClass:s,blockSelector:u,selectionCb:l}=e,p=!0,_=fe(()=>{let h=t.getSelection();if(!h||p&&h?.isCollapsed)return;p=h.isCollapsed||!1;let b=[],g=h.rangeCount||0;for(let E=0;E<g;E++){let w=h.getRangeAt(E),{startContainer:x,startOffset:C,endContainer:O,endOffset:L}=w;Ke(x,s,u,!0)||Ke(O,s,u,!0)||b.push({start:i.getId(x),startOffset:C,end:i.getId(O),endOffset:L})}l({ranges:b})});return _(),Ue("selectionchange",_)}function ul({doc:e,customElementCb:t}){let i=e.defaultView;return!i||!i.customElements?()=>{}:gr(i.customElements,"define",function(u){return function(l,p,_){try{t({define:{name:l}})}catch{}return u.apply(this,[l,p,_])}})}function cl(e,t){let{mutationCb:i,mousemoveCb:s,mouseInteractionCb:u,scrollCb:l,viewportResizeCb:p,inputCb:_,mediaInteractionCb:h,styleSheetRuleCb:b,styleDeclarationCb:g,canvasMutationCb:E,fontCb:w,selectionCb:x,customElementCb:C}=e;e.mutationCb=(...O)=>{t.mutation&&t.mutation(...O),i(...O)},e.mousemoveCb=(...O)=>{t.mousemove&&t.mousemove(...O),s(...O)},e.mouseInteractionCb=(...O)=>{t.mouseInteraction&&t.mouseInteraction(...O),u(...O)},e.scrollCb=(...O)=>{t.scroll&&t.scroll(...O),l(...O)},e.viewportResizeCb=(...O)=>{t.viewportResize&&t.viewportResize(...O),p(...O)},e.inputCb=(...O)=>{t.input&&t.input(...O),_(...O)},e.mediaInteractionCb=(...O)=>{t.mediaInteaction&&t.mediaInteaction(...O),h(...O)},e.styleSheetRuleCb=(...O)=>{t.styleSheetRule&&t.styleSheetRule(...O),b(...O)},e.styleDeclarationCb=(...O)=>{t.styleDeclaration&&t.styleDeclaration(...O),g(...O)},e.canvasMutationCb=(...O)=>{t.canvasMutation&&t.canvasMutation(...O),E(...O)},e.fontCb=(...O)=>{t.font&&t.font(...O),w(...O)},e.selectionCb=(...O)=>{t.selection&&t.selection(...O),x(...O)},e.customElementCb=(...O)=>{t.customElement&&t.customElement(...O),C(...O)}}function ll(e,t={}){let i=e.doc.defaultView;if(!i)return()=>{};cl(e,t);let s;e.recordDOM&&(s=ma(e,e.doc));let u=Jc(e),l=Zc(e),p=_a(e),_=el(e,{win:i}),h=rl(e),b=ol(e),g=()=>{},E=()=>{},w=()=>{},x=()=>{};e.recordDOM&&(g=nl(e,{win:i}),E=ya(e,e.doc),w=il(e,{win:i}),e.collectFonts&&(x=sl(e)));let C=al(e),O=ul(e),L=[];for(let H of e.plugins)L.push(H.observer(H.callback,i,H.options));return fe(()=>{Xt.forEach(H=>H.reset()),s?.disconnect(),u(),l(),p(),_(),h(),b(),g(),E(),w(),x(),C(),O(),L.forEach(H=>H())})}function Cn(e){return typeof window[e]<"u"}function Mn(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}var Un=class{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,i,s,u){let l=s||this.getIdToRemoteIdMap(t),p=u||this.getRemoteIdToIdMap(t),_=l.get(i);return _||(_=this.generateIdFn(),l.set(i,_),p.set(_,i)),_}getIds(t,i){let s=this.getIdToRemoteIdMap(t),u=this.getRemoteIdToIdMap(t);return i.map(l=>this.getId(t,l,s,u))}getRemoteId(t,i,s){let u=s||this.getRemoteIdToIdMap(t);if(typeof i!="number")return i;let l=u.get(i);return l||-1}getRemoteIds(t,i){let s=this.getRemoteIdToIdMap(t);return i.map(u=>this.getRemoteId(t,u,s))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let i=this.iframeIdToRemoteIdMap.get(t);return i||(i=new Map,this.iframeIdToRemoteIdMap.set(t,i)),i}getRemoteIdToIdMap(t){let i=this.iframeRemoteIdToIdMap.get(t);return i||(i=new Map,this.iframeRemoteIdToIdMap.set(t,i)),i}},ro=class{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Un(ea),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Un(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,i){var s;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:i}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(s=this.loadListener)===null||s===void 0||s.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){let i=t;if(i.data.type!=="rrweb"||i.origin!==i.data.origin||!t.source)return;let u=this.crossOriginIframeMap.get(t.source);if(!u)return;let l=this.transformCrossOriginEvent(u,i.data.event);l&&this.wrappedEmit(l,i.data.isCheckout)}transformCrossOriginEvent(t,i){var s;switch(i.type){case pe.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(i.data.node,t);let u=i.data.node.id;return this.crossOriginIframeRootIdMap.set(t,u),this.patchRootIdOnNode(i.data.node,u),{timestamp:i.timestamp,type:pe.IncrementalSnapshot,data:{source:ce.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:i.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case pe.Meta:case pe.Load:case pe.DomContentLoaded:return!1;case pe.Plugin:return i;case pe.Custom:return this.replaceIds(i.data.payload,t,["id","parentId","previousId","nextId"]),i;case pe.IncrementalSnapshot:switch(i.data.source){case ce.Mutation:return i.data.adds.forEach(u=>{this.replaceIds(u,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(u.node,t);let l=this.crossOriginIframeRootIdMap.get(t);l&&this.patchRootIdOnNode(u.node,l)}),i.data.removes.forEach(u=>{this.replaceIds(u,t,["parentId","id"])}),i.data.attributes.forEach(u=>{this.replaceIds(u,t,["id"])}),i.data.texts.forEach(u=>{this.replaceIds(u,t,["id"])}),i;case ce.Drag:case ce.TouchMove:case ce.MouseMove:return i.data.positions.forEach(u=>{this.replaceIds(u,t,["id"])}),i;case ce.ViewportResize:return!1;case ce.MediaInteraction:case ce.MouseInteraction:case ce.Scroll:case ce.CanvasMutation:case ce.Input:return this.replaceIds(i.data,t,["id"]),i;case ce.StyleSheetRule:case ce.StyleDeclaration:return this.replaceIds(i.data,t,["id"]),this.replaceStyleIds(i.data,t,["styleId"]),i;case ce.Font:return i;case ce.Selection:return i.data.ranges.forEach(u=>{this.replaceIds(u,t,["start","end"])}),i;case ce.AdoptedStyleSheet:return this.replaceIds(i.data,t,["id"]),this.replaceStyleIds(i.data,t,["styleIds"]),(s=i.data.styles)===null||s===void 0||s.forEach(u=>{this.replaceStyleIds(u,t,["styleId"])}),i}}return!1}replace(t,i,s,u){for(let l of u)!Array.isArray(i[l])&&typeof i[l]!="number"||(Array.isArray(i[l])?i[l]=t.getIds(s,i[l]):i[l]=t.getId(s,i[l]));return i}replaceIds(t,i,s){return this.replace(this.crossOriginIframeMirror,t,i,s)}replaceStyleIds(t,i,s){return this.replace(this.crossOriginIframeStyleMirror,t,i,s)}replaceIdOnNode(t,i){this.replaceIds(t,i,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(s=>{this.replaceIdOnNode(s,i)})}patchRootIdOnNode(t,i){t.type!==Ae.Document&&!t.rootId&&(t.rootId=i),"childNodes"in t&&t.childNodes.forEach(s=>{this.patchRootIdOnNode(s,i)})}},no=class{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,i){if(!Kr(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t);let s=ma(Object.assign(Object.assign({},this.bypassOptions),{doc:i,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t);this.restoreHandlers.push(()=>s.disconnect()),this.restoreHandlers.push(_a(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))),setTimeout(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(ya({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){!t.contentWindow||!t.contentDocument||this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,i){let s=this;this.restoreHandlers.push(gr(t.prototype,"attachShadow",function(u){return function(l){let p=u.call(this,l);return this.shadowRoot&&da(this)&&s.addShadowRoot(this.shadowRoot,i),p}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}};function fl(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(e);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(e,s[u])&&(i[s[u]]=e[s[u]]);return i}function dl(e,t,i,s){function u(l){return l instanceof i?l:new i(function(p){p(l)})}return new(i||(i=Promise))(function(l,p){function _(g){try{b(s.next(g))}catch(E){p(E)}}function h(g){try{b(s.throw(g))}catch(E){p(E)}}function b(g){g.done?l(g.value):u(g.value).then(_,h)}b((s=s.apply(e,t||[])).next())})}var pr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Fr=0;Fr<pr.length;Fr++)pl[pr.charCodeAt(Fr)]=Fr;var Fr,hl=function(e){var t=new Uint8Array(e),i,s=t.length,u="";for(i=0;i<s;i+=3)u+=pr[t[i]>>2],u+=pr[(t[i]&3)<<4|t[i+1]>>4],u+=pr[(t[i+1]&15)<<2|t[i+2]>>6],u+=pr[t[i+2]&63];return s%3===2?u=u.substring(0,u.length-1)+"=":s%3===1&&(u=u.substring(0,u.length-2)+"=="),u},Us=new Map;function ml(e,t){let i=Us.get(e);return i||(i=new Map,Us.set(e,i)),i.has(t)||i.set(t,[]),i.get(t)}var va=(e,t,i)=>{if(!e||!(ba(e,t)||typeof e=="object"))return;let s=e.constructor.name,u=ml(i,s),l=u.indexOf(e);return l===-1&&(l=u.length,u.push(e)),l};function An(e,t,i){if(e instanceof Array)return e.map(s=>An(s,t,i));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){let s=e.constructor.name,u=hl(e);return{rr_type:s,base64:u}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[An(e.buffer,t,i),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){let s=e.constructor.name,{src:u}=e;return{rr_type:s,src:u}}else if(e instanceof HTMLCanvasElement){let s="HTMLImageElement",u=e.toDataURL();return{rr_type:s,src:u}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[An(e.data,t,i),e.width,e.height]};if(ba(e,t)||typeof e=="object"){let s=e.constructor.name,u=va(e,t,i);return{rr_type:s,index:u}}}}return e}var ga=(e,t,i)=>e.map(s=>An(s,t,i)),ba=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(u=>typeof t[u]=="function").find(u=>e instanceof t[u]);function _l(e,t,i,s){let u=[],l=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(let p of l)try{if(typeof t.CanvasRenderingContext2D.prototype[p]!="function")continue;let _=gr(t.CanvasRenderingContext2D.prototype,p,function(h){return function(...b){return Ke(this.canvas,i,s,!0)||setTimeout(()=>{let g=ga(b,t,this);e(this.canvas,{type:_r["2D"],property:p,args:g})},0),h.apply(this,b)}});u.push(_)}catch{let h=Hn(t.CanvasRenderingContext2D.prototype,p,{set(b){e(this.canvas,{type:_r["2D"],property:p,args:[b],setter:!0})}});u.push(h)}return()=>{u.forEach(p=>p())}}function yl(e){return e==="experimental-webgl"?"webgl":e}function Ks(e,t,i,s){let u=[];try{let l=gr(e.HTMLCanvasElement.prototype,"getContext",function(p){return function(_,...h){if(!Ke(this,t,i,!0)){let b=yl(_);if("__context"in this||(this.__context=b),s&&["webgl","webgl2"].includes(b))if(h[0]&&typeof h[0]=="object"){let g=h[0];g.preserveDrawingBuffer||(g.preserveDrawingBuffer=!0)}else h.splice(0,1,{preserveDrawingBuffer:!0})}return p.apply(this,[_,...h])}});u.push(l)}catch{}return()=>{u.forEach(l=>l())}}function qs(e,t,i,s,u,l,p){let _=[],h=Object.getOwnPropertyNames(e);for(let b of h)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(b))try{if(typeof e[b]!="function")continue;let g=gr(e,b,function(E){return function(...w){let x=E.apply(this,w);if(va(x,p,this),"tagName"in this.canvas&&!Ke(this.canvas,s,u,!0)){let C=ga(w,p,this),O={type:t,property:b,args:C};i(this.canvas,O)}return x}});_.push(g)}catch{let E=Hn(e,b,{set(w){i(this.canvas,{type:t,property:b,args:[w],setter:!0})}});_.push(E)}return _}function vl(e,t,i,s,u){let l=[];return l.push(...qs(t.WebGLRenderingContext.prototype,_r.WebGL,e,i,s,u,t)),typeof t.WebGL2RenderingContext<"u"&&l.push(...qs(t.WebGL2RenderingContext.prototype,_r.WebGL2,e,i,s,u,t)),()=>{l.forEach(p=>p())}}function gl(e,t){var i=t===void 0?null:t,s=e.toString(),u=s.split(`
`);u.pop(),u.shift();for(var l=u[0].search(/\S/),p=/(['"])__worker_loader_strict__(['"])/g,_=0,h=u.length;_<h;++_)u[_]=u[_].substring(l).replace(p,"$1use strict$2")+`
`;return i&&u.push("//# sourceMappingURL="+i+`
`),u}function bl(e,t){var i=gl(e,t),s=new Blob(i,{type:"application/javascript"});return URL.createObjectURL(s)}function wl(e,t){var i;return function(u){return i=i||bl(e,t),new Worker(i,u)}}var Sl=wl(function(){(function(){"__worker_loader_strict__";function e(b,g,E,w){function x(C){return C instanceof E?C:new E(function(O){O(C)})}return new(E||(E=Promise))(function(C,O){function L(K){try{$(w.next(K))}catch(Y){O(Y)}}function H(K){try{$(w.throw(K))}catch(Y){O(Y)}}function $(K){K.done?C(K.value):x(K.value).then(L,H)}$((w=w.apply(b,g||[])).next())})}for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=typeof Uint8Array>"u"?[]:new Uint8Array(256),s=0;s<t.length;s++)i[t.charCodeAt(s)]=s;var u=function(b){var g=new Uint8Array(b),E,w=g.length,x="";for(E=0;E<w;E+=3)x+=t[g[E]>>2],x+=t[(g[E]&3)<<4|g[E+1]>>4],x+=t[(g[E+1]&15)<<2|g[E+2]>>6],x+=t[g[E+2]&63];return w%3===2?x=x.substring(0,x.length-1)+"=":w%3===1&&(x=x.substring(0,x.length-2)+"=="),x};let l=new Map,p=new Map;function _(b,g,E){return e(this,void 0,void 0,function*(){let w=`${b}-${g}`;if("OffscreenCanvas"in globalThis){if(p.has(w))return p.get(w);let x=new OffscreenCanvas(b,g);x.getContext("2d");let O=yield(yield x.convertToBlob(E)).arrayBuffer(),L=u(O);return p.set(w,L),L}else return""})}let h=self;h.onmessage=function(b){return e(this,void 0,void 0,function*(){if("OffscreenCanvas"in globalThis){let{id:g,bitmap:E,width:w,height:x,dataURLOptions:C}=b.data,O=_(w,x,C),L=new OffscreenCanvas(w,x);L.getContext("2d").drawImage(E,0,0),E.close();let $=yield L.convertToBlob(C),K=$.type,Y=yield $.arrayBuffer(),re=u(Y);if(!l.has(g)&&(yield O)===re)return l.set(g,re),h.postMessage({id:g});if(l.get(g)===re)return h.postMessage({id:g});h.postMessage({id:g,type:K,base64:re,width:w,height:x}),l.set(g,re)}else return h.postMessage({id:b.data.id})})}})()},null),io=class{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(h,b)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(h)||this.pendingCanvasMutations.set(h,[]),this.pendingCanvasMutations.get(h).push(b)};let{sampling:i="all",win:s,blockClass:u,blockSelector:l,recordCanvas:p,dataURLOptions:_}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,p&&i==="all"&&this.initCanvasMutationObserver(s,u,l),p&&typeof i=="number"&&this.initCanvasFPSObserver(i,s,u,l,{dataURLOptions:_})}initCanvasFPSObserver(t,i,s,u,l){let p=Ks(i,s,u,!0),_=new Map,h=new Sl;h.onmessage=C=>{let{id:O}=C.data;if(_.set(O,!1),!("base64"in C.data))return;let{base64:L,type:H,width:$,height:K}=C.data;this.mutationCb({id:O,type:_r["2D"],commands:[{property:"clearRect",args:[0,0,$,K]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:L}],type:H}]},0,0]}]})};let b=1e3/t,g=0,E,w=()=>{let C=[];return i.document.querySelectorAll("canvas").forEach(O=>{Ke(O,s,u,!0)||C.push(O)}),C},x=C=>{if(g&&C-g<b){E=requestAnimationFrame(x);return}g=C,w().forEach(O=>dl(this,void 0,void 0,function*(){var L;let H=this.mirror.getId(O);if(_.get(H)||O.width===0||O.height===0)return;if(_.set(H,!0),["webgl","webgl2"].includes(O.__context)){let K=O.getContext(O.__context);((L=K?.getContextAttributes())===null||L===void 0?void 0:L.preserveDrawingBuffer)===!1&&K.clear(K.COLOR_BUFFER_BIT)}let $=yield createImageBitmap(O);h.postMessage({id:H,bitmap:$,width:O.width,height:O.height,dataURLOptions:l.dataURLOptions},[$])})),E=requestAnimationFrame(x)};E=requestAnimationFrame(x),this.resetObservers=()=>{p(),cancelAnimationFrame(E)}}initCanvasMutationObserver(t,i,s){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();let u=Ks(t,i,s,!1),l=_l(this.processMutation.bind(this),t,i,s),p=vl(this.processMutation.bind(this),t,i,s,this.mirror);this.resetObservers=()=>{u(),l(),p()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let t=i=>{this.rafStamps.latestId=i,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,i)=>{let s=this.mirror.getId(i);this.flushPendingCanvasMutationFor(i,s)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,i){if(this.frozen||this.locked)return;let s=this.pendingCanvasMutations.get(t);if(!s||i===-1)return;let u=s.map(p=>fl(p,["type"])),{type:l}=s[0];this.mutationCb({id:i,type:l,commands:u}),this.pendingCanvasMutations.delete(t)}},oo=class{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new Ji,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,i){"_cssText"in i.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:i.id,attributes:i.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,i){if(t.length===0)return;let s={id:i,styleIds:[]},u=[];for(let l of t){let p;this.styleMirror.has(l)?p=this.styleMirror.getId(l):(p=this.styleMirror.add(l),u.push({styleId:p,rules:Array.from(l.rules||CSSRule,(_,h)=>({rule:Js(_),index:h}))})),s.styleIds.push(p)}u.length>0&&(s.styles=u),this.adoptedStyleSheetCb(s)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}},so=class{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(t,i){let s=this.nodeMap.get(t);return s&&Array.from(s).some(u=>u!==i)}add(t,i){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(i))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}};function Te(e){return Object.assign(Object.assign({},e),{timestamp:Ln()})}var Ie,Rn,Wi,Kn=!1,et=Ec();function Yr(e={}){let{emit:t,checkoutEveryNms:i,checkoutEveryNth:s,blockClass:u="rr-block",blockSelector:l=null,ignoreClass:p="rr-ignore",ignoreSelector:_=null,maskTextClass:h="rr-mask",maskTextSelector:b=null,inlineStylesheet:g=!0,maskAllInputs:E,maskInputOptions:w,slimDOMOptions:x,maskInputFn:C,maskTextFn:O,hooks:L,packFn:H,sampling:$={},dataURLOptions:K={},mousemoveWait:Y,recordDOM:re=!0,recordCanvas:Oe=!1,recordCrossOriginIframes:me=!1,recordAfter:se=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:ge=!1,collectFonts:Le=!1,inlineImages:qe=!1,plugins:le,keepIframeSrcFn:pt=()=>!1,ignoreCSSAttributes:Re=new Set([]),errorHandler:Ge}=e;Xc(Ge);let ze=me?window.parent===window:!0,it=!1;if(!ze)try{window.parent.document&&(it=!1)}catch{it=!0}if(ze&&!t)throw new Error("emit function is required");Y!==void 0&&$.mousemove===void 0&&($.mousemove=Y),et.reset();let Ye=E===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:w!==void 0?w:{password:!0},Kt=x===!0||x==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:x==="all",headMetaDescKeywords:x==="all"}:x||{};Hc();let Jr,qt=0,tr=oe=>{for(let De of le||[])De.eventProcessor&&(oe=De.eventProcessor(oe));return H&&!it&&(oe=H(oe)),oe};Ie=(oe,De)=>{var we;if(!((we=Xt[0])===null||we===void 0)&&we.isFrozen()&&oe.type!==pe.FullSnapshot&&!(oe.type===pe.IncrementalSnapshot&&oe.data.source===ce.Mutation)&&Xt.forEach(Ce=>Ce.unfreeze()),ze)t?.(tr(oe),De);else if(it){let Ce={type:"rrweb",event:tr(oe),origin:window.location.origin,isCheckout:De};window.parent.postMessage(Ce,"*")}if(oe.type===pe.FullSnapshot)Jr=oe,qt=0;else if(oe.type===pe.IncrementalSnapshot){if(oe.data.source===ce.Mutation&&oe.data.isAttachIframe)return;qt++;let Ce=s&&qt>=s,$e=i&&oe.timestamp-Jr.timestamp>i;(Ce||$e)&&Rn(!0)}};let rr=oe=>{Ie(Te({type:pe.IncrementalSnapshot,data:Object.assign({source:ce.Mutation},oe)}))},ot=oe=>Ie(Te({type:pe.IncrementalSnapshot,data:Object.assign({source:ce.Scroll},oe)})),ht=oe=>Ie(Te({type:pe.IncrementalSnapshot,data:Object.assign({source:ce.CanvasMutation},oe)})),Xe=oe=>Ie(Te({type:pe.IncrementalSnapshot,data:Object.assign({source:ce.AdoptedStyleSheet},oe)})),Qe=new oo({mutationCb:rr,adoptedStyleSheetCb:Xe}),mt=new ro({mirror:et,mutationCb:rr,stylesheetManager:Qe,recordCrossOriginIframes:me,wrappedEmit:Ie});for(let oe of le||[])oe.getMirror&&oe.getMirror({nodeMirror:et,crossOriginIframeMirror:mt.crossOriginIframeMirror,crossOriginIframeStyleMirror:mt.crossOriginIframeStyleMirror});let nr=new so;Wi=new io({recordCanvas:Oe,mutationCb:ht,win:window,blockClass:u,blockSelector:l,mirror:et,sampling:$.canvas,dataURLOptions:K});let St=new no({mutationCb:rr,scrollCb:ot,bypassOptions:{blockClass:u,blockSelector:l,maskTextClass:h,maskTextSelector:b,inlineStylesheet:g,maskInputOptions:Ye,dataURLOptions:K,maskTextFn:O,maskInputFn:C,recordCanvas:Oe,inlineImages:qe,sampling:$,slimDOMOptions:Kt,iframeManager:mt,stylesheetManager:Qe,canvasManager:Wi,keepIframeSrcFn:pt,processedNodeManager:nr},mirror:et});Rn=(oe=!1)=>{if(!re)return;Ie(Te({type:pe.Meta,data:{href:window.location.href,width:sa(),height:oa()}}),oe),Qe.reset(),St.init(),Xt.forEach(we=>we.lock());let De=zc(document,{mirror:et,blockClass:u,blockSelector:l,maskTextClass:h,maskTextSelector:b,inlineStylesheet:g,maskAllInputs:Ye,maskTextFn:O,slimDOM:Kt,dataURLOptions:K,recordCanvas:Oe,inlineImages:qe,onSerialize:we=>{ca(we,et)&&mt.addIframe(we),la(we,et)&&Qe.trackLinkElement(we),Qi(we)&&St.addShadowRoot(we.shadowRoot,document)},onIframeLoad:(we,Ce)=>{mt.attachIframe(we,Ce),St.observeAttachShadow(we)},onStylesheetLoad:(we,Ce)=>{Qe.attachLinkElement(we,Ce)},keepIframeSrcFn:pt});De&&(Ie(Te({type:pe.FullSnapshot,data:{node:De,initialOffset:ia(window)}}),oe),Xt.forEach(we=>we.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Qe.adoptStyleSheets(document.adoptedStyleSheets,et.getId(document)))};try{let oe=[],De=Ce=>{var $e;return fe(ll)({mutationCb:rr,mousemoveCb:(_e,wr)=>Ie(Te({type:pe.IncrementalSnapshot,data:{source:wr,positions:_e}})),mouseInteractionCb:_e=>Ie(Te({type:pe.IncrementalSnapshot,data:Object.assign({source:ce.MouseInteraction},_e)})),scrollCb:ot,viewportResizeCb:_e=>Ie(Te({type:pe.IncrementalSnapshot,data:Object.assign({source:ce.ViewportResize},_e)})),inputCb:_e=>Ie(Te({type:pe.IncrementalSnapshot,data:Object.assign({source:ce.Input},_e)})),mediaInteractionCb:_e=>Ie(Te({type:pe.IncrementalSnapshot,data:Object.assign({source:ce.MediaInteraction},_e)})),styleSheetRuleCb:_e=>Ie(Te({type:pe.IncrementalSnapshot,data:Object.assign({source:ce.StyleSheetRule},_e)})),styleDeclarationCb:_e=>Ie(Te({type:pe.IncrementalSnapshot,data:Object.assign({source:ce.StyleDeclaration},_e)})),canvasMutationCb:ht,fontCb:_e=>Ie(Te({type:pe.IncrementalSnapshot,data:Object.assign({source:ce.Font},_e)})),selectionCb:_e=>{Ie(Te({type:pe.IncrementalSnapshot,data:Object.assign({source:ce.Selection},_e)}))},customElementCb:_e=>{Ie(Te({type:pe.IncrementalSnapshot,data:Object.assign({source:ce.CustomElement},_e)}))},blockClass:u,ignoreClass:p,ignoreSelector:_,maskTextClass:h,maskTextSelector:b,maskInputOptions:Ye,inlineStylesheet:g,sampling:$,recordDOM:re,recordCanvas:Oe,inlineImages:qe,userTriggeredOnInput:ge,collectFonts:Le,doc:Ce,maskInputFn:C,maskTextFn:O,keepIframeSrcFn:pt,blockSelector:l,slimDOMOptions:Kt,dataURLOptions:K,mirror:et,iframeManager:mt,stylesheetManager:Qe,shadowDomManager:St,processedNodeManager:nr,canvasManager:Wi,ignoreCSSAttributes:Re,plugins:(($e=le?.filter(_e=>_e.observer))===null||$e===void 0?void 0:$e.map(_e=>({observer:_e.observer,options:_e.options,callback:wr=>Ie(Te({type:pe.Plugin,data:{plugin:_e.name,payload:wr}}))})))||[]},L)};mt.addLoadListener(Ce=>{try{oe.push(De(Ce.contentDocument))}catch{}});let we=()=>{Rn(),oe.push(De(document)),Kn=!0};return document.readyState==="interactive"||document.readyState==="complete"?we():(oe.push(Ue("DOMContentLoaded",()=>{Ie(Te({type:pe.DomContentLoaded,data:{}})),se==="DOMContentLoaded"&&we()})),oe.push(Ue("load",()=>{Ie(Te({type:pe.Load,data:{}})),se==="load"&&we()},window))),()=>{oe.forEach(Ce=>Ce()),nr.destroy(),Kn=!1,Qc()}}catch{}}Yr.addCustomEvent=(e,t)=>{if(!Kn)throw new Error("please add custom event after start recording");Ie(Te({type:pe.Custom,data:{tag:e,payload:t}}))};Yr.freezePage=()=>{Xt.forEach(e=>e.freeze())};Yr.takeFullSnapshot=e=>{if(!Kn)throw new Error("please take full snapshot after start recording");Rn(e)};Yr.mirror=et;var wa=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(wa||{}),lt=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(lt||{}),gt={DEBUG:!1,LIB_VERSION:"2.55.1"},ne;typeof window>"u"?(zi={hostname:""},ne={navigator:{userAgent:"",onLine:!0},document:{location:zi,referrer:""},screen:{width:0,height:0},location:zi}):ne=window;var zi,jr=24*60*60*1e3,Vi=8*1e3,Gn=Array.prototype,El=Function.prototype,Sa=Object.prototype,Nt=Gn.slice,Xr=Sa.toString,Yn=Sa.hasOwnProperty,Me=ne.console,Pt=ne.navigator,be=ne.document,Tn=ne.opera,qn=ne.screen,ft=Pt.userAgent,Hi=El.bind,js=Gn.forEach,$s=Gn.indexOf,Ws=Gn.map,xl=Array.isArray,ao={},d={trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},he={log:function(){if(gt.DEBUG&&!d.isUndefined(Me)&&Me)try{Me.log.apply(Me,arguments)}catch{d.each(arguments,function(t){Me.log(t)})}},warn:function(){if(gt.DEBUG&&!d.isUndefined(Me)&&Me){var e=["Mixpanel warning:"].concat(d.toArray(arguments));try{Me.warn.apply(Me,e)}catch{d.each(e,function(i){Me.warn(i)})}}},error:function(){if(gt.DEBUG&&!d.isUndefined(Me)&&Me){var e=["Mixpanel error:"].concat(d.toArray(arguments));try{Me.error.apply(Me,e)}catch{d.each(e,function(i){Me.error(i)})}}},critical:function(){if(!d.isUndefined(Me)&&Me){var e=["Mixpanel error:"].concat(d.toArray(arguments));try{Me.error.apply(Me,e)}catch{d.each(e,function(i){Me.error(i)})}}}},Gi=function(e,t){return function(){return arguments[0]="["+t+"] "+arguments[0],e.apply(he,arguments)}},Xn=function(e){return{log:Gi(he.log,e),error:Gi(he.error,e),critical:Gi(he.critical,e)}};d.bind=function(e,t){var i,s;if(Hi&&e.bind===Hi)return Hi.apply(e,Nt.call(arguments,1));if(!d.isFunction(e))throw new TypeError;return i=Nt.call(arguments,2),s=function(){if(!(this instanceof s))return e.apply(t,i.concat(Nt.call(arguments)));var u={};u.prototype=e.prototype;var l=new u;u.prototype=null;var p=e.apply(l,i.concat(Nt.call(arguments)));return Object(p)===p?p:l},s};d.each=function(e,t,i){if(e!=null){if(js&&e.forEach===js)e.forEach(t,i);else if(e.length===+e.length){for(var s=0,u=e.length;s<u;s++)if(s in e&&t.call(i,e[s],s,e)===ao)return}else for(var l in e)if(Yn.call(e,l)&&t.call(i,e[l],l,e)===ao)return}};d.extend=function(e){return d.each(Nt.call(arguments,1),function(t){for(var i in t)t[i]!==void 0&&(e[i]=t[i])}),e};d.isArray=xl||function(e){return Xr.call(e)==="[object Array]"};d.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch{return!1}};d.isArguments=function(e){return!!(e&&Yn.call(e,"callee"))};d.toArray=function(e){return e?e.toArray?e.toArray():d.isArray(e)||d.isArguments(e)?Nt.call(e):d.values(e):[]};d.map=function(e,t,i){if(Ws&&e.map===Ws)return e.map(t,i);var s=[];return d.each(e,function(u){s.push(t.call(i,u))}),s};d.keys=function(e){var t=[];return e===null||d.each(e,function(i,s){t[t.length]=s}),t};d.values=function(e){var t=[];return e===null||d.each(e,function(i){t[t.length]=i}),t};d.include=function(e,t){var i=!1;return e===null?i:$s&&e.indexOf===$s?e.indexOf(t)!=-1:(d.each(e,function(s){if(i||(i=s===t))return ao}),i)};d.includes=function(e,t){return e.indexOf(t)!==-1};d.inherit=function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e};d.isObject=function(e){return e===Object(e)&&!d.isArray(e)};d.isEmptyObject=function(e){if(d.isObject(e)){for(var t in e)if(Yn.call(e,t))return!1;return!0}return!1};d.isUndefined=function(e){return e===void 0};d.isString=function(e){return Xr.call(e)=="[object String]"};d.isDate=function(e){return Xr.call(e)=="[object Date]"};d.isNumber=function(e){return Xr.call(e)=="[object Number]"};d.isElement=function(e){return!!(e&&e.nodeType===1)};d.encodeDates=function(e){return d.each(e,function(t,i){d.isDate(t)?e[i]=d.formatDate(t):d.isObject(t)&&(e[i]=d.encodeDates(t))}),e};d.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()};d.formatDate=function(e){function t(i){return i<10?"0"+i:i}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())};d.strip_empty_properties=function(e){var t={};return d.each(e,function(i,s){d.isString(i)&&i.length>0&&(t[s]=i)}),t};d.truncate=function(e,t){var i;return typeof e=="string"?i=e.slice(0,t):d.isArray(e)?(i=[],d.each(e,function(s){i.push(d.truncate(s,t))})):d.isObject(e)?(i={},d.each(e,function(s,u){i[u]=d.truncate(s,t)})):i=e,i};d.JSONEncode=function(){return function(e){var t=e,i=function(u){var l=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return l.lastIndex=0,l.test(u)?'"'+u.replace(l,function(_){var h=p[_];return typeof h=="string"?h:"\\u"+("0000"+_.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+u+'"'},s=function(u,l){var p="",_="    ",h=0,b="",g="",E=0,w=p,x=[],C=l[u];switch(C&&typeof C=="object"&&typeof C.toJSON=="function"&&(C=C.toJSON(u)),typeof C){case"string":return i(C);case"number":return isFinite(C)?String(C):"null";case"boolean":case"null":return String(C);case"object":if(!C)return"null";if(p+=_,x=[],Xr.apply(C)==="[object Array]"){for(E=C.length,h=0;h<E;h+=1)x[h]=s(h,C)||"null";return g=x.length===0?"[]":p?`[
`+p+x.join(`,
`+p)+`
`+w+"]":"["+x.join(",")+"]",p=w,g}for(b in C)Yn.call(C,b)&&(g=s(b,C),g&&x.push(i(b)+(p?": ":":")+g));return g=x.length===0?"{}":p?"{"+x.join(",")+w+"}":"{"+x.join(",")+"}",p=w,g}};return s("",{"":t})}}();d.JSONDecode=function(){var e,t,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},s,u=function(x){var C=new SyntaxError(x);throw C.at=e,C.text=s,C},l=function(x){return x&&x!==t&&u("Expected '"+x+"' instead of '"+t+"'"),t=s.charAt(e),e+=1,t},p=function(){var x,C="";for(t==="-"&&(C="-",l("-"));t>="0"&&t<="9";)C+=t,l();if(t===".")for(C+=".";l()&&t>="0"&&t<="9";)C+=t;if(t==="e"||t==="E")for(C+=t,l(),(t==="-"||t==="+")&&(C+=t,l());t>="0"&&t<="9";)C+=t,l();if(x=+C,!isFinite(x))u("Bad number");else return x},_=function(){var x,C,O="",L;if(t==='"')for(;l();){if(t==='"')return l(),O;if(t==="\\")if(l(),t==="u"){for(L=0,C=0;C<4&&(x=parseInt(l(),16),!!isFinite(x));C+=1)L=L*16+x;O+=String.fromCharCode(L)}else if(typeof i[t]=="string")O+=i[t];else break;else O+=t}u("Bad string")},h=function(){for(;t&&t<=" ";)l()},b=function(){switch(t){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}u('Unexpected "'+t+'"')},g,E=function(){var x=[];if(t==="["){if(l("["),h(),t==="]")return l("]"),x;for(;t;){if(x.push(g()),h(),t==="]")return l("]"),x;l(","),h()}}u("Bad array")},w=function(){var x,C={};if(t==="{"){if(l("{"),h(),t==="}")return l("}"),C;for(;t;){if(x=_(),h(),l(":"),Object.hasOwnProperty.call(C,x)&&u('Duplicate key "'+x+'"'),C[x]=g(),h(),t==="}")return l("}"),C;l(","),h()}}u("Bad object")};return g=function(){switch(h(),t){case"{":return w();case"[":return E();case'"':return _();case"-":return p();default:return t>="0"&&t<="9"?p():b()}},function(x){var C;return s=x,e=0,t=" ",C=g(),h(),t&&u("Syntax error"),C}}();d.base64Encode=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i,s,u,l,p,_,h,b,g=0,E=0,w="",x=[];if(!e)return e;e=d.utf8Encode(e);do i=e.charCodeAt(g++),s=e.charCodeAt(g++),u=e.charCodeAt(g++),b=i<<16|s<<8|u,l=b>>18&63,p=b>>12&63,_=b>>6&63,h=b&63,x[E++]=t.charAt(l)+t.charAt(p)+t.charAt(_)+t.charAt(h);while(g<e.length);switch(w=x.join(""),e.length%3){case 1:w=w.slice(0,-2)+"==";break;case 2:w=w.slice(0,-1)+"=";break}return w};d.utf8Encode=function(e){e=(e+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`);var t="",i,s,u=0,l;for(i=s=0,u=e.length,l=0;l<u;l++){var p=e.charCodeAt(l),_=null;p<128?s++:p>127&&p<2048?_=String.fromCharCode(p>>6|192,p&63|128):_=String.fromCharCode(p>>12|224,p>>6&63|128,p&63|128),_!==null&&(s>i&&(t+=e.substring(i,s)),t+=_,i=s=l+1)}return s>i&&(t+=e.substring(i,e.length)),t};d.UUID=function(){var e=function(){var s=1*new Date,u;if(ne.performance&&ne.performance.now)u=ne.performance.now();else for(u=0;s==1*new Date;)u++;return s.toString(16)+Math.floor(u).toString(16)},t=function(){return Math.random().toString(16).replace(".","")},i=function(){var s=ft,u,l,p=[],_=0;function h(b,g){var E,w=0;for(E=0;E<g.length;E++)w|=p[E]<<E*8;return b^w}for(u=0;u<s.length;u++)l=s.charCodeAt(u),p.unshift(l&255),p.length>=4&&(_=h(_,p),p=[]);return p.length>0&&(_=h(_,p)),_.toString(16)};return function(){var s=(qn.height*qn.width).toString(16);return e()+"-"+t()+"-"+i()+"-"+s+"-"+e()}}();var zs=["ahrefsbot","ahrefssiteaudit","baiduspider","bingbot","bingpreview","chrome-lighthouse","facebookexternal","petalbot","pinterest","screaming frog","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];d.isBlockedUA=function(e){var t;for(e=e.toLowerCase(),t=0;t<zs.length;t++)if(e.indexOf(zs[t])!==-1)return!0;return!1};d.HTTPBuildQuery=function(e,t){var i,s,u=[];return d.isUndefined(t)&&(t="&"),d.each(e,function(l,p){i=encodeURIComponent(l.toString()),s=encodeURIComponent(p),u[u.length]=s+"="+i}),u.join(t)};d.getQueryParam=function(e,t){t=t.replace(/[[]/g,"\\[").replace(/[\]]/g,"\\]");var i="[\\?&]"+t+"=([^&#]*)",s=new RegExp(i),u=s.exec(e);if(u===null||u&&typeof u[1]!="string"&&u[1].length)return"";var l=u[1];try{l=decodeURIComponent(l)}catch{he.error("Skipping decoding for malformed query param: "+l)}return l.replace(/\+/g," ")};d.cookie={get:function(e){for(var t=e+"=",i=be.cookie.split(";"),s=0;s<i.length;s++){for(var u=i[s];u.charAt(0)==" ";)u=u.substring(1,u.length);if(u.indexOf(t)===0)return decodeURIComponent(u.substring(t.length,u.length))}return null},parse:function(e){var t;try{t=d.JSONDecode(d.cookie.get(e))||{}}catch{}return t},set_seconds:function(e,t,i,s,u,l,p){var _="",h="",b="";if(p)_="; domain="+p;else if(s){var g=Vs(be.location.hostname);_=g?"; domain=."+g:""}if(i){var E=new Date;E.setTime(E.getTime()+i*1e3),h="; expires="+E.toGMTString()}l&&(u=!0,b="; SameSite=None"),u&&(b+="; secure"),be.cookie=e+"="+encodeURIComponent(t)+h+"; path=/"+_+b},set:function(e,t,i,s,u,l,p){var _="",h="",b="";if(p)_="; domain="+p;else if(s){var g=Vs(be.location.hostname);_=g?"; domain=."+g:""}if(i){var E=new Date;E.setTime(E.getTime()+i*24*60*60*1e3),h="; expires="+E.toGMTString()}l&&(u=!0,b="; SameSite=None"),u&&(b+="; secure");var w=e+"="+encodeURIComponent(t)+h+"; path=/"+_+b;return be.cookie=w,w},remove:function(e,t,i){d.cookie.set(e,"",-1,t,!1,!1,i)}};var Yi=null,jn=function(e,t){if(Yi!==null&&!t)return Yi;var i=!0;try{e=e||window.localStorage;var s="__mplss_"+po(8),u="xyz";e.setItem(s,u),e.getItem(s)!==u&&(i=!1),e.removeItem(s)}catch{i=!1}return Yi=i,i};d.localStorage={is_supported:function(e){var t=jn(null,e);return t||he.error("localStorage unsupported; falling back to cookie store"),t},error:function(e){he.error("localStorage error: "+e)},get:function(e){try{return window.localStorage.getItem(e)}catch(t){d.localStorage.error(t)}return null},parse:function(e){try{return d.JSONDecode(d.localStorage.get(e))||{}}catch{}return null},set:function(e,t){try{window.localStorage.setItem(e,t)}catch(i){d.localStorage.error(i)}},remove:function(e){try{window.localStorage.removeItem(e)}catch(t){d.localStorage.error(t)}}};d.register_event=function(){var e=function(s,u,l,p,_){if(!s){he.error("No valid element provided to register_event");return}if(s.addEventListener&&!p)s.addEventListener(u,l,!!_);else{var h="on"+u,b=s[h];s[h]=t(s,l,b)}};function t(s,u,l){var p=function(_){if(_=_||i(window.event),!!_){var h=!0,b,g;return d.isFunction(l)&&(b=l(_)),g=u.call(s,_),(b===!1||g===!1)&&(h=!1),h}};return p}function i(s){return s&&(s.preventDefault=i.preventDefault,s.stopPropagation=i.stopPropagation),s}return i.preventDefault=function(){this.returnValue=!1},i.stopPropagation=function(){this.cancelBubble=!0},e}();var Il=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');d.dom_query=function(){function e(u){return u.all?u.all:u.getElementsByTagName("*")}var t=/[\t\r\n]/g;function i(u,l){var p=" "+l+" ";return(" "+u.className+" ").replace(t," ").indexOf(p)>=0}function s(u){if(!be.getElementsByTagName)return[];var l=u.split(" "),p,_,h,b,g,E,w,x,C,O,L=[be];for(E=0;E<l.length;E++){if(p=l[E].replace(/^\s+/,"").replace(/\s+$/,""),p.indexOf("#")>-1){_=p.split("#"),h=_[0];var H=_[1],$=be.getElementById(H);if(!$||h&&$.nodeName.toLowerCase()!=h)return[];L=[$];continue}if(p.indexOf(".")>-1){_=p.split("."),h=_[0];var K=_[1];for(h||(h="*"),b=[],g=0,w=0;w<L.length;w++)for(h=="*"?C=e(L[w]):C=L[w].getElementsByTagName(h),x=0;x<C.length;x++)b[g++]=C[x];for(L=[],O=0,w=0;w<b.length;w++)b[w].className&&d.isString(b[w].className)&&i(b[w],K)&&(L[O++]=b[w]);continue}var Y=p.match(Il);if(Y){h=Y[1];var re=Y[2],Oe=Y[3],me=Y[4];for(h||(h="*"),b=[],g=0,w=0;w<L.length;w++)for(h=="*"?C=e(L[w]):C=L[w].getElementsByTagName(h),x=0;x<C.length;x++)b[g++]=C[x];L=[],O=0;var se;switch(Oe){case"=":se=function(ge){return ge.getAttribute(re)==me};break;case"~":se=function(ge){return ge.getAttribute(re).match(new RegExp("\\b"+me+"\\b"))};break;case"|":se=function(ge){return ge.getAttribute(re).match(new RegExp("^"+me+"-?"))};break;case"^":se=function(ge){return ge.getAttribute(re).indexOf(me)===0};break;case"$":se=function(ge){return ge.getAttribute(re).lastIndexOf(me)==ge.getAttribute(re).length-me.length};break;case"*":se=function(ge){return ge.getAttribute(re).indexOf(me)>-1};break;default:se=function(ge){return ge.getAttribute(re)}}for(L=[],O=0,w=0;w<b.length;w++)se(b[w])&&(L[O++]=b[w]);continue}for(h=p,b=[],g=0,w=0;w<L.length;w++)for(C=L[w].getElementsByTagName(h),x=0;x<C.length;x++)b[g++]=C[x];L=b}return L}return function(u){return d.isElement(u)?[u]:d.isObject(u)&&!d.isUndefined(u.length)?u:s.call(this,u)}}();var kl=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","utm_id","utm_source_platform","utm_campaign_id","utm_creative_format","utm_marketing_tactic"],Ol=["dclid","fbclid","gclid","ko_click_id","li_fat_id","msclkid","sccid","ttclid","twclid","wbraid"];d.info={campaignParams:function(e){var t="",i={};return d.each(kl,function(s){t=d.getQueryParam(be.URL,s),t.length?i[s]=t:e!==void 0&&(i[s]=e)}),i},clickParams:function(){var e="",t={};return d.each(Ol,function(i){e=d.getQueryParam(be.URL,i),e.length&&(t[i]=e)}),t},marketingParams:function(){return d.extend(d.info.campaignParams(),d.info.clickParams())},searchEngine:function(e){return e.search("https?://(.*)google.([^/?]*)")===0?"google":e.search("https?://(.*)bing.com")===0?"bing":e.search("https?://(.*)yahoo.com")===0?"yahoo":e.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null},searchInfo:function(e){var t=d.info.searchEngine(e),i=t!="yahoo"?"q":"p",s={};if(t!==null){s.$search_engine=t;var u=d.getQueryParam(e,i);u.length&&(s.mp_keyword=u)}return s},browser:function(e,t,i){return t=t||"",i||d.includes(e," OPR/")?d.includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":d.includes(e,"IEMobile")||d.includes(e,"WPDesktop")?"Internet Explorer Mobile":d.includes(e,"SamsungBrowser/")?"Samsung Internet":d.includes(e,"Edge")||d.includes(e,"Edg/")?"Microsoft Edge":d.includes(e,"FBIOS")?"Facebook Mobile":d.includes(e,"Chrome")?"Chrome":d.includes(e,"CriOS")?"Chrome iOS":d.includes(e,"UCWEB")||d.includes(e,"UCBrowser")?"UC Browser":d.includes(e,"FxiOS")?"Firefox iOS":d.includes(t,"Apple")?d.includes(e,"Mobile")?"Mobile Safari":"Safari":d.includes(e,"Android")?"Android Mobile":d.includes(e,"Konqueror")?"Konqueror":d.includes(e,"Firefox")?"Firefox":d.includes(e,"MSIE")||d.includes(e,"Trident/")?"Internet Explorer":d.includes(e,"Gecko")?"Mozilla":""},browserVersion:function(e,t,i){var s=d.info.browser(e,t,i),u={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/},l=u[s];if(l===void 0)return null;var p=e.match(l);return p?parseFloat(p[p.length-2]):null},os:function(){var e=ft;return/Windows/i.test(e)?/Phone/.test(e)||/WPDesktop/.test(e)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":/CrOS/.test(e)?"Chrome OS":""},device:function(e){return/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Android/.test(e)?"Android":""},referringDomain:function(e){var t=e.split("/");return t.length>=3?t[2]:""},currentUrl:function(){return ne.location.href},properties:function(e){return typeof e!="object"&&(e={}),d.extend(d.strip_empty_properties({$os:d.info.os(),$browser:d.info.browser(ft,Pt.vendor,Tn),$referrer:be.referrer,$referring_domain:d.info.referringDomain(be.referrer),$device:d.info.device(ft)}),{$current_url:d.info.currentUrl(),$browser_version:d.info.browserVersion(ft,Pt.vendor,Tn),$screen_height:qn.height,$screen_width:qn.width,mp_lib:"web",$lib_version:gt.LIB_VERSION,$insert_id:po(),time:d.timestamp()/1e3},d.strip_empty_properties(e))},people_properties:function(){return d.extend(d.strip_empty_properties({$os:d.info.os(),$browser:d.info.browser(ft,Pt.vendor,Tn)}),{$browser_version:d.info.browserVersion(ft,Pt.vendor,Tn)})},mpPageViewProperties:function(){return d.strip_empty_properties({current_page_title:be.title,current_domain:ne.location.hostname,current_url_path:ne.location.pathname,current_url_protocol:ne.location.protocol,current_url_search:ne.location.search})}};var po=function(e){var t=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return e?t.substring(0,e):t},Cl=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,Ml=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,Vs=function(e){var t=Ml,i=e.split("."),s=i[i.length-1];(s.length>4||s==="com"||s==="org")&&(t=Cl);var u=e.match(t);return u?u[0]:""},Tl=function(){var e=ne.navigator.onLine;return d.isUndefined(e)||e},$n=null,Wn=null;typeof JSON<"u"&&($n=JSON.stringify,Wn=JSON.parse);$n=$n||d.JSONEncode;Wn=Wn||d.JSONDecode;d.toArray=d.toArray;d.isObject=d.isObject;d.JSONEncode=d.JSONEncode;d.JSONDecode=d.JSONDecode;d.isBlockedUA=d.isBlockedUA;d.isEmptyObject=d.isEmptyObject;d.info=d.info;d.info.device=d.info.device;d.info.browser=d.info.browser;d.info.browserVersion=d.info.browserVersion;d.info.properties=d.info.properties;var Al="__mp_opt_in_out_";function Rl(e,t){Ia(!0,e,t)}function Dl(e,t){Ia(!1,e,t)}function Nl(e,t){return xa(e,t)==="1"}function Ea(e,t){if(Bl(t))return he.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var i=xa(e,t)==="0";return i&&he.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),i}function Lt(e){return _o(e,function(t){return this.get_config(t)})}function Ft(e){return _o(e,function(t){return this._get_config(t)})}function br(e){return _o(e,function(t){return this._get_config(t)})}function Pl(e,t){t=t||{},ho(t).remove(mo(e,t),!!t.crossSubdomainCookie,t.cookieDomain)}function ho(e){return e=e||{},e.persistenceType==="localStorage"?d.localStorage:d.cookie}function mo(e,t){return t=t||{},(t.persistencePrefix||Al)+e}function xa(e,t){return ho(t).get(mo(e,t))}function Bl(e){if(e&&e.ignoreDnt)return!1;var t=e&&e.window||ne,i=t.navigator||{},s=!1;return d.each([i.doNotTrack,i.msDoNotTrack,t.doNotTrack],function(u){d.includes([!0,1,"1","yes"],u)&&(s=!0)}),s}function Ia(e,t,i){if(!d.isString(t)||!t.length){he.error("gdpr."+(e?"optIn":"optOut")+" called with an invalid token");return}i=i||{},ho(i).set(mo(t,i),e?1:0,d.isNumber(i.cookieExpiration)?i.cookieExpiration:null,!!i.crossSubdomainCookie,!!i.secureCookie,!!i.crossSiteCookie,i.cookieDomain),i.track&&e&&i.track(i.trackEventName||"$opt_in",i.trackProperties,{send_immediately:!0})}function _o(e,t){return function(){var i=!1;try{var s=t.call(this,"token"),u=t.call(this,"ignore_dnt"),l=t.call(this,"opt_out_tracking_persistence_type"),p=t.call(this,"opt_out_tracking_cookie_prefix"),_=t.call(this,"window");s&&(i=Ea(s,{ignoreDnt:u,persistenceType:l,persistencePrefix:p,window:_}))}catch(b){he.error("Unexpected error when checking tracking opt-out status: "+b)}if(!i)return e.apply(this,arguments);var h=arguments[arguments.length-1];typeof h=="function"&&h(0)}}var Ll=Xn("lock"),ka=function(e,t){t=t||{},this.storageKey=e,this.storage=t.storage||window.localStorage,this.pollIntervalMS=t.pollIntervalMS||100,this.timeoutMS=t.timeoutMS||2e3};ka.prototype.withLock=function(e,t,i){!i&&typeof t!="function"&&(i=t,t=null);var s=i||new Date().getTime()+"|"+Math.random(),u=new Date().getTime(),l=this.storageKey,p=this.pollIntervalMS,_=this.timeoutMS,h=this.storage,b=l+":X",g=l+":Y",E=l+":Z",w=function($){t&&t($)},x=function($){if(new Date().getTime()-u>_){Ll.error("Timeout waiting for mutex on "+l+"; clearing lock. ["+s+"]"),h.removeItem(E),h.removeItem(g),L();return}setTimeout(function(){try{$()}catch(K){w(K)}},p*(Math.random()+.1))},C=function($,K){$()?K():x(function(){C($,K)})},O=function(){var $=h.getItem(g);if($&&$!==s)return!1;if(h.setItem(g,s),h.getItem(g)===s)return!0;if(!jn(h,!0))throw new Error("localStorage support dropped while acquiring lock");return!1},L=function(){h.setItem(b,s),C(O,function(){if(h.getItem(b)===s){H();return}x(function(){if(h.getItem(g)!==s){L();return}C(function(){return!h.getItem(E)},H)})})},H=function(){h.setItem(E,"1");try{e()}finally{h.removeItem(E),h.getItem(g)===s&&h.removeItem(g),h.getItem(b)===s&&h.removeItem(b)}};try{if(jn(h,!0))L();else throw new Error("localStorage support check failed")}catch($){w($)}};var Hs=Xn("batch"),Ut=function(e,t){t=t||{},this.storageKey=e,this.storage=t.storage||window.localStorage,this.reportError=t.errorReporter||d.bind(Hs.error,Hs),this.lock=new ka(e,{storage:this.storage}),this.usePersistence=t.usePersistence,this.pid=t.pid||null,this.memQueue=[]};Ut.prototype.enqueue=function(e,t,i){var s={id:po(),flushAfter:new Date().getTime()+t*2,payload:e};this.usePersistence?this.lock.withLock(d.bind(function(){var l;try{var p=this.readFromStorage();p.push(s),l=this.saveToStorage(p),l&&this.memQueue.push(s)}catch{this.reportError("Error enqueueing item",e),l=!1}i&&i(l)},this),d.bind(function(l){this.reportError("Error acquiring storage lock",l),i&&i(!1)},this),this.pid):(this.memQueue.push(s),i&&i(!0))};Ut.prototype.fillBatch=function(e){var t=this.memQueue.slice(0,e);if(this.usePersistence&&t.length<e){var i=this.readFromStorage();if(i.length){var s={};d.each(t,function(p){s[p.id]=!0});for(var u=0;u<i.length;u++){var l=i[u];if(new Date().getTime()>l.flushAfter&&!s[l.id]&&(l.orphaned=!0,t.push(l),t.length>=e))break}}}return t};var Gs=function(e,t){var i=[];return d.each(e,function(s){s.id&&!t[s.id]&&i.push(s)}),i};Ut.prototype.removeItemsByID=function(e,t){var i={};if(d.each(e,function(u){i[u]=!0}),this.memQueue=Gs(this.memQueue,i),!this.usePersistence)t&&t(!0);else{var s=d.bind(function(){var u;try{var l=this.readFromStorage();if(l=Gs(l,i),u=this.saveToStorage(l),u){l=this.readFromStorage();for(var p=0;p<l.length;p++){var _=l[p];if(_.id&&i[_.id])return this.reportError("Item not removed from storage"),!1}}}catch{this.reportError("Error removing items",e),u=!1}return u},this);this.lock.withLock(function(){var l=s();t&&t(l)},d.bind(function(l){var p=!1;if(this.reportError("Error acquiring storage lock",l),!jn(this.storage,!0)&&(p=s(),!p))try{this.storage.removeItem(this.storageKey)}catch(_){this.reportError("Error clearing queue",_)}t&&t(p)},this),this.pid)}};var Ys=function(e,t){var i=[];return d.each(e,function(s){var u=s.id;if(u in t){var l=t[u];l!==null&&(s.payload=l,i.push(s))}else i.push(s)}),i};Ut.prototype.updatePayloads=function(e,t){this.memQueue=Ys(this.memQueue,e),this.usePersistence?this.lock.withLock(d.bind(function(){var s;try{var u=this.readFromStorage();u=Ys(u,e),s=this.saveToStorage(u)}catch{this.reportError("Error updating items",e),s=!1}t&&t(s)},this),d.bind(function(s){this.reportError("Error acquiring storage lock",s),t&&t(!1)},this),this.pid):t&&t(!0)};Ut.prototype.readFromStorage=function(){var e;try{e=this.storage.getItem(this.storageKey),e&&(e=Wn(e),d.isArray(e)||(this.reportError("Invalid storage entry:",e),e=null))}catch(t){this.reportError("Error retrieving queue",t),e=null}return e||[]};Ut.prototype.saveToStorage=function(e){try{return this.storage.setItem(this.storageKey,$n(e)),!0}catch(t){return this.reportError("Error saving queue",t),!1}};Ut.prototype.clear=function(){this.memQueue=[],this.usePersistence&&this.storage.removeItem(this.storageKey)};var Fl=10*60*1e3,$r=Xn("batch"),rt=function(e,t){this.errorReporter=t.errorReporter,this.queue=new Ut(e,{errorReporter:d.bind(this.reportError,this),storage:t.storage,usePersistence:t.usePersistence}),this.libConfig=t.libConfig,this.sendRequest=t.sendRequestFunc,this.beforeSendHook=t.beforeSendHook,this.stopAllBatching=t.stopAllBatchingFunc,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart,this.consecutiveRemovalFailures=0,this.itemIdsSentSuccessfully={},this.flushOnlyOnInterval=t.flushOnlyOnInterval||!1};rt.prototype.enqueue=function(e,t){this.queue.enqueue(e,this.flushInterval,t)};rt.prototype.start=function(){this.stopped=!1,this.consecutiveRemovalFailures=0,this.flush()};rt.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)};rt.prototype.clear=function(){this.queue.clear()};rt.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size};rt.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)};rt.prototype.scheduleFlush=function(e){this.flushInterval=e,this.stopped||(this.timeoutID=setTimeout(d.bind(function(){this.stopped||this.flush()},this),this.flushInterval))};rt.prototype.flush=function(e){try{if(this.requestInProgress){$r.log("Flush: Request already in progress");return}e=e||{};var t=this.libConfig.batch_request_timeout_ms,i=new Date().getTime(),s=this.batchSize,u=this.queue.fillBatch(s),l=u.length===s,p=[],_={};if(d.each(u,function(g){var E=g.payload;if(this.beforeSendHook&&!g.orphaned&&(E=this.beforeSendHook(E)),E){E.event&&E.properties&&(E.properties=d.extend({},E.properties,{mp_sent_by_lib_version:gt.LIB_VERSION}));var w=!0,x=g.id;x?(this.itemIdsSentSuccessfully[x]||0)>5&&(this.reportError("[dupe] item ID sent too many times, not sending",{item:g,batchSize:u.length,timesSent:this.itemIdsSentSuccessfully[x]}),w=!1):this.reportError("[dupe] found item with no ID",{item:g}),w&&p.push(E)}_[g.id]=E},this),p.length<1){this.resetFlush();return}this.requestInProgress=!0;var h=d.bind(function(g){this.requestInProgress=!1;try{var E=!1;if(e.unloading)this.queue.updatePayloads(_);else if(d.isObject(g)&&g.error==="timeout"&&new Date().getTime()-i>=t)this.reportError("Network timeout; retrying"),this.flush();else if(d.isObject(g)&&(g.httpStatusCode>=500||g.httpStatusCode===429||g.httpStatusCode<=0&&!Tl()||g.error==="timeout")){var w=this.flushInterval*2;g.retryAfter&&(w=parseInt(g.retryAfter,10)*1e3||w),w=Math.min(Fl,w),this.reportError("Error; retry in "+w+" ms"),this.scheduleFlush(w)}else if(d.isObject(g)&&g.httpStatusCode===413)if(u.length>1){var x=Math.max(1,Math.floor(s/2));this.batchSize=Math.min(this.batchSize,x,u.length-1),this.reportError("413 response; reducing batch size to "+this.batchSize),this.resetFlush()}else this.reportError("Single-event request too large; dropping",u),this.resetBatchSize(),E=!0;else E=!0;E&&(this.queue.removeItemsByID(d.map(u,function(C){return C.id}),d.bind(function(C){C?(this.consecutiveRemovalFailures=0,this.flushOnlyOnInterval&&!l?this.resetFlush():this.flush()):(this.reportError("Failed to remove items from queue"),++this.consecutiveRemovalFailures>5?(this.reportError("Too many queue failures; disabling batching system."),this.stopAllBatching()):this.resetFlush())},this)),d.each(u,d.bind(function(C){var O=C.id;O?(this.itemIdsSentSuccessfully[O]=this.itemIdsSentSuccessfully[O]||0,this.itemIdsSentSuccessfully[O]++,this.itemIdsSentSuccessfully[O]>5&&this.reportError("[dupe] item ID sent too many times",{item:C,batchSize:u.length,timesSent:this.itemIdsSentSuccessfully[O]})):this.reportError("[dupe] found item with no ID while removing",{item:C})},this)))}catch(C){this.reportError("Error handling API response",C),this.resetFlush()}},this),b={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:t};e.unloading&&(b.transport="sendBeacon"),$r.log("MIXPANEL REQUEST:",p),this.sendRequest(p,b,h)}catch(g){this.reportError("Error flushing request queue",g),this.resetFlush()}};rt.prototype.reportError=function(e,t){if($r.error.apply($r.error,arguments),this.errorReporter)try{t instanceof Error||(t=new Error(e)),this.errorReporter(e,t)}catch(i){$r.error(i)}};var Qt=Xn("recorder"),Xs=ne.CompressionStream,Ul={batch_size:1e3,batch_flush_interval_ms:10*1e3,batch_request_timeout_ms:90*1e3,batch_autostart:!0},Kl=new Set([lt.MouseMove,lt.MouseInteraction,lt.Scroll,lt.ViewportResize,lt.Input,lt.TouchMove,lt.MediaInteraction,lt.Drag,lt.Selection]);function ql(e){return e.type===wa.IncrementalSnapshot&&Kl.has(e.data.source)}var nt=function(e){this._mixpanel=e,this._stopRecording=null,this.recEvents=[],this.seqNo=0,this.replayId=null,this.replayStartTime=null,this.sendBatchId=null,this.idleTimeoutId=null,this.maxTimeoutId=null,this.recordMaxMs=jr,this.recordMinMs=0,this._initBatcher()};nt.prototype._initBatcher=function(){this.batcher=new rt("__mprec",{libConfig:Ul,sendRequestFunc:d.bind(this.flushEventsWithOptOut,this),errorReporter:d.bind(this.reportError,this),flushOnlyOnInterval:!0,usePersistence:!1})};nt.prototype.get_config=function(e){return this._mixpanel.get_config(e)};nt.prototype.startRecording=function(e){if(this._stopRecording!==null){Qt.log("Recording already in progress, skipping startRecording.");return}this.recordMaxMs=this.get_config("record_max_ms"),this.recordMaxMs>jr&&(this.recordMaxMs=jr,Qt.critical("record_max_ms cannot be greater than "+jr+"ms. Capping value.")),this.recordMinMs=this.get_config("record_min_ms"),this.recordMinMs>Vi&&(this.recordMinMs=Vi,Qt.critical("record_min_ms cannot be greater than "+Vi+"ms. Capping value.")),this.recEvents=[],this.seqNo=0,this.replayStartTime=new Date().getTime(),this.replayId=d.UUID(),e||this.recordMinMs>0?this.batcher.stop():this.batcher.start();var t=d.bind(function(){clearTimeout(this.idleTimeoutId),this.idleTimeoutId=setTimeout(d.bind(function(){Qt.log("Idle timeout reached, restarting recording."),this.resetRecording()},this),this.get_config("record_idle_timeout_ms"))},this),i=this.get_config("record_block_selector");(i===""||i===null)&&(i=void 0),this._stopRecording=Yr({emit:d.bind(function(s){this.batcher.enqueue(s),ql(s)&&(this.batcher.stopped&&new Date().getTime()-this.replayStartTime>=this.recordMinMs&&this.batcher.start(),t())},this),blockClass:this.get_config("record_block_class"),blockSelector:i,collectFonts:this.get_config("record_collect_fonts"),inlineImages:this.get_config("record_inline_images"),maskAllInputs:!0,maskTextClass:this.get_config("record_mask_text_class"),maskTextSelector:this.get_config("record_mask_text_selector")}),t(),this.maxTimeoutId=setTimeout(d.bind(this.resetRecording,this),this.recordMaxMs)};nt.prototype.resetRecording=function(){this.stopRecording(),this.startRecording(!0)};nt.prototype.stopRecording=function(){this._stopRecording!==null&&(this._stopRecording(),this._stopRecording=null),this.batcher.stopped?this.batcher.clear():(this.batcher.flush(),this.batcher.stop()),this.replayId=null,clearTimeout(this.idleTimeoutId),clearTimeout(this.maxTimeoutId)};nt.prototype.flushEventsWithOptOut=function(e,t,i){this._flushEvents(e,t,i,d.bind(this._onOptOut,this))};nt.prototype._onOptOut=function(e){e===0&&(this.recEvents=[],this.stopRecording())};nt.prototype._sendRequest=function(e,t,i,s){var u=d.bind(function(l,p){l.status===200&&this.replayId===e&&this.seqNo++,s({status:0,httpStatusCode:l.status,responseBody:p,retryAfter:l.headers.get("Retry-After")})},this);ne.fetch(this.get_config("api_host")+"/"+this.get_config("api_routes").record+"?"+new URLSearchParams(t),{method:"POST",headers:{Authorization:"Basic "+btoa(this.get_config("token")+":"),"Content-Type":"application/octet-stream"},body:i}).then(function(l){l.json().then(function(p){u(l,p)}).catch(function(p){s({error:p})})}).catch(function(l){s({error:l,httpStatusCode:0})})};nt.prototype._flushEvents=Lt(function(e,t,i){let s=e.length;if(s>0){var u=this.replayId,l=e[0].timestamp;(this.seqNo===0||!this.replayStartTime)&&(this.seqNo!==0&&this.reportError("Replay start time not set but seqNo is not 0. Using current batch start time as a fallback."),this.replayStartTime=l);var p=e[s-1].timestamp-this.replayStartTime,_={distinct_id:String(this._mixpanel.get_distinct_id()),seq:this.seqNo,batch_start_time:l/1e3,replay_id:u,replay_length_ms:p,replay_start_time:this.replayStartTime/1e3},h=d.JSONEncode(e),b=this._mixpanel.get_property("$device_id");b&&(_.$device_id=b);var g=this._mixpanel.get_property("$user_id");if(g&&(_.$user_id=g),Xs){var E=new Blob([h],{type:"application/json"}).stream(),w=E.pipeThrough(new Xs("gzip"));new Response(w).blob().then(d.bind(function(x){_.format="gzip",this._sendRequest(u,_,x,i)},this))}else _.format="body",this._sendRequest(u,_,h,i)}});nt.prototype.reportError=function(e,t){Qt.error.apply(Qt.error,arguments);try{!t&&!(e instanceof Error)&&(e=new Error(e)),this.get_config("error_reporter")(e,t)}catch(i){Qt.error(i)}};ne.__mp_recorder=nt;var wt=function(){};wt.prototype.create_properties=function(){};wt.prototype.event_handler=function(){};wt.prototype.after_track_handler=function(){};wt.prototype.init=function(e){return this.mp=e,this};wt.prototype.track=function(e,t,i,s){var u=this,l=d.dom_query(e);if(l.length===0){he.error("The DOM query ("+e+") returned 0 elements");return}return d.each(l,function(p){d.register_event(p,this.override_event,function(_){var h={},b=u.create_properties(i,this),g=u.mp.get_config("track_links_timeout");u.event_handler(_,this,h),window.setTimeout(u.track_callback(s,b,h,!0),g),u.mp.track(t,b,u.track_callback(s,b,h))})},this),!0};wt.prototype.track_callback=function(e,t,i,s){s=s||!1;var u=this;return function(){i.callback_fired||(i.callback_fired=!0,!(e&&e(s,t)===!1)&&u.after_track_handler(t,i,s))}};wt.prototype.create_properties=function(e,t){var i;return typeof e=="function"?i=e(t):i=d.extend({},e),i};var yr=function(){this.override_event="click"};d.inherit(yr,wt);yr.prototype.create_properties=function(e,t){var i=yr.superclass.create_properties.apply(this,arguments);return t.href&&(i.url=t.href),i};yr.prototype.event_handler=function(e,t,i){i.new_tab=e.which===2||e.metaKey||e.ctrlKey||t.target==="_blank",i.href=t.href,i.new_tab||e.preventDefault()};yr.prototype.after_track_handler=function(e,t){t.new_tab||setTimeout(function(){window.location=t.href},0)};var Qn=function(){this.override_event="submit"};d.inherit(Qn,wt);Qn.prototype.event_handler=function(e,t,i){i.element=t,e.preventDefault()};Qn.prototype.after_track_handler=function(e,t){setTimeout(function(){t.element.submit()},0)};var Bt="$set",vr="$set_once",tt="$unset",Zt="$add",dt="$append",er="$union",bt="$remove",jl="$delete",Oa={set_action:function(e,t){var i={},s={};return d.isObject(e)?d.each(e,function(u,l){this._is_reserved_property(l)||(s[l]=u)},this):s[e]=t,i[Bt]=s,i},unset_action:function(e){var t={},i=[];return d.isArray(e)||(e=[e]),d.each(e,function(s){this._is_reserved_property(s)||i.push(s)},this),t[tt]=i,t},set_once_action:function(e,t){var i={},s={};return d.isObject(e)?d.each(e,function(u,l){this._is_reserved_property(l)||(s[l]=u)},this):s[e]=t,i[vr]=s,i},union_action:function(e,t){var i={},s={};return d.isObject(e)?d.each(e,function(u,l){this._is_reserved_property(l)||(s[l]=d.isArray(u)?u:[u])},this):s[e]=d.isArray(t)?t:[t],i[er]=s,i},append_action:function(e,t){var i={},s={};return d.isObject(e)?d.each(e,function(u,l){this._is_reserved_property(l)||(s[l]=u)},this):s[e]=t,i[dt]=s,i},remove_action:function(e,t){var i={},s={};return d.isObject(e)?d.each(e,function(u,l){this._is_reserved_property(l)||(s[l]=u)},this):s[e]=t,i[bt]=s,i},delete_action:function(){var e={};return e[jl]="",e}},Ee=function(){};d.extend(Ee.prototype,Oa);Ee.prototype._init=function(e,t,i){this._mixpanel=e,this._group_key=t,this._group_id=i};Ee.prototype.set=br(function(e,t,i){var s=this.set_action(e,t);return d.isObject(e)&&(i=t),this._send_request(s,i)});Ee.prototype.set_once=br(function(e,t,i){var s=this.set_once_action(e,t);return d.isObject(e)&&(i=t),this._send_request(s,i)});Ee.prototype.unset=br(function(e,t){var i=this.unset_action(e);return this._send_request(i,t)});Ee.prototype.union=br(function(e,t,i){d.isObject(e)&&(i=t);var s=this.union_action(e,t);return this._send_request(s,i)});Ee.prototype.delete=br(function(e){var t=this.delete_action();return this._send_request(t,e)});Ee.prototype.remove=br(function(e,t,i){var s=this.remove_action(e,t);return this._send_request(s,i)});Ee.prototype._send_request=function(e,t){e.$group_key=this._group_key,e.$group_id=this._group_id,e.$token=this._get_config("token");var i=d.encodeDates(e);return this._mixpanel._track_or_batch({type:"groups",data:i,endpoint:this._get_config("api_host")+"/"+this._get_config("api_routes").groups,batcher:this._mixpanel.request_batchers.groups},t)};Ee.prototype._is_reserved_property=function(e){return e==="$group_key"||e==="$group_id"};Ee.prototype._get_config=function(e){return this._mixpanel.get_config(e)};Ee.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id};Ee.prototype.remove=Ee.prototype.remove;Ee.prototype.set=Ee.prototype.set;Ee.prototype.set_once=Ee.prototype.set_once;Ee.prototype.union=Ee.prototype.union;Ee.prototype.unset=Ee.prototype.unset;Ee.prototype.toString=Ee.prototype.toString;var ie=function(){};d.extend(ie.prototype,Oa);ie.prototype._init=function(e){this._mixpanel=e};ie.prototype.set=Ft(function(e,t,i){var s=this.set_action(e,t);return d.isObject(e)&&(i=t),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(document.referrer),s[Bt]=d.extend({},d.info.people_properties(),s[Bt]),this._send_request(s,i)});ie.prototype.set_once=Ft(function(e,t,i){var s=this.set_once_action(e,t);return d.isObject(e)&&(i=t),this._send_request(s,i)});ie.prototype.unset=Ft(function(e,t){var i=this.unset_action(e);return this._send_request(i,t)});ie.prototype.increment=Ft(function(e,t,i){var s={},u={};return d.isObject(e)?(d.each(e,function(l,p){if(!this._is_reserved_property(p))if(isNaN(parseFloat(l))){he.error("Invalid increment value passed to mixpanel.people.increment - must be a number");return}else u[p]=l},this),i=t):(d.isUndefined(t)&&(t=1),u[e]=t),s[Zt]=u,this._send_request(s,i)});ie.prototype.append=Ft(function(e,t,i){d.isObject(e)&&(i=t);var s=this.append_action(e,t);return this._send_request(s,i)});ie.prototype.remove=Ft(function(e,t,i){d.isObject(e)&&(i=t);var s=this.remove_action(e,t);return this._send_request(s,i)});ie.prototype.union=Ft(function(e,t,i){d.isObject(e)&&(i=t);var s=this.union_action(e,t);return this._send_request(s,i)});ie.prototype.track_charge=Ft(function(e,t,i){if(!d.isNumber(e)&&(e=parseFloat(e),isNaN(e))){he.error("Invalid value passed to mixpanel.people.track_charge - must be a number");return}return this.append("$transactions",d.extend({$amount:e},t),i)});ie.prototype.clear_charges=function(e){return this.set("$transactions",[],e)};ie.prototype.delete_user=function(){if(!this._identify_called()){he.error("mixpanel.people.delete_user() requires you to call identify() first");return}var e={$delete:this._mixpanel.get_distinct_id()};return this._send_request(e)};ie.prototype.toString=function(){return this._mixpanel.toString()+".people"};ie.prototype._send_request=function(e,t){e.$token=this._get_config("token"),e.$distinct_id=this._mixpanel.get_distinct_id();var i=this._mixpanel.get_property("$device_id"),s=this._mixpanel.get_property("$user_id"),u=this._mixpanel.get_property("$had_persisted_distinct_id");i&&(e.$device_id=i),s&&(e.$user_id=s),u&&(e.$had_persisted_distinct_id=u);var l=d.encodeDates(e);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:l,endpoint:this._get_config("api_host")+"/"+this._get_config("api_routes").engage,batcher:this._mixpanel.request_batchers.people},t):(this._enqueue(e),d.isUndefined(t)||(this._get_config("verbose")?t({status:-1,error:null}):t(-1)),d.truncate(l,255))};ie.prototype._get_config=function(e){return this._mixpanel.get_config(e)};ie.prototype._identify_called=function(){return this._mixpanel._flags.identify_called===!0};ie.prototype._enqueue=function(e){Bt in e?this._mixpanel.persistence._add_to_people_queue(Bt,e):vr in e?this._mixpanel.persistence._add_to_people_queue(vr,e):tt in e?this._mixpanel.persistence._add_to_people_queue(tt,e):Zt in e?this._mixpanel.persistence._add_to_people_queue(Zt,e):dt in e?this._mixpanel.persistence._add_to_people_queue(dt,e):bt in e?this._mixpanel.persistence._add_to_people_queue(bt,e):er in e?this._mixpanel.persistence._add_to_people_queue(er,e):he.error("Invalid call to _enqueue():",e)};ie.prototype._flush_one_queue=function(e,t,i,s){var u=this,l=d.extend({},this._mixpanel.persistence.load_queue(e)),p=l;!d.isUndefined(l)&&d.isObject(l)&&!d.isEmptyObject(l)&&(u._mixpanel.persistence._pop_from_people_queue(e,l),u._mixpanel.persistence.save(),s&&(p=s(l)),t.call(u,p,function(_,h){_===0&&u._mixpanel.persistence._add_to_people_queue(e,l),d.isUndefined(i)||i(_,h)}))};ie.prototype._flush=function(e,t,i,s,u,l,p){var _=this;this._flush_one_queue(Bt,this.set,e),this._flush_one_queue(vr,this.set_once,s),this._flush_one_queue(tt,this.unset,l,function(L){return d.keys(L)}),this._flush_one_queue(Zt,this.increment,t),this._flush_one_queue(er,this.union,u);var h=this._mixpanel.persistence.load_queue(dt);if(!d.isUndefined(h)&&d.isArray(h)&&h.length)for(var b,g=function(L,H){L===0&&_._mixpanel.persistence._add_to_people_queue(dt,b),d.isUndefined(i)||i(L,H)},E=h.length-1;E>=0;E--)h=this._mixpanel.persistence.load_queue(dt),b=h.pop(),_._mixpanel.persistence.save(),d.isEmptyObject(b)||_.append(b,g);var w=this._mixpanel.persistence.load_queue(bt);if(!d.isUndefined(w)&&d.isArray(w)&&w.length)for(var x,C=function(L,H){L===0&&_._mixpanel.persistence._add_to_people_queue(bt,x),d.isUndefined(p)||p(L,H)},O=w.length-1;O>=0;O--)w=this._mixpanel.persistence.load_queue(bt),x=w.pop(),_._mixpanel.persistence.save(),d.isEmptyObject(x)||_.remove(x,C)};ie.prototype._is_reserved_property=function(e){return e==="$distinct_id"||e==="$token"||e==="$device_id"||e==="$user_id"||e==="$had_persisted_distinct_id"};ie.prototype.set=ie.prototype.set;ie.prototype.set_once=ie.prototype.set_once;ie.prototype.unset=ie.prototype.unset;ie.prototype.increment=ie.prototype.increment;ie.prototype.append=ie.prototype.append;ie.prototype.remove=ie.prototype.remove;ie.prototype.union=ie.prototype.union;ie.prototype.track_charge=ie.prototype.track_charge;ie.prototype.clear_charges=ie.prototype.clear_charges;ie.prototype.delete_user=ie.prototype.delete_user;ie.prototype.toString=ie.prototype.toString;var yo="__mps",vo="__mpso",go="__mpus",bo="__mpa",wo="__mpap",So="__mpr",Eo="__mpu",Ca="$people_distinct_id",zn="__alias",Vr="__timers",$l=[yo,vo,go,bo,wo,So,Eo,Ca,zn,Vr],ae=function(e){this.props={},this.campaign_params_saved=!1,e.persistence_name?this.name="mp_"+e.persistence_name:this.name="mp_"+e.token+"_mixpanel";var t=e.persistence;t!=="cookie"&&t!=="localStorage"&&(he.critical("Unknown persistence type "+t+"; falling back to cookie"),t=e.persistence="cookie"),t==="localStorage"&&d.localStorage.is_supported()?this.storage=d.localStorage:this.storage=d.cookie,this.load(),this.update_config(e),this.upgrade(),this.save()};ae.prototype.properties=function(){var e={};return this.load(),d.each(this.props,function(t,i){d.include($l,i)||(e[i]=t)}),e};ae.prototype.load=function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=d.extend({},e))}};ae.prototype.upgrade=function(){var e,t;this.storage===d.localStorage?(e=d.cookie.parse(this.name),d.cookie.remove(this.name),d.cookie.remove(this.name,!0),e&&this.register_once(e)):this.storage===d.cookie&&(t=d.localStorage.parse(this.name),d.localStorage.remove(this.name),t&&this.register_once(t))};ae.prototype.save=function(){this.disabled||this.storage.set(this.name,d.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain)};ae.prototype.load_prop=function(e){return this.load(),this.props[e]};ae.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)};ae.prototype.clear=function(){this.remove(),this.props={}};ae.prototype.register_once=function(e,t,i){return d.isObject(e)?(typeof t>"u"&&(t="None"),this.expire_days=typeof i>"u"?this.default_expiry:i,this.load(),d.each(e,function(s,u){(!this.props.hasOwnProperty(u)||this.props[u]===t)&&(this.props[u]=s)},this),this.save(),!0):!1};ae.prototype.register=function(e,t){return d.isObject(e)?(this.expire_days=typeof t>"u"?this.default_expiry:t,this.load(),d.extend(this.props,e),this.save(),!0):!1};ae.prototype.unregister=function(e){this.load(),e in this.props&&(delete this.props[e],this.save())};ae.prototype.update_search_keyword=function(e){this.register(d.info.searchInfo(e))};ae.prototype.update_referrer_info=function(e){this.register_once({$initial_referrer:e||"$direct",$initial_referring_domain:d.info.referringDomain(e)||"$direct"},"")};ae.prototype.get_referrer_info=function(){return d.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})};ae.prototype.update_config=function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cookie_domain(e.cookie_domain),this.set_cross_site(e.cross_site_cookie),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)};ae.prototype.set_disabled=function(e){this.disabled=e,this.disabled?this.remove():this.save()};ae.prototype.set_cookie_domain=function(e){e!==this.cookie_domain&&(this.remove(),this.cookie_domain=e,this.save())};ae.prototype.set_cross_site=function(e){e!==this.cross_site&&(this.cross_site=e,this.remove(),this.save())};ae.prototype.set_cross_subdomain=function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())};ae.prototype.get_cross_subdomain=function(){return this.cross_subdomain};ae.prototype.set_secure=function(e){e!==this.secure&&(this.secure=!!e,this.remove(),this.save())};ae.prototype._add_to_people_queue=function(e,t){var i=this._get_queue_key(e),s=t[e],u=this._get_or_create_queue(Bt),l=this._get_or_create_queue(vr),p=this._get_or_create_queue(tt),_=this._get_or_create_queue(Zt),h=this._get_or_create_queue(er),b=this._get_or_create_queue(bt,[]),g=this._get_or_create_queue(dt,[]);i===yo?(d.extend(u,s),this._pop_from_people_queue(Zt,s),this._pop_from_people_queue(er,s),this._pop_from_people_queue(tt,s)):i===vo?(d.each(s,function(E,w){w in l||(l[w]=E)}),this._pop_from_people_queue(tt,s)):i===go?d.each(s,function(E){d.each([u,l,_,h],function(w){E in w&&delete w[E]}),d.each(g,function(w){E in w&&delete w[E]}),p[E]=!0}):i===bo?(d.each(s,function(E,w){w in u?u[w]+=E:(w in _||(_[w]=0),_[w]+=E)},this),this._pop_from_people_queue(tt,s)):i===Eo?(d.each(s,function(E,w){d.isArray(E)&&(w in h||(h[w]=[]),h[w]=h[w].concat(E))}),this._pop_from_people_queue(tt,s)):i===So?(b.push(s),this._pop_from_people_queue(dt,s)):i===wo&&(g.push(s),this._pop_from_people_queue(tt,s)),he.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),he.log(t),this.save()};ae.prototype._pop_from_people_queue=function(e,t){var i=this.props[this._get_queue_key(e)];d.isUndefined(i)||d.each(t,function(s,u){e===dt||e===bt?d.each(i,function(l){l[u]===s&&delete l[u]}):delete i[u]},this)};ae.prototype.load_queue=function(e){return this.load_prop(this._get_queue_key(e))};ae.prototype._get_queue_key=function(e){if(e===Bt)return yo;if(e===vr)return vo;if(e===tt)return go;if(e===Zt)return bo;if(e===dt)return wo;if(e===bt)return So;if(e===er)return Eo;he.error("Invalid queue:",e)};ae.prototype._get_or_create_queue=function(e,t){var i=this._get_queue_key(e);return t=d.isUndefined(t)?{}:t,this.props[i]||(this.props[i]=t)};ae.prototype.set_event_timer=function(e,t){var i=this.load_prop(Vr)||{};i[e]=t,this.props[Vr]=i,this.save()};ae.prototype.remove_event_timer=function(e){var t=this.load_prop(Vr)||{},i=t[e];return d.isUndefined(i)||(delete this.props[Vr][e],this.save()),i};var xo,Ma=function(e,t){throw new Error(e+" not available in this build.")},Be,Ta=0,Wl=1,zl=function(e){return e},Hr=function(){},He="mixpanel",Aa="base64",Vl="json",Io="$device:",mr=ne.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,Ra=!mr&&ft.indexOf("MSIE")===-1&&ft.indexOf("Mozilla")===-1,Vn=null;Pt.sendBeacon&&(Vn=function(){return Pt.sendBeacon.apply(Pt,arguments)});var Da={track:"track/",engage:"engage/",groups:"groups/",record:"record/"},Qs={api_host:"https://api-js.mixpanel.com",api_routes:Da,api_method:"POST",api_transport:"XHR",api_payload_format:Aa,app_host:"https://mixpanel.com",cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,error_reporter:Hr,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:Hr,mp_loader:null,track_marketing:!0,track_pageview:!1,skip_first_touch_marketing:!1,store_google:!0,stop_utm_persistence:!1,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},ignore_dnt:!1,batch_requests:!0,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{},record_block_class:new RegExp("^(mp-block|fs-exclude|amp-block|rr-block|ph-no-capture)$"),record_block_selector:"img, video",record_collect_fonts:!1,record_idle_timeout_ms:30*60*1e3,record_inline_images:!1,record_mask_text_class:new RegExp("^(mp-mask|fs-mask|amp-mask|rr-mask|ph-mask)$"),record_mask_text_selector:"*",record_max_ms:jr,record_min_ms:0,record_sessions_percent:0,recorder_src:"https://cdn.mxpnl.com/libs/mixpanel-recorder.min.js"},Na=!1,N=function(){},uo=function(e,t,i){var s,u=i===He?Be:Be[i];if(u&&xo===Ta)s=u;else{if(u&&!d.isArray(u)){he.error("You have already initialized "+i);return}s=new N}if(s._cached_groups={},s._init(e,t,i),s.people=new ie,s.people._init(s),!s.get_config("skip_first_touch_marketing")){var l=d.info.campaignParams(null),p={},_=!1;d.each(l,function(h,b){p["initial_"+b]=h,h&&(_=!0)}),_&&s.people.set_once(p)}return gt.DEBUG=gt.DEBUG||s.get_config("debug"),!d.isUndefined(u)&&d.isArray(u)&&(s._execute_array.call(s.people,u.people),s._execute_array(u)),s};N.prototype.init=function(e,t,i){if(d.isUndefined(i)){this.report_error("You must name your new library: init(token, config, name)");return}if(i===He){this.report_error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");return}var s=uo(e,t,i);return Be[i]=s,s._loaded(),s};N.prototype._init=function(e,t,i){t=t||{},this.__loaded=!0,this.config={};var s={};if(!("api_payload_format"in t)){var u=t.api_host||Qs.api_host;u.match(/\.mixpanel\.com/)&&(s.api_payload_format=Vl)}if(this.set_config(d.extend({},Qs,s,t,{name:i,token:e,callback_fn:(i===He?i:He+"."+i)+"._jsc"})),this._jsc=Hr,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests){if(!d.localStorage.is_supported(!0)||!mr)this._batch_requests=!1,he.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support"),d.each(this.get_batcher_configs(),function(h){he.log("Clearing batch queue "+h.queue_key),d.localStorage.remove(h.queue_key)});else if(this.init_batchers(),Vn&&ne.addEventListener){var l=d.bind(function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})},this);ne.addEventListener("pagehide",function(h){h.persisted&&l()}),ne.addEventListener("visibilitychange",function(){be.visibilityState==="hidden"&&l()})}}this.persistence=this.cookie=new ae(this.config),this.unpersisted_superprops={},this._gdpr_init();var p=d.UUID();this.get_distinct_id()||this.register_once({distinct_id:Io+p,$device_id:p},"");var _=this.get_config("track_pageview");_&&this._init_url_change_tracking(_),this.get_config("record_sessions_percent")>0&&Math.random()*100<=this.get_config("record_sessions_percent")&&this.start_session_recording()};N.prototype.start_session_recording=Lt(function(){if(!ne.MutationObserver){he.critical("Browser does not support MutationObserver; skipping session recording");return}var e=d.bind(function(){this._recorder=this._recorder||new ne.__mp_recorder(this),this._recorder.startRecording()},this);d.isUndefined(ne.__mp_recorder)?Ma(this.get_config("recorder_src"),e):e()});N.prototype.stop_session_recording=function(){this._recorder?this._recorder.stopRecording():he.critical("Session recorder module not loaded")};N.prototype.get_session_recording_properties=function(){var e={};if(this._recorder){var t=this._recorder.replayId;t&&(e.$mp_replay_id=t)}return e};N.prototype._loaded=function(){if(this.get_config("loaded")(this),this._set_default_superprops(),this.people.set_once(this.persistence.get_referrer_info()),this.get_config("store_google")&&this.get_config("stop_utm_persistence")){var e=d.info.campaignParams(null);d.each(e,function(t,i){this.unregister(i)}.bind(this))}};N.prototype._set_default_superprops=function(){this.persistence.update_search_keyword(be.referrer),this.get_config("store_google")&&!this.get_config("stop_utm_persistence")&&this.register(d.info.campaignParams()),this.get_config("save_referrer")&&this.persistence.update_referrer_info(be.referrer)};N.prototype._dom_loaded=function(){d.each(this.__dom_loaded_queue,function(e){this._track_dom.apply(this,e)},this),this.has_opted_out_tracking()||d.each(this.__request_queue,function(e){this._send_request.apply(this,e)},this),delete this.__dom_loaded_queue,delete this.__request_queue};N.prototype._track_dom=function(e,t){if(this.get_config("img"))return this.report_error("You can't use DOM tracking functions with img = true."),!1;if(!Na)return this.__dom_loaded_queue.push([e,t]),!1;var i=new e().init(this);return i.track.apply(i,t)};N.prototype._init_url_change_tracking=function(e){var t="",i=this.track_pageview();if(i&&(t=d.info.currentUrl()),d.include(["full-url","url-with-path-and-query-string","url-with-path"],e)){ne.addEventListener("popstate",function(){ne.dispatchEvent(new Event("mp_locationchange"))}),ne.addEventListener("hashchange",function(){ne.dispatchEvent(new Event("mp_locationchange"))});var s=ne.history.pushState;typeof s=="function"&&(ne.history.pushState=function(l,p,_){s.call(ne.history,l,p,_),ne.dispatchEvent(new Event("mp_locationchange"))});var u=ne.history.replaceState;typeof u=="function"&&(ne.history.replaceState=function(l,p,_){u.call(ne.history,l,p,_),ne.dispatchEvent(new Event("mp_locationchange"))}),ne.addEventListener("mp_locationchange",function(){var l=d.info.currentUrl(),p=!1;if(e==="full-url"?p=l!==t:e==="url-with-path-and-query-string"?p=l.split("#")[0]!==t.split("#")[0]:e==="url-with-path"&&(p=l.split("#")[0].split("?")[0]!==t.split("#")[0].split("?")[0]),p){var _=this.track_pageview();_&&(t=l)}}.bind(this))}};N.prototype._prepare_callback=function(e,t){if(d.isUndefined(e))return null;if(mr){var i=function(p){e(p,t)};return i}else{var s=this._jsc,u=""+Math.floor(Math.random()*1e8),l=this.get_config("callback_fn")+"["+u+"]";return s[u]=function(p){delete s[u],e(p,t)},l}};N.prototype._send_request=function(e,t,i,s){var u=!0;if(Ra)return this.__request_queue.push(arguments),u;var l={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},p=null;!s&&(d.isFunction(i)||typeof i=="string")&&(s=i,i=null),i=d.extend(l,i||{}),mr||(i.method="GET");var _=i.method==="POST",h=Vn&&_&&i.transport.toLowerCase()==="sendbeacon",b=i.verbose;t.verbose&&(b=!0),this.get_config("test")&&(t.test=1),b&&(t.verbose=1),this.get_config("img")&&(t.img=1),mr||(s?t.callback=s:(b||this.get_config("test"))&&(t.callback="(function(){})")),t.ip=this.get_config("ip")?1:0,t._=new Date().getTime().toString(),_&&(p="data="+encodeURIComponent(t.data),delete t.data),e+="?"+d.HTTPBuildQuery(t);var g=this;if("img"in t){var E=be.createElement("img");E.src=e,be.body.appendChild(E)}else if(h){try{u=Vn(e,p)}catch(H){g.report_error(H),u=!1}try{s&&s(u?1:0)}catch(H){g.report_error(H)}}else if(mr)try{var w=new XMLHttpRequest;w.open(i.method,e,!0);var x=this.get_config("xhr_headers");if(_&&(x["Content-Type"]="application/x-www-form-urlencoded"),d.each(x,function(H,$){w.setRequestHeader($,H)}),i.timeout_ms&&typeof w.timeout<"u"){w.timeout=i.timeout_ms;var C=new Date().getTime()}w.withCredentials=!0,w.onreadystatechange=function(){if(w.readyState===4)if(w.status===200){if(s)if(b){var H;try{H=d.JSONDecode(w.responseText)}catch(Y){if(g.report_error(Y),i.ignore_json_errors)H=w.responseText;else return}s(H)}else s(Number(w.responseText))}else{var $;if(w.timeout&&!w.status&&new Date().getTime()-C>=w.timeout?$="timeout":$="Bad HTTP status: "+w.status+" "+w.statusText,g.report_error($),s)if(b){var K=w.responseHeaders||{};s({status:0,httpStatusCode:w.status,error:$,retryAfter:K["Retry-After"]})}else s(0)}},w.send(p)}catch(H){g.report_error(H),u=!1}else{var O=be.createElement("script");O.type="text/javascript",O.async=!0,O.defer=!0,O.src=e;var L=be.getElementsByTagName("script")[0];L.parentNode.insertBefore(O,L)}return u};N.prototype._execute_array=function(e){var t,i=[],s=[],u=[];d.each(e,function(p){p&&(t=p[0],d.isArray(t)?u.push(p):typeof p=="function"?p.call(this):d.isArray(p)&&t==="alias"?i.push(p):d.isArray(p)&&t.indexOf("track")!==-1&&typeof this[t]=="function"?u.push(p):s.push(p))},this);var l=function(p,_){d.each(p,function(h){if(d.isArray(h[0])){var b=_;d.each(h,function(g){b=b[g[0]].apply(b,g.slice(1))})}else this[h[0]].apply(this,h.slice(1))},_)};l(i,this),l(s,this),l(u,this)};N.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events};N.prototype.get_batcher_configs=function(){var e="__mpq_"+this.get_config("token"),t=this.get_config("api_routes");return this._batcher_configs=this._batcher_configs||{events:{type:"events",endpoint:"/"+t.track,queue_key:e+"_ev"},people:{type:"people",endpoint:"/"+t.engage,queue_key:e+"_pp"},groups:{type:"groups",endpoint:"/"+t.groups,queue_key:e+"_gr"}},this._batcher_configs};N.prototype.init_batchers=function(){if(!this.are_batchers_initialized()){var e=d.bind(function(i){return new rt(i.queue_key,{libConfig:this.config,errorReporter:this.get_config("error_reporter"),sendRequestFunc:d.bind(function(s,u,l){this._send_request(this.get_config("api_host")+i.endpoint,this._encode_data_for_request(s),u,this._prepare_callback(l,s))},this),beforeSendHook:d.bind(function(s){return this._run_hook("before_send_"+i.type,s)},this),stopAllBatchingFunc:d.bind(this.stop_batch_senders,this),usePersistence:!0})},this),t=this.get_batcher_configs();this.request_batchers={events:e(t.events),people:e(t.people),groups:e(t.groups)}}this.get_config("batch_autostart")&&this.start_batch_senders()};N.prototype.start_batch_senders=function(){this._batchers_were_started=!0,this.are_batchers_initialized()&&(this._batch_requests=!0,d.each(this.request_batchers,function(e){e.start()}))};N.prototype.stop_batch_senders=function(){this._batch_requests=!1,d.each(this.request_batchers,function(e){e.stop(),e.clear()})};N.prototype.push=function(e){this._execute_array([e])};N.prototype.disable=function(e){typeof e>"u"?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(e)};N.prototype._encode_data_for_request=function(e){var t=d.JSONEncode(e);return this.get_config("api_payload_format")===Aa&&(t=d.base64Encode(t)),{data:t}};N.prototype._track_or_batch=function(e,t){var i=d.truncate(e.data,255),s=e.endpoint,u=e.batcher,l=e.should_send_immediately,p=e.send_request_options||{};t=t||Hr;var _=!0,h=d.bind(function(){return p.skip_hooks||(i=this._run_hook("before_send_"+e.type,i)),i?(he.log("MIXPANEL REQUEST:"),he.log(i),this._send_request(s,this._encode_data_for_request(i),p,this._prepare_callback(t,i))):null},this);return this._batch_requests&&!l?u.enqueue(i,function(b){b?t(1,i):h()}):_=h(),_&&i};N.prototype.track=Lt(function(e,t,i,s){!s&&typeof i=="function"&&(s=i,i=null),i=i||{};var u=i.transport;u&&(i.transport=u);var l=i.send_immediately;if(typeof s!="function"&&(s=Hr),d.isUndefined(e)){this.report_error("No event name provided to mixpanel.track");return}if(this._event_is_disabled(e)){s(0);return}t=d.extend({},t),t.token=this.get_config("token");var p=this.persistence.remove_event_timer(e);if(!d.isUndefined(p)){var _=new Date().getTime()-p;t.$duration=parseFloat((_/1e3).toFixed(3))}this._set_default_superprops();var h=this.get_config("track_marketing")?d.info.marketingParams():{};t=d.extend({},d.info.properties({mp_loader:this.get_config("mp_loader")}),h,this.persistence.properties(),this.unpersisted_superprops,this.get_session_recording_properties(),t);var b=this.get_config("property_blacklist");d.isArray(b)?d.each(b,function(w){delete t[w]}):this.report_error("Invalid value for property_blacklist config: "+b);var g={event:e,properties:t},E=this._track_or_batch({type:"events",data:g,endpoint:this.get_config("api_host")+"/"+this.get_config("api_routes").track,batcher:this.request_batchers.events,should_send_immediately:l,send_request_options:i},s);return E});N.prototype.set_group=Lt(function(e,t,i){d.isArray(t)||(t=[t]);var s={};return s[e]=t,this.register(s),this.people.set(e,t,i)});N.prototype.add_group=Lt(function(e,t,i){var s=this.get_property(e),u={};return s===void 0?(u[e]=[t],this.register(u)):s.indexOf(t)===-1&&(s.push(t),u[e]=s,this.register(u)),this.people.union(e,t,i)});N.prototype.remove_group=Lt(function(e,t,i){var s=this.get_property(e);if(s!==void 0){var u=s.indexOf(t);u>-1&&(s.splice(u,1),this.register({group_key:s})),s.length===0&&this.unregister(e)}return this.people.remove(e,t,i)});N.prototype.track_with_groups=Lt(function(e,t,i,s){var u=d.extend({},t||{});return d.each(i,function(l,p){l!=null&&(u[p]=l)}),this.track(e,u,s)});N.prototype._create_map_key=function(e,t){return e+"_"+JSON.stringify(t)};N.prototype._remove_group_from_cache=function(e,t){delete this._cached_groups[this._create_map_key(e,t)]};N.prototype.get_group=function(e,t){var i=this._create_map_key(e,t),s=this._cached_groups[i];return(s===void 0||s._group_key!==e||s._group_id!==t)&&(s=new Ee,s._init(this,e,t),this._cached_groups[i]=s),s};N.prototype.track_pageview=Lt(function(e,t){typeof e!="object"&&(e={}),t=t||{};var i=t.event_name||"$mp_web_page_view",s=d.extend(d.info.mpPageViewProperties(),d.info.campaignParams(),d.info.clickParams()),u=d.extend({},s,e);return this.track(i,u)});N.prototype.track_links=function(){return this._track_dom.call(this,yr,arguments)};N.prototype.track_forms=function(){return this._track_dom.call(this,Qn,arguments)};N.prototype.time_event=function(e){if(d.isUndefined(e)){this.report_error("No event name provided to mixpanel.time_event");return}this._event_is_disabled(e)||this.persistence.set_event_timer(e,new Date().getTime())};var Hl={persistent:!0},ko=function(e){var t;return d.isObject(e)?t=e:d.isUndefined(e)?t={}:t={days:e},d.extend({},Hl,t)};N.prototype.register=function(e,t){var i=ko(t);i.persistent?this.persistence.register(e,i.days):d.extend(this.unpersisted_superprops,e)};N.prototype.register_once=function(e,t,i){var s=ko(i);s.persistent?this.persistence.register_once(e,t,s.days):(typeof t>"u"&&(t="None"),d.each(e,function(u,l){(!this.unpersisted_superprops.hasOwnProperty(l)||this.unpersisted_superprops[l]===t)&&(this.unpersisted_superprops[l]=u)},this))};N.prototype.unregister=function(e,t){t=ko(t),t.persistent?this.persistence.unregister(e):delete this.unpersisted_superprops[e]};N.prototype._register_single=function(e,t){var i={};i[e]=t,this.register(i)};N.prototype.identify=function(e,t,i,s,u,l,p,_){var h=this.get_distinct_id();if(e&&h!==e){if(typeof e=="string"&&e.indexOf(Io)===0)return this.report_error("distinct_id cannot have $device: prefix"),-1;this.register({$user_id:e})}if(!this.get_property("$device_id")){var b=h;this.register_once({$had_persisted_distinct_id:!0,$device_id:b},"")}e!==h&&e!==this.get_property(zn)&&(this.unregister(zn),this.register({distinct_id:e})),this._flags.identify_called=!0,this.people._flush(t,i,s,u,l,p,_),e!==h&&this.track("$identify",{distinct_id:e,$anon_distinct_id:h},{skip_hooks:!0})};N.prototype.reset=function(){this.persistence.clear(),this._flags.identify_called=!1;var e=d.UUID();this.register_once({distinct_id:Io+e,$device_id:e},"")};N.prototype.get_distinct_id=function(){return this.get_property("distinct_id")};N.prototype.alias=function(e,t){if(e===this.get_property(Ca))return this.report_error("Attempting to create alias for existing People user - aborting."),-2;var i=this;return d.isUndefined(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(zn,e),this.track("$create_alias",{alias:e,distinct_id:t},{skip_hooks:!0},function(){i.identify(e)})):(this.report_error("alias matches current distinct_id - skipping api call."),this.identify(e),-1)};N.prototype.name_tag=function(e){this._register_single("mp_name_tag",e)};N.prototype.set_config=function(e){if(d.isObject(e)){d.extend(this.config,e);var t=e.batch_size;t&&d.each(this.request_batchers,function(i){i.resetBatchSize()}),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),gt.DEBUG=gt.DEBUG||this.get_config("debug")}};N.prototype.get_config=function(e){return this.config[e]};N.prototype._run_hook=function(e){var t=(this.config.hooks[e]||zl).apply(this,Nt.call(arguments,1));return typeof t>"u"&&(this.report_error(e+" hook did not return a value"),t=null),t};N.prototype.get_property=function(e){return this.persistence.load_prop([e])};N.prototype.toString=function(){var e=this.get_config("name");return e!==He&&(e=He+"."+e),e};N.prototype._event_is_disabled=function(e){return d.isBlockedUA(ft)||this._flags.disable_all_events||d.include(this.__disabled_events,e)};N.prototype._gdpr_init=function(){var e=this.get_config("opt_out_tracking_persistence_type")==="localStorage";e&&d.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):!this.has_opted_in_tracking()&&(this.get_config("opt_out_tracking_by_default")||d.cookie.get("mp_optout"))&&(d.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))};N.prototype._gdpr_update_persistence=function(e){var t;if(e&&e.clear_persistence)t=!0;else if(e&&e.enable_persistence)t=!1;else return;!this.get_config("disable_persistence")&&this.persistence.disabled!==t&&this.persistence.set_disabled(t),t?this.stop_batch_senders():this._batchers_were_started&&this.start_batch_senders()};N.prototype._gdpr_call_func=function(e,t){return t=d.extend({track:d.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},t),d.localStorage.is_supported()||(t.persistence_type="cookie"),e(this.get_config("token"),{track:t.track,trackEventName:t.track_event_name,trackProperties:t.track_properties,persistenceType:t.persistence_type,persistencePrefix:t.cookie_prefix,cookieDomain:t.cookie_domain,cookieExpiration:t.cookie_expiration,crossSiteCookie:t.cross_site_cookie,crossSubdomainCookie:t.cross_subdomain_cookie,secureCookie:t.secure_cookie,ignoreDnt:t.ignore_dnt})};N.prototype.opt_in_tracking=function(e){e=d.extend({enable_persistence:!0},e),this._gdpr_call_func(Rl,e),this._gdpr_update_persistence(e)};N.prototype.opt_out_tracking=function(e){e=d.extend({clear_persistence:!0,delete_user:!0},e),e.delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(Dl,e),this._gdpr_update_persistence(e)};N.prototype.has_opted_in_tracking=function(e){return this._gdpr_call_func(Nl,e)};N.prototype.has_opted_out_tracking=function(e){return this._gdpr_call_func(Ea,e)};N.prototype.clear_opt_in_out_tracking=function(e){e=d.extend({enable_persistence:!0},e),this._gdpr_call_func(Pl,e),this._gdpr_update_persistence(e)};N.prototype.report_error=function(e,t){he.error.apply(he.error,arguments);try{!t&&!(e instanceof Error)&&(e=new Error(e)),this.get_config("error_reporter")(e,t)}catch(i){he.error(i)}};N.prototype.init=N.prototype.init;N.prototype.reset=N.prototype.reset;N.prototype.disable=N.prototype.disable;N.prototype.time_event=N.prototype.time_event;N.prototype.track=N.prototype.track;N.prototype.track_links=N.prototype.track_links;N.prototype.track_forms=N.prototype.track_forms;N.prototype.track_pageview=N.prototype.track_pageview;N.prototype.register=N.prototype.register;N.prototype.register_once=N.prototype.register_once;N.prototype.unregister=N.prototype.unregister;N.prototype.identify=N.prototype.identify;N.prototype.alias=N.prototype.alias;N.prototype.name_tag=N.prototype.name_tag;N.prototype.set_config=N.prototype.set_config;N.prototype.get_config=N.prototype.get_config;N.prototype.get_property=N.prototype.get_property;N.prototype.get_distinct_id=N.prototype.get_distinct_id;N.prototype.toString=N.prototype.toString;N.prototype.opt_out_tracking=N.prototype.opt_out_tracking;N.prototype.opt_in_tracking=N.prototype.opt_in_tracking;N.prototype.has_opted_out_tracking=N.prototype.has_opted_out_tracking;N.prototype.has_opted_in_tracking=N.prototype.has_opted_in_tracking;N.prototype.clear_opt_in_out_tracking=N.prototype.clear_opt_in_out_tracking;N.prototype.get_group=N.prototype.get_group;N.prototype.set_group=N.prototype.set_group;N.prototype.add_group=N.prototype.add_group;N.prototype.remove_group=N.prototype.remove_group;N.prototype.track_with_groups=N.prototype.track_with_groups;N.prototype.start_batch_senders=N.prototype.start_batch_senders;N.prototype.stop_batch_senders=N.prototype.stop_batch_senders;N.prototype.start_session_recording=N.prototype.start_session_recording;N.prototype.stop_session_recording=N.prototype.stop_session_recording;N.prototype.get_session_recording_properties=N.prototype.get_session_recording_properties;N.prototype.DEFAULT_API_ROUTES=Da;ae.prototype.properties=ae.prototype.properties;ae.prototype.update_search_keyword=ae.prototype.update_search_keyword;ae.prototype.update_referrer_info=ae.prototype.update_referrer_info;ae.prototype.get_cross_subdomain=ae.prototype.get_cross_subdomain;ae.prototype.clear=ae.prototype.clear;var hr={},Gl=function(){d.each(hr,function(e,t){t!==He&&(Be[t]=e)}),Be._=d},Yl=function(){Be.init=function(e,t,i){if(i)return Be[i]||(Be[i]=hr[i]=uo(e,t,i),Be[i]._loaded()),Be[i];var s=Be;hr[He]?s=hr[He]:e&&(s=uo(e,t,He),s._loaded(),hr[He]=s),Be=s,xo===Wl&&(ne[He]=Be),Gl()}},Xl=function(){function e(){e.done||(e.done=!0,Na=!0,Ra=!1,d.each(hr,function(s){s._dom_loaded()}))}function t(){try{be.documentElement.doScroll("left")}catch{setTimeout(t,1);return}e()}if(be.addEventListener)be.readyState==="complete"?e():be.addEventListener("DOMContentLoaded",e,!1);else if(be.attachEvent){be.attachEvent("onreadystatechange",e);var i=!1;try{i=ne.frameElement===null}catch{}be.documentElement.doScroll&&i&&t()}d.register_event(ne,"load",e,!0)};function Ql(e){return Ma=e,xo=Ta,Be=new N,Yl(),Be.init(),Xl(),Be}function Jl(e,t){t()}var Qr=Ql(Jl);var Pf=async(e,t,i)=>{try{let s={...t,...await Ts()},{ref:u=""}=await gs.getTrafficRecordParams();if(u)s.ref=u;else{let l=new URLSearchParams(window.location.search);l.get("ref")&&(s.ref=l.get("ref"))}window.postMessage({event:"MAX_AI_MIXPANEL_TRACK",type:e,data:s}),Qr.track(e,s,i)}catch{}},Zl=()=>{ji&&Qr.init(ji,{debug:!!hs,track_pageview:!ps.includes("extension"),persistence:"localStorage"})},Bf=(e,t)=>{Zl();try{e==="identify"&&t&&Qr.identify(t),e==="reset"&&Qr.reset()}catch{}};var Pa=Ui(cc()),Oo=class{constructor(){this.runtime="client"}async postMessage(t){try{return await Pa.default.runtime.sendMessage({id:"CHROME_EXTENSION_USE_CHAT_GPT_AI_ID",event:t.event,data:{...t.data,_RUNTIME_:this.runtime}})}catch(i){return{success:!1,message:i.message,data:{}}}}destroy(){}},ef=async(e,t)=>(await new Oo().postMessage({event:"Client_useIndexedDB",data:{data:t,type:e}})).data,Ff=(e,t)=>({type:"SIFT",query:e,options:t});function Uf(e,t){let i=e.databaseName,s=[],u=l=>new Proxy(()=>{},{get:(p,_)=>(l.push({type:"get",prop:_}),_==="then"?(l.pop(),()=>new Promise(h=>{ef("IndexedDBQueryChain",{databaseName:i,tableName:t,chain:l}).then(b=>{h(b?.data)})})):u(l)),apply:(p,_,h)=>(l.push({type:"apply",args:h}),u(l))});return u(s)}var Jn=Ui(Ba(),1),La=Symbol.for("Dexie"),Zn=globalThis[La]||(globalThis[La]=Jn.default);if(Jn.default.semVer!==Zn.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Jn.default.semVer} and ${Zn.semVer}`);var{liveQuery:qf,mergeRanges:jf,rangesOverlap:$f,RangeSet:Wf,cmp:zf,Entity:Vf,PropModSymbol:Hf,PropModification:Gf,replacePrefix:Yf,add:Xf,remove:Qf}=Zn;var Jf=Zn;export{Ms as a,pf as b,Ts as c,Pf as d,Zl as e,Bf as f,Ff as g,Uf as h,Jf as i};
/*! Bundled license information:

dexie/dist/dexie.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

mixpanel-browser/dist/mixpanel.module.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
  (*! *****************************************************************************
      Copyright (c) Microsoft Corporation.
  
      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.
  
      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** *)
*/
