import{a as q}from"./BYBP4KRV.js";import{a as M}from"./2KT44S3D.js";import{a as N}from"./2HIYOEPI.js";import{A as G,Ka as L,Ua as l,d as j,e as A,f as v,q as I}from"./VE4EMEBO.js";import{d as S,k as D,l as O}from"./AUJ76673.js";import{a as m}from"./4B6UFNBQ.js";import{c as h,f as d}from"./GAV6HCJA.js";var B=h((ir,z)=>{z.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var r=document.activeElement,t=[],o=0;o<e.rangeCount;o++)t.push(e.getRangeAt(o));switch(r.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":r.blur();break;default:r=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||t.forEach(function(n){e.addRange(n)}),r&&r.focus()}}});var W=h((ar,K)=>{"use strict";var ue=B(),H={"text/plain":"Text","text/html":"Url",default:"Text"},se="Copy to clipboard: #{key}, Enter";function fe(e){var r=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,r)}function ce(e,r){var t,o,n,a,u,i,f=!1;r||(r={}),t=r.debug||!1;try{n=ue(),a=document.createRange(),u=document.getSelection(),i=document.createElement("span"),i.textContent=e,i.ariaHidden="true",i.style.all="unset",i.style.position="fixed",i.style.top=0,i.style.clip="rect(0, 0, 0, 0)",i.style.whiteSpace="pre",i.style.webkitUserSelect="text",i.style.MozUserSelect="text",i.style.msUserSelect="text",i.style.userSelect="text",i.addEventListener("copy",function(s){if(s.stopPropagation(),r.format)if(s.preventDefault(),typeof s.clipboardData>"u"){window.clipboardData.clearData();var p=H[r.format]||H.default;window.clipboardData.setData(p,e)}else s.clipboardData.clearData(),s.clipboardData.setData(r.format,e);r.onCopy&&(s.preventDefault(),r.onCopy(s.clipboardData))}),document.body.appendChild(i),a.selectNodeContents(i),u.addRange(a);var c=document.execCommand("copy");if(!c)throw new Error("copy command was unsuccessful");f=!0}catch{try{window.clipboardData.setData(r.format||"text",e),r.onCopy&&r.onCopy(window.clipboardData),f=!0}catch{o=fe("message"in r?r.message:se),window.prompt(o,e)}}finally{u&&(typeof u.removeRange=="function"?u.removeRange(a):u.removeAllRanges()),i&&document.body.removeChild(i),n()}return f}K.exports=ce});var ee=h(C=>{"use strict";function P(e){"@babel/helpers - typeof";return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},P(e)}Object.defineProperty(C,"__esModule",{value:!0});C.CopyToClipboard=void 0;var w=V(m()),le=V(W()),pe=["text","onCopy","options","children"];function V(e){return e&&e.__esModule?e:{default:e}}function X(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}function J(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?X(Object(t),!0).forEach(function(o){R(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):X(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})}return e}function me(e,r){if(e==null)return{};var t=ye(e,r),o,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],!(r.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}function ye(e,r){if(e==null)return{};var t={},o=Object.keys(e),n,a;for(a=0;a<o.length;a++)n=o[a],!(r.indexOf(n)>=0)&&(t[n]=e[n]);return t}function de(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Q(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function be(e,r,t){return r&&Q(e.prototype,r),t&&Q(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ge(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&T(e,r)}function T(e,r){return T=Object.setPrototypeOf||function(o,n){return o.__proto__=n,o},T(e,r)}function he(e){var r=Ie();return function(){var o=_(e),n;if(r){var a=_(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return ve(this,n)}}function ve(e,r){if(r&&(P(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y(e)}function Y(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_(e)}function R(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Z=function(e){ge(t,e);var r=he(t);function t(){var o;de(this,t);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return o=r.call.apply(r,[this].concat(a)),R(Y(o),"onClick",function(i){var f=o.props,c=f.text,s=f.onCopy,p=f.children,y=f.options,g=w.default.Children.only(p),te=(0,le.default)(c,y);s&&s(c,te),g&&g.props&&typeof g.props.onClick=="function"&&g.props.onClick(i)}),o}return be(t,[{key:"render",value:function(){var n=this.props,a=n.text,u=n.onCopy,i=n.options,f=n.children,c=me(n,pe),s=w.default.Children.only(f);return w.default.cloneElement(s,J(J({},c),{},{onClick:this.onClick}))}}]),t}(w.default.PureComponent);C.CopyToClipboard=Z;R(Z,"defaultProps",{onCopy:void 0,options:void 0})});var _e=h((sr,re)=>{"use strict";var we=ee(),k=we.CopyToClipboard;k.CopyToClipboard=k;re.exports=k});var x=d(m());var U=()=>{let[e,r]=D(L),{email:t,userInfo:o,isFreeUser:n}=l(),a=async(c=!1,s=!0)=>{try{s&&r(y=>({...y,loading:!0}));let p=await G.getUserGroupInfo(c);return r(y=>({...y,...p,loading:!1})),p}catch{return null}},u=e?.group_owner_email,i=(0,x.useMemo)(()=>t===u,[t,u]),f=(0,x.useMemo)(()=>!u||!t?e.members??[]:i&&e.members?e.members:[{email:u,group_role:"ADMIN"},{email:t,group_role:"MEMBER"}],[i,e.members,u,t]);return{groupId:o?.group_id,isGroupOwner:n?!1:i,isGroupMember:n?!1:!i,groupOwnerEmail:u,syncUserGroupInfo:a,members:f,...e}};var F=d(m()),oe=(e=!0)=>{let{isLogin:r}=v(),{userInfo:t,isPayingUser:o}=l(),{syncUserGroupInfo:n}=U(),a=!!t;return(0,F.useEffect)(()=>{r&&a&&o&&n(e)},[r,a,o,e]),null};var E=d(m());var ne=(e=!0)=>{let{isLogin:r}=v(),t=O(A),{syncUserInfo:o,userInfoFetchHasError:n}=l(),a=O(j);M(()=>{u()}),(0,E.useEffect)(()=>{r&&o(e)},[r,e]),q(()=>{n||(u(),o(void 0,!0))});let u=async()=>{I.checkAccessToken();let i=await I.getAuthTokens(),c=!(i?.refreshToken?I.isTokenExpired(i.refreshToken):!0)&&!!i;a(c&&i?s=>s.isLogin===c?s:{...s,isLogin:c,authTokens:i}:s=>s.isLogin===c?s:{...s,isLogin:!1,authTokens:null}),t(!0)};return(0,E.useEffect)(()=>{u()},[]),null};var $=d(m());var ie=()=>{let{t:e}=S(),{loaded:r,currentUserPlan:t,subscriptionType:o}=l();return(0,$.useMemo)(()=>{if(!r)return"";if(t.name==="free")return"Free";let n=N(t.name);switch(o){case"monthly":n+=` \xB7 ${e("package__common:monthly")}`;break;case"yearly":n+=` \xB7 ${e("package__common:yearly")}`;break;case"quarterly":n+=` \xB7 ${e("package__common:quarterly")}`;break;default:break}return n},[e,r,t,o])};var b=d(m()),ae=e=>{let{currentUserPlan:r,userInfo:t}=l(),o=(0,b.useRef)(null),n=(0,b.useRef)(e);n.current=e,(0,b.useEffect)(()=>{t&&o.current!==r.name&&(n.current(t.role),o.current=r.name)},[r.name,t])};export{U as a,oe as b,ne as c,ie as d,ae as e,_e as f};
