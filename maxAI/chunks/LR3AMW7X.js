import{b as Z}from"./5JAHRNIU.js";import{f as ro,m as so,q as B}from"./YOZ5W2GG.js";import{a as Q}from"./OD4HJMKT.js";import{a as no}from"./S34QHPYH.js";import{b as V,c as h}from"./GSC4ZYB5.js";import{c as K}from"./OZ6K5KWN.js";import{c as H,i as J}from"./QGTSDQHN.js";import{C as U}from"./G7W6DI5V.js";import{b as M,e as G}from"./LSIA5SS7.js";import{m as j,p as q,s as Y}from"./BJ5FAZNI.js";import{c as N}from"./NCSJWSK3.js";import{la as y,na as D}from"./PEAOUDRP.js";import{a as X}from"./UXV3QMB6.js";import{d as W,t as E}from"./AUJ76673.js";import{a as F}from"./4B6UFNBQ.js";import{t as $}from"./XZ5AIA7R.js";import{f as S}from"./GAV6HCJA.js";var R=S(ro()),oo=S(no()),_=S(so());var t=S(F()),io=({onSelectLanguage:g,languageOptions:a,currentLanguage:f,menuListBoxSx:A,sx:d})=>{let{t:P}=W(),b=(0,t.useRef)(null),x=(0,t.useRef)(null),[l,T]=(0,t.useState)(""),[i,u]=(0,t.useState)(null),[I,w]=(0,t.useState)([]),[C,O]=(0,t.useState)(a),L=(0,t.useRef)(!1);(0,t.useEffect)(()=>{E.getLanguages(a).then(e=>{w(e.suggestedLanguages),O(e.otherLanguages)})},[a]);let{suggestedOptions:v,otherOptions:s,allOptions:c}=(0,t.useMemo)(()=>{if(l.trim()){let e=a.filter(o=>`${o.value}${o?.en_label??""}${o.label}`.toLocaleLowerCase().includes(l.trim().toLocaleLowerCase()));return{suggestedOptions:[],otherOptions:e,allOptions:e}}return{suggestedOptions:I,otherOptions:C,allOptions:[...I,...C]}},[l,a,I,C]),z=c.length-1,k=e=>{u(o=>{if(o!==null){let r=e==="increase"?o+1:o-1;return r>=z?z:r<=0?0:r}return o})};(0,t.useEffect)(()=>{x.current&&(x.current.focus(),setTimeout(()=>{x.current?.focus()},200))},[]),(0,t.useEffect)(()=>{l!==""&&u(0)},[l]),(0,t.useEffect)(()=>{if(b.current&&i!==null){let e=c[i];if(e){let o=b.current,r=o.querySelector(`[data-testid="language-item--${e.value}"]`);if(r){let m=o.getBoundingClientRect(),p=r.getBoundingClientRect();p.top>=m.top&&p.bottom<=m.bottom||(p.top<m.top?o.scrollTop+=p.top-m.top:p.bottom>m.bottom&&(o.scrollTop+=p.bottom-m.bottom))}}}},[i,c]);let eo=()=>{if(!c.length)return t.default.createElement(D,{width:"100%",justifyContent:"center",alignItems:"center",spacing:1},t.default.createElement(_.default,{sx:{fontSize:32,color:"text.secondary"}}),t.default.createElement(y,{fontSize:12,color:"text.secondary"},P("package__ui:language_selector__empty_text")));let e=(o,r)=>{let m=f===o.value;return t.default.createElement(q,{"data-testid":`language-item--${o.value}`,selected:i===r,key:`${r}-${o.value}`,sx:[{py:"6px",px:"10px",borderRadius:1,mt:.5,"&.Mui-selected":{backgroundColor:p=>p.palette.mode==="light"?"rgba(0, 0, 0, 0.04)":"rgba(255, 255, 255, 0.08)"}}],onClick:p=>{p.stopPropagation(),E.saveUsageLanguage(o),g&&g(o)}},t.default.createElement(Y,{sx:{my:0},primary:t.default.createElement(D,{direction:"row",alignItems:"center",sx:{color:"text.primary",fontSize:14}},t.default.createElement(y,{fontSize:"inherit",noWrap:!0,sx:{color:"inherit"}},o.label),m?t.default.createElement(R.default,{sx:{fontSize:"inherit",color:"text.primary",ml:"auto"}}):null),secondary:o.en_label?t.default.createElement(y,{fontSize:12,noWrap:!0},o.en_label):null}))};return t.default.createElement(j,{sx:{p:0,width:"100%"},onKeyDown:o=>{o.key==="ArrowDown"&&(o.preventDefault(),k("increase")),o.key==="ArrowUp"&&(o.preventDefault(),k("decrease"))}},v.map((o,r)=>e(o,r)),v.length>0&&s.length>0?t.default.createElement(K,{sx:{mt:.5,mx:.5}}):null,s.map((o,r)=>e(o,r+v.length)))};return t.default.createElement(D,{sx:d},t.default.createElement(J,{inputRef:x,size:"small",id:"filter-language",value:l,onChange:e=>T(e.target.value),onCompositionStart:()=>L.current=!0,onCompositionEnd:()=>L.current=!1,placeholder:P("package__common:search"),InputProps:{startAdornment:t.default.createElement(h,{position:"start"},t.default.createElement(_.default,null)),endAdornment:l.length>0?t.default.createElement(h,{position:"start"},t.default.createElement(H,{sx:{p:.5},onClick:()=>{T("")}},t.default.createElement(oo.default,null))):null,sx:{fontSize:16}},inputProps:{autoComplete:"off"},sx:{pt:1,px:1,pb:.5,[`& .${U.root}`]:{pr:"4px"}},onKeyUp:e=>{e.stopPropagation()},onKeyDown:e=>{e.stopPropagation();let o=e.key;if((o==="ArrowDown"||o==="ArrowUp")&&(e.preventDefault(),i===null?u(0):k(o==="ArrowDown"?"increase":"decrease")),o==="Enter"&&i!==null&&!L.current){let r=c[i];e.preventDefault(),r&&(E.saveUsageLanguage(r),g&&g(r))}}}),t.default.createElement(N,{sx:{overflow:"auto",maxHeight:310,minHeight:310,px:1,pb:0,mb:1,overscrollBehavior:"contain",scrollbarColor:e=>e.palette.mode==="dark"?"rgba(255, 255, 255, 0.6) transparent":"rgba(0, 0, 0, 0.6) transparent",boxSizing:"border-box",display:"flex",...A},ref:b},eo()))},to=io;var n=S(F()),ao=g=>{let{options:a=$,value:f="",onChange:A,disabled:d,sx:P,labelMaxWidth:b=64,tooltipProps:x,popoverProps:l,...T}=g,[i,u]=(0,n.useState)(!1),[I,w]=(0,n.useState)(()=>a.find(s=>s.value===f)||a[0]),[C,O]=(0,n.useState)(!1),L=(0,n.useRef)(null),v=d?!1:i;return(0,n.useLayoutEffect)(()=>{let s=a.find(c=>c.value===f);s&&s!==I&&w(s)},[f]),X(()=>{u(!1)}),n.default.createElement(n.default.Fragment,null,n.default.createElement(Q,{title:"",open:C&&!v,disabled:d,testId:"maxai--language-selector--tooltip",...x},n.default.createElement(G,{ref:L,disableRipple:!0,onMouseEnter:()=>{O(!0)},onMouseLeave:()=>{O(!1)},onClick:()=>{d||u(s=>!s)},className:i?"LANGUAGE_SELECTOR_AUTOCOMPLETE_OPEN":"","data-testid":"language-selector",startIcon:n.default.createElement(h,{position:"start",sx:{marginRight:0}},n.default.createElement(B,{icon:"Language",sx:{fontSize:"18px",mr:"4px",ml:"2px",color:"text.secondary"}})),endIcon:n.default.createElement(h,{position:"end",sx:{marginLeft:0,position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",zIndex:1,p:"2px"}},n.default.createElement(B,{icon:"ExpandMore",sx:{color:"text.secondary",fontSize:"18px",transform:i?"rotate(180deg)":"rotate(0)"}})),sx:{minWidth:"unset",maxWidth:"120px",borderRadius:1,cursor:d?"default":"pointer","&:focus":{cursor:"default"},color:"text.secondary",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1)",[`& .${M.startIcon}`]:{mr:0},[`& .${M.endIcon}`]:{ml:0,p:0},[`& .${M.endIcon} .${V.root}`]:{position:"static",transform:"none"},height:"32px",display:"flex",flexWrap:"nowrap",p:"4px 6px",alignItems:"center",justifyContent:"flex-start",fontSize:14,...P},...T},n.default.createElement(y,{noWrap:!0,fontSize:"inherit",maxWidth:b,textAlign:"left"},I.label))),n.default.createElement(Z,{transitionDuration:0,disableScrollLock:!0,...l,placement:"bottom-start",fallbackPlacements:["top-start"],open:i,onClose:()=>{u(!1)},anchorEl:L.current},n.default.createElement(to,{currentLanguage:f,languageOptions:a,onSelectLanguage:s=>{w(s),A?.(s.value),u(!1)}})))},Bo=ao;export{Bo as a};
