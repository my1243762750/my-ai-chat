import{a as he,b as we,c as vr,f as br,g as Ar,i as Fr,j as Ir}from"./IE4E3732.js";import{e as Ye,f as kr,l as wr}from"./X2ALZK3D.js";import{h as Cr}from"./7LKKTU5H.js";import{a as wo}from"./W5GFQTKO.js";import{a as Co}from"./HDYNK7EV.js";import{b as de}from"./B7VRG6XU.js";import{a as xr,b as Sr}from"./XKR4REXP.js";import{a as fr}from"./OD4HJMKT.js";import{a as ko}from"./S34QHPYH.js";import{a as kt}from"./WJUWA2XU.js";import{f as lr,g as Me,s as Le}from"./MM57Z2BS.js";import{c as cr}from"./OZ6K5KWN.js";import{A as mr,c as wt,i as je,w as dr}from"./QGTSDQHN.js";import{C as Ct,U as ze,X as He,f as sr,l as nr,o as ar}from"./G7W6DI5V.js";import{e as ur}from"./LSIA5SS7.js";import{c as ce}from"./NCSJWSK3.js";import{h as Ft,la as U,na as B}from"./PEAOUDRP.js";import{a as vt}from"./PCHDBHHN.js";import{d as Xe}from"./DQCZLHJM.js";import{a as hr}from"./DW5SZ3VB.js";import{Ja as gr,La as Ke,Ua as yr,f as qe,n as pr,o as $e,p as _r,q as xe,y as Ge}from"./VE4EMEBO.js";import{F as ye,c as ir,d as ue,f as ke,k as bt,l as At}from"./AUJ76673.js";import{a as le}from"./4B6UFNBQ.js";import{F as St,b as ht,d as xt,m as Pe,y as rr,z as or}from"./XZ5AIA7R.js";import{c as yt,f as J}from"./GAV6HCJA.js";var Mr=yt(Qe=>{"use strict";"use client";var To=vt();Object.defineProperty(Qe,"__esModule",{value:!0});Qe.default=void 0;var Do=To(kt()),Po=Ft(),qi=Qe.default=(0,Do.default)((0,Po.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBackOutlined")});var Ur=yt(et=>{"use strict";"use client";var Lo=vt();Object.defineProperty(et,"__esModule",{value:!0});et.default=void 0;var Oo=Lo(kt()),Bo=Ft(),Ri=et.default=(0,Oo.default)((0,Bo.jsx)("path",{d:"M12 5.99 19.53 19H4.47zM12 2 1 21h22zm1 14h-2v2h2zm0-6h-2v4h2z"}),"WarningAmberOutlined")});var uo=yt(dt=>{"use strict";"use client";var oi=vt();Object.defineProperty(dt,"__esModule",{value:!0});dt.default=void 0;var ii=oi(kt()),si=Ft(),Ss=dt.default=(0,ii.default)((0,si.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew")});var Je=J(le());var Vr=ke({key:"SurveyFilledOutAtom",default:{feedback:!1}}),Er=ke({key:"firstFetchSurveyStatusLoadedAtom",default:!1});var Io=(e=!0)=>{let{isLogin:r}=qe(),t=At(Vr),o=At(Er),s=(0,Je.useCallback)(async(n,u=!1)=>{if(r){let c=await hr.getSurveyStatus(n,u);t(c)}else t({});o(!0)},[r]);return(0,Je.useEffect)(()=>{e&&s()},[s,e]),{syncSurveyStatus:s}},Ze=Io;var Tr=J(wo());var It=J(le()),Vo=e=>{let{sx:r,onClick:t,onConnectSuccess:o}=e,{connectMaxAIAccountInNewTab:s,connectMaxAIAccountWithEmail:n,loading:u}=Ke("Email"),{t:c}=ue(),{syncSurveyStatus:_}=Ze(!1),{refreshModelUsage:S}=Ye();return It.default.createElement(de,{"data-testid":"maxai--auth--email-sign-in",loading:u,fullWidth:!0,variant:"normalOutlined",startIcon:It.default.createElement(Tr.default,null),sx:{height:56,borderRadius:1,fontSize:16,...r},onClick:()=>{ye(async()=>{await xe.clearAuthTokens(),await Ge.clearUserInfo()}).then(({error:p})=>{}),t?.(),Pe?s({onSuccess(){ye(()=>{S(),_(void 0,!0),o?.()})}}):n({onSuccess(){ye(()=>{o?.()})}}),Xe("sign_in_started",{method:"email"}),he({eventName:"conversion",params:{send_to:"AW-16634122609/0vVhCKDR8b8ZEPGi4vs9",signUpMethod:"email"}})}},c("package__features:auth__sign_in__button__email"))},Dr=Vo;var me=J(le()),Eo=e=>{let{sx:r,autoLogin:t,variant:o="contained"}=e,{connectMaxAIAccount:s,loading:n}=Ke("Google"),{t:u}=ue(),c=(0,me.useMemo)(()=>o==="contained"?{color:"white",bgcolor:"#1F87FC","&:hover":{bgcolor:"#4285F4",color:"white"}}:{bgcolor:"white",borderColor:"#dadce0",color:"rgba(0,0,0,.54)","&:hover":{borderColor:"#dadce0",bgcolor:"white"}},[o]),_=me.default.useRef(!1);return(0,me.useEffect)(()=>{if(t){if(_.current)return;_.current=!0,s().then().catch()}},[t]),me.default.createElement(de,{"data-testid":"maxai--auth--google-sign-in",loading:n,startIcon:me.default.createElement(B,{sx:{p:.5,bgcolor:"white",borderRadius:"50%"}},me.default.createElement(dr,{sx:{fontSize:"16px"}})),variant:o,sx:{height:56,fontSize:16,mt:3,gap:1,...r,...c},onClick:()=>{ye(async()=>{await xe.clearAuthTokens(),await Ge.clearUserInfo()}).then(({error:S})=>{}),s(),Xe("sign_in_started",{method:"google"}),he({eventName:"conversion",params:{send_to:"AW-16634122609/0vVhCKDR8b8ZEPGi4vs9",signUpMethod:"google"}})}},u("package__features:auth__sign_in__button__google"))},Pr=Eo;var po=J(Mr()),_o=J(ko()),go=J(Co());var k=J(le());var Lr=ke({key:"FunnelSurveyPopupOpenStateAtom",default:{}}),Or=ke({key:"FunnelSurveyPopupOpenTimerAtom",default:{}});var Re=J(le());var Mo=e=>{let[r,t]=bt(Lr),[o,s]=bt(Or),n=(0,Re.useCallback)(async(_=0)=>{if(await Ar(e))return;let S=window.setTimeout(async()=>{t(p=>({...p,[e]:!0})),await br(e,!0)},_);s(p=>({...p,[e]:S}))},[e,t,s]),u=(0,Re.useCallback)(()=>{let _=o[e];_&&(clearTimeout(_),s(S=>({...S,[e]:-1}))),t(S=>({...S,[e]:!1}))},[e,o,t,s]),c=(0,Re.useCallback)((_=vr)=>{let S=o[e];S&&(clearTimeout(S),s(p=>({...p,[e]:-1}))),n(_)},[e,o,n,s]);return{open:r[e]||!1,reStartOpenPopupTimer:c,openPopup:n,closePopup:u}},Br=Mo;var ao=J(Ur());var G=J(le());var F=J(le(),1),Ue=e=>e.type==="checkbox",Ie=e=>e instanceof Date,R=e=>e==null,Gr=e=>typeof e=="object",z=e=>!R(e)&&!Array.isArray(e)&&Gr(e)&&!Ie(e),Kr=e=>z(e)&&e.target?Ue(e.target)?e.target.checked:e.target.value:e,Uo=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Xr=(e,r)=>e.has(Uo(r)),Wo=e=>{let r=e.constructor&&e.constructor.prototype;return z(r)&&r.hasOwnProperty("isPrototypeOf")},Ht=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function $(e){let r,t=Array.isArray(e);if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!(Ht&&(e instanceof Blob||e instanceof FileList))&&(t||z(e)))if(r=t?[]:{},!t&&!Wo(e))r=e;else for(let o in e)e.hasOwnProperty(o)&&(r[o]=$(e[o]));else return e;return r}var We=e=>Array.isArray(e)?e.filter(Boolean):[],O=e=>e===void 0,d=(e,r,t)=>{if(!r||!z(e))return t;let o=We(r.split(/[,[\].]+?/)).reduce((s,n)=>R(s)?s:s[n],e);return O(o)||o===e?O(e[r])?t:e[r]:o},se=e=>typeof e=="boolean",jt=e=>/^\w*$/.test(e),Yr=e=>We(e.replace(/["|']|\]/g,"").split(/\.|\[/)),M=(e,r,t)=>{let o=-1,s=jt(r)?[r]:Yr(r),n=s.length,u=n-1;for(;++o<n;){let c=s[o],_=t;if(o!==u){let S=e[c];_=z(S)||Array.isArray(S)?S:isNaN(+s[o+1])?{}:[]}if(c==="__proto__")return;e[c]=_,e=e[c]}return e},ot={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ne={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},pe={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},No=F.default.createContext(null),lt=()=>F.default.useContext(No);var Jr=(e,r,t,o=!0)=>{let s={defaultValues:r._defaultValues};for(let n in e)Object.defineProperty(s,n,{get:()=>{let u=n;return r._proxyFormState[u]!==ne.all&&(r._proxyFormState[u]=!o||ne.all),t&&(t[u]=!0),e[u]}});return s},Q=e=>z(e)&&!Object.keys(e).length,Zr=(e,r,t,o)=>{t(e);let{name:s,...n}=e;return Q(n)||Object.keys(n).length>=Object.keys(r).length||Object.keys(n).find(u=>r[u]===(!o||ne.all))},te=e=>Array.isArray(e)?e:[e],Qr=(e,r,t)=>!e||!r||e===r||te(e).some(o=>o&&(t?o===r:o.startsWith(r)||r.startsWith(o)));function ut(e){let r=F.default.useRef(e);r.current=e,F.default.useEffect(()=>{let t=!e.disabled&&r.current.subject&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function zo(e){let r=lt(),{control:t=r.control,disabled:o,name:s,exact:n}=e||{},[u,c]=F.default.useState(t._formState),_=F.default.useRef(!0),S=F.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=F.default.useRef(s);return p.current=s,ut({disabled:o,next:h=>_.current&&Qr(p.current,h.name,n)&&Zr(h,S.current,t._updateFormState)&&c({...t._formState,...h}),subject:t._subjects.state}),F.default.useEffect(()=>(_.current=!0,S.current.isValid&&t._updateValid(!0),()=>{_.current=!1}),[t]),Jr(u,t,S.current,!1)}var fe=e=>typeof e=="string",Rr=(e,r,t,o,s)=>fe(e)?(o&&r.watch.add(e),d(t,e,s)):Array.isArray(e)?e.map(n=>(o&&r.watch.add(n),d(t,n))):(o&&(r.watchAll=!0),t);function Ho(e){let r=lt(),{control:t=r.control,name:o,defaultValue:s,disabled:n,exact:u}=e||{},c=F.default.useRef(o);c.current=o,ut({disabled:n,subject:t._subjects.values,next:p=>{Qr(c.current,p.name,u)&&S($(Rr(c.current,t._names,p.values||t._formValues,!1,s)))}});let[_,S]=F.default.useState(t._getWatch(o,s));return F.default.useEffect(()=>t._removeUnmounted()),_}function jo(e){let r=lt(),{name:t,disabled:o,control:s=r.control,shouldUnregister:n}=e,u=Xr(s._names.array,t),c=Ho({control:s,name:t,defaultValue:d(s._formValues,t,d(s._defaultValues,t,e.defaultValue)),exact:!0}),_=zo({control:s,name:t,exact:!0}),S=F.default.useRef(s.register(t,{...e.rules,value:c,...se(e.disabled)?{disabled:e.disabled}:{}}));return F.default.useEffect(()=>{let p=s._options.shouldUnregister||n,h=(w,K)=>{let L=d(s._fields,w);L&&L._f&&(L._f.mount=K)};if(h(t,!0),p){let w=$(d(s._options.defaultValues,t));M(s._defaultValues,t,w),O(d(s._formValues,t))&&M(s._formValues,t,w)}return()=>{(u?p&&!s._state.action:p)?s.unregister(t):h(t,!1)}},[t,s,u,n]),F.default.useEffect(()=>{d(s._fields,t)&&s._updateDisabledField({disabled:o,fields:s._fields,name:t,value:d(s._fields,t)._f.value})},[o,t,s]),{field:{name:t,value:c,...se(o)||_.disabled?{disabled:_.disabled||o}:{},onChange:F.default.useCallback(p=>S.current.onChange({target:{value:Kr(p),name:t},type:ot.CHANGE}),[t]),onBlur:F.default.useCallback(()=>S.current.onBlur({target:{value:d(s._formValues,t),name:t},type:ot.BLUR}),[t,s]),ref:F.default.useCallback(p=>{let h=d(s._fields,t);h&&p&&(h._f.ref={focus:()=>p.focus(),select:()=>p.select(),setCustomValidity:w=>p.setCustomValidity(w),reportValidity:()=>p.reportValidity()})},[s._fields,t])},formState:_,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!d(_.errors,t)},isDirty:{enumerable:!0,get:()=>!!d(_.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!d(_.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!d(_.validatingFields,t)},error:{enumerable:!0,get:()=>d(_.errors,t)}})}}var ct=e=>e.render(jo(e));var qo=(e,r,t,o,s)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[o]:s||!0}}:{},Se=()=>{let e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{let t=(Math.random()*16+e)%16|0;return(r=="x"?t:t&3|8).toString(16)})},Vt=(e,r,t={})=>t.shouldFocus||O(t.shouldFocus)?t.focusName||`${e}.${O(t.focusIndex)?r:t.focusIndex}.`:"",Be=e=>({isOnSubmit:!e||e===ne.onSubmit,isOnBlur:e===ne.onBlur,isOnChange:e===ne.onChange,isOnAll:e===ne.all,isOnTouch:e===ne.onTouched}),Nt=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(o=>e.startsWith(o)&&/^\.\w+/.test(e.slice(o.length)))),Ve=(e,r,t,o)=>{for(let s of t||Object.keys(e)){let n=d(e,s);if(n){let{_f:u,...c}=n;if(u){if(u.refs&&u.refs[0]&&r(u.refs[0],s)&&!o)return!0;if(u.ref&&r(u.ref,u.name)&&!o)return!0;if(Ve(c,r))break}else if(z(c)&&Ve(c,r))break}}},eo=(e,r,t)=>{let o=te(d(e,t));return M(o,"root",r[t]),M(e,t,o),e},qt=e=>e.type==="file",_e=e=>typeof e=="function",it=e=>{if(!Ht)return!1;let r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},rt=e=>fe(e),$t=e=>e.type==="radio",st=e=>e instanceof RegExp,Wr={value:!1,isValid:!1},Nr={value:!0,isValid:!0},to=e=>{if(Array.isArray(e)){if(e.length>1){let r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!O(e[0].attributes.value)?O(e[0].value)||e[0].value===""?Nr:{value:e[0].value,isValid:!0}:Nr:Wr}return Wr},zr={isValid:!1,value:null},ro=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,zr):zr;function Hr(e,r,t="validate"){if(rt(e)||Array.isArray(e)&&e.every(rt)||se(e)&&!e)return{type:t,message:rt(e)?e:"",ref:r}}var Ce=e=>z(e)&&!st(e)?e:{value:e,message:""},zt=async(e,r,t,o,s)=>{let{ref:n,refs:u,required:c,maxLength:_,minLength:S,min:p,max:h,pattern:w,validate:K,name:L,valueAsNumber:D,mount:P,disabled:W}=e._f,A=d(r,L);if(!P||W)return{};let H=u?u[0]:n,oe=C=>{o&&H.reportValidity&&(H.setCustomValidity(se(C)?"":C||""),H.reportValidity())},y={},v=$t(n),b=Ue(n),V=v||b,ee=(D||qt(n))&&O(n.value)&&O(A)||it(n)&&n.value===""||A===""||Array.isArray(A)&&!A.length,j=qo.bind(null,L,t,y),Ne=(C,E,q,Z=pe.maxLength,ae=pe.minLength)=>{let ie=C?E:q;y[L]={type:C?Z:ae,message:ie,ref:n,...j(C?Z:ae,ie)}};if(s?!Array.isArray(A)||!A.length:c&&(!V&&(ee||R(A))||se(A)&&!A||b&&!to(u).isValid||v&&!ro(u).isValid)){let{value:C,message:E}=rt(c)?{value:!!c,message:c}:Ce(c);if(C&&(y[L]={type:pe.required,message:E,ref:H,...j(pe.required,E)},!t))return oe(E),y}if(!ee&&(!R(p)||!R(h))){let C,E,q=Ce(h),Z=Ce(p);if(!R(A)&&!isNaN(A)){let ae=n.valueAsNumber||A&&+A;R(q.value)||(C=ae>q.value),R(Z.value)||(E=ae<Z.value)}else{let ae=n.valueAsDate||new Date(A),ie=De=>new Date(new Date().toDateString()+" "+De),Ee=n.type=="time",Te=n.type=="week";fe(q.value)&&A&&(C=Ee?ie(A)>ie(q.value):Te?A>q.value:ae>new Date(q.value)),fe(Z.value)&&A&&(E=Ee?ie(A)<ie(Z.value):Te?A<Z.value:ae<new Date(Z.value))}if((C||E)&&(Ne(!!C,q.message,Z.message,pe.max,pe.min),!t))return oe(y[L].message),y}if((_||S)&&!ee&&(fe(A)||s&&Array.isArray(A))){let C=Ce(_),E=Ce(S),q=!R(C.value)&&A.length>+C.value,Z=!R(E.value)&&A.length<+E.value;if((q||Z)&&(Ne(q,C.message,E.message),!t))return oe(y[L].message),y}if(w&&!ee&&fe(A)){let{value:C,message:E}=Ce(w);if(st(C)&&!A.match(C)&&(y[L]={type:pe.pattern,message:E,ref:n,...j(pe.pattern,E)},!t))return oe(E),y}if(K){if(_e(K)){let C=await K(A,r),E=Hr(C,H);if(E&&(y[L]={...E,...j(pe.validate,E.message)},!t))return oe(E.message),y}else if(z(K)){let C={};for(let E in K){if(!Q(C)&&!t)break;let q=Hr(await K[E](A,r),H,E);q&&(C={...q,...j(E,q.message)},oe(q.message),t&&(y[L]=C))}if(!Q(C)&&(y[L]={ref:H,...C},!t))return y}}return oe(!0),y},Et=(e,r)=>[...e,...te(r)],Tt=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Dt(e,r,t){return[...e.slice(0,r),...te(t),...e.slice(r)]}var Pt=(e,r,t)=>Array.isArray(e)?(O(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(r,1)[0]),e):[],Mt=(e,r)=>[...te(r),...te(e)];function $o(e,r){let t=0,o=[...e];for(let s of r)o.splice(s-t,1),t++;return We(o).length?o:[]}var Lt=(e,r)=>O(r)?[]:$o(e,te(r).sort((t,o)=>t-o)),Ot=(e,r,t)=>{[e[r],e[t]]=[e[t],e[r]]};function Go(e,r){let t=r.slice(0,-1).length,o=0;for(;o<t;)e=O(e)?o++:e[r[o++]];return e}function Ko(e){for(let r in e)if(e.hasOwnProperty(r)&&!O(e[r]))return!1;return!0}function N(e,r){let t=Array.isArray(r)?r:jt(r)?[r]:Yr(r),o=t.length===1?e:Go(e,t),s=t.length-1,n=t[s];return o&&delete o[n],s!==0&&(z(o)&&Q(o)||Array.isArray(o)&&Ko(o))&&N(e,t.slice(0,-1)),e}var jr=(e,r,t)=>(e[r]=t,e);function ts(e){let r=lt(),{control:t=r.control,name:o,keyName:s="id",shouldUnregister:n}=e,[u,c]=F.default.useState(t._getFieldArray(o)),_=F.default.useRef(t._getFieldArray(o).map(Se)),S=F.default.useRef(u),p=F.default.useRef(o),h=F.default.useRef(!1);p.current=o,S.current=u,t._names.array.add(o),e.rules&&t.register(o,e.rules),ut({next:({values:y,name:v})=>{if(v===p.current||!v){let b=d(y,p.current);Array.isArray(b)&&(c(b),_.current=b.map(Se))}},subject:t._subjects.array});let w=F.default.useCallback(y=>{h.current=!0,t._updateFieldArray(o,y)},[t,o]),K=(y,v)=>{let b=te($(y)),V=Et(t._getFieldArray(o),b);t._names.focus=Vt(o,V.length-1,v),_.current=Et(_.current,b.map(Se)),w(V),c(V),t._updateFieldArray(o,V,Et,{argA:Tt(y)})},L=(y,v)=>{let b=te($(y)),V=Mt(t._getFieldArray(o),b);t._names.focus=Vt(o,0,v),_.current=Mt(_.current,b.map(Se)),w(V),c(V),t._updateFieldArray(o,V,Mt,{argA:Tt(y)})},D=y=>{let v=Lt(t._getFieldArray(o),y);_.current=Lt(_.current,y),w(v),c(v),t._updateFieldArray(o,v,Lt,{argA:y})},P=(y,v,b)=>{let V=te($(v)),ee=Dt(t._getFieldArray(o),y,V);t._names.focus=Vt(o,y,b),_.current=Dt(_.current,y,V.map(Se)),w(ee),c(ee),t._updateFieldArray(o,ee,Dt,{argA:y,argB:Tt(v)})},W=(y,v)=>{let b=t._getFieldArray(o);Ot(b,y,v),Ot(_.current,y,v),w(b),c(b),t._updateFieldArray(o,b,Ot,{argA:y,argB:v},!1)},A=(y,v)=>{let b=t._getFieldArray(o);Pt(b,y,v),Pt(_.current,y,v),w(b),c(b),t._updateFieldArray(o,b,Pt,{argA:y,argB:v},!1)},H=(y,v)=>{let b=$(v),V=jr(t._getFieldArray(o),y,b);_.current=[...V].map((ee,j)=>!ee||j===y?Se():_.current[j]),w(V),c([...V]),t._updateFieldArray(o,V,jr,{argA:y,argB:b},!0,!1)},oe=y=>{let v=te($(y));_.current=v.map(Se),w([...v]),c([...v]),t._updateFieldArray(o,[...v],b=>b,{},!0,!1)};return F.default.useEffect(()=>{if(t._state.action=!1,Nt(o,t._names)&&t._subjects.state.next({...t._formState}),h.current&&(!Be(t._options.mode).isOnSubmit||t._formState.isSubmitted))if(t._options.resolver)t._executeSchema([o]).then(y=>{let v=d(y.errors,o),b=d(t._formState.errors,o);(b?!v&&b.type||v&&(b.type!==v.type||b.message!==v.message):v&&v.type)&&(v?M(t._formState.errors,o,v):N(t._formState.errors,o),t._subjects.state.next({errors:t._formState.errors}))});else{let y=d(t._fields,o);y&&y._f&&!(Be(t._options.reValidateMode).isOnSubmit&&Be(t._options.mode).isOnSubmit)&&zt(y,t._formValues,t._options.criteriaMode===ne.all,t._options.shouldUseNativeValidation,!0).then(v=>!Q(v)&&t._subjects.state.next({errors:eo(t._formState.errors,v,o)}))}t._subjects.values.next({name:o,values:{...t._formValues}}),t._names.focus&&Ve(t._fields,(y,v)=>{if(t._names.focus&&v.startsWith(t._names.focus)&&y.focus)return y.focus(),1}),t._names.focus="",t._updateValid(),h.current=!1},[u,o,t]),F.default.useEffect(()=>(!d(t._formValues,o)&&t._updateFieldArray(o),()=>{(t._options.shouldUnregister||n)&&t.unregister(o)}),[o,t,s,n]),{swap:F.default.useCallback(W,[w,o,t]),move:F.default.useCallback(A,[w,o,t]),prepend:F.default.useCallback(L,[w,o,t]),append:F.default.useCallback(K,[w,o,t]),remove:F.default.useCallback(D,[w,o,t]),insert:F.default.useCallback(P,[w,o,t]),update:F.default.useCallback(H,[w,o,t]),replace:F.default.useCallback(oe,[w,o,t]),fields:F.default.useMemo(()=>u.map((y,v)=>({...y,[s]:_.current[v]||Se()})),[u,s])}}var Bt=()=>{let e=[];return{get observers(){return e},next:s=>{for(let n of e)n.next&&n.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(n=>n!==s)}}),unsubscribe:()=>{e=[]}}},nt=e=>R(e)||!Gr(e);function ve(e,r){if(nt(e)||nt(r))return e===r;if(Ie(e)&&Ie(r))return e.getTime()===r.getTime();let t=Object.keys(e),o=Object.keys(r);if(t.length!==o.length)return!1;for(let s of t){let n=e[s];if(!o.includes(s))return!1;if(s!=="ref"){let u=r[s];if(Ie(n)&&Ie(u)||z(n)&&z(u)||Array.isArray(n)&&Array.isArray(u)?!ve(n,u):n!==u)return!1}}return!0}var oo=e=>e.type==="select-multiple",Xo=e=>$t(e)||Ue(e),Ut=e=>it(e)&&e.isConnected,io=e=>{for(let r in e)if(_e(e[r]))return!0;return!1};function at(e,r={}){let t=Array.isArray(e);if(z(e)||t)for(let o in e)Array.isArray(e[o])||z(e[o])&&!io(e[o])?(r[o]=Array.isArray(e[o])?[]:{},at(e[o],r[o])):R(e[o])||(r[o]=!0);return r}function so(e,r,t){let o=Array.isArray(e);if(z(e)||o)for(let s in e)Array.isArray(e[s])||z(e[s])&&!io(e[s])?O(r)||nt(t[s])?t[s]=Array.isArray(e[s])?at(e[s],[]):{...at(e[s])}:so(e[s],R(r)?{}:r[s],t[s]):t[s]=!ve(e[s],r[s]);return t}var tt=(e,r)=>so(e,r,at(r)),no=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:o})=>O(e)?e:r?e===""?NaN:e&&+e:t&&fe(e)?new Date(e):o?o(e):e;function Wt(e){let r=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):r.disabled))return qt(r)?r.files:$t(r)?ro(e.refs).value:oo(r)?[...r.selectedOptions].map(({value:t})=>t):Ue(r)?to(e.refs).value:no(O(r.value)?e.ref.value:r.value,e)}var Yo=(e,r,t,o)=>{let s={};for(let n of e){let u=d(r,n);u&&M(s,n,u._f)}return{criteriaMode:t,names:[...e],fields:s,shouldUseNativeValidation:o}},Oe=e=>O(e)?e:st(e)?e.source:z(e)?st(e.value)?e.value.source:e.value:e,qr="AsyncFunction",Jo=e=>(!e||!e.validate)&&!!(_e(e.validate)&&e.validate.constructor.name===qr||z(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===qr)),Zo=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function $r(e,r,t){let o=d(e,t);if(o||jt(t))return{error:o,name:t};let s=t.split(".");for(;s.length;){let n=s.join("."),u=d(r,n),c=d(e,n);if(u&&!Array.isArray(u)&&t!==n)return{name:t};if(c&&c.type)return{name:n,error:c};s.pop()}return{name:t}}var Qo=(e,r,t,o,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(r||e):(t?o.isOnBlur:s.isOnBlur)?!e:(t?o.isOnChange:s.isOnChange)?e:!0,Ro=(e,r)=>!We(d(e,r)).length&&N(e,r),ei={mode:ne.onSubmit,reValidateMode:ne.onChange,shouldFocusError:!0};function ti(e={}){let r={...ei,...e},t={submitCount:0,isDirty:!1,isLoading:_e(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},o={},s=z(r.defaultValues)||z(r.values)?$(r.defaultValues||r.values)||{}:{},n=r.shouldUnregister?{}:$(s),u={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},_,S=0,p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:Bt(),array:Bt(),state:Bt()},w=Be(r.mode),K=Be(r.reValidateMode),L=r.criteriaMode===ne.all,D=i=>a=>{clearTimeout(S),S=setTimeout(i,a)},P=async i=>{if(p.isValid||i){let a=r.resolver?Q((await V()).errors):await j(o,!0);a!==t.isValid&&h.state.next({isValid:a})}},W=(i,a)=>{(p.isValidating||p.validatingFields)&&((i||Array.from(c.mount)).forEach(l=>{l&&(a?M(t.validatingFields,l,a):N(t.validatingFields,l))}),h.state.next({validatingFields:t.validatingFields,isValidating:!Q(t.validatingFields)}))},A=(i,a=[],l,g,m=!0,f=!0)=>{if(g&&l){if(u.action=!0,f&&Array.isArray(d(o,i))){let x=l(d(o,i),g.argA,g.argB);m&&M(o,i,x)}if(f&&Array.isArray(d(t.errors,i))){let x=l(d(t.errors,i),g.argA,g.argB);m&&M(t.errors,i,x),Ro(t.errors,i)}if(p.touchedFields&&f&&Array.isArray(d(t.touchedFields,i))){let x=l(d(t.touchedFields,i),g.argA,g.argB);m&&M(t.touchedFields,i,x)}p.dirtyFields&&(t.dirtyFields=tt(s,n)),h.state.next({name:i,isDirty:C(i,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else M(n,i,a)},H=(i,a)=>{M(t.errors,i,a),h.state.next({errors:t.errors})},oe=i=>{t.errors=i,h.state.next({errors:t.errors,isValid:!1})},y=(i,a,l,g)=>{let m=d(o,i);if(m){let f=d(n,i,O(l)?d(s,i):l);O(f)||g&&g.defaultChecked||a?M(n,i,a?f:Wt(m._f)):Z(i,f),u.mount&&P()}},v=(i,a,l,g,m)=>{let f=!1,x=!1,T={name:i},X=!!(d(o,i)&&d(o,i)._f&&d(o,i)._f.disabled);if(!l||g){p.isDirty&&(x=t.isDirty,t.isDirty=T.isDirty=C(),f=x!==T.isDirty);let Y=X||ve(d(s,i),a);x=!!(!X&&d(t.dirtyFields,i)),Y||X?N(t.dirtyFields,i):M(t.dirtyFields,i,!0),T.dirtyFields=t.dirtyFields,f=f||p.dirtyFields&&x!==!Y}if(l){let Y=d(t.touchedFields,i);Y||(M(t.touchedFields,i,l),T.touchedFields=t.touchedFields,f=f||p.touchedFields&&Y!==l)}return f&&m&&h.state.next(T),f?T:{}},b=(i,a,l,g)=>{let m=d(t.errors,i),f=p.isValid&&se(a)&&t.isValid!==a;if(e.delayError&&l?(_=D(()=>H(i,l)),_(e.delayError)):(clearTimeout(S),_=null,l?M(t.errors,i,l):N(t.errors,i)),(l?!ve(m,l):m)||!Q(g)||f){let x={...g,...f&&se(a)?{isValid:a}:{},errors:t.errors,name:i};t={...t,...x},h.state.next(x)}},V=async i=>{W(i,!0);let a=await r.resolver(n,r.context,Yo(i||c.mount,o,r.criteriaMode,r.shouldUseNativeValidation));return W(i),a},ee=async i=>{let{errors:a}=await V(i);if(i)for(let l of i){let g=d(a,l);g?M(t.errors,l,g):N(t.errors,l)}else t.errors=a;return a},j=async(i,a,l={valid:!0})=>{for(let g in i){let m=i[g];if(m){let{_f:f,...x}=m;if(f){let T=c.array.has(f.name),X=m._f&&Jo(m._f);X&&p.validatingFields&&W([g],!0);let Y=await zt(m,n,L,r.shouldUseNativeValidation&&!a,T);if(X&&p.validatingFields&&W([g]),Y[f.name]&&(l.valid=!1,a))break;!a&&(d(Y,f.name)?T?eo(t.errors,Y,f.name):M(t.errors,f.name,Y[f.name]):N(t.errors,f.name))}!Q(x)&&await j(x,a,l)}}return l.valid},Ne=()=>{for(let i of c.unMount){let a=d(o,i);a&&(a._f.refs?a._f.refs.every(l=>!Ut(l)):!Ut(a._f.ref))&&mt(i)}c.unMount=new Set},C=(i,a)=>(i&&a&&M(n,i,a),!ve(Gt(),s)),E=(i,a,l)=>Rr(i,c,{...u.mount?n:O(a)?s:fe(i)?{[i]:a}:a},l,a),q=i=>We(d(u.mount?n:s,i,e.shouldUnregister?d(s,i,[]):[])),Z=(i,a,l={})=>{let g=d(o,i),m=a;if(g){let f=g._f;f&&(!f.disabled&&M(n,i,no(a,f)),m=it(f.ref)&&R(a)?"":a,oo(f.ref)?[...f.ref.options].forEach(x=>x.selected=m.includes(x.value)):f.refs?Ue(f.ref)?f.refs.length>1?f.refs.forEach(x=>(!x.defaultChecked||!x.disabled)&&(x.checked=Array.isArray(m)?!!m.find(T=>T===x.value):m===x.value)):f.refs[0]&&(f.refs[0].checked=!!m):f.refs.forEach(x=>x.checked=x.value===m):qt(f.ref)?f.ref.value="":(f.ref.value=m,f.ref.type||h.values.next({name:i,values:{...n}})))}(l.shouldDirty||l.shouldTouch)&&v(i,m,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&De(i)},ae=(i,a,l)=>{for(let g in a){let m=a[g],f=`${i}.${g}`,x=d(o,f);(c.array.has(i)||!nt(m)||x&&!x._f)&&!Ie(m)?ae(f,m,l):Z(f,m,l)}},ie=(i,a,l={})=>{let g=d(o,i),m=c.array.has(i),f=$(a);M(n,i,f),m?(h.array.next({name:i,values:{...n}}),(p.isDirty||p.dirtyFields)&&l.shouldDirty&&h.state.next({name:i,dirtyFields:tt(s,n),isDirty:C(i,f)})):g&&!g._f&&!R(f)?ae(i,f,l):Z(i,f,l),Nt(i,c)&&h.state.next({...t}),h.values.next({name:u.mount?i:void 0,values:{...n}})},Ee=async i=>{u.mount=!0;let a=i.target,l=a.name,g=!0,m=d(o,l),f=()=>a.type?Wt(m._f):Kr(i),x=T=>{g=Number.isNaN(T)||ve(T,d(n,l,T))};if(m){let T,X,Y=f(),be=i.type===ot.BLUR||i.type===ot.FOCUS_OUT,bo=!Zo(m._f)&&!r.resolver&&!d(t.errors,l)&&!m._f.deps||Qo(be,d(t.touchedFields,l),t.isSubmitted,K,w),_t=Nt(l,c,be);M(n,l,Y),be?(m._f.onBlur&&m._f.onBlur(i),_&&_(0)):m._f.onChange&&m._f.onChange(i);let gt=v(l,Y,be,!1),Ao=!Q(gt)||_t;if(!be&&h.values.next({name:l,type:i.type,values:{...n}}),bo)return p.isValid&&(e.mode==="onBlur"?be&&P():P()),Ao&&h.state.next({name:l,..._t?{}:gt});if(!be&&_t&&h.state.next({...t}),r.resolver){let{errors:er}=await V([l]);if(x(Y),g){let Fo=$r(t.errors,o,l),tr=$r(er,o,Fo.name||l);T=tr.error,l=tr.name,X=Q(er)}}else W([l],!0),T=(await zt(m,n,L,r.shouldUseNativeValidation))[l],W([l]),x(Y),g&&(T?X=!1:p.isValid&&(X=await j(o,!0)));g&&(m._f.deps&&De(m._f.deps),b(l,X,T,gt))}},Te=(i,a)=>{if(d(t.errors,a)&&i.focus)return i.focus(),1},De=async(i,a={})=>{let l,g,m=te(i);if(r.resolver){let f=await ee(O(i)?i:m);l=Q(f),g=i?!m.some(x=>d(f,x)):l}else i?(g=(await Promise.all(m.map(async f=>{let x=d(o,f);return await j(x&&x._f?{[f]:x}:x)}))).every(Boolean),!(!g&&!t.isValid)&&P()):g=l=await j(o);return h.state.next({...!fe(i)||p.isValid&&l!==t.isValid?{}:{name:i},...r.resolver||!i?{isValid:l}:{},errors:t.errors}),a.shouldFocus&&!g&&Ve(o,Te,i?m:c.mount),g},Gt=i=>{let a={...u.mount?n:s};return O(i)?a:fe(i)?d(a,i):i.map(l=>d(a,l))},Kt=(i,a)=>({invalid:!!d((a||t).errors,i),isDirty:!!d((a||t).dirtyFields,i),error:d((a||t).errors,i),isValidating:!!d(t.validatingFields,i),isTouched:!!d((a||t).touchedFields,i)}),ho=i=>{i&&te(i).forEach(a=>N(t.errors,a)),h.state.next({errors:i?t.errors:{}})},Xt=(i,a,l)=>{let g=(d(o,i,{_f:{}})._f||{}).ref,m=d(t.errors,i)||{},{ref:f,message:x,type:T,...X}=m;M(t.errors,i,{...X,...a,ref:g}),h.state.next({name:i,errors:t.errors,isValid:!1}),l&&l.shouldFocus&&g&&g.focus&&g.focus()},xo=(i,a)=>_e(i)?h.values.subscribe({next:l=>i(E(void 0,a),l)}):E(i,a,!0),mt=(i,a={})=>{for(let l of i?te(i):c.mount)c.mount.delete(l),c.array.delete(l),a.keepValue||(N(o,l),N(n,l)),!a.keepError&&N(t.errors,l),!a.keepDirty&&N(t.dirtyFields,l),!a.keepTouched&&N(t.touchedFields,l),!a.keepIsValidating&&N(t.validatingFields,l),!r.shouldUnregister&&!a.keepDefaultValue&&N(s,l);h.values.next({values:{...n}}),h.state.next({...t,...a.keepDirty?{isDirty:C()}:{}}),!a.keepIsValid&&P()},Yt=({disabled:i,name:a,field:l,fields:g,value:m})=>{if(se(i)&&u.mount||i){let f=i?void 0:O(m)?Wt(l?l._f:d(g,a)._f):m;M(n,a,f),v(a,f,!1,!1,!0)}},pt=(i,a={})=>{let l=d(o,i),g=se(a.disabled)||se(e.disabled);return M(o,i,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:i}},name:i,mount:!0,...a}}),c.mount.add(i),l?Yt({field:l,disabled:se(a.disabled)?a.disabled:e.disabled,name:i,value:a.value}):y(i,!0,a.value),{...g?{disabled:a.disabled||e.disabled}:{},...r.progressive?{required:!!a.required,min:Oe(a.min),max:Oe(a.max),minLength:Oe(a.minLength),maxLength:Oe(a.maxLength),pattern:Oe(a.pattern)}:{},name:i,onChange:Ee,onBlur:Ee,ref:m=>{if(m){pt(i,a),l=d(o,i);let f=O(m.value)&&m.querySelectorAll&&m.querySelectorAll("input,select,textarea")[0]||m,x=Xo(f),T=l._f.refs||[];if(x?T.find(X=>X===f):f===l._f.ref)return;M(o,i,{_f:{...l._f,...x?{refs:[...T.filter(Ut),f,...Array.isArray(d(s,i))?[{}]:[]],ref:{type:f.type,name:i}}:{ref:f}}}),y(i,!1,void 0,f)}else l=d(o,i,{}),l._f&&(l._f.mount=!1),(r.shouldUnregister||a.shouldUnregister)&&!(Xr(c.array,i)&&u.action)&&c.unMount.add(i)}}},Jt=()=>r.shouldFocusError&&Ve(o,Te,c.mount),So=i=>{se(i)&&(h.state.next({disabled:i}),Ve(o,(a,l)=>{let g=d(o,l);g&&(a.disabled=g._f.disabled||i,Array.isArray(g._f.refs)&&g._f.refs.forEach(m=>{m.disabled=g._f.disabled||i}))},0,!1))},Zt=(i,a)=>async l=>{let g;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let m=$(n);if(h.state.next({isSubmitting:!0}),r.resolver){let{errors:f,values:x}=await V();t.errors=f,m=x}else await j(o);if(N(t.errors,"root"),Q(t.errors)){h.state.next({errors:{}});try{await i(m,l)}catch(f){g=f}}else a&&await a({...t.errors},l),Jt(),setTimeout(Jt);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Q(t.errors)&&!g,submitCount:t.submitCount+1,errors:t.errors}),g)throw g},vo=(i,a={})=>{d(o,i)&&(O(a.defaultValue)?ie(i,$(d(s,i))):(ie(i,a.defaultValue),M(s,i,$(a.defaultValue))),a.keepTouched||N(t.touchedFields,i),a.keepDirty||(N(t.dirtyFields,i),t.isDirty=a.defaultValue?C(i,$(d(s,i))):C()),a.keepError||(N(t.errors,i),p.isValid&&P()),h.state.next({...t}))},Qt=(i,a={})=>{let l=i?$(i):s,g=$(l),m=Q(i),f=m?s:g;if(a.keepDefaultValues||(s=l),!a.keepValues){if(a.keepDirtyValues)for(let x of c.mount)d(t.dirtyFields,x)?M(f,x,d(n,x)):ie(x,d(f,x));else{if(Ht&&O(i))for(let x of c.mount){let T=d(o,x);if(T&&T._f){let X=Array.isArray(T._f.refs)?T._f.refs[0]:T._f.ref;if(it(X)){let Y=X.closest("form");if(Y){Y.reset();break}}}}o={}}n=e.shouldUnregister?a.keepDefaultValues?$(s):{}:$(f),h.array.next({values:{...f}}),h.values.next({values:{...f}})}c={mount:a.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!p.isValid||!!a.keepIsValid||!!a.keepDirtyValues,u.watch=!!e.shouldUnregister,h.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:m?!1:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!ve(i,s)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:m?{}:a.keepDirtyValues?a.keepDefaultValues&&n?tt(s,n):t.dirtyFields:a.keepDefaultValues&&i?tt(s,i):a.keepDirty?t.dirtyFields:{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Rt=(i,a)=>Qt(_e(i)?i(n):i,a);return{control:{register:pt,unregister:mt,getFieldState:Kt,handleSubmit:Zt,setError:Xt,_executeSchema:V,_getWatch:E,_getDirty:C,_updateValid:P,_removeUnmounted:Ne,_updateFieldArray:A,_updateDisabledField:Yt,_getFieldArray:q,_reset:Qt,_resetDefaultValues:()=>_e(r.defaultValues)&&r.defaultValues().then(i=>{Rt(i,r.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:i=>{t={...t,...i}},_disableForm:So,_subjects:h,_proxyFormState:p,_setErrors:oe,get _fields(){return o},get _formValues(){return n},get _state(){return u},set _state(i){u=i},get _defaultValues(){return s},get _names(){return c},set _names(i){c=i},get _formState(){return t},set _formState(i){t=i},get _options(){return r},set _options(i){r={...r,...i}}},trigger:De,register:pt,handleSubmit:Zt,watch:xo,setValue:ie,getValues:Gt,reset:Rt,resetField:vo,clearErrors:ho,unregister:mt,setError:Xt,setFocus:(i,a={})=>{let l=d(o,i),g=l&&l._f;if(g){let m=g.refs?g.refs[0]:g.ref;m.focus&&(m.focus(),a.shouldSelect&&m.select())}},getFieldState:Kt}}function ft(e={}){let r=F.default.useRef(),t=F.default.useRef(),[o,s]=F.default.useState({isDirty:!1,isValidating:!1,isLoading:_e(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:_e(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...ti(e),formState:o});let n=r.current.control;return n._options=e,ut({subject:n._subjects.state,next:u=>{Zr(u,n._proxyFormState,n._updateFormState,!0)&&s({...n._formState})}}),F.default.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),F.default.useEffect(()=>{if(n._proxyFormState.isDirty){let u=n._getDirty();u!==o.isDirty&&n._subjects.state.next({isDirty:u})}},[n,o.isDirty]),F.default.useEffect(()=>{e.values&&!ve(e.values,t.current)?(n._reset(e.values,n._options.resetOptions),t.current=e.values,s(u=>({...u}))):n._resetDefaultValues()},[e.values,n]),F.default.useEffect(()=>{e.errors&&n._setErrors(e.errors)},[e.errors,n]),F.default.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),F.default.useEffect(()=>{e.shouldUnregister&&n._subjects.values.next({values:n._getWatch()})},[e.shouldUnregister,n]),r.current.formState=Jr(o,n),r.current}var ri=({onSubmit:e,form:r})=>{let{t}=ue(),{handleSubmit:o,control:s,formState:{isValid:n},setValue:u}=r,[c,_]=(0,G.useState)(""),[S,p]=(0,G.useState)(!1),[h,w]=(0,G.useState)(!1),{reStartOpenPopupTimer:K}=Br("SURVEY_SIGN_UP_DROPPED"),L=async D=>{if(n){K(),_(""),p(!0);try{await $e(D.email)&&e&&e(D)}catch(P){_(`${P.message}`),e&&e(null)}p(!1)}};return(0,G.useEffect)(()=>{if(typeof window>"u")return;let D=new URLSearchParams(window.location.search),P=decodeURIComponent(D.get("email")||"");P&&St(P)&&!P.includes("+")&&(u("email",P,{shouldValidate:!0,shouldDirty:!0}),setTimeout(()=>{w(!0)},0))},[]),(0,G.useEffect)(()=>{h&&(w(!1),o(L)())},[h]),G.default.createElement(B,{spacing:3,component:"form",onSubmit:D=>{D.preventDefault(),o(L)()}},G.default.createElement(U,{fontSize:"22px",color:"text.primary",textAlign:"center",fontWeight:600},t("package__features:auth__email_sign_in__model__step1__title")),G.default.createElement(ct,{name:"email",control:s,rules:{required:!0,validate:{required:D=>St(D)&&!D.includes("+")||!1}},render:({field:{value:D,onChange:P},fieldState:W})=>{let A=W?.error?.message??"";return G.default.createElement(je,{error:!!A,value:D||"",type:"text",name:"email",disabled:S,onChange:({target:{value:H}})=>P(H.trim().toString().toLowerCase()),InputProps:{sx:{borderRadius:"8px",fontSize:20}},sx:{fontSize:20,".MuiFormLabel-root":{color:"rgba(0, 0, 0, 0.38)"},".MuiFormLabel-root.Mui-focused":{color:"primary.main"},[`& .${He.root}`]:{color:"text.tertiary",fontSize:20},[`& .${Ct.input}:-webkit-autofill`]:{WebkitBoxShadow:H=>`0 0 0 100px ${H.palette.background.paper} inset`,WebkitTextFillColor:"text.primary",caretColor:"text.primary"},[`& .${Ct.input}:-webkit-autofill:focus`]:{WebkitBoxShadow:H=>`0 0 0 100px ${H.palette.background.paper} inset`}},onKeyDown:()=>{c&&_("")},label:A||t("package__features:auth__email_sign_in__model__step1__input__email__placeholder"),fullWidth:!0})}}),c&&G.default.createElement(ce,{sx:{maxWidth:"100%",mt:1}},G.default.createElement(ze,{in:!!c,mountOnEnter:!0,unmountOnExit:!0},G.default.createElement(Me,{severity:"warning",icon:G.default.createElement(ao.default,null),sx:{wordWrap:"break-word",maxWidth:"100%"}},c.startsWith("pages:")?t(c):c))),G.default.createElement(B,{spacing:3},G.default.createElement(de,{loading:S,disabled:!n,variant:"contained",disableElevation:!0,size:"large",fullWidth:!0,type:"submit",sx:{height:56,fontSize:16,fontWeight:700,borderRadius:"8px"}},G.default.createElement("span",null,t("package__features:auth__email_sign_in__model__step1__button__continue")))))},lo=ri;var co=J(uo());var I=J(le()),ge=J(le());var Ae={gmail:"https://mail.google.com/mail/u/0/#search/MaxAI",yahoo:"https://mail.yahoo.com/d/search/keyword=MaxAI",outlook:"https://outlook.live.com/mail/0/",hotmail:"https://outlook.live.com/mail/0/",qq:"https://mail.qq.com/",mail163:"https://mail.163.com/",protonmail:"https://mail.protonmail.com/u/0/all-mail#keyword=MaxAI",icloud:"https://www.icloud.com/mail/"},ni=e=>{let{sx:r,email:t,onAuthSuccess:o}=e,{t:s}=ue(),[n,u]=(0,ge.useState)(""),[c,_]=(0,ge.useState)(""),[S,p]=(0,ge.useState)(!1),[h,w]=(0,ge.useState)(!1),{handleSubmit:K,control:L,formState:{isValid:D}}=ft({mode:"all",reValidateMode:"onChange"}),[P,{startCountdown:W,stopCountdown:A,resetCountdown:H}]=kr({countStart:60*3,intervalMs:1e3,isIncrement:!1});(0,ge.useEffect)(()=>{switch(!0){case/^[\w-\+\.]+@gmail\.com$/i.test(t):_(Ae.gmail);break;case/^[\w-\.]+@outlook\.com$/i.test(t):case/^[\w-\.]+@hotmail\.com$/i.test(t):_(Ae.outlook);break;case/^[\w-\.]+@yahoo\.com$/i.test(t):_(Ae.yahoo);break;case/^[\w-\.]+@qq\.com$/i.test(t):_(Ae.qq);break;case/^[\w-\.]+@163\.com$/i.test(t):_(Ae.mail163);break;case/^[\w-\.]+@(protonmail\.com)|(proton\.me)$/i.test(t):_(Ae.protonmail);break;case/^[\w-\.]+@icloud\.com$/i.test(t):_(Ae.icloud);break;default:break}},[t]),(0,ge.useEffect)(()=>{W()},[]),(0,ge.useEffect)(()=>{P===0&&(A(),w(!0))},[P]);let oe=async()=>{p(!0),w(!1),u("");try{await $e(t)&&(H(),W())}catch(b){u(`${b.message}`)}p(!1)},y=async b=>{if(D){u(""),p(!0);try{let V=await _r(t,b.verify_code);V&&(await xe.setAuthTokens({accessToken:V.access_token,refreshToken:V.refresh_token,userId:V.user_id,email:V.email}),o&&await o())}catch(V){u(V.message??"Invalid code. Check the code and try again.")}finally{setTimeout(()=>{p(!1)},0)}}},v=b=>b==="10119"?I.default.createElement(B,{spacing:.5},I.default.createElement(U,{fontSize:14,lineHeight:1.5,color:"inherit",fontWeight:500,textAlign:"left"},s("package__features:auth__sign_in__model__step2__error__block_registration__title")),I.default.createElement(U,{fontSize:14,lineHeight:1.5,color:"inherit",fontWeight:400,textAlign:"left"},s("package__features:auth__sign_in__model__step2__error__block_registration__message1")),I.default.createElement(U,{fontSize:14,lineHeight:1.5,color:"inherit",fontWeight:400,textAlign:"left"},s("package__features:auth__sign_in__model__step2__error__block_registration__message2")),I.default.createElement(U,{fontSize:14,lineHeight:1.5,color:"inherit",fontWeight:400,textAlign:"left"},I.default.createElement(ir,{i18nKey:"package__features:auth__sign_in__model__step2__error__block_registration__message3"},"If you believe this is an error or you need assistance, please contact our support team at",I.default.createElement(we,{href:or,underline:"hover",fontSize:"inherit",lineHeight:"inherit",color:"inherit"},rr),"."))):b;return I.default.createElement(B,{component:"form",onSubmit:b=>{b.preventDefault(),K(y)()},spacing:"24px",sx:{...r}},I.default.createElement(Le,{container:!0,rowSpacing:3,sx:{maxWidth:500}},I.default.createElement(Le,{item:!0,xs:12,sx:{paddingTop:"0!important"}},I.default.createElement(U,{fontSize:32,fontWeight:"500",gutterBottom:!0},s("package__features:auth__email_sign_in__model__step2__title")," "),I.default.createElement(U,{noWrap:!0,fontSize:32,color:"primary",fontWeight:"500"},t)),I.default.createElement(Le,{item:!0,xs:12},I.default.createElement(B,{mb:4,spacing:2},I.default.createElement(Me,{severity:"info",sx:{p:"8px 8px 0",bgcolor:b=>b.palette.mode==="light"?"rgb(229, 246, 253)":"#14162a",".MuiAlert-icon":{color:"#03a9f4"},[`& .${lr.icon}`]:{mr:"8px"}}},I.default.createElement(U,{color:"text.secondary",mt:"-6px",fontSize:14,lineHeight:1.25},s("package__features:auth__email_sign_in__model__step2__alert__part1")," ",I.default.createElement(Fr,{TooltipPopperProps:{disablePortal:!0},text:"MaxAI",sx:{minWidth:""}},I.default.createElement(U,{fontWeight:"bold",component:"span",color:"text.primary",fontSize:14,lineHeight:1.25},"MaxAI"))," ",s("package__features:auth__email_sign_in__model__step2__alert__part2")),c&&I.default.createElement(we,{href:c,target:"_blank",onClick:()=>{he({eventName:"click",params:{page_path:typeof window<"u"?location.pathname:"",link:c,email:t}})}},I.default.createElement(ur,{size:"large",variant:"contained",disableElevation:!0,sx:{width:"100%",height:40,mt:1},endIcon:I.default.createElement(co.default,{sx:{fontSize:"16px!important"}}),onClick:()=>{he({eventName:"click",params:{page_path:typeof window<"u"?location.pathname:"",link:c,email:t}})}},I.default.createElement(U,{fontSize:14},s("package__features:auth__email_sign_in__model__step2__alert__cta_button_label")))))),I.default.createElement(ct,{name:"verify_code",control:L,rules:{required:!0,minLength:6,maxLength:6},render:({field:{value:b,onChange:V},fieldState:ee})=>{let j=ee?.error?.message??"";return I.default.createElement(je,{error:!!j,value:b||"",type:"text",onChange:V,disabled:S,sx:{fontSize:20,[`& .${He.root}`]:{fontSize:20}},InputProps:{sx:{fontSize:20}},onKeyDown:()=>{if(h){u(s("package__features:auth__email_sign_in__model__step2__error__code_expired"));return}n&&u("")},label:j||s("package__features:auth__email_sign_in__model__step2__input_placeholder"),fullWidth:!0})}}),I.default.createElement(ce,{sx:{maxWidth:"100%",mt:1}},I.default.createElement(ze,{in:!!n,mountOnEnter:!0,unmountOnExit:!0},I.default.createElement(Me,{severity:"error",icon:!1,sx:{wordWrap:"break-word",maxWidth:"100%"}},v(n)))),I.default.createElement(ce,{display:"flex",flexDirection:"column",sx:{mt:2}},P>0?I.default.createElement(U,{variant:"body1"},s("package__features:auth__email_sign_in__model__step2__within",{COUNT:P})):I.default.createElement(ce,null,I.default.createElement(de,{loading:S,variant:"contained",disableElevation:!0,onClick:()=>oe()},s("package__features:auth__email_sign_in__model__step2__resend_verification_code"))))),I.default.createElement(Le,{item:!0,xs:12},I.default.createElement(ce,null,I.default.createElement(de,{onClick:()=>{he({eventName:"click",params:{email:t,page_path:location.pathname}})},loading:S,disabled:!D||h,variant:"contained",disableElevation:!0,size:"large",fullWidth:!0,type:"submit",sx:{height:56,fontSize:16,fontWeight:700}},I.default.createElement("span",null,s("package__features:auth__email_sign_in__cta_button_label")))))))},fo=ni;var Fe=J(le());var ai=e=>{let{onAuthSuccess:r,outerBoxSx:t,innerBoxSx:o,step:s,setStep:n}=e,[u,c]=(0,Fe.useState)(""),_=ft({mode:"all",reValidateMode:"onChange"});return Fe.default.createElement(B,{sx:{padding:"24px",alignItems:"center",justifyContent:"center",mb:"40px",...t}},Fe.default.createElement(B,{width:"100%",maxWidth:420,padding:"24px",sx:{minHeight:250,...o}},s===0&&Fe.default.createElement(lo,{form:_,onSubmit:S=>{S?.email&&(c(S.email),n(1))}}),s===1&&Fe.default.createElement(fo,{email:u,onAuthSuccess:r})))},mo=ai;var li=e=>{let{sx:r,showHeader:t=!1,autoLogin:o,showCloseButton:s=!0,onClose:n,isVerified:u,setIsVerified:c,onConnectSuccess:_}=e,{t:S}=ue(),[p,h]=(0,k.useState)(0),{syncUserInfo:w}=yr(),{syncSurveyStatus:K}=Ze(!1),{refreshModelUsage:L}=Ye();return k.default.createElement(B,{className:"auth-sign-in-card",justifyContent:"center",sx:{maxWidth:{xs:"90%",sm:"448px"},width:"100vw",margin:"0 auto",boxSizing:"border-box",boxShadow:"0px 2px 4px 0px #00000014",borderRadius:"16px",p:"2px",bgcolor:"background.paper",position:"relative",...r}},u&&k.default.createElement(ce,{sx:{position:"absolute",top:10,left:10}},k.default.createElement(wt,{"data-testid":"maxai-auth-sign-in-card-back-btn",onClick:()=>{p===0?c?.(!1):h(0)},sx:{width:"44px",height:"44px",color:D=>D.palette.mode==="dark"?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.38)"}},k.default.createElement(po.default,null))),s&&k.default.createElement(ce,{sx:{position:"absolute",top:10,right:10}},k.default.createElement(wt,{"data-testid":"maxai-custom-modal-close-btn",onClick:()=>{n&&n()},sx:{width:"44px",height:"44px",color:D=>D.palette.mode==="dark"?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.38)"}},k.default.createElement(_o.default,{sx:{fontSize:"26px"}}))),t&&k.default.createElement(ui,null),u?k.default.createElement(mo,{step:p,setStep:h,outerBoxSx:{mb:0},innerBoxSx:{minHeight:"unset"},onAuthSuccess:async()=>{if(typeof window<"u"){let D=window.location,P=new URLSearchParams(D.search),W=!Pe&&P.get("opener")==="true",A=await xe.getAuthTokens();if(!A)return;await gr.syncUserTokens({userId:A.userId||"",clientUserId:A.clientUserId||await pr(),accessToken:A.accessToken,refreshToken:A.refreshToken,stopOpenSettingsPage:W}),await ye(async()=>{await w(!0),L(),K(void 0,!0)}),W&&window.close(),n?.()}}}):k.default.createElement(B,{p:"24px",spacing:"24px"},!t&&k.default.createElement(Sr,{sx:{fontSize:"24px"}}),k.default.createElement(U,{fontSize:20,lineHeight:1.4,fontWeight:600,color:"text.primary",textAlign:"center",className:"auth-sign-in-card--title"},S("package__features:auth__sign_in__modal__title__part1")),k.default.createElement(Pr,{autoLogin:o}),k.default.createElement(cr,{sx:{color:D=>D.palette.mode==="dark"?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.38)",fontSize:"14px",marginTop:"12px",marginBottom:"-12px"}},"OR"),k.default.createElement(Dr,{onConnectSuccess:_,onClick:()=>{Pe||c?.(!0)}}),k.default.createElement(B,{direction:"row",justifyContent:"left"},k.default.createElement(U,{fontSize:14,lineHeight:1.5,color:"text.secondary"},S("package__features:auth__sign_in__modal__footer__part1")," ",k.default.createElement(we,{href:ht+"/terms",underline:"always",sx:{color:"inherit",fontSize:"inherit",textDecorationColor:"inherit"}},S("package__features:auth__sign_in__modal__footer__help__terms_of_service"))," ",S("package__features:auth__sign_in__modal__footer__part2")," ",k.default.createElement(we,{href:ht+"/privacy",underline:"always",sx:{color:"inherit",fontSize:"inherit",textDecorationColor:"inherit"}},S("package__features:auth__sign_in__modal__footer__help__privacy_policy")),k.default.createElement(fr,{PopperProps:{disablePortal:!0},title:k.default.createElement(U,{fontSize:14,lineHeight:1.5,textAlign:"left"},S("package__features:auth__sign_in__modal__footer__help__tooltip")),placement:"bottom",arrow:!0,sx:{ml:1}},k.default.createElement(go.default,{sx:{fontSize:20,verticalAlign:"middle",ml:1,color:"text.secondary"}}))))))},ui=()=>{let e="1M+",r="13K+",{t}=ue();return k.default.createElement(B,{p:3,pt:3,pb:2,spacing:2,justifyContent:"center",sx:{borderRadius:"16px 16px 0 0",background:o=>o.palette.mode==="dark"?"#FFFFFF0A":"#BA55F814"}},k.default.createElement(B,{direction:"row",alignItems:"center",justifyContent:"center",width:"100%",spacing:1},k.default.createElement(xr,{sx:{fontSize:"28px"}}),k.default.createElement(U,{fontSize:"22px",fontWeight:700,color:"text.primary",textAlign:"center"},"MaxAI")),k.default.createElement(B,{direction:"row",alignItems:"center",justifyContent:"space-between",px:3,gap:{xs:1,sm:3},flexWrap:"wrap"},k.default.createElement(B,{justifyContent:"center",alignItems:"center",component:"a",href:"https://a16z.com/100-gen-ai-apps/",target:"_blank",sx:{textDecorationLine:"none",color:"text.secondary","&:hover":{color:"primary.main",cursor:"pointer",transition:"color 0.3s ease"}},spacing:.5},k.default.createElement(B,{direction:"row",alignItems:"center",spacing:.5},k.default.createElement(mr,{sx:{fontSize:20}}),k.default.createElement(U,{fontSize:16,fontWeight:700,lineHeight:1.5,color:"primary.main"},"2024")),k.default.createElement(U,{fontSize:12,color:"inherit"},t("package__features:auth__sign_in__model__header__indicator1_label"))),k.default.createElement(B,{justifyContent:"center",alignItems:"center",spacing:.5},k.default.createElement(U,{fontSize:16,fontWeight:700,lineHeight:1.5,color:"primary.main"},e),k.default.createElement(U,{fontSize:12,color:"text.secondary"},t("package__features:auth__sign_in__model__header__indicator2_label"))),k.default.createElement(B,{justifyContent:"center",alignItems:"center",spacing:.5},k.default.createElement(U,{fontSize:16,fontWeight:700,lineHeight:1.5,color:"primary.main"},r),k.default.createElement(U,{fontSize:12,color:"text.secondary"},t("package__features:auth__sign_in__model__header__indicator3_label")))))},yo=li;var re=J(le());var ci=()=>{let e=Cr(),{open:r,closeAuthSignInCardModal:t,openAuthSignInCardModal:o}=Ir(),s=re.default.useRef(null),{isLogin:n}=qe(),u=(0,re.useRef)(!1);(0,re.useEffect)(()=>{wr(async()=>{u.current=!0,o()});let p=h=>{if(h.data?.event==="MAX_AI__AUTH_SIGN_IN_CARD_MODAL"&&h.data?.appName===xt){let{action:w="show"}=h.data;if(w==="close"){t();return}w==="show"&&o()}};return window.addEventListener("message",p),()=>{window.removeEventListener("message",p)}},[]);let c=()=>{t()},[_,S]=(0,re.useState)(!1);return(0,re.useEffect)(()=>{S(!1),n&&r&&c(),r||u.current&&(window.postMessage({event:"MAX_AI_CONNECT_ACCOUNT",type:"COMPLETE"}),u.current=!1)},[n,r]),re.default.createElement(nr,{container:e,open:r,onClose:p=>{p.stopPropagation(),p.preventDefault(),c()},sx:{position:"fixed",zIndex:2147483622},slotProps:{root:{onClick:p=>{p.stopPropagation()}},backdrop:{sx:{position:"fixed"}}}},re.default.createElement(sr,{in:r},re.default.createElement(ar,{component:"div",ref:s,translate:"no"},re.default.createElement(B,{component:"div","data-testid":"maxai--auth--sign-in-card-modal",height:"100%",justifyContent:"center",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",my:0,bgcolor:"transparent",boxShadow:"none",overflow:"hidden",height:"auto"},onMouseDown:p=>{p.stopPropagation()},onClick:p=>{p.stopPropagation()}},re.default.createElement(yo,{isVerified:_,setIsVerified:S,onClose:c,sx:{p:1,pt:3,borderRadius:1}})))))};var Cn=ci;export{Vr as a,Er as b,Ze as c,ct as d,ts as e,ft as f,yo as g,Cn as h};
