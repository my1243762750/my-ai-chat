import{a as Xi,b as Sr}from"./HWMIOKDV.js";import"./3BL6ANT4.js";import{A as Di,B as Wi,C as Fi,D as zi,E as Vi,F as ep,G as yr,H as Gi,I as qi,L as Yi,a as ui,b as je,c as gi,d as Js,e as tp,f as hi,h as bi,i as Ci,j as Ii,k as ke,l as Cr,m as yi,n as To,o as vi,p as wi,q as Ti,r as Ai,s as Ir,t as Pi,u as ki,v as Bi,w as Mi,x as Ei,y as Oi,z as Li}from"./JD5WEYQM.js";import"./LR3AMW7X.js";import"./T5PE7DH2.js";import{B as Ni,P as ko,Q as Bo,W as $i,b as mi,i as Pe,r as Si}from"./DDI5UP4S.js";import"./JFAM3C4T.js";import{b as ci,e as di,f as fi}from"./KMQZJ4IN.js";import"./FXDTEDOO.js";import{a as xr}from"./FPEP7GH5.js";import{c as zn,e as li}from"./SITM5SLO.js";import{a as fr,b as gr}from"./XYAU3F2A.js";import{a as hr,m as Ks}from"./52ECXFJ5.js";import{$a as ei,Ca as ee,D as _r,Db as ii,Eb as So,Fa as Kn,Ja as ce,Ma as Qn,Na as Zn,Nb as si,Ob as pi,Ua as Jn,Ub as vo,_a as ti,aa as Vn,b as Hn,c as R,e as Nn,ea as jn,eb as oi,fa as Rn,gb as ri,i as Ve,ia as Gn,ib as ni,ta as Yn,ua as Xn,ya as yo}from"./CLPCS5HX.js";import{c as ai}from"./5JAHRNIU.js";import{e as bo,h as we,k as Un}from"./YZ5NMKB5.js";import{a as Fn}from"./KKGP7PQX.js";import"./ZRYDJGAJ.js";import"./UAB7UEHC.js";import"./SGC75SOE.js";import"./XN3JVMCS.js";import"./TIMUG6T2.js";import"./JKH3AXBY.js";import"./VNS2BKAR.js";import"./2UXEOAF5.js";import{b as Co,f as $n}from"./CRTJIQND.js";import{f as Qs,q as zt}from"./YOZ5W2GG.js";import"./IHRJUCHI.js";import"./GREWFYE3.js";import"./NQEUUFEJ.js";import{b as lr,j as On}from"./IE4E3732.js";import{c as vn,d as pr,k as ur}from"./X2ALZK3D.js";import{d as wn}from"./GGDJOTLD.js";import{a as Pn,f as En,h as xo}from"./7LKKTU5H.js";import{a as Ft}from"./QGM6CHM5.js";import{a as Xs}from"./W5GFQTKO.js";import"./HDYNK7EV.js";import{b as dr}from"./4PRYT5SQ.js";import"./B7VRG6XU.js";import"./STNCT5QQ.js";import"./IR2EOPWG.js";import"./XHCCXCYD.js";import"./COZ2KBJ7.js";import"./UGKEWSX5.js";import{a as qn}from"./PB5LUW66.js";import{a as Zs}from"./DNTOT5B2.js";import"./SVFETRLG.js";import"./T3XVMMCW.js";import{a as gn,b as Bt}from"./ZD4W36SK.js";import"./CFU3PMBT.js";import"./DRWY43PD.js";import{a as cr}from"./4WM5DWTI.js";import"./WZACKIKL.js";import{d as Ln}from"./NLYC5QHQ.js";import"./JH2RBA22.js";import"./Q5NWQDKR.js";import"./WMUCJVX3.js";import"./LQYH3ZSR.js";import"./3RGTNMOF.js";import{a as Tn,b as An}from"./XKR4REXP.js";import{f as nr,g as lo}from"./2QQMSEQI.js";import"./LU2HGRXL.js";import"./OD4HJMKT.js";import{a as po}from"./B3ZCAZRS.js";import{a as Fe}from"./S34QHPYH.js";import{a as Nt}from"./WJUWA2XU.js";import{G as ze,h as on,p as nn,q as an}from"./MM57Z2BS.js";import{c as sn}from"./GSC4ZYB5.js";import"./AKHNMYRV.js";import"./WXUW4ORG.js";import"./6T6FEPNJ.js";import"./OZ6K5KWN.js";import"./P3TOHEEA.js";import{c as St}from"./B7SYSBXF.js";import{b as ao,c as so}from"./H5C5R2IB.js";import{C as un,c as Q,i as pn,k as ln}from"./QGTSDQHN.js";import{N as te,h as no,l as io,o as tn,z as en}from"./G7W6DI5V.js";import"./HPIKDO6W.js";import{b as rn,e as W}from"./LSIA5SS7.js";import"./BJ5FAZNI.js";import{c as P}from"./NCSJWSK3.js";import{a as Jr}from"./F44UP4MI.js";import"./RDPX2RL7.js";import"./POF2YL63.js";import"./XXHIGHFM.js";import"./LWSOZ55D.js";import{b as Ys}from"./NS74SLXM.js";import{a as ro,b as Xr,c as le,d as Kr,h as Ut,la as b,na as x}from"./PEAOUDRP.js";import"./JQWMDYRH.js";import{a as Ht}from"./PCHDBHHN.js";import{a as Ki}from"./WWVICX45.js";import"./FHPRHV46.js";import{a as Vt,b as Po,c as Ui}from"./JUJJIC7Z.js";import"./2KEEOA55.js";import"./BEL6FLMX.js";import"./7DYLEKAB.js";import{a as ho,b as kn,h as Mn,k as ue}from"./BYBP4KRV.js";import"./UXV3QMB6.js";import{a as ve}from"./2KT44S3D.js";import{d as Hi}from"./JLO744NT.js";import{a as Ao}from"./LIFUWJGW.js";import"./MAPXS3RR.js";import{a as ji,b as Ri}from"./MC2A5KLN.js";import"./SZXXTBUM.js";import{m as $t,n as N,r as me}from"./VTGOYHJW.js";import{b as Sn,d as Mt}from"./DQCZLHJM.js";import{A as wo,E as qt,F as ft,G as J,s as xi,y as _i,z as Ae}from"./LHOPOZ7S.js";import{a as Et}from"./N5EAU2XY.js";import{b as Io}from"./SMGS7QAW.js";import"./XOTQ5KQV.js";import{c as br,d as Te}from"./454JMIH7.js";import"./X7IGDKSO.js";import"./DW5SZ3VB.js";import"./2HIYOEPI.js";import{a as Bn}from"./PZVNEH53.js";import"./HPHM72CW.js";import"./UZTKLAY4.js";import{a as mr,c as Dn,g as _o}from"./Q25QR6DL.js";import{k as Wn}from"./XXMMBCVS.js";import"./UAWD6KOW.js";import"./27O46L5C.js";import{a as hn,b as Gt,j as xn}from"./UXYD27MU.js";import{Ja as go,La as In,Ta as Se,Ua as z,c as _n,f as Ie,v as sr,x as bn,y as Cn}from"./VE4EMEBO.js";import"./UICGGF3X.js";import{A as mo,U as ir,V as co,a as Yr,ab as ar,ca as fo,d as S,f as Zr,ib as fn,j as at,k as Jt,l as Ce,o as $e,s as uo}from"./AUJ76673.js";import"./UB52WFCV.js";import"./PKATR2QD.js";import{A as yn,e as ye}from"./DOCIOFBQ.js";import{c as Qr,o as mn,u as cn,v as dn}from"./MX3LYTPZ.js";import{c as Gr,h as qr}from"./HFEXSQX6.js";import{a as I}from"./4B6UFNBQ.js";import{E as rr,I as jr,L as Rr,b as V,c as zr,m as pe,n as oo,w as $r,x as Vr}from"./XZ5AIA7R.js";import"./PJ57C2TE.js";import{c as Wt,f as m}from"./GAV6HCJA.js";var ba=Wt(Oo=>{"use strict";"use client";var yp=Ht();Object.defineProperty(Oo,"__esModule",{value:!0});Oo.default=void 0;var Sp=yp(Nt()),vp=Ut(),Kc=Oo.default=(0,Sp.default)((0,vp.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"}),"FolderOpen")});var Ca=Wt(Lo=>{"use strict";"use client";var wp=Ht();Object.defineProperty(Lo,"__esModule",{value:!0});Lo.default=void 0;var Tp=wp(Nt()),Ap=Ut(),Zc=Lo.default=(0,Tp.default)((0,Ap.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUnchecked")});var Ar=Wt(Wo=>{"use strict";"use client";var zp=Ht();Object.defineProperty(Wo,"__esModule",{value:!0});Wo.default=void 0;var $p=zp(Nt()),Vp=Ut(),Hf=Wo.default=(0,$p.default)((0,Vp.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"CallMadeOutlined")});var Ha=Wt(Ho=>{"use strict";"use client";var Rp=Ht();Object.defineProperty(Ho,"__esModule",{value:!0});Ho.default=void 0;var Gp=Rp(Nt()),qp=Ut(),Yf=Ho.default=(0,Gp.default)((0,qp.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite")});var Fa=Wt(Uo=>{"use strict";"use client";var Yp=Ht();Object.defineProperty(Uo,"__esModule",{value:!0});Uo.default=void 0;var Xp=Yp(Nt()),Kp=Ut(),fg=Uo.default=(0,Xp.default)((0,Kp.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}),"CreditCardOutlined")});var za=Wt(No=>{"use strict";"use client";var Qp=Ht();Object.defineProperty(No,"__esModule",{value:!0});No.default=void 0;var Zp=Qp(Nt()),Jp=Ut(),hg=No.default=(0,Zp.default)((0,Jp.jsx)("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"}),"HelpOutline")});var $a=Wt(Fo=>{"use strict";"use client";var tl=Ht();Object.defineProperty(Fo,"__esModule",{value:!0});Fo.default=void 0;var el=tl(Nt()),ol=Ut(),_g=Fo.default=(0,el.default)((0,ol.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}),"KeyboardArrowRightOutlined")});var Va=Wt(zo=>{"use strict";"use client";var rl=Ht();Object.defineProperty(zo,"__esModule",{value:!0});zo.default=void 0;var nl=rl(Nt()),il=Ut(),Cg=zo.default=(0,nl.default)((0,il.jsx)("path",{d:"m17 8-1.41 1.41L17.17 11H9v2h8.17l-1.58 1.58L17 16l4-4zM5 5h7V3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h7v-2H5z"}),"LogoutOutlined")});var ja=Wt($o=>{"use strict";"use client";var al=Ht();Object.defineProperty($o,"__esModule",{value:!0});$o.default=void 0;var sl=al(Nt()),pl=Ut(),yg=$o.default=(0,sl.default)((0,pl.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2m6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5z"}),"NotificationsNoneOutlined")});var Ra=Wt(Vo=>{"use strict";"use client";var ll=Ht();Object.defineProperty(Vo,"__esModule",{value:!0});Vo.default=void 0;var ul=ll(Nt()),ml=Ut(),vg=Vo.default=(0,ul.default)((0,ml.jsx)("path",{d:"M14 11c0-1.1-.9-2-2-2s-2 .9-2 2 .9 2 2 2 2-.9 2-2m-6.02 7.25c-.29-.9-.57-1.94-.76-3L6 16.07v2.98zM12 2s5 2 5 11l2.11 1.41c.56.37.89 1 .89 1.66V22l-5-2H9l-5 2v-5.93c0-.67.33-1.29.89-1.66L7 13c0-9 5-11 5-11m0 2.36S9 6.38 9 13c0 2.25 1 5 1 5h4s1-2.75 1-5c0-6.62-3-8.64-3-8.64m6 14.69v-2.98l-1.22-.81c-.19 1.05-.47 2.1-.76 3z"}),"RocketOutlined")});var L=m(I());var tt=m(I()),Qi=m(ep());var{getBrowser:op}=new Qi.UAParser,rp=e=>{let[t,o]=(0,tt.useState)(null),[n,r]=(0,tt.useState)(null),[i,p]=(0,tt.useState)(!0),a=(0,tt.useMemo)(()=>t?t==="Chrome"?"chrome://settings/help":t==="Edge"?"edge://settings/help":t==="Chromium"?"https://download-chromium.appspot.com/":t==="Opera"?"opera://about":t==="Firefox"?"https://support.mozilla.org/en-US/kb/update-firefox-latest-release":t==="Safari"?"https://support.apple.com/en-us/HT204416":"":"",[t]);return ve(()=>{let s=op();o(s.name),r(s.version);let l=Number(s.version?.match(/\d+/)?.[0]||""),u=!0;l!==0&&(s.name==="Chrome"&&l<103&&(u=!1),s.name==="Edge"&&l<103&&(u=!1),p(u),u||J().then(async h=>{h.ON_BOARDING_RECORD_BROWSER_VERSION||(await yr("CLIENT","[CLIENT] Browser version is not compatible",`Browser: [${s.name}]
Version: [${s.version}]`,{uuid:"dd385931-45f4-4de1-8e48-8145561b0f9d"}),await ft("ON_BOARDING_RECORD_BROWSER_VERSION",!0))}))}),!t||!n||i?tt.default.createElement(tt.default.Fragment,null,e.children):tt.default.createElement(x,{sx:{mx:"auto",px:1,flex:1,alignItems:"center",justifyContent:"center",maxWidth:400},spacing:2},tt.default.createElement(Fi,{sx:{color:"text.primary",fontSize:"88px"}}),tt.default.createElement(b,{fontSize:"26px",fontWeight:800,color:"text.primary"},`Update your ${t} browser`),tt.default.createElement(b,{textAlign:"center",fontSize:"16px",color:"text.primary"},"In order to use this extension, please update your browser to the latest version. Your current browser version is not compatible."),tt.default.createElement(St,{underline:"none",href:"#",target:"_blank",onClick:s=>{s.preventDefault(),s.stopPropagation(),yr("CLIENT","[CLIENT] Browser clicked update",`Browser: [${t}]
Version: [${n}]`,{uuid:"dd385931-45f4-4de1-8e48-8145561b0f9d"}),_o({url:a})}},tt.default.createElement(W,{sx:{height:"48px",fontSize:"16px",borderRadius:"24px"},variant:"contained",color:"primary"},`Update ${t} browser`)))},Zi=rp;var st=m(I()),na=m(Qr());Xr();Kr();var y=m(I());Xr();Kr();var Yt=m(I());var np=e=>{let{children:t,rootId:o,root:n,disabled:r,platformFeatureCover:i,onClickContextMenuItem:p}=e,{changeMode:a}=Zn(),{liteContextMenuActionsItems:s}=Si("",{enabledFavorite:!1}),l=(0,Yt.useRef)(null),[u,h]=(0,Yt.useState)(null);return(0,Yt.useEffect)(()=>{if(n&&o&&!l.current){let g=document.createElement("style");g.setAttribute("data-emotion-id",o),n.appendChild(g),l.current=ro({key:"max-ai-input-assistant-context-menu",prepend:!0,container:g}),h(l.current)}},[n,o]),!n||!u?null:Yt.default.createElement(le,{value:u},Yt.default.createElement(zi,{defaultPlacement:"bottom-start",defaultFallbackPlacements:["bottom-end","bottom","top-start","top-end","top","right","left"],root:n,menuList:s,needAutoUpdate:!0,hoverOpen:!1,menuWidth:260,referenceElement:t,onClickContextMenu:async(g,d)=>{let f=d?.target,c=fr(f);if(c){let _=gr(c);dr(_,c,{platformFeatureCover:i})}p(g)},onClickReferenceElement:g=>{a("list");let d=g.target,f=fr(d);if(f){let c=gr(f);dr(c,f)}},hoverIcon:null,...r?{customOpen:!0,referenceElementOpen:!1}:{}}))},vr=np;var de=m(I());var Re={sceneType:"INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON",id:"ONBOARDING_TOOLTIP__INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON",anchorElementSelectors:'button[data-testid="maxai-input-assistant-cta-button"]',CtaButtonClickedName:"Onboarding > InstantReplyGmailComposeButton > Got it"},ip=e=>{let{showStateTrigger:t,...o}=e,{t:n}=S(),[r,i]=(0,de.useState)(!1);return(0,de.useEffect)(()=>{t?ko(Re.sceneType).then(p=>{p||Bo(Re.sceneType).then(()=>{i(!0)})}):i(!1)},[t]),de.default.createElement(Pe,{autoCloseOnClick:!0,hideBackdrop:!0,sx:{visibility:"hidden",zIndex:5},placement:"top",fallbackPlacements:["bottom","right"],trigger:r,anchorElementSelectors:Re.anchorElementSelectors,CtaButtonProps:{"data-button-clicked-name":Re.CtaButtonClickedName},popoverBoxSx:{minWidth:"180px"},id:Re.id,...o},de.default.createElement(b,{fontSize:14,lineHeight:1.4,color:"text.primary",fontWeight:400,textAlign:"left"},n("onboarding:onboarding_tooltip__INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON__text")))},Ji=ip;var Xt=m(I());var Ge={sceneType:"INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON",id:"ONBOARDING_TOOLTIP__INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON",anchorElementSelectors:'button[data-testid="maxai-input-assistant-cta-button"]',CtaButtonClickedName:"Onboarding > InstantReplyGmailAIReplyButton > Got it"},ap=e=>{let{showStateTrigger:t,...o}=e,{t:n}=S(),[r,i]=(0,Xt.useState)(!1);return(0,Xt.useEffect)(()=>{t?ko(Ge.sceneType).then(p=>{p||Bo(Ge.sceneType).then(()=>{i(!0)})}):i(!1)},[t]),Xt.default.createElement(Pe,{hideBackdrop:!0,sx:{visibility:"hidden",zIndex:1},placement:"top",fallbackPlacements:["bottom","right"],trigger:r,anchorElementSelectors:Ge.anchorElementSelectors,CtaButtonProps:{"data-button-clicked-name":Ge.CtaButtonClickedName},popoverBoxSx:{minWidth:"180px"},id:Ge.id,footerLeft:Xt.default.createElement($i,null),...o},Xt.default.createElement(x,{spacing:.5},Xt.default.createElement(b,{fontSize:14,lineHeight:1.4,color:"text.primary",fontWeight:400,textAlign:"left"},n("onboarding:onboarding_tooltip__INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON__text"))))},ta=ap;var Ot=e=>e?typeof e=="function"?e():e:{},ea="sidebar_reply_rewrite",pp=e=>{let{observerData:t,placement:o}=e,{id:n,config:r,buttonGroup:i,shadowRootElement:p}=t,{InputAssistantBoxSx:a,DropdownButtonStyle:s,CTAButtonStyle:l,instantReplyWebsiteType:u,needReplyDivider:h,replyDividerStyle:g,loadingButtonStyle:d,needListenElementSelector:f,brandLogoStyle:c,CTAButtonBoxStyle:_}=r,{askAIWithShortcutsV2:v}=So(),{conversationId:T,setConversationIds:w}=R(M=>({conversationId:M.conversationIds[0]||"",setConversationIds:M.setConversationIds})),[B,O]=(0,y.useState)(null),U=Ce(Qn),{createConversation:rt}=ce(),E=(0,y.useRef)(null),Kt=(0,y.useRef)(null),q=async(M,G)=>{let Y=(await rt("Chat",{reason:"initCreate"}))[0].id;w([Y]),U(u??Wn(jr())),Vt();let mt=ye(M),it=[{type:"SET_VARIABLE_MAP",parameters:{VariableMap:{OperationElementSelector:{key:"OperationElementSelector",value:`[maxai-input-assistant-button-id="${n}"]`,isBuiltIn:!0},[ar.PRESET_VARIABLE__INSTANT_REPLY__WEBSITE_TYPE.name]:{key:ar.PRESET_VARIABLE__INSTANT_REPLY__WEBSITE_TYPE.name,value:u,isBuiltIn:!0}}}}];it.push({type:"SET_VARIABLE",parameters:{Variable:{key:Sn,value:ea}}}),await v(it.concat(mt),{conversationId:Y}),G?.onClick&&(E.current?.closeTooltip(),Kt.current?.closeTooltip(),setTimeout(()=>{G.onClick?.(t)},100)),setTimeout(()=>{Io("chatBoxSetVariablesModalInputMediator").focus()},500)},[ne,ie]=(0,y.useState)($e()),Qt=(0,y.useRef)(f);(0,y.useEffect)(()=>{if(!Qt.current)return;let M=Qt.current,G=[];if(M.forEach(Y=>{(Array.isArray(Y)?Y:[Y]).forEach(it=>{let yt=Array.from(document.querySelectorAll(it));yt.length&&G.push(...yt)})}),G.length===0)return;let It=new MutationObserver(()=>{ie($e())});return G.forEach(Y=>{It.observe(Y,{attributes:!0,childList:!0,subtree:!0})}),()=>{It.disconnect()}},[]);let Dt=Ot(l),At=Ot(s),ae=Ot(a),he=Ot(g),De=Ot(d),F=Ot(c),We=Ot(_),nt=(0,y.useRef)(null),{t:He}=S(["client"]),Zt=ee(T),[to,xe]=(0,y.useState)(!1),{isDarkMode:_e}=Ft(),be=(0,y.useMemo)(()=>{let M=ye(Dt),G=ye(At),It=ye(he),Y={},mt={};if(i.forEach(it=>{let yt=Ot(it.CTAButtonStyle),ct=Ot(it.DropdownButtonStyle),K=Ot(it.replyDividerStyle);yt&&(M=Object.assign(M||{},{...yt})),ct&&(G=Object.assign(G||{},{...ct})),K&&(It=Object.assign(It||{},{...K}))}),Y){let{backgroundColor:it="white",hoverBackgroundColor:yt="#F2F2F2",color:ct="rgba(0, 0, 0, 0.87)",hoverColor:K="rgba(0, 0, 0, 0.87)",borderColor:dt="rgba(0, 0, 0, 0.87)",hoverBorderColor:Pt="rgba(0, 0, 0, 0.87)",borderRadius:kt="4px 0 0 4px",borderWidth:tr="1px",iconSize:Ne=20,padding:er="8px 12px",...se}=M||{},or=se["&:hover"]||{};delete se["&:hover"],Y={minWidth:"unset",backgroundColor:it,color:ct,borderColor:dt,borderRadius:kt,fontSize:`${Ne}px`,borderWidth:tr,borderStyle:"solid",position:"relative",padding:er,iconSize:Ne,transition:"unset","&:hover":{color:K,backgroundColor:yt,borderColor:Pt,...or},...se}}if(mt){let{backgroundColor:it="white",hoverBackgroundColor:yt="#F2F2F2",color:ct="rgba(0, 0, 0, 0.87)",hoverColor:K="rgba(0, 0, 0, 0.87)",borderColor:dt="rgba(0, 0, 0, 0.87)",hoverBorderColor:Pt="rgba(0, 0, 0, 0.87)",borderRadius:kt="0 4px 4px 0",borderWidth:tr="1px",iconSize:Ne=20,padding:er="8px 4px",...se}=G||{},or=se["&:hover"]||{};delete se["&:hover"],mt={minWidth:"unset",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:it,color:ct,borderColor:dt,borderRadius:kt,fontSize:`${Ne}px`,borderWidth:tr,borderStyle:"solid",padding:er,iconSize:Ne,borderLeftWidth:"0px","&:hover":{color:K,backgroundColor:yt,borderColor:Pt,...or},...se}}return{ctaButtonSx:Y,dropdownButtonSx:mt,replyDividerStyle:It}},[i,Dt,At,he]),Ue=(0,y.useMemo)(()=>{let M=ye(ae)||{};i.forEach(Y=>{let mt=Ot(Y.InputAssistantBoxSx);mt&&Object.assign(M,mt)});let G=_e?"rgba(0, 0, 0, 0.08)":"rgba(255, 255, 255, 0.08)",It={boxShadow:`0px 2px 3px 1px ${G}, 1px 0px 2px 0px ${G}, -1px 0px 2px 0px ${G}`,...M?.["&:hover"]};return It&&delete M["&:hover"],{...to?It:{},...M}},[to,i,_e,ae]);(0,y.useEffect)(()=>{O(document.querySelector(`#${qr}`)?.shadowRoot?.querySelector("div"))},[]);let[Rt,eo]=(0,y.useState)(null);return(0,y.useEffect)(()=>{if(eo(p?.querySelector("div:first-of-type")),p){let M=document.createElement("style");p.appendChild(M),nt.current=ro({key:"max-ai-input-assistant-context-menu",prepend:!0,container:M})}},[p]),y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{key:ne,style:{height:"inherit",display:"flex",flexDirection:"row",alignItems:"center",borderRadius:"4px",...Ue},onMouseEnter:()=>xe(!0),onMouseLeave:()=>xe(!1)},i[0]&&y.default.createElement(je,{defaultContextMenuPath:i[0].liteContextMenuRootPath},y.default.createElement(vr,{rootId:n,root:B,disabled:Zt,onClickContextMenuItem:M=>{q(M.actions,i[0])}},y.default.createElement(P,{style:{width:"100%",height:"inherit",display:"flex",alignItems:"center"},component:"div"},nt.current&&y.default.createElement(le,{value:nt.current},y.default.createElement(cr,{placement:o,zIndex:2e6,PopperProps:{container:p},title:i[0]?.tooltip?He(i[0].tooltip):""},y.default.createElement("div",{style:{display:"flex",flexDirection:"column",position:"relative",cursor:"pointer",...We}},y.default.createElement(P,{position:"absolute",top:`-${Dt?.transparentHeight||0}px`,width:"100%",height:`${Dt?.transparentHeight||0}px`,bgcolor:Gt?"transparent":"red",zIndex:2000001}),y.default.createElement(W,{id:`maxAIInputAssistantCtaButton${n}`,"data-testid":"maxai-input-assistant-cta-button","data-button-key":i[0].liteContextMenuRootPath,disabled:Zt,sx:be.ctaButtonSx,onMouseDownCapture:M=>{M.stopPropagation(),M.preventDefault()},onMouseUpCapture:M=>{M.stopPropagation(),M.preventDefault()},onClick:M=>{M.stopPropagation(),M.preventDefault(),q(i[0].actions,i[0])}},Zt?y.default.createElement(te,{size:be.ctaButtonSx?.iconSize||16,sx:{fontSize:"inherit",color:"rgba(125, 125, 125, 0.6)",...De||{}}}):y.default.createElement(Tn,{sx:{fontSize:"inherit",color:"inherit",...F}}),i[0].displayText&&y.default.createElement(b,{component:"span",fontSize:"14px",sx:i[0].displayTextSx,noWrap:!0},typeof i[0].displayText=="function"?i[0].displayText(He):i[0].displayText)),y.default.createElement(P,{position:"absolute",bottom:`-${Dt?.transparentHeight||0}px`,width:"100%",height:`${Dt?.transparentHeight||0}px`,bgcolor:Gt?"transparent":"red",zIndex:2000001})))))),i[0].onboardingTooltipSceneType&&nt.current&&y.default.createElement(le,{value:nt.current},i[0].onboardingTooltipSceneType==="INSTANT_REPLY__GMAIL__COMPOSE_REPLY_BUTTON"?y.default.createElement(ta,{showStateTrigger:!0,anchorElementSelectorsRootContainer:Rt,container:Rt}):i[0].onboardingTooltipSceneType==="INSTANT_REPLY__GMAIL__COMPOSE_NEW_BUTTON"?y.default.createElement(Ji,{showStateTrigger:!0,anchorElementSelectorsRootContainer:Rt,container:Rt}):y.default.createElement(Sr,{container:Rt,sceneType:i[0].onboardingTooltipSceneType}))),h&&y.default.createElement("div",{style:{display:"flex",height:"70%",width:"1px",flexShrink:0,backgroundColor:"rgba(0, 0, 0, 0.12)",...be.replyDividerStyle}}),i[1]&&y.default.createElement(je,{defaultContextMenuPath:i[1].liteContextMenuRootPath},y.default.createElement(vr,{platformFeatureCover:ea,rootId:n,root:B,disabled:Zt,onClickContextMenuItem:M=>{q(M.actions,i[1])}},y.default.createElement(P,null,y.default.createElement(cr,{placement:o,controlsRef:Kt,zIndex:2e6,PopperProps:{container:B},title:i[1]?.tooltip?He(i[1].tooltip):""},y.default.createElement("div",{style:{display:"flex",flexDirection:"column",position:"relative",cursor:"pointer"}},nt.current&&y.default.createElement(le,{value:nt.current},y.default.createElement(P,{position:"absolute",top:`-${At?.transparentHeight||0}px`,width:"100%",height:`${At?.transparentHeight||0}px`,bgcolor:Gt?"transparent":"red",zIndex:2000001}),y.default.createElement(P,{id:`maxAIInputAssistantDropdownButton${n}`,"data-testid":"maxai-input-assistant-dropdown-button","data-button-key":i[1].liteContextMenuRootPath,sx:{...be.dropdownButtonSx,...Zt?{pointerEvents:"none",cursor:"not-allowed"}:{}}},y.default.createElement(zt,{icon:"Rewrite",sx:{fontSize:"inherit",color:"inherit"}})),y.default.createElement(P,{position:"absolute",bottom:`-${At?.transparentHeight||0}px`,width:"100%",height:`${At?.transparentHeight||0}px`,bgcolor:Gt?"transparent":"red",zIndex:2000001})))))),i[1].onboardingTooltipSceneType&&nt.current?y.default.createElement(le,{value:nt.current},y.default.createElement(Sr,{container:Rt,sceneType:i[1].onboardingTooltipSceneType})):null),y.default.createElement(po,null,y.default.createElement("span",{style:{all:"inherit"}},"id:",t.config.id))))},ra=pp;var lp=()=>{let{appSettings:e}=Se(),[t,o]=(0,st.useState)([]),n=(0,st.useMemo)(()=>new _i,[]),{pageUrl:r}=wi(),i=(0,st.useMemo)(()=>{let a=br(r);return Ai[a]||null},[r]);(0,st.useEffect)(()=>(n.createInputAssistantButtonListener(o),()=>{n.destroy()}),[n]);let p=(0,st.useMemo)(()=>{let a=br();return a==="mail.google.com"?e.userSettings?.inputAssistantButton?.gmail===!0:a==="outlook.live.com"||a==="outlook.office.com"||a==="outlook.office365.com"?e.userSettings?.inputAssistantButton?.outlook===!0:a==="twitter.com"?e.userSettings?.inputAssistantButton?.twitter===!0:a==="linkedin.com"?e.userSettings?.inputAssistantButton?.linkedIn===!0:a==="facebook.com"?e.userSettings?.inputAssistantButton?.facebook===!0:a==="youtube.com"||a==="studio.youtube.com"?e.userSettings?.inputAssistantButton?.youtube===!0:a==="instagram.com"?e.userSettings?.inputAssistantButton?.instagram===!0:a==="discord.com"?e.userSettings?.inputAssistantButton?.discord===!0:a==="app.slack.com"?e.userSettings?.inputAssistantButton?.slack===!0:a==="web.whatsapp.com"?e.userSettings?.inputAssistantButton?.whatsApp===!0:a==="web.telegram.org"?e.userSettings?.inputAssistantButton?.telegram===!0:a==="messenger.com"?e.userSettings?.inputAssistantButton?.messenger===!0:!1},[e.userSettings?.inputAssistantButton]);return(0,st.useEffect)(()=>{let a=l=>{let u=l.target;u&&i?.selectors?.some(h=>u.matches(h))&&Ir.getInstance().setLastFocusInstantReplyInput(u)},s=()=>{window.removeEventListener("focus",a,{capture:!0}),Ir.getInstance().setLastFocusInstantReplyInput(void 0)};return p?window.addEventListener("focus",a,{capture:!0}):s(),()=>{s()}},[n,p,i?.selectors]),(0,st.useEffect)(()=>{p?n.continue():n.pause()},[n,p]),st.default.createElement(st.default.Fragment,null,t.map(a=>(0,na.createPortal)(st.default.createElement(ra,{observerData:a,key:a.id}),a.renderRootElement,a.id)))},ia=lp;var Mo=(e=!1)=>{let t=e?"rgba(255, 255, 255, 0.87)":"rgba(0, 0, 0, 0.87)",o=e?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)";return e?{frame:"#333",tabBackground:"#333",tabBackgroundInactive:"#222",tabBackgroundHover:"rgba(255, 255, 255, 0.08)",tabText:t,tabTextInactive:o}:{frame:"#fff",tabBackground:"#fff",tabBackgroundInactive:"#eee",tabBackgroundHover:"rgba(0, 0, 0, 0.08)",tabText:t,tabTextInactive:o}};var wr=m(I()),gt=(0,wr.createContext)({theme:Mo(!1),maxAIBrowserWindows:[]}),aa=(0,wr.createContext)({tabId:"",tabData:null});var jt=m(I());var qe=m(I()),mp=e=>{let{tab:t}=e,o=(p,a)=>{let s={status:"loading",viewerController:p};a?.doc_type==="image"&&(s.favIconUrl=a.s3?.doc_url||""),N.update(t.id,s)},n=()=>{N.update(t.id,{status:"complete"})},r=()=>{N.update(t.id,{status:"unloaded"})},i=()=>{if(t.customRender)return t.customRender(t);if(t.documentId)return qe.default.createElement(Rn,{documentId:t.documentId,title:t.title,onLoadStart:o,onLoadSuccess:n,onLoadError:r,viewerProps:t.viewerProps});if(t.url)return qe.default.createElement(jn,{url:t.url,title:t.title,onLoadStart:o,onLoadSuccess:n,onLoadError:r,...t.viewerProps})};return qe.default.createElement(aa.Provider,{value:{tabData:t,tabId:t.id}},qe.default.createElement(x,{sx:{height:"100%",width:"100%",display:t.active?"flex":"none",borderRadius:1,overflow:"auto"},tabIndex:-1,component:"div","data-testid":`maxai--browser-panel--${t.id}`},i()))},sa=mp;var pa=m(Fe());var j=m(I()),cp=e=>{let{tabInstance:t}=e,{theme:o}=(0,j.useContext)(gt),{id:n,title:r,favIconUrl:i,active:p,status:a}=t,s=a==="loading",{document:l}=$n(t.documentId),u=async()=>{await N.update(n,{active:!0})},h=async()=>{await N.remove(n)},g=(0,j.useMemo)(()=>({maxWidth:"144px",flexDirection:"row",alignItems:"center",gap:"8px",borderRadius:p?"6px 6px 0 0":"6px",padding:"6px 8px",backgroundColor:p?o.tabBackground:o.tabBackgroundInactive,color:p?o.tabText:o.tabTextInactive,position:"relative",width:0,flex:1,"&:hover":{background:p?o.tabBackground:o.tabBackgroundHover}}),[p]);return j.default.createElement(x,{onClick:u,className:"maxai--browser-window--header--tabs-bar--tab","data-testid":`maxai--browser-tab--${n}`,sx:g},j.default.createElement(x,{sx:{width:"16px",height:"16px",position:"relative",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0,"& > img":{width:s?"12px":"16px",height:s?"12px":"16px",boxSizing:"border-box",borderRadius:s?"50%":"4px",overflow:"hidden",transition:"all 0.3s ease-in-out"},"& > svg":{fontSize:s?"12px":"16px",boxSizing:"border-box",borderRadius:s?"50%":"4px",overflow:"hidden",transition:"all 0.3s ease-in-out"}}},j.default.createElement(te,{thickness:4,size:16,sx:{position:"absolute",color:"primary.main",display:s?"block":"none"}}),i?j.default.createElement("img",{src:i,width:16,height:16,alt:r}):l?.doc_type?j.default.createElement(Co,{documentType:l.doc_type}):null),j.default.createElement(b,{fontSize:"14px",noWrap:!0,textAlign:"left",width:0,flex:1},r),j.default.createElement(Q,{"aria-label":"close",sx:{flexShrink:0,width:"16px",height:"16px",padding:0},onClick:h},j.default.createElement(pa.default,{sx:{fontSize:"12px"}})),p&&j.default.createElement(dp,null))},dp=()=>{let{theme:e}=(0,j.useContext)(gt);return j.default.createElement(P,{sx:{position:"absolute",width:"100%",bottom:"-6px",height:"6px",left:0,backgroundColor:e.tabBackground}},j.default.createElement(P,{sx:{width:"8px",height:"8px",position:"absolute",left:"-8px",bottom:0,overflow:"hidden",backgroundColor:e.tabBackground}},j.default.createElement(P,{sx:{width:"16px",height:"16px",position:"absolute",backgroundColor:e.tabBackgroundInactive,borderRadius:"50%",top:"-8px",left:"-8px"}})),j.default.createElement(P,{sx:{width:"8px",height:"8px",position:"absolute",right:"-8px",bottom:0,overflow:"hidden",backgroundColor:e.tabBackground}},j.default.createElement(P,{sx:{width:"16px",height:"16px",position:"absolute",backgroundColor:e.tabBackgroundInactive,borderRadius:"50%",top:"-8px",right:"-8px"}})))},la=cp;var Ye=m(I()),fp=e=>{let{tabs:t}=e,{theme:o}=(0,Ye.useContext)(gt);return Ye.default.createElement(x,{className:"maxai--browser-window--header--tabs-bar",sx:{flexDirection:"row",alignItems:"center",gap:"6px",padding:"6px",background:o.tabBackgroundInactive}},t.map(n=>Ye.default.createElement(la,{tabInstance:n,key:n.id})))},ua=fp;var ht=m(I()),gp=e=>{let{windowInstance:t}=e,{theme:o}=(0,ht.useContext)(gt),{id:n,type:r,width:i,height:p,alwaysOnTop:a,focused:s,top:l,left:u}=t,[h,g]=(0,ht.useState)(t.tabs);(0,ht.useEffect)(()=>{let f=()=>{g(t.tabs)};return N.addListener("onCreated",f),N.addListener("onRemoved",f),N.addListener("onUpdated",f),f(),()=>{N.removeListener("onCreated",f),N.removeListener("onRemoved",f),N.removeListener("onUpdated",f)}},[n]);let d=(0,ht.useMemo)(()=>{let f={width:"100%",height:"100%",position:"absolute",boxSizing:"border-box",zIndex:0,top:0,left:0,borderRadius:1,backgroundColor:o.frame,boxShadow:" 0px 2px 8px 0px rgba(0, 0, 0, 0.12)",overflow:"hidden",border:"1px solid",borderColor:"border.main"};return a?f.zIndex=9999:s&&(f.zIndex=100),r==="popup"&&(f.zIndex=1e3,f.width=i,f.height=p),f},[i,p,r,s,a,l,u,o.frame]);return ht.default.createElement(x,{sx:d,"data-testid":n,className:"maxai--browser-window",component:"div",tabIndex:-1,onKeyDownCapture:f=>{(f.metaKey||f.ctrlKey)&&f.key==="w"&&N.query({active:!0,currentWindow:!0}).then(c=>{c.forEach(_=>{N.remove(_.id)})})}},ht.default.createElement(x,{className:"maxai--browser-window--header"},!t.hiddenTabBar&&ht.default.createElement(ua,{tabs:h})),h.map(f=>ht.default.createElement(sa,{tab:f,key:f.id})))},ma=gp;var Xe=m(I()),hp=e=>{let{sx:t,...o}=e,{maxAIBrowserWindows:n}=(0,Xe.useContext)(gt);return n.length===0?null:Xe.default.createElement(x,{sx:{flex:1,boxSizing:"border-box",width:"100%",height:"100%",position:"relative",...t},...o},n.map(r=>Xe.default.createElement(ma,{windowInstance:r,key:r.id})))},Eo=hp;var xp=e=>{let{autoClearWindows:t=!0,sx:o,children:n}=e,r=Ft(),i=R(u=>u.conversationIds),[p,a]=(0,jt.useState)([]),s=(0,jt.useMemo)(()=>Mo(r.isDarkMode),[r.isDarkMode]),l={maxAIBrowserWindows:p,theme:s};return(0,jt.useEffect)(()=>{let u=()=>{a($t.windows)};return $t.addListener("onCreated",u),$t.addListener("onUpdated",u),$t.addListener("onDestroyed",u),()=>{$t.removeListener("onCreated",u),$t.removeListener("onUpdated",u),$t.removeListener("onDestroyed",u)}},[]),(0,jt.useEffect)(()=>{if(!t)return;(async()=>{let h=await $t.getCurrent();if(h){let g=await N.query({windowId:h.id});await Promise.all(g.map(d=>N.remove(d.id))),await $t.remove(h.id)}})()},[t,i]),jt.default.createElement(gt.Provider,{value:l},n||jt.default.createElement(Eo,{sx:o}))},ca=xp;var da=m(I()),_p=()=>{let e=o=>{Mt(o==="showed"?"plan_subscription_failed_reminder_showed":"plan_subscription_failed_reminder_clicked",{reminder_type:"topbar"})},t=(0,da.useRef)(e);return t.current=e,{trackSubscriptionFailedReminder:e,trackSubscriptionFailedReminderRef:t}},fa=_p;var ga=m(tp());var oe=m(I()),bp=e=>{let{title:t,content:o,href:n,target:r="_blank",onClick:i,onClose:p,sx:a}=e,s=Rr();return oe.default.createElement(x,{direction:"row",spacing:1,p:1.5,sx:{position:"relative",bgcolor:"rgba(255, 239, 188, 1)",color:"rgba(132, 49, 0, 1)",pr:s?{xs:"60px",md:1.5}:"60px",justifyContent:s?{md:"center"}:null,...a}},oe.default.createElement(ga.default,{sx:{colo:"inherit",fontSize:20,mt:"2px"}}),oe.default.createElement(x,{spacing:1},oe.default.createElement(b,{sx:{fontSize:14}},t),oe.default.createElement(St,{href:n,target:r,sx:{color:"inherit",fontSize:16,fontWeight:500},onClick:i},o)),oe.default.createElement(Q,{sx:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)"},onClick:p},oe.default.createElement(zt,{icon:"Close",sx:{color:"rgba(0, 0, 0, 0.6)",fontSize:"24px"}})))},ha=bp;var Be=m(I());var Cp=()=>{let{t:e}=S(),{isSubscriptionPaymentFailed:t}=z(),[o,n]=Jt(bo),{trackSubscriptionFailedReminder:r,trackSubscriptionFailedReminderRef:i}=fa(),{show:p,barHeight:a}=o;return(0,Be.useEffect)(()=>{n(s=>({...s,show:t}))},[t]),(0,Be.useEffect)(()=>{p&&i.current("showed")},[p]),p?Be.default.createElement(P,{id:"maxai-unable-subscription-bar",ref:s=>{s&&a!==s.offsetHeight&&n(l=>({...l,barHeight:s.offsetHeight}))}},Be.default.createElement(ha,{title:e("package__features:pricing__unable_subscription__title"),content:e("package__features:pricing__unable_subscription__link__title"),href:`${V}/account/your-plan/`,onClick:()=>r("clicked"),onClose:()=>n(s=>({...s,show:!1}))})):null},xa=Cp;var $=m(I());var Ip=e=>{let{t}=S(),[{open:o,title:n,onPassword:r,onCancel:i},p]=Jt(oi),{isDownSm:a}=En(),[s,l]=(0,$.useState)(""),[u,h]=(0,$.useState)(!1),g=d=>{(d.key==="Enter"||d.code==="Enter")&&s&&(r?.(s),l(""),p({open:!1}))};return $.default.createElement(io,{open:o,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",sx:{zIndex:2147483647}},$.default.createElement(P,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:a?"85%":400,bgcolor:"background.paper",borderRadius:4,boxShadow:"rgba(26, 26, 26, 0.2) 0px 0px 24px",p:3,outline:"none"}},$.default.createElement(b,{fontWeight:"bold",fontSize:22,color:"text.primary"},t("package__features:chat__pdf__password_modal__enter_password__title")),$.default.createElement(P,{sx:{mt:3}},$.default.createElement(x,{flexDirection:"row",flexWrap:"nowrap",alignItems:"center",sx:{width:"100%",overflow:"hidden"},gap:1},$.default.createElement(b,{component:"div",fontSize:16,color:"text.primary"},t("package__features:chat__pdf__password_modal__open_file__title")),$.default.createElement(b,{component:"div",fontSize:16,color:"text.primary",fontWeight:"bold",noWrap:!0,sx:{flex:1,overflow:"hidden"}},n)),$.default.createElement(pn,{sx:{width:"100%",mt:1,'& input[type="password"]::-ms-reveal':{display:"none"}},type:u?"text":"password",size:"small",placeholder:t("package__features:chat__pdf__password_modal__enter_password__title"),value:s,onChange:d=>{d.stopPropagation(),d.preventDefault(),l(d.target.value)},onKeyDown:g,InputProps:{endAdornment:$.default.createElement(sn,{position:"end"},$.default.createElement(Q,{onClick:()=>h(!u),edge:"end"},u?$.default.createElement(fi,null):$.default.createElement(di,null)))}}),$.default.createElement(x,{sx:{mt:4}},$.default.createElement(W,{variant:"contained",sx:{height:48},disabled:s.length===0,onClick:()=>{r?.(s),l(""),p({open:!1})}},$.default.createElement(b,{fontSize:16},t("package__common:continue"))),$.default.createElement(W,{sx:{mt:1},onClick:()=>{i?.(),l(""),p({open:!1})}},$.default.createElement(b,{fontSize:16},t("package__common:cancel")))))))},_a=Ip;var Ia=m(Qs()),ya=m(Js()),Sa=m(ba()),va=m(Ca());var Z=m(I()),kp=e=>{let{data:t,sx:o}=e,{t:n}=S(),r=()=>t.uploadType==="folder"?Z.default.createElement(Sa.default,{sx:{color:"text.primary",fontSize:20}}):Z.default.createElement(Co,{documentType:t.uploadType,file:t.uploadFile,link:t.uploadLink,size:20}),i=()=>{switch(t.uploadStatus){case"error":return Z.default.createElement(Z.default.Fragment,null,t.uploadType==="folder"&&Z.default.createElement(b,{sx:{color:"text.primary",fontSize:14}},n("package__features:project__upload_view__failed__title",{COUNT:t.errorCount})),Z.default.createElement(ya.default,{sx:{color:"rgba(237, 80, 80, 1)",fontSize:20}}));case"uploading":return Z.default.createElement(Z.default.Fragment,null,t.uploadType==="folder"&&Z.default.createElement(b,{sx:{color:"text.primary",fontSize:14}},n("package__features:project__upload_view__uploading_folder__description",{DONE_COUNT:t.successCount+t.errorCount,UPLOAD_COUNT:t.uploadCount})),Z.default.createElement(te,{size:16,sx:{color:"text.primary",mr:"2px"}}));case"pending":return Z.default.createElement(va.default,{sx:{color:"rgba(217, 217, 217, 1)",fontSize:20}});case"success":return Z.default.createElement(Ia.default,{sx:{color:"rgba(16, 156, 122, 1)",fontSize:20}});case"canceled":return Z.default.createElement(b,{sx:{color:"text.secondary",fontSize:14}},n("package__features:project__upload_view__canceled__description"))}return null};return Z.default.createElement(x,{direction:"row",gap:1,height:36,minHeight:36,alignItems:"center",sx:o},r(),Z.default.createElement(b,{flex:1,sx:{color:"text.primary",fontSize:14,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},t.uploadName),i())},wa=kp;var H=m(I()),Bp=()=>{let{uploads:e,cancelAllUploads:t,clearAllUploads:o}=ni(),{t:n}=S(),[r,i]=(0,H.useState)(!1),[p,a]=(0,H.useState)(!1);(0,H.useEffect)(()=>{if(e.length>0&&e.every(d=>["success","error","canceled"].includes(d.uploadStatus))){let d=null;return oo&&e.length===1&&e[0].uploadType!=="folder"&&e[0].uploadStatus==="success"&&(d=setTimeout(()=>{let c=e[0].projectNode;c&&c.doc_id&&((c.doc_type==="page_content__webpage"||c.doc_type==="page_content__email")&&c.link?me.previewWebpage(c.link,{title:c.name,url:c.link}):me.previewDocument(c.doc_id,{documentType:c.doc_type,title:c.name,url:c.link||c.file_download_link}))},2e3)),e.some(f=>f.uploadStatus==="success")&&(d=setTimeout(()=>{ri.emit("MAXAI_PROJECT_UPLOAD_SUCCESS")},2e3)),a(!0),()=>{d&&clearTimeout(d)}}},[e]);let s=(0,H.useMemo)(()=>{if(!e.length)return null;if(!p)return e.length>1?n("package__features:project__upload_view__uploading_multiple__title",{COUNT:e.length}):n("package__features:project__upload_view__uploading_single__title",{COUNT:e.length});let g=0,d=0,f=0;if(e.forEach(v=>{v.uploadStatus==="canceled"?g+=1:v.uploadStatus==="success"?d+=1:v.uploadStatus==="error"&&(f+=1)}),g)return g>1?n("package__features:project__upload_view__canceled_multiple__title",{COUNT:g}):n("package__features:project__upload_view__canceled_single__title",{COUNT:g});let c=d>1?n("package__features:project__upload_view__complete_multiple__title",{COUNT:d}):n("package__features:project__upload_view__complete_single__title",{COUNT:d}),_=f?n("package__features:project__upload_view__failed__title",{COUNT:f}):"";return`${c} ${_}`},[e,p]),l=()=>{t(),a(!0)},u=(0,H.useMemo)(()=>{if(pe)return!1;let g=[`${V}/app`,"http://localhost:"];return!!(typeof window<"u"&&g.find(d=>window.location.href.startsWith(d)))},[]);(0,H.useEffect)(()=>{e.length&&(i(!0),a(!1))},[e.length]);let h=_n();return(0,H.useEffect)(()=>{if(p){let g=setTimeout(()=>{if(i(!1),a(!1),o(),u)try{let d=h.query?.id;d&&h.noSenseReplace(`/app?id=${d}`)}catch{}},2e3);return()=>{clearTimeout(g)}}},[p,u]),H.default.createElement(H.default.Fragment,null,H.default.createElement(io,{open:r,sx:{position:"fixed",zIndex:2147483647}},H.default.createElement(P,{sx:{width:"100%",height:"100%",outline:"none"},onDragEnter:g=>g.stopPropagation(),onDragOver:g=>g.stopPropagation(),onDragLeave:g=>g.stopPropagation(),onDrop:g=>g.stopPropagation()},H.default.createElement(P,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",minWidth:"min(448px, calc(100% - 32px))",maxWidth:"min(448px, calc(100% - 32px))",backgroundColor:"background.paper",boxSizing:"border-box",borderRadius:2}},H.default.createElement(x,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",borderBottom:"1px solid ",borderColor:"border.main"}},H.default.createElement(b,{sx:{fontSize:"24px",fontWeight:700,lineHeight:"34px",height:"34px",textAlign:"left",color:"text.primary",margin:"24px 24px 16px 24px",display:"flex",alignItems:"center",gap:"4px"}},s)),H.default.createElement(x,{direction:"column",p:3,sx:{overflow:"auto",maxHeight:"calc(100vh - 300px)"}},e.map(g=>H.default.createElement(wa,{key:g.uploadId,data:g}))),!p&&H.default.createElement(x,{sx:{p:3,pb:2,borderTop:"1px solid",borderColor:"border.main",alignItems:"center"}},H.default.createElement(W,{variant:"contained",sx:g=>({bgcolor:g.palette.mode==="light"?"rgba(0, 0, 0, 0.04)":"rgba(255, 255, 255, 0.12)",color:"text.secondary",padding:"10px 16px",lineHeight:"20px",width:"100%","&:hover":g.palette.mode==="light"?{}:{bgcolor:"rgba(255, 255, 255, 0.16)",color:"rgba(255, 255, 255, 1)"}}),onClick:l},n("package__features:project__upload_view__cancel_upload__title")))))),H.default.createElement(_a,null))},Ta=Bp;var Lt=m(I());var vt=m(I());var Aa=m(I());var Mp=()=>{let e=R(o=>o.conversationType),t=at(Bt);return(0,Aa.useEffect)(()=>{if(t.open&&t.loadedAppSidebar&&!xi()){let o=Io(e);if(o.ref){Ci(o.ref);let n=setTimeout(()=>{o.focus()},200);return()=>clearTimeout(n)}}},[t.open,t.loadedAppSidebar,e]),null},Pa=Mp;var Ke=m(I());var Ep=async()=>{try{let t=await new mr({runtime:"client"}).postMessage({event:"Client_ping"});if(t.data?.tabId){let o=await uo.getItem("SidebarAutoNewChatCached");if(o[t.data.tabId])return o[t.data.tabId]?.conversationIds||[]}return[]}catch{return[]}},Op=async e=>{try{let n=(await new mr({runtime:"client"}).postMessage({event:"Client_ping"})).data?.tabId;if(!n)return;let r=await uo.getItem("SidebarAutoNewChatCached")||{};r[n]={conversationIds:e,createTime:Date.now()};let i=Object.keys(r),p=3*24*60*60*1e3;i.forEach(a=>{r[a].createTime<Date.now()-p&&delete r[a]}),await uo.setItem("SidebarAutoNewChatCached",r)}catch{}},Lp=()=>{let{setConversationIds:e,conversationIds:t}=R(r=>({setConversationIds:r.setConversationIds,conversationIds:r.conversationIds})),{createConversation:o,getConversation:n}=ce();return ve(()=>{(async()=>{let i=await Ep();if(i.length>0){if((await n(i[0]))?.isDelete||!await Cn.getUserInfo()){let u=await o("Chat",{reason:"initCreate"});e([u[0].id]);return}e(i);return}let s=(await o("Chat",{reason:"initCreate"})).map(l=>l.id)[0];e([s])})()}),(0,Ke.useEffect)(()=>{t.length>0&&Op(t)},[t]),ei(),Ke.default.createElement(Ke.default.Fragment,null)},ka=Lp;var Do=m(I());var Qe=m(I()),Dp=()=>{let[e,t]=(0,Qe.useState)(()=>window.location.href),[o,n]=(0,Qe.useState)(document.title),r=(0,Qe.useRef)(null),i=()=>{p(),r.current=setInterval(()=>{n(document.title),t(window.location.href)},1e3)},p=()=>{r.current&&clearInterval(r.current)};return{pageUrl:e,documentTitle:o,startListen:i,stopListen:p}},Ba=Dp;var Hp=()=>{let e=at(Bt),t=e.open||e.loadedAppSidebar,{conversationId:o,setCurrentDocument:n}=R(u=>({conversationId:u.conversationIds[0],setChatDocuments:u.setChatDocuments,setCurrentDocument:u.setCurrentDocument,setEnableSearch:u.setEnableSearch})),{pageUrl:r,documentTitle:i,startListen:p,stopListen:a}=Ba(),s=yo(o),l=ue(s);return(0,Do.useEffect)(()=>{if(!t)return;let u=window.location.href;me.analyzeToDocument(u).then(h=>{h.data?.doc_id&&me.uploadDocument(h.data).then().catch()})},[t]),(0,Do.useEffect)(()=>{let u=me.analyzeToDocumentType(r)||"page_content__webpage";n(h=>{if(h)return{...h,title:i,link:r,maxAIDocumentId:co,maxAIDocumentType:u,preUploadMetadata:{browserExtensionSidebarCurrentPageURL:r,previewIcon:rr(r)}};let g=!!(!l.current?.meta.chatSources||l.current?.meta.chatSources.enableCurrent);return{id:co,status:"idle",title:i,link:r,selected:g,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),maxAIDocumentId:co,maxAIDocumentType:u,preUploadMetadata:{browserExtensionSidebarCurrentPageURL:r,previewIcon:rr(r)}}})},[r,i]),(0,Do.useEffect)(()=>(p(),()=>{a()}),[]),null},Ma=Hp;var Up=()=>{let e=at(Bt),t=e.open||e.loadedAppSidebar,{conversationIds:o}=R(s=>({conversationIds:s.conversationIds})),{getConversation:n,updateConversation:r}=ce(),{refreshModelUsageOnce:i}=pr(),p=ue(o[0]),{refetch:a}=mi();return(0,vt.useEffect)(()=>{t&&(Xn("Chat").then(async s=>{let l=s[0];if(!l||!p.current)return;let u=await n(p.current);u&&u.meta.AIModel!==l.value&&r(u.id,{meta:{AIProvider:l.AIProvider,AIModel:l.value,maxTokens:l.maxTokens}},{syncToRemote:!!u.meta.isUploaded})}),i(),Jn.checkUpdate().then(s=>{s&&a("OpenSidebar")}))},[t]),vt.default.createElement(vt.default.Fragment,null,vt.default.createElement(ka,null),vt.default.createElement(Ma,null),vt.default.createElement(Vi,null),vt.default.createElement(Pa,null),vt.default.createElement(Np,null))},Np=()=>{let{conversationId:e,setConversationIds:t,setSelectionContent:o,getChatHubState:n}=R(f=>({conversationId:f.conversationIds[0],setConversationIds:f.setConversationIds,setSelectionContent:f.setSelectionContent,getChatHubState:f.getChatHubState})),{askAIQuestionV2:r,askAIWithShortcutsV2:i}=So(e),p=ee(e),a=ue(p),s=ue(i),l=ue(r),{uploadChatScreenshotFiles:u}=Bi(),{updateConversation:h}=ce(),g=Ce(Bt),{refreshModelUsage:d}=pr();return zn(async(f,c)=>{if(f==="SyncContextMenuConversationInSidebar"){let{conversationId:_}=c;_&&t([_])}if(f==="ContextMenuQuickSearchSelectedText"){let{question:_}=c;_&&(o(null),Vt(),h(e,{meta:{chatSources:{enableSearch:!0}}},{syncToRemote:!1,isPartialUpdate:!0,updateUpdatedAt:!1}),n().setEnableSearch(!0),Ti(),await mo(300),await l.current({text:_,type:"user",meta:{includeHistory:!0}},{chatDocuments:[{id:ir,title:Yr().t("package__features:home_view__chat_with_any_content__chat__chat_document_selector__chip__search__title"),status:"idle",selected:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),hidden:!0,maxAIDocumentId:ir,maxAIDocumentType:"search_results"}]}))}if(f==="ContextMenuChatWithImage"){if(!await ur({emitEvent:!0}))return;await mo(300);let _=[],v=async T=>{let w=await Ri(T,{parse:"blob",method:"GET",cache:"no-store",mode:"cors"});if(!w?.data)return;let B=T.split("/").pop?.()?.split("?")?.[0]||"Image.png";if(B.endsWith(".svg")){let O=await dn(cn(w.data,B));O&&_.push(O)}else _.push(ji(w.data,B))};try{let T=c?.imageSrc?.split(";")?.[0]?.split("/")?.[1]||"png",w=`${c?.image?.alt||"Image"}.${T}`;if(c.imageSrc.startsWith("data:image")){let B=await mn(c.imageSrc,w);B&&_.push(B)}else await v(c.imageSrc)}catch{await v(c.image.src||c.imageSrc)}_.length>0&&await u(_)}if(f==="MaxAIContinueSearchWithAI"){let{conversationId:_,AIMessage:v}=c;if(!_)return;let T=await h(_,{type:"Chat",meta:{chatSources:{enableSearch:!0}}},{syncToRemote:!0,updateUpdatedAt:!0});n().setEnableSearch(!0),T&&((await _r.getService().dangerouslyGetTotalMessageIds(T.id)).includes(v.messageId)||await _r.getService().addMessages(T.id,[v],{waitUntilRemoteDBUpdated:!0}),t([T.id]),Vt())}if(f==="QuickAccessSummary"){if(!await ur({emitEvent:!0}))return;Vt();let{currentDocument:_,setCurrentDocument:v}=n();if(!_||a.current)return;h(e,{meta:{chatSources:{enableCurrent:!0}}},{syncToRemote:!1,isPartialUpdate:!0,updateUpdatedAt:!1}),v(O=>O?{...O,selected:!0}:null),await mo(300);let{pageSummaryType:T}=c,w=fn[T]||[];if(!w)return;let B=w([_]);B?.[0]?.actions?.length&&s.current(B[0].actions,{chatDocuments:[_],isFocusInput:!0})}f==="QuickAccessScreenshot"&&g(_=>({..._,open:!0})),f==="RefreshUsage"&&d()}),vt.default.createElement(vt.default.Fragment,null)},Ea=Up;var Oa=m(Fe());var pt=m(I()),Fp=e=>{let{open:t,onClose:o,noHeader:n=!0,noFooter:r=!0}=e,i=Jr(),{t:p}=S(),{userSettings:a}=Se(),[s,l]=(0,pt.useState)(!0),u=(0,pt.useMemo)(()=>{let h={bgcolor:i.palette.background.paper,divider:i.palette.divider,color:i.palette.text.primary,lang:a?.preferredLanguage||"en"};n&&(h.noHeader="1"),r&&(h.noFooter="1");let g=new URLSearchParams(h).toString();return`${V}/release-notes/?${g}`},[i,n,r,a?.preferredLanguage]);return pt.default.createElement(pt.default.Fragment,null,pt.default.createElement(an,{keepMounted:!s,anchor:"bottom",open:t,onClose:o,sx:{zIndex:2147483647,position:pe?"absolute":"fixed",[`& .${nn.paper}`]:{position:"absolute",borderTopRightRadius:8,borderTopLeftRadius:8,minHeight:"80vh",bgcolor:"background.paper",backgroundImage:"unset"}},disableScrollLock:!0,disableEnforceFocus:!0,PaperProps:{"data-testid":"maxai--release-notes-drawer--paper"},slotProps:{backdrop:{sx:{position:"absolute"}}}},pt.default.createElement(x,{direction:"row",spacing:1,alignItems:"center",px:2,py:2.5,position:"relative"},pt.default.createElement(Q,{onClick:o,size:"small",sx:{position:"absolute",right:"16px",top:"16px",padding:"6px",zIndex:1}},pt.default.createElement(Oa.default,{sx:{fontSize:"20px"}}))),pt.default.createElement(P,{sx:{position:"relative",width:"100%",height:0,flex:1,"& > iframe":{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}},s&&pt.default.createElement(Fn,{loading:!0}),pt.default.createElement("iframe",{src:u,width:"100%",height:"100%",frameBorder:"0",allowFullScreen:!0,onLoad:()=>{l(!0)}}))))},La=Fp;var Da=m(Ar());var fe=m(I()),jp=()=>{let{t:e}=S();return fe.default.createElement(St,{underline:"none",target:"_blank",href:`${V}/account/rewards/`,position:"relative","data-testid":"rewards-tab-tooltip",width:360,height:218,sx:{display:"flex",flexDirection:"column",justifyContent:"end",bgcolor:"#fff",p:1,borderRadius:1},onClick:()=>{Mt("referral_card_clicked",{referralType:"REWARDS"})}},fe.default.createElement(P,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"}},fe.default.createElement("img",{src:fo("/images/activity/rewards.png"),style:{height:140},alt:"rewards"})),fe.default.createElement(W,{sx:{width:"100%",padding:"12px 24px",borderRadius:1,border:"1px solid #000",bgcolor:"#000",color:"#fff",fontSize:"16px",fontWeight:600,lineHeight:"24px","&:hover":{bgcolor:"#000",color:"#fff"}},endIcon:fe.default.createElement(Da.default,{color:"inherit",fontSize:"inherit"})},fe.default.createElement(b,{color:"inherit",fontSize:"inherit"},e("package__ui:sidebar_nav__marketing_tabs__rewards__card__button__title"))))},Wa=jp;var Ua=m(Ar());var wt=m(I());var Na=()=>{let{t:e}=S();return wt.default.createElement(St,{underline:"none",target:"_blank",href:`${V}/affiliate/`,position:"relative","data-testid":"affiliate-tab-tooltip",width:360,height:218,sx:{display:"flex",flexDirection:"column",p:1},onClick:()=>{Mt("referral_card_clicked",{referralType:"AFFILIATE"})}},wt.default.createElement("img",{src:fo("/images/activity/affiliate-bg.png"),style:{width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:-1},alt:"rewards-bg"}),wt.default.createElement(x,{width:"100%",my:"auto"},wt.default.createElement(b,{fontSize:"20px",fontWeight:700,lineHeight:1.4,color:"#fff",textAlign:"center",whiteSpace:"pre-line"},e("package__ui:sidebar_nav__marketing_tabs__affiliate__card__title")),wt.default.createElement(b,{fontSize:"14px",fontWeight:400,lineHeight:1.5,color:"#fff",textAlign:"center"},e("package__ui:sidebar_nav__marketing_tabs__affiliate__card__description__part_1"),wt.default.createElement(b,{component:"b",sx:{color:"#000",bgcolor:"#ffca16",fontSize:"16px",fontWeight:600,p:"2px 4px",ml:"2px",borderRadius:"6px"}},"25%")),wt.default.createElement(b,{fontSize:"14px",fontWeight:400,lineHeight:1.5,color:"#fff",textAlign:"center"},e("package__ui:sidebar_nav__marketing_tabs__affiliate__card__description__part_2"))),wt.default.createElement(W,{sx:{width:"100%",padding:"12px 24px",borderRadius:1,border:"1px solid #000",bgcolor:"#000",color:"#fff",fontSize:"16px",fontWeight:600,lineHeight:"24px",textAlign:"center","&:hover":{bgcolor:"#000",color:"#fff"}},endIcon:wt.default.createElement(Ua.default,{color:"inherit",fontSize:"inherit"})},wt.default.createElement(b,{color:"inherit",fontSize:"inherit"},e("package__ui:sidebar_nav__marketing_tabs__affiliate__card__button__title"))))};var Ga=m(Fa()),qa=m(Xs()),kr=m(za()),Ya=m($a()),Xa=m(Va()),Ka=m(ja()),Qa=m(Ra()),Za=m(Zs());var Br=m(Ys());var k=m(I());var jo=m(I()),cl=({sx:e,fontSize:t=12,...o})=>{let{userInfo:n,fetching:r}=z();return jo.default.createElement(on,{sx:{textTransform:"capitalize",fontSize:t,backgroundColor:i=>i.palette.mode==="dark"?"#444647":"#E8E8E8",color:i=>i.palette.mode==="dark"?"#9D9D9D":"#8B8B8B",...e},...o},r?jo.default.createElement(te,{size:t}):n?.email?.[0]||jo.default.createElement("span",{hidden:!0}))},Pr=cl;var dl=e=>{let{OptionsCardProps:t,avatarProps:o,needPopoverPointerMovingBuffer:n=!0,...r}=e,[i,p]=(0,k.useState)(!1),{t:a}=S(),{collapsed:s}=ai(),{isLogin:l,sigOutMaxAIAccount:u}=In(),{canShowSurvey:h}=ki(),{userInfo:g,isFreeUser:d,isPayingUser:f,hasGroupId:c}=z(),_=wn(),{proChatReward:v}=vn(),{dashboard:T}=bi(),{openConfirm:w,closeConfirm:B}=Un(),O=l&&d&&(v>0||!T?.is_webstore_commented),U=()=>{w({footerButtonVariant:"vertical",closeButton:!1,headerContainerSx:{border:"none",pb:0},sx:{p:2},titleSx:{width:"100%"},title:k.default.createElement(b,{component:"p",fontSize:32,fontWeight:900,textAlign:"center"},a("package__features:user__user_avatar__log_out__title")),content:k.default.createElement(b,{component:"p",fontSize:20,textAlign:"center"},a("package__features:user__user_avatar__log_out__content")),confirmButtonText:a("package__common:log_out"),onConfirm:E=>(E&&(B(),u()),!0)})},rt=(0,k.useMemo)(()=>{let E={padding:"12px 10px"};return[{value:"email",disabled:!0,divider:!0,render:()=>k.default.createElement(x,{gap:"16px",sx:{padding:"7px 8px 12px 8px"}},k.default.createElement(x,{direction:"row",alignItems:"center",gap:"8px",sx:{color:q=>q.palette.mode==="dark"?"rgba(255, 255, 255, 0.38) !important":"rgba(0, 0, 0, 0.38) !important",textAlign:"left"}},k.default.createElement(An,{sx:{fontSize:"14px",color:"inherit"}}),pe&&k.default.createElement(b,{fontSize:"12px"},zr)),k.default.createElement(nr,{testid:"maxai--sidebar--user-avatar--options--user-info",disabled:!0,sx:{padding:"0",justifyContent:"start"}},k.default.createElement(Pr,{sx:{width:"34px",height:"34px"}}),k.default.createElement(vi,{sx:{color:"text.secondary"},fontSize:"14px",title:g?.email},g?.email)))},{testid:"maxai--sidebar--user-avatar--options--your-plan",value:"your-plan",label:k.default.createElement(b,{fontSize:"14px"},a("package__features:user__user_avatar__menu_item__my_plan"),k.default.createElement(b,{fontSize:"inherit",ml:"12px",component:"span",sx:{fontSize:"14px",lineHeight:"1.5",fontWeight:400,color:q=>q.palette.mode==="dark"?"rgba(255, 255, 255, 0.50)":"rgba(0, 0, 0, 0.38)"}},_)),icon:k.default.createElement(Ga.default,null),sx:E},...f&&c?[{testid:"maxai--sidebar--user-avatar--options--people",value:"people",label:a("package__features:user__user_avatar__menu_item__team_plan"),icon:k.default.createElement(un,null),sx:E}]:[],{testid:"maxai--sidebar--user-avatar--options--settings",value:"settings",label:a("common:settings"),icon:k.default.createElement(Za.default,null),sx:E},{testid:"maxai--sidebar--user-avatar--options--chat-beta-features",render:()=>k.default.createElement(Pi,{buttonSize:"medium"}),value:"chat-beta-features",divider:!0,sx:E},...h&&l?[{icon:k.default.createElement(Br.default,{sx:{fontSize:20,color:"inherit"}},k.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},k.default.createElement("path",{d:"M4.8127 6.80792H15.1877M4.8127 10.0007H15.1877M4.46686 14.0898V16.9173L8.15621 14.0898H16.5724C17.5269 14.0898 18.3002 13.3151 18.3002 12.3606V4.81315C18.3002 3.85865 17.5255 3.08398 16.571 3.08398H3.42936C2.47486 3.08398 1.7002 3.85865 1.7002 4.81315V12.3606C1.7002 13.3151 2.47486 14.0898 3.42936 14.0898H4.46686Z",stroke:"currentColor",strokeOpacity:"0.87",strokeWidth:"1.60645"}))),testid:"maxai--sidebar--user-avatar--options--feedback",label:a("package__features:chat__chat_input__feedback_button"),value:"feedback",sx:E}]:[],{icon:k.default.createElement(kr.default,null),value:"help",disabledOnSelectOptionAutoClosePopup:!0,label:a("package__features:user__user_avatar__menu_item__help_menu"),sx:E,divider:!0,ButtonProps:{placement:pe?"left-end":"right-end",endIcon:k.default.createElement(Ya.default,null),needPopoverPointerMovingBuffer:!0,onSelectOption:(q,ne)=>{ne.close(),q==="release-notes"&&p(!0),q==="help-center"&&window.open($r),q==="get-started"&&window.open(`${V}/onboarding/browser/step-1/`),q==="contact-us"&&window.open(Vr)},options:[{sx:E,icon:k.default.createElement(Ka.default,null),testid:"maxai--sidebar--user-avatar--options--release-notes",value:"release-notes",label:a("package__common:release_notes")},{sx:E,icon:k.default.createElement(kr.default,null),testid:"maxai--sidebar--user-avatar--options--help-center",value:"help-center",label:a("package__ui:sidebar_nav__footer__button__help")},{sx:E,icon:k.default.createElement(Qa.default,null),testid:"maxai--sidebar--user-avatar--options--get-started",value:"get-started",label:a("package__features:user__user_avatar__menu_item__get_started")},{sx:E,icon:k.default.createElement(qa.default,null),testid:"maxai--sidebar--user-avatar--options--contact-us",value:"contact-us",label:a("package__common:contact_us")}]}},{testid:"maxai--sidebar--user-avatar--options--signout",icon:k.default.createElement(Xa.default,null),value:"logout",label:a("package__features:user__user_avatar__menu_item__log_out"),divider:!0,sx:E},{testid:"maxai--sidebar--user-avatar--options--gift",icon:k.default.createElement(Br.default,{sx:{fontSize:20,color:"inherit"}},k.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},k.default.createElement("path",{d:"M12 6V22M12 6H8.46429C7.94332 6 7.4437 5.78929 7.07533 5.41421C6.70695 5.03914 6.5 4.53043 6.5 4C6.5 3.46957 6.70695 2.96086 7.07533 2.58579C7.4437 2.21071 7.94332 2 8.46429 2C11.2143 2 12 6 12 6ZM12 6H15.5357C16.0567 6 16.5563 5.78929 16.9247 5.41421C17.293 5.03914 17.5 4.53043 17.5 4C17.5 3.46957 17.293 2.96086 16.9247 2.58579C16.5563 2.21071 16.0567 2 15.5357 2C12.7857 2 12 6 12 6ZM20 11V18.8C20 19.9201 20 20.4802 19.782 20.908C19.5903 21.2843 19.2843 21.5903 18.908 21.782C18.4802 22 17.9201 22 16.8 22L7.2 22C6.07989 22 5.51984 22 5.09202 21.782C4.71569 21.5903 4.40973 21.2843 4.21799 20.908C4 20.4802 4 19.9201 4 18.8V11M2 7.6L2 9.4C2 9.96005 2 10.2401 2.10899 10.454C2.20487 10.6422 2.35785 10.7951 2.54601 10.891C2.75992 11 3.03995 11 3.6 11L20.4 11C20.9601 11 21.2401 11 21.454 10.891C21.6422 10.7951 21.7951 10.6422 21.891 10.454C22 10.2401 22 9.96005 22 9.4V7.6C22 7.03995 22 6.75992 21.891 6.54601C21.7951 6.35785 21.6422 6.20487 21.454 6.10899C21.2401 6 20.9601 6 20.4 6L3.6 6C3.03995 6 2.75992 6 2.54601 6.10899C2.35785 6.20487 2.20487 6.35785 2.10899 6.54601C2 6.75992 2 7.03995 2 7.6Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),value:"gift",label:a(O?"package__features:user__user_avatar__menu_item__rewards":"package__features:user__user_avatar__menu_item__affiliate"),sx:E,ButtonProps:{title:O?k.default.createElement(Wa,null):k.default.createElement(Na,null),tooltipProps:{placement:"right",disableInteractive:!1,PopperProps:{disablePortal:!0,sx:{"& > div":{p:"0px !important",maxWidth:"unset!important",bgcolor:"transparent !important"}}}}}}]},[a,_,f,c,h,l,O,g?.email]);return l?k.default.createElement(k.default.Fragment,null,k.default.createElement(nr,{needPopoverPointerMovingBuffer:n,placement:s?"right-end":"top-start",options:rt,testid:"maxai--sidebar--user-avatar--button",OptionsCardProps:{sx:{minWidth:"300px"},...t},onSelectOption:E=>{E==="logout"&&(oo?U():window.open(`${V}/logout/`)),E==="feedback"&&window.open(`${V}/survey/feedback/`),E!=="help"&&(E==="your-plan"&&window.open(`${V}/account/your-plan/`),E==="people"&&window.open(`${V}/account/team-plan/`,"_blank"),E==="settings"&&go.openPage({key:"options"}),E==="gift"&&(O?window.open(`${V}/account/rewards/`,"_blank"):window.open(`${V}/affiliate/`,"_blank")))},...r},k.default.createElement(Pr,{sx:{width:"24px",height:"24px"},...o})),k.default.createElement(La,{open:i,onClose:()=>p(!1)})):null},Ja=dl;var A=m(I());var Mr=m(I());var fl=({sx:e})=>{let{t}=S(),{chatBoxShortCutKey:o}=Ao();return o?null:Mr.default.createElement(b,{fontSize:12,sx:e},Mr.default.createElement(St,{color:"text.primary",sx:{cursor:"pointer"},underline:"always",target:"_blank",onClick:()=>{go.openPage({key:"shortcuts"})}},t("package__features:chat__navbar__conversation_share__set_shortcut_button__tooltip")))},ts=fl;var es=m(I()),os=()=>{let{isLogin:e}=Ie(),{t}=S(),{openAuthSignInCardModal:o}=On();return e?null:es.default.createElement(W,{"data-testid":"maxai--auth--un-login-sign-in-button",variant:"contained",sx:{fontSize:"14px",fontWeight:500,minWidth:"64px",p:"6px 12px",borderRadius:"9999px"},onClick:()=>{o()}},t("client:sidebar__home_view__sign_in_button__title"))};var Er=m(I());var gl=()=>{let{conversationId:e}=Yn(),{showWithClickAlwaysPintoSidebar:t}=Ni(),{t:o}=S(["package__features"]);return Er.default.createElement(Gn,{"data-testid":"maxai--context-window--always-responses-in-contextmenu--button",title:o("package__features:chat__ai_message__tools__unpin_button"),sx:{p:"6px",borderRadius:"8px",color:"text.secondary","&:hover":{color:"text.primary",bgcolor:n=>n.palette.mode==="dark"?"rgba(255, 255, 255, .1)":"rgba(0, 0, 0, 0.04)"}},onClick:async()=>{await t(e)},TouchRippleProps:{center:!1}},Er.default.createElement(zt,{icon:"AlwaysResponsesInContextMenu",sx:{fontSize:"20px"}}))},rs=gl;var ns=m(I()),hl=()=>{let{setDragging:e}=si();return ns.default.createElement(Eo,{onDragEnter:t=>{t.stopPropagation(),e(!1)},onDragOver:t=>t.stopPropagation(),onDragLeave:t=>t.stopPropagation(),onDrop:t=>t.stopPropagation()})},is=hl;var xs=m(sr()),_s=m(bn()),xt=m(I());var as=m(sr()),ss=m(bn()),Ze=m(I());as.default.extend(ss.default);var Th=Object.freeze({CHRISTMAS_2024:{endTime:"2025-1-1 00:00:00"}}),xl=e=>{if(!e)return!1;let{group_id:t,subscription_plan_name:o}=e;return t?!1:o?["BASIC_MONTHLY","BASIC_YEARLY","PRO_MONTHLY"].includes(o):!0};var _l=()=>{let{userInfo:e,loaded:t}=z();return{isActivityUser:(0,Ze.useMemo)(()=>xl(e),[e]),loaded:t,isActivityOpen:!1}},Ro=_l;var Go=m(Ks()),ls=m(Fe());var C=m(I());var Or=e=>{let{variant:t,children:o,sx:n,...r}=e;return C.default.createElement(W,{variant:t||"contained",fullWidth:!0,sx:{fontSize:16,px:2,py:1.5,borderRadius:1,...t==="outlined"&&{borderColor:i=>i.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.08)","&:hover":{borderColor:i=>i.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.08)"}},...n},...r},o)},us=(0,C.forwardRef)(function(t,o){let{sx:n,...r}=t,{pricingPlansInfo:i}=hr(),{t:p}=S(),{showPricingUpgradeContentPopup:a}=xr(),{onCardClose:s}=Me(),l=u=>{we("click",{paywallType:"browser_extension_update",paywallReason:"proactive",buttonType:"upgrade",targetElement:u?.currentTarget}),a(),s?.()};return(0,C.useImperativeHandle)(o,()=>({click:l})),C.default.createElement(Or,{startIcon:C.default.createElement(ln,{sx:{color:"#FFCB45"}}),sx:{position:"relative",...n},...r,onClick:l},p("client:sidebar__promotion_dialog__cta_button"),C.default.createElement(P,{sx:{position:"absolute",right:10,top:0,transform:"translateY(-50%)",bgcolor:"rgba(255, 126, 53, 1)",color:"#fff",borderRadius:1,px:1,py:.5}},C.default.createElement(b,{fontSize:14,fontWeight:500,lineHeight:1},p("client:sidebar__promotion_dialog__discount__title",{DISCOUNT:i.pro_yearly.discount_title}))))}),ps=(0,C.forwardRef)(function(t,o){let{t:n}=S(),{...r}=t,{onCardClose:i,upgradeCardTemplate:p}=Me(),a=s=>{we("click",{paywallType:"browser_extension_update",paywallReason:"proactive",buttonType:"try_ai_art",targetElement:s?.currentTarget}),window.open(`${xn}/ai-tools/ai-art/?ai_model=gpt-image-1`,"_blank"),i?.()};return(0,C.useImperativeHandle)(o,()=>({click:a})),C.default.createElement(Or,{...r,onClick:a},n("client:sidebar__promotion_dialog__try_it_now"),C.default.createElement(Go.default,{sx:{ml:"8px",fontSize:"20px",color:"inherit"}}))}),ms=(0,C.forwardRef)(function(t,o){let{t:n}=S(),{...r}=t,{onCardClose:i,upgradeCardTemplate:p}=Me(),a=s=>{we("click",{paywallType:"browser_extension_update",paywallReason:"proactive",buttonType:"learn_more",targetElement:s?.currentTarget}),window.open(p.learnMoreLink,"_blank"),i?.()};return(0,C.useImperativeHandle)(o,()=>({click:a})),p.learnMoreLink?C.default.createElement(Or,{...r,onClick:a},n("client:sidebar__promotion_dialog__learn_more"),C.default.createElement(Go.default,{sx:{ml:"8px",fontSize:"20px",color:"inherit"}})):null}),cs=e=>{let{sx:t,...o}=e,{t:n}=S(),{upgradeCardTemplate:r}=Me();return r.learnMoreLink?C.default.createElement(St,{href:r.learnMoreLink,target:"_blank",rel:"noreferrer",fontSize:14,sx:{textAlign:"left",color:i=>i.palette.mode==="dark"?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.38)",textDecoration:"underline",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",...t},...o},n("client:sidebar__promotion_dialog__learn_more"),C.default.createElement(Go.default,{sx:{fontSize:"16px",color:"inherit"}})):null},bl=()=>{let{isPayingUser:e,upgradeCardTemplate:t}=Me(),{t:o}=S();return C.default.createElement(C.default.Fragment,null,!e&&C.default.createElement(cs,null),C.default.createElement(P,{pt:2},!e&&C.default.createElement(us,null),e&&C.default.createElement(ms,null)))},Cl=()=>{let{isPayingUser:e,upgradeCardTemplate:t}=Me();return C.default.createElement(C.default.Fragment,null,!e&&C.default.createElement(cs,null),C.default.createElement(x,{sx:{pt:2,gap:"12px"}},e?C.default.createElement(C.default.Fragment,null,C.default.createElement(ps,null),C.default.createElement(ms,{variant:"outlined"})):C.default.createElement(C.default.Fragment,null,C.default.createElement(us,null),C.default.createElement(ps,{variant:"outlined"}))))},ds=(0,C.createContext)({isPayingUser:!1,upgradeCardTemplate:{},onCardClose:void 0}),Me=()=>(0,C.useContext)(ds),Il=e=>{let{upgradeCardTemplate:t,onClose:o}=e,{t:n}=S(),{isPayingUser:r}=z(),{showPricingUpgradeContentPopup:i}=xr(),p=a=>{r?t.learnMoreLink&&(we("click",{paywallType:"browser_extension_update",paywallReason:"proactive",buttonType:"learn_more",targetElement:a?.currentTarget}),window.open(t.learnMoreLink,"_blank")):(we("click",{paywallType:"browser_extension_update",paywallReason:"proactive",buttonType:"upgrade",targetElement:a?.currentTarget}),i()),o?.()};return C.default.createElement(ds.Provider,{value:{isPayingUser:r,upgradeCardTemplate:t,onCardClose:o}},C.default.createElement(x,{sx:{maxHeight:"calc(100vh - 100px)",p:2,gap:2,textAlign:"left"}},C.default.createElement(x,{direction:"row",spacing:1,alignItems:"center",flexShrink:0},C.default.createElement(b,{fontSize:16,color:"text.primary",flex:1,fontWeight:500},n("client:sidebar__promotion_dialog__title",{VERSION:hn})),C.default.createElement(Q,{onClick:o},C.default.createElement(ls.default,{sx:{fontSize:24,color:"text.primary"}}))),C.default.createElement(x,{flex:1,sx:{overflowY:"auto"}},C.default.createElement(Ve,{src:t.image,width:832,height:468,onClick:p,sx:{cursor:"pointer"}}),C.default.createElement(x,{pt:2,spacing:2},C.default.createElement(b,{fontSize:20,color:"text.primary",flex:1,fontWeight:800},t.title(n)),C.default.createElement(x,{spacing:1,sx:t.templateSx},t.descriptions(n).map((a,s)=>{let l=a.needListStyle;return C.default.createElement(x,{key:s,direction:"row",sx:{position:"relative",...l?{pl:1.5}:{}}},l&&C.default.createElement(P,{width:4,height:4,flexShrink:0,borderRadius:"50%",bgcolor:"text.primary",sx:{position:"absolute",top:8,left:0}}),C.default.createElement(b,{fontSize:16,lineHeight:1.5,sx:{color:"text.secondary","& > b":{color:"text.primary"}}},a.title&&C.default.createElement("b",null,a.title,": "),a.description))})))),t.showAIArtToolLink?C.default.createElement(Cl,null):C.default.createElement(bl,null)))},Lr=Il;var Je=()=>Ae[0],fs=e=>wo[Je()](e),qo=async()=>{let e=Je(),t=await J();return Object.prototype.hasOwnProperty.call(t,e)?t[e]:(await ft(e,!1),!1)},gs=async()=>{let e=Je();await ft(e,!0)};var Yo=m(I());var yl=()=>{let{userInfo:e,loaded:t}=z(),[o,n]=(0,Yo.useState)(()=>Ae[0]),r=(0,Yo.useMemo)(()=>!t||!e?null:wo[o](e),[o,t,e]);return{extensionUpgradeCardType:o,extensionUpgradeCardTemplate:r,setExtensionUpgradeCardType:n}},hs=yl;xs.default.extend(_s.default);var Sl=()=>{let{extensionUpgradeCardTemplate:e,extensionUpgradeCardType:t,setExtensionUpgradeCardType:o}=hs(),n=kn(),{userInfo:r,isPayingUser:i}=z(),{isActivityUser:p,loaded:a,isActivityOpen:s}=Ro(),[l,u]=(0,xt.useState)(!1),{paywallShowDebounce:h}=Nn(),g=(0,xt.useRef)(!1),d=()=>{u(!1)};return(0,xt.useEffect)(()=>{let f=r?.created_at;r===null||!f||!a||qo().then(async c=>{if(c||!e)return;let _=!1;if(e.cardType==="activity")_=p;else if(e.cardType==="feature"){let v=new Date(f).getTime()+2592e5;new Date().getTime()>v&&(_=!0)}else _=!0;_&&setTimeout(async()=>{await gs(),g.current||(u(!0),g.current=!0),h({paywallType:"browser_extension_update",paywallReason:"proactive"})},1500)})},[n.name,r,i,s,a,e,p,h]),e?xt.default.createElement(so,{open:l,disableScrollLock:!0,disableEnforceFocus:!0,onClose:(f,c)=>{c!=="backdropClick"&&d()},slotProps:{backdrop:{onClick:()=>null}},"data-testid":"maxai-sidebar--promotion-dialog",sx:{position:"absolute",zIndex:2147483645,[`.${no.root}`]:{position:"absolute"},[`.${ao.paper}`]:{maxHeight:"max-content",maxWidth:448,width:"calc(100% - 32px)",mx:2,borderRadius:2,overflow:"hidden",boxShadow:"0px 4px 8px 0px rgba(128, 128, 128, 0.16)",...e.cardType==="activity"&&{maxWidth:460,background:"transparent",boxShadow:"none"}}}},xt.default.createElement(po,null,xt.default.createElement("select",{defaultValue:t,onChange:f=>{o(f.target.value)}},Ae.map(f=>xt.default.createElement("option",{key:f,value:f},f)))),e.cardType==="activity"&&xt.default.createElement(Lr,{upgradeCardTemplate:e,onClose:d}),e.cardType==="feature"&&xt.default.createElement(Lr,{upgradeCardTemplate:e,onClose:d})):null},bs=Sl;var re=m(I());var Cs=m(Fe()),Is=m(Ha());var X=m(I());var Dr=`${V}/survey/feedback`,vl=({surveyKey:e,handleCloseClick:t,sx:o,closeBtn:n=!0})=>{let{t:r}=S(["client"]),i=()=>{window.open(Dr),Mt("survey_card_clicked",{survey_type:e})};return ve(()=>{Mt("survey_card_showed",{survey_type:e})}),X.default.createElement(x,{sx:{textAlign:"left",color:"text.primary",bgcolor:p=>p.palette.mode==="dark"?"#3B3D3E":"#fff",...o}},X.default.createElement(x,{direction:"row",spacing:1,alignItems:"center",flexShrink:0,py:2.5,px:2},X.default.createElement(b,{fontSize:20,color:"text.primary",flex:1,fontWeight:700},r("client:sidebar__survey_dialog__title")),n&&X.default.createElement(Q,{onClick:t},X.default.createElement(Cs.default,{sx:{fontSize:24,color:"text.primary"}}))),X.default.createElement(x,{px:2,sx:{overflowY:"auto"}},X.default.createElement(Ve,{src:Et("/images/survey/dialog-banner.png"),width:832,height:468,onClick:i,sx:{cursor:"pointer"}}),X.default.createElement(x,{py:2,spacing:2},X.default.createElement(b,{fontSize:16,lineHeight:1.5},r("client:sidebar__survey_dialog__description__item1__part1")," ",X.default.createElement(lr,{href:Dr,underline:"always",onClick:()=>{Mt("survey_card_clicked",{survey_type:e})},sx:{color:p=>p.palette.mode==="dark"?"text.primary":"primary.main",textDecorationColor:p=>p.palette.mode==="dark"?"#fff":p.palette.primary.main}},r("client:sidebar__survey_dialog__description__item1__part2")),"?"),X.default.createElement(b,{fontSize:16,lineHeight:1.5},r("client:sidebar__survey_dialog__description__item2")),X.default.createElement(b,{fontSize:16,lineHeight:1.5},r("client:sidebar__survey_dialog__thanks"),",",X.default.createElement("br",null),r("client:sidebar__survey_dialog__by_who")))),X.default.createElement(x,{flexShrink:0,spacing:1,p:2},X.default.createElement(W,{variant:"contained",fullWidth:!0,href:Dr,target:"_blank",startIcon:X.default.createElement(Is.default,{sx:{color:"#F36666"}}),sx:{borderRadius:1,fontSize:16,px:2,py:1.5},onClick:()=>{Mt("survey_card_clicked",{survey_type:e})}},r("client:sidebar__survey_dialog__cta_button_text"))))},ys=vl;var Wr=m(sr()),ge=m(I());var wl=()=>{let e="feedback",[t,o]=(0,ge.useState)(!1),{userInfo:n,isPayingUser:r}=z(),i=at(Gi),p=at(qi),[a,s]=(0,ge.useState)(!1),l=async()=>{(await J()).ON_BOARDING_EXTENSION_SURVEY_DIALOG_ALERT?s(!0):s(!1)},u=(0,ge.useMemo)(()=>{if(!t||!p||i[e]||n===null)return!1;let h=n?.created_at,g=n?.subscribed_at;return r?g?(0,Wr.default)(Date.now()).diff(g*1e3,"day")>14:h?(0,Wr.default)(Date.now()).diff(h,"day")>21:!1:!1},[n,r,i,t,p,e]);return(0,ge.useEffect)(()=>{n&&l().then(()=>{o(!0)})},[n]),{loaded:t,canShowSurvey:u,alreadyPoppedSurveyModal:a}},Ss=wl;var Tl=()=>{let{canShowSurvey:e,alreadyPoppedSurveyModal:t,loaded:o}=Ss(),[n,r]=(0,re.useState)(!1),i=()=>{r(!1)};return(0,re.useEffect)(()=>{let p=()=>{o&&e&&!t&&setTimeout(async()=>{await ft("ON_BOARDING_EXTENSION_SURVEY_DIALOG_ALERT",!0),r(!0)},1500)};qo().then(a=>{a&&p()})},[e,t,o]),re.default.createElement(so,{open:n,disableScrollLock:!0,disableEnforceFocus:!0,"data-testid":"maxai-sidebar--survey-dialog",onClose:(p,a)=>{a!=="backdropClick"&&i()},slotProps:{backdrop:{onClick:()=>null}},sx:{position:"absolute",zIndex:2147483645,[`.${no.root}`]:{position:"absolute"},[`.${ao.paper}`]:{maxWidth:448,width:"calc(100% - 32px)",mx:2}}},re.default.createElement(P,{sx:{maxHeight:"calc(100vh - 100px)"}},re.default.createElement(ys,{surveyKey:"feedback",handleCloseClick:i})))},vs=Tl;var bt=m(I());var et=m(I());function ws(e,t){let o=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight;t&&(o=t.clientWidth,n=t.clientHeight);let{top:r,right:i,bottom:p,left:a}=e.getBoundingClientRect();return r>=0&&a>=0&&i<=o&&p<=n}var Hr=(e,t,o)=>{if(!e)return o?.[0]||"top";let n=e.getBoundingClientRect(),r={top:n?.top||0,right:document.documentElement.clientWidth-(n?.right||0),bottom:document.documentElement.clientHeight-(n?.bottom||0),left:n?.left||0},i={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight};return!o||!o.length?Object.entries(r).reduce((s,[l,u])=>u>s.value?{direction:l,value:u}:s,{direction:"top",value:0}).direction:o.find(a=>{switch(a){case"top":return r.top>t.height+26&&i.width>t.width;case"top-start":return r.top>t.height+26&&i.width-r.left>t.width;case"top-end":return r.top>t.height+26&&i.width-r.right>t.width;case"bottom":return r.bottom>t.height+26&&i.width>t.width;case"bottom-start":return r.bottom>t.height+26&&i.width-r.left>t.width;case"bottom-end":return r.bottom>t.height+26&&i.width-r.right>t.width;case"left":return r.left>t.width+26&&i.height>t.height;case"left-start":return r.left>t.width+26&&i.height-r.top>t.height;case"left-end":return r.left>t.width+26&&i.height-r.bottom>t.height;case"right":return r.right>t.width+26&&i.height>t.height;case"right-start":return r.right>t.width+26&&i.height-r.top>t.height;case"right-end":return r.right>t.width+26&&i.height-r.bottom>t.height;default:return!1}})||o[o.length-1]};function Al(e){let t=et.default.useRef();return t.current=e,et.default.useCallback((...n)=>t.current?.(...n),[])}function Ur(e,t,o,n,r,i){let[p,a]=(0,et.useState)(null),s=Mn(()=>i,[i],Vn);(0,et.useEffect)(()=>{},[s]);let l=(0,et.useCallback)(()=>{requestAnimationFrame(()=>{let c=typeof e=="function"?e(o):e;a(c||null)})},[o,e]);(0,et.useEffect)(()=>{let c=new Map;return s?.length&&s.forEach(_=>{let v=o?.querySelector(_);if(v){let T=c.get(_)||new ResizeObserver(l);T.observe(v),c.set(_,T)}}),l(),()=>{c.forEach(_=>{_.disconnect()}),c.clear()}},[o,l,s]);let[u,h]=(0,et.useState)(null),g=Al(()=>{if(p){!ws(p,o)&&t&&p?.scrollIntoView?.(r);let c=p.getBoundingClientRect(),{left:_,top:v}=c,{width:T,height:w}=c,{left:B,top:O}=o?o.getBoundingClientRect():{left:0,top:0};_=_-B,v=v-O;let U={left:_,top:v,width:T,height:w,radius:0};h(rt=>JSON.stringify(rt)!==JSON.stringify(U)?U:rt)}else h(null)}),d=c=>(Array.isArray(n?.offset)?n?.offset[c]:n?.offset)??6;return(0,et.useLayoutEffect)(()=>{let c=yn(g,200),_=()=>{g(),c()};return _(),window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_)}},[p,t,g,o]),[(0,et.useMemo)(()=>{if(!u)return u;let c=d(0),_=d(1),v=n?.radius||8;return{left:u.left-c,top:u.top-_,width:u.width+c*2,height:u.height+_*2,radius:v}},[u,n]),p]}var lt=m(I()),Xo={fill:"transparent",pointerEvents:"auto"},Pl=e=>{let{pos:t,showMask:o,fill:n="rgba(0,0,0,0.5)",open:r,zIndex:i,disabledInteraction:p,animation:a,animationDuration:s=300,maskMode:l="fixed",onClick:u}=e,g=`MaxAITourMask-${$e()}`,f=typeof navigator<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?{width:"100%",height:"100%"}:{width:"100vw",height:"100vh"};return r?lt.default.createElement("div",{style:{position:l,left:0,right:0,top:0,bottom:0,zIndex:i,pointerEvents:t&&!p?"none":"auto"},onClick:u},o?lt.default.createElement("svg",{style:{width:"100%",height:"100%"}},lt.default.createElement("defs",null,lt.default.createElement("mask",{id:g},lt.default.createElement("rect",{x:"0",y:"0",...f,fill:"white"}),t&&lt.default.createElement("rect",{x:t.left,y:t.top,rx:t.radius,width:t.width,height:t.height,fill:"black",style:{transition:a?`all ${s}ms`:"none"}}))),lt.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:n,mask:`url(#${g})`}),t&&lt.default.createElement(lt.default.Fragment,null,lt.default.createElement("rect",{...Xo,x:"0",y:"0",width:"100%",height:t.top}),lt.default.createElement("rect",{...Xo,x:"0",y:"0",width:t.left,height:"100%"}),lt.default.createElement("rect",{...Xo,x:"0",y:t.top+t.height,width:"100%",height:`calc(100vh - ${t.top+t.height}px)`}),lt.default.createElement("rect",{...Xo,x:t.left+t.width,y:"0",width:`calc(100vw - ${t.left+t.width}px)`,height:"100%"}))):null):null},Ts=Pl;var D=m(I()),_t=m(I());var As=m(I());var Ko="maxai-tour--triangle-arrow";var kl=({placement:e,arrowColor:t="#000",arrowSize:o=6,borderRadius:n=6})=>{let r={};switch(e){case"top":r={bottom:-o,left:`calc(50% - ${o}px)`,borderWidth:`${o}px ${o}px 0 ${o}px`,borderColor:`${t} transparent transparent transparent`};break;case"left":r={top:`calc(50% - ${o}px)`,right:-o,borderWidth:`${o}px 0 ${o}px ${o}px`,borderColor:`transparent transparent transparent ${t}`};break;case"bottom":r={top:-o,left:`calc(50% - ${o}px)`,borderWidth:`0 ${o}px ${o}px ${o}px`,borderColor:`transparent transparent ${t} transparent`};break;case"right":r={top:`calc(50% - ${o}px)`,left:-o,borderWidth:`${o}px ${o}px ${o}px 0`,borderColor:`transparent ${t} transparent transparent`};break;case"bottom-start":r={top:-o,left:n,borderWidth:`0 ${o}px ${o}px ${o}px`,borderColor:`transparent transparent ${t} transparent`};break;case"bottom-end":r={top:-o,right:n,borderWidth:`0 ${o}px ${o}px ${o}px`,borderColor:`transparent transparent ${t} transparent`};break;case"left-start":r={top:n,right:-o,borderWidth:`${o}px 0 ${o}px ${o}px`,borderColor:`transparent transparent transparent ${t}`};break;case"left-end":r={bottom:n,right:-o,borderWidth:`${o}px 0 ${o}px ${o}px`,borderColor:`transparent transparent transparent ${t}`};break;case"top-start":r={bottom:-o,left:n,borderWidth:`${o}px ${o}px 0 ${o}px`,borderColor:`${t} transparent transparent transparent`};break;case"top-end":r={bottom:-o,right:n,borderWidth:`${o}px ${o}px 0 ${o}px`,borderColor:`${t} transparent transparent transparent`};break;case"right-start":r={top:n,left:-o,borderWidth:`${o}px ${o}px ${o}px 0`,borderColor:`transparent ${t} transparent transparent`};break;case"right-end":r={bottom:n,left:-o,borderWidth:`${o}px ${o}px ${o}px 0`,borderColor:`transparent ${t} transparent transparent`};break;default:break}return As.default.createElement(P,{className:Ko,sx:{position:"absolute",width:0,height:0,border:"solid",...r}})},Ps=kl;var ks=()=>{setTimeout(()=>{window.dispatchEvent(new Event("resize"))},100),setTimeout(()=>{window.dispatchEvent(new Event("resize"))},500)},Bl=e=>{let{mixpanelPrefix:t,title:o,titleTestid:n,description:r,imgCover:i,arrow:p,placement:a,onNext:s,onPrev:l,onFinish:u,onClose:h,showClose:g,closeIcon:d,current:f,total:c,sx:_,placementSx:v,refContentUpdate:T,updatePopperPosition:w}=e,{theme:B}=Ft(),{t:O}=S(),U=(0,_t.useRef)(null),rt=(0,_t.useRef)(null),E=(0,_t.useRef)(0),Kt=f===c,q=f===1,ne=B.palette.background.paper,ie=typeof a=="function"?a():a,Qt=D.useCallback(F=>n&&t?`${t} > ${n} > ${F}`:F,[n,t]),[Dt,At]=(0,_t.useState)(window.innerHeight<=380);(0,_t.useEffect)(()=>{let F=setInterval(()=>{w?.(),ae?.()},60),We=setTimeout(()=>{clearInterval(F)},5e3);return()=>{clearInterval(F),clearTimeout(We)}},[f]);let ae=(0,_t.useCallback)(Bn(()=>{if(rt.current&&U.current){let F=rt.current.getBoundingClientRect();E.current=Math.max(E.current,U.current.clientHeight),F.bottom<E.current||F.top+E.current>document.documentElement.clientHeight||window.innerHeight<=380?At(!0):At(!1)}},50,{leading:!1}),[]);(0,_t.useEffect)(()=>{function F(){ae()}return F(),window.addEventListener("resize",F),()=>{window.removeEventListener("resize",F)}},[]);let he=(0,_t.useCallback)(()=>{l?.(),ks()},[l]),De=(0,_t.useCallback)(()=>{s?.(),ks()},[s]);return D.createElement(tn,{elevation:1,sx:{position:"relative",backgroundColor:"background.paper",display:"flex",flexDirection:"column",borderRadius:"8px",..._,...v?v(ie):{},backgroundImage:"none"},"data-testid":"maxai-tour-step"},D.createElement(P,{ref:rt,sx:{overflow:"auto"}},D.createElement(P,{ref:F=>{U.current=F,T?.(F)},sx:{height:"auto",width:"100%"}},!Dt&&i&&D.createElement(D.Fragment,null,typeof i.node=="string"?D.createElement(P,{sx:{borderRadius:"8px 8px 0 0",width:"100%",overflow:"hidden",position:"relative",paddingTop:`${i.height/i.width*100}%`,"& > img":{width:"100%",height:"100%",position:"absolute",top:0,left:0}}},D.createElement("img",{src:i.node,alt:`MaxAI tour step of ${f}`})):i.node),D.createElement(x,{sx:{padding:"16px"}},ie&&p&&D.createElement(Ps,{placement:ie,arrowSize:11,arrowColor:ne}),g&&D.createElement(Q,{sx:{position:"absolute",top:12,right:12},onClick:h},d||D.createElement(ci,{sx:{fontSize:"16px",color:"text.secondary"}})),(o||r)&&D.createElement(x,{gap:"8px"},o&&D.createElement(b,{textAlign:"left",component:"div",fontSize:"20px",color:"text.primary",lineHeight:1.2,fontWeight:700,noWrap:!0,"data-testid":n?`maxai-tour--title--${n.replaceAll(" ","-")}`:null},o),r&&D.createElement(b,{sx:{fontSize:"14px",fontWeight:400,color:"text.primary",textAlign:"left"}},r)),D.createElement(x,{mt:o||r?2:0,direction:"row",alignItems:"center",justifyContent:"space-between",height:"40px"},D.createElement(x,{direction:"row",alignItems:"center",width:0,flex:1},c&&c>1&&D.createElement(b,{fontSize:"12px",textAlign:"left",fontWeight:400,sx:{color:F=>F.palette.mode==="dark"?"rgba(255, 255, 255, 0.38)":"rgba(0, 0, 0, 0.38)"}},f,"/",c)),D.createElement(x,{direction:"row",alignItems:"center",gap:1,flexShrink:0,sx:{[`.${rn.root}`]:{height:"40px",padding:"6px 8px",borderRadius:"8px"}}},!q&&D.createElement(W,{variant:"outlined",onClick:he,sx:{border:"none!important",color:"text.secondary",p:"10px 16px !important",lineHeight:"20px"},"data-testid":"maxai-tour--back-button"},O("package__ui:maxai_tour__button__back__title")),Kt?D.createElement(W,{variant:"contained",onClick:u,"data-button-clicked-name":Qt("Start now"),sx:{p:"10px 16px !important",lineHeight:"20px"},"data-testid":"maxai-tour--finish-button"},O(c===1?"package__features:onboarding__onboarding_popover__cta_button__got_it":"package__ui:maxai_tour__button__start_now__title")):D.createElement(W,{variant:"contained","data-button-clicked-name":Qt("Next"),onClick:De,"data-testid":"maxai-tour--next-button",sx:{p:"10px 16px !important",lineHeight:"20px"}},O("package__ui:maxai_tour__button__next__title"))))))))},Ml=e=>{let{current:t,renderPanel:o}=e;return D.createElement(D.Fragment,null,typeof o=="function"?o(e,t):D.createElement(Bl,{...e}))},Bs=Ml;var El={block:"center",inline:"center"},Ol=e=>{let{steps:t,open:o,defaultCurrent:n,current:r,onClose:i,onFinish:p,onChange:a,zIndex:s,disabledInteraction:l=!0,animation:u=!0,animationDuration:h=300,gap:g,rootContainer:d,maskMode:f,poperOffset:c,mixpanelPrefix:_}=e,[v,T]=bt.default.useState(r??n??0);(0,bt.useEffect)(()=>{if(r!==void 0){if(r<0||r>=t.length){T(0);return}T(r)}},[r,t]);let{target:w,title:B,titleTestid:O,description:U,imgCover:rt,placement:E,fallbackPlacements:Kt,arrow:q,sx:ne,placementSx:ie,mask:Qt,scrollIntoViewOptions:Dt=El,gap:At,closeIcon:ae,showClose:he=!1,renderPanel:De,poperOffset:F,sizeObserverSelectorArray:We}=t[v],nt=(0,bt.useRef)(null),He=nt.current?{width:nt.current.clientWidth,height:nt.current.clientHeight}:void 0,Zt=typeof E=="function"?E(He):E,{isDarkMode:to}=Ft(),[xe,_e]=bt.default.useState(o??!1),be=At??g,Ue=xe&&(Qt??!0),Rt=typeof Ue=="boolean"?Ue:!!Ue,[eo,M]=Ur(w,xe,d,be,Dt,We),G=(g?.offset?.[1]||g?.offset?.[0]||6)+(q?16:8),It=ct=>{if(typeof ct=="number")return ct;let[K,dt=G]=ct,Pt=typeof dt=="function"?dt(G):dt;return[K,Pt]},Y=Pn("maxai-animation-fade-in",{enable:u,duration:h,fillMode:"forwards"}),mt=(0,bt.useRef)(null),it=()=>{mt.current?.update&&mt.current.update()};if(!d)return null;let yt=[{name:"offset",options:{offset:It(F??c??[0,G])}}];return Kt&&yt.push({name:"flip",options:{fallbackPlacements:Kt}}),bt.default.createElement(bt.default.Fragment,null,eo&&bt.default.createElement(Ts,{fill:"rgba(0,0,0,0.6)",animation:u?v>0:!1,open:Rt,pos:eo,showMask:Rt,zIndex:s,disabledInteraction:l,animationDuration:h,maskMode:f,onClick:()=>{t[v].emitFinishOnClickAway&&(_e(!1),p?.())}}),bt.default.createElement(en,{ref:mt,key:v,open:xe&&!!M,anchorEl:M,placement:Zt,container:d,style:{zIndex:(s||0)+1},sx:{opacity:u?0:1,...Y},modifiers:yt},({placement:ct})=>bt.default.createElement(Bs,{refContentUpdate:K=>{nt.current=K},mixpanelPrefix:_,title:B,titleTestid:O,description:U,imgCover:rt,arrow:q,showClose:he,target:M,placement:ct.startsWith("auto")?Zt:ct,renderPanel:De,mask:Qt,sx:{opacity:u?0:1,...Y,...ne},placementSx:ie,closeIcon:ae,current:v+1,total:t.length,onClose:()=>{_e(!1),i?.()},onNext:async()=>{let K=t[v]?.afterStep;K&&await K();let dt=t[v+1]?.beforeStep;dt&&await dt(),T(Pt=>{let kt=Pt+1;return kt<t.length?(a?.(kt),kt):Pt})},onPrev:async()=>{let K=t[v]?.afterStep;K&&await K();let dt=t[v-1]?.beforeStep;dt&&await dt(),T(Pt=>{let kt=Pt-1;return kt>=0?(a?.(kt),kt):Pt})},onFinish:()=>{_e(!1),p?.()},updatePopperPosition:it})))},Qo=Ol;var ut=m(I());var Zo=m(I()),Ms=m(Qr());var Ll=({children:e})=>{let[t,o]=(0,Zo.useState)(null);return(0,Zo.useEffect)(()=>{let n=Dn();o(n)},[]),t?(0,Ms.createPortal)(e,t):e},Jo=Ll;var Dl=()=>{let{t:e}=S(["maxai_tour"]),{isDarkMode:t}=Ft(),o=(0,ut.useRef)(Te()),{loaded:n}=Ie(),r=xo(),[i,p]=(0,ut.useState)(!1),{setExtensionTourOnBoardingOpened:a}=ke(),[s,l]=(0,ut.useState)(!0),[u,h]=(0,ut.useState)("setLanguage");(0,ut.useEffect)(()=>{J().then(d=>{d.ON_BOARDING_MAXAI_3_0===!0&&h("newUI"),d.ON_BOARDING_MAXAI_6_0!==!0&&d[qt]!==!0&&p(!0)})},[]),ho(()=>{J().then(d=>{d[qt]&&p(!1)})});let g=(0,ut.useMemo)(()=>{let d={gap:{offset:0},sx:{maxWidth:"328px"},closeIcon:null,arrow:!0,showClose:!Gt},f=[];return f.push({...d,placement:c=>Hr(r?.querySelector('div[data-testid="maxai--chat-box--chat-input--main"]'),c||{width:328,height:380},["top-start","bottom-start","top-start"]),sx:{...d.sx,[`& .${Ko}`]:{left:306/2+"px"}},sizeObserverSelectorArray:['[data-testid="maxai--chat-box--chat-input--header"]'],target:()=>{let c=r?.querySelector('div[data-testid="maxai--chat-box--chat-input--main"]');if(c){let _=r?.querySelector('[data-testid="maxai--chat-box--chat-input--header"]');return r?.querySelector('[data-testid="maxai--chat-box--chat-input--main-header"]')?{getBoundingClientRect(){let T=c.getBoundingClientRect(),w=_?.getBoundingClientRect(),B={width:T.width,left:T.left,top:T.top,height:T.height};if(w&&w.width!==0&&w.height!==0&&w.top!==0&&w.left!==0){B.left=Math.min(w.left,T.left),B.top=Math.min(w.top,T.top);let O=Math.max(w.left+w.width,T.left+T.width),U=Math.max(w.top+w.height,T.top+T.height);B.width=O-B.left,B.height=U-B.top}return B}}:c}return null},title:e("maxai_tour:sidebar_tour__v6_0__step__2__title"),titleTestid:"Ask AI anything",description:e("maxai_tour:sidebar_tour__v6_0__step__2__description_1"),imgCover:{node:Et("/images/on-boarding/ask-ai-anything.webp"),width:800,height:450}},{...d,placement:c=>Hr(r?.querySelector('[data-testid="maxai--chat-box--chat-input--main-header"]'),c||{width:328,height:380},["bottom-start","top-start","bottom-start"]),target:()=>{let c=r?.querySelector('[data-testid="maxai--chat-box--chat-input--main-header"]'),_=r?.querySelector("div.maxai-chat-screenshot-list-view");return c?{getBoundingClientRect(){let v=c.getBoundingClientRect(),T=_?.getBoundingClientRect()||{width:0,height:0};return{width:v.width+16,left:v.left-8,top:v.top-8-T.height,height:v.height+8+T.height}}}:null},title:e("maxai_tour:sidebar_tour__v6_0__step__4__title"),titleTestid:"Add sources",description:e("maxai_tour:sidebar_tour__v6_0__step__4__description_1"),imgCover:{node:Et("/images/on-boarding/add-sources.webp"),width:800,height:450}}),f},[e,r,t,u]);return(0,ut.useEffect)(()=>{let d=()=>{setTimeout(()=>{r?.querySelector(".max-ai__action__set_variables_modal")?l(!0):l(!1)},1e3)};return window.addEventListener("click",d,{capture:!0}),d(),()=>{window.removeEventListener("click",d,{capture:!0})}},[]),!r||!n||!i||s?null:ut.default.createElement(Jo,null,ut.default.createElement(Qo,{mixpanelPrefix:"Onboarding",zIndex:2147483644,rootContainer:r,open:!0,maskMode:o.current?"fixed":"absolute",steps:g,onFinish:async()=>{await ft(qt,!0),a(!0),p(!1)}}))},Es=Dl;var Os=m(Fe()),Nr=m(I());var Wl=e=>{let{tooltipProps:t,...o}=e,{t:n}=S(["client"]),{chatBoxShortCutKey:r}=Ao();return Nr.default.createElement(lo,{testid:"maxai--sidebar--close--button",title:n("client:sidebar__button__close_sidebar"),description:r,onClick:Po,tooltipProps:{placement:"left",...t},...o},Nr.default.createElement(Os.default,null))},Ls=Wl;var Tt=m(I());var Hl=e=>{let{anchorElementSelectors:t='[data-testid="maxai--sidebar--immersive_chat--button"]',placement:o="bottom-end",...n}=e,{t:r}=S(),[i,p]=Tt.default.useState(!1),[a,s]=Tt.default.useState(!0),l=R(f=>f.conversationIds),u=Kn(l[0]),h=ee(l[0]),g=(0,Tt.useCallback)(async()=>{let f=await vo.getOnboardingDataByKey(yi),c=[...u].reverse().find(v=>v.type==="user"),_=c?.meta?.messageChatDocuments?c.meta.messageChatDocuments.length>0:!1;f&&u.length>0&&h===!1&&_===!1&&p(!0)},[u,h]),{extensionTourOnBoardingOpened:d}=Ii();return(0,Tt.useEffect)(()=>{d&&vo.getOnboardingDataByKey(Cr).then(f=>s(!!f))},[d]),(0,Tt.useEffect)(()=>{a||g()},[a,g]),a?null:Tt.default.createElement(Pe,{trigger:i,placement:o,anchorElementSelectors:t,onShow:()=>{vo.setOnboardingData(Cr,!0)},CtaButtonProps:{"data-button-clicked-name":"Onboarding > Chat in full page > Got it"},...n},Tt.default.createElement(x,{spacing:.5},Tt.default.createElement(b,{fontSize:20,lineHeight:1.4,color:"text.primary",fontWeight:700,textAlign:"left"},r("package__features:onboarding__onboarding_popover__chat_in_full_page__title")),Tt.default.createElement(b,{fontSize:14,lineHeight:1.4,color:"text.primary",fontWeight:400,textAlign:"left"},r("package__features:onboarding__onboarding_popover__chat_in_full_page__description"))))},Ds=Hl;var Ee=m(I());var Ul=e=>{let{tooltipProps:t,...o}=e,{conversationId:n}=R(a=>({conversationId:a.conversationIds[0]})),i=yo(n)?.meta?.AIModel,{t:p}=S(["client"]);return Ee.default.createElement(Ee.default.Fragment,null,Ee.default.createElement(lo,{testid:"maxai--sidebar--immersive_chat--button",title:p("client:sidebar__button__immersive_chat"),onClick:()=>{_o({url:qn,query:`?id=${n}${i?`&ai-model=${i}`:""}`})},tooltipProps:{placement:"left",...t},...o},Ee.default.createElement(zt,{icon:"Fullscreen"})),Ee.default.createElement(Ds,null))},Ws=Ul;var Oe=m(I()),Hs={leftIsNarrow:!1},Us=(0,Oe.createContext)(Hs),Ns=({children:e,leftIsNarrow:t})=>Oe.default.createElement(Us.Provider,{value:{leftIsNarrow:t}},e),Fs=()=>{let e=(0,Oe.useContext)(Us);return e||Hs};var ot=m(I());var Nl=()=>{let{t:e}=S(["maxai_tour"]),t=(0,ot.useRef)(Te()),{loaded:o}=Ie(),n=xo(),[r,i]=(0,ot.useState)(!1),{setExtensionTourOnBoardingOpened:p}=ke(),[a,s]=(0,ot.useState)(!0),l=()=>{J().then(h=>{h.ON_BOARDING_MAXAI_6_0===!0&&!h[qt]&&i(!0)}).catch(h=>{})};(0,ot.useEffect)(()=>{l()},[]),ho(()=>{l()});let u=(0,ot.useMemo)(()=>[{...{gap:{offset:0},sx:{maxWidth:"328px"},closeIcon:null,arrow:!0,showClose:!Gt},emitFinishOnClickAway:!0,placement:"top",title:e("maxai_tour:sidebar_tour__v8_0__step__new_layout__title"),description:e("maxai_tour:sidebar_tour__v8_0__step__new_layout__description"),imgCover:{node:Et("/images/on-boarding/new-layout.webp"),width:800,height:450},target:()=>{let g=n?.querySelector('[data-testid="maxai--chat-box-header--first-line"]');return g?{getBoundingClientRect(){let d=g.getBoundingClientRect();return{top:d.top,bottom:d.bottom,right:d.right,height:d.height,width:d.width+1,left:d.left-1,x:d.left-1,y:d.top}}}:null}}],[e,n]);return(0,ot.useEffect)(()=>{let h=()=>{setTimeout(()=>{n?.querySelector(".max-ai__action__set_variables_modal")?s(!0):s(!1)},1e3)};return window.addEventListener("click",h,{capture:!0}),h(),()=>{window.removeEventListener("click",h,{capture:!0})}},[]),!n||!o||!r||a?null:ot.default.createElement(Jo,null,ot.default.createElement(Qo,{mixpanelPrefix:"Onboarding",zIndex:2147483644,rootContainer:n,open:!0,maskMode:t.current?"fixed":"absolute",steps:u,onFinish:async()=>{await ft(qt,!0),p(!0),i(!1)}}))},zs=(0,ot.memo)(Nl);var Fl=()=>{let{userSettings:e}=Se(),t=R(s=>s.conversationIds[0]||""),o=at(Hi),n=(0,A.useMemo)(()=>o.rootRect&&e?.alwaysContinueInSidebar,[e?.alwaysContinueInSidebar,o.rootRect]),r=ee(t),{leftIsNarrow:i}=Fs(),{maxAIBrowserWindows:p}=(0,A.useContext)(gt),a=p.length>0;return A.default.createElement(A.default.Fragment,null,A.default.createElement(Wi,{leftPanelSide:a&&i?"drawer":"separateWindow",leftPanelContent:a&&A.default.createElement(is,null),onPanelClose:async()=>{let s=await N.getCurrent();s&&await N.remove(s.id)},headerProps:()=>({renderLeftNode:()=>A.default.createElement(A.default.Fragment,null,A.default.createElement(os,null),A.default.createElement(Ja,{placement:"bottom-start"}),A.default.createElement(Li,{placement:"bottom-start"}),A.default.createElement(Di,{variant:"icon",tooltipProps:{placement:"bottom"}})),renderRightNode:()=>A.default.createElement(x,{direction:"row",gap:"8px",alignItems:"center",sx:{"&:not(:empty)":{p:"8px 4px"}}},A.default.createElement(Ei,null),A.default.createElement(Ws,{tooltipProps:{placement:"bottom"}}),A.default.createElement(Ls,{tooltipProps:{placement:"bottom"}})),footerNode:A.default.createElement(x,{sx:{flexDirection:"row",justifyContent:"right",paddingRight:"20px"}},A.default.createElement(ts,null)),sx:{marginBottom:0,minHeight:0}}),toolsProps:()=>({renderLeftNode:s=>null,renderRightNode:s=>null}),inputProps:()=>({renderHeaderRightNode:s=>A.default.createElement(A.default.Fragment,null,A.default.createElement(Oi,{enableState:l=>!l.chatScreenshots.length&&!l.selectionContent},({isEnable:l})=>A.default.createElement("div",{style:l?void 0:{display:"none"}},A.default.createElement(Mi,{getScreenshot:Ki,onCropStart:Po,onCropEnd:Vt})))),renderFooterLeftNode:s=>A.default.createElement(A.default.Fragment,null,s.proChatSwitch,A.default.createElement(To,{enableChatMode:"pro_chat"},s.aiModelSelector),A.default.createElement(To,{enableChatMode:"pro_chat"},s.aiLanguageSelector),A.default.createElement(To,null,l=>A.default.createElement("div",{style:l!=="pro_chat"?{display:"none"}:{}},s.portalRoot))),renderFooterRightNode:s=>A.default.createElement(A.default.Fragment,null,s.myOwnToolsButton)}),messageProps:()=>({AIMessage:{renderTools:(s,l,{isLastMessage:u})=>A.default.createElement(A.default.Fragment,null,s.shareConversationButton,s.imageCopyButton,s.textCopyButton,s.attachmentsDownloadButton,s.usePromptButton,s.regenerateButton,s.modelSuggestions,n&&u&&A.default.createElement(A.default.Fragment,null,A.default.createElement(rs,null)))}})}),!r&&A.default.createElement(Es,null),!r&&A.default.createElement(zs,null),A.default.createElement(bs,null),A.default.createElement(vs,null))},$s=Fl;var Ct=m(I());var zl=Et("/images/activity/promotion-activity_bar_icon.png"),$l=Et("/images/activity/promotion-activity_bar_bg.png"),Vl=Et("/images/activity/promotion-activity_bar_button_bg.png"),Vs=`${Je()}_promotion_activity_bar`,jl=()=>{let{userInfo:e,loaded:t}=z(),[o,n]=(0,Ct.useState)(!1),{isActivityUser:r,loaded:i,isActivityOpen:p}=Ro(),a=(0,Ct.useMemo)(()=>!e||!t?null:fs(e),[e,t]);(0,Ct.useEffect)(()=>{J().then(h=>{h[Vs]||n(!0)})},[]);let s=h=>{h.stopPropagation(),n(!1),ft(Vs,!0)},l=h=>{h.stopPropagation(),window.open(a?.learnMoreLink)},{t:u}=S();return!o||!i||!a||!p||!r?null:Ct.default.createElement(x,{spacing:1,direction:"row",sx:{background:`url(${$l}) center / 100% 100% rgba(75, 31, 120, 1)`,height:"56px",justifyContent:"center",alignItems:"center",position:"relative",cursor:"pointer"},onClick:l},Ct.default.createElement(W,{sx:{background:`url(${Vl}) 0 0 / 100% 131% !important`,overflow:"visible",height:"34px",color:"#fff",minWidth:"200px",pt:"6px",px:"15px"},disableRipple:!0,onClick:l},u("package__features:pricing__promotion_activity_bar__button")),Ct.default.createElement(b,{sx:{fontSize:"18px",fontWeight:500,lineHeight:"27px",textAlign:"center",color:"#fff"}},u("package__features:pricing__promotion_activity_bar__label")),Ct.default.createElement("img",{src:zl,alt:"black-friday-gift-icon",width:24,height:24}),Ct.default.createElement(Q,{sx:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)"},onClick:s},Ct.default.createElement(zt,{icon:"Close",sx:{color:"rgba(255, 255, 255, 0.6)",fontSize:"24px"}})))},js=jl;var Rl=()=>{let e=at(Bt),t=e.open||e.loadedAppSidebar;return Lt.default.createElement(li,null,Lt.default.createElement(Ea,null),t&&Lt.default.createElement(pi,{sx:{flex:1,height:0}},Lt.default.createElement(xa,null),Lt.default.createElement(js,null),Lt.default.createElement(x,{flex:1,direction:"row",height:0},Lt.default.createElement(P,{flex:1,width:0,sx:{display:"flex",flexDirection:"column",position:"relative",overflow:"hidden"}},Lt.default.createElement(ca,null,Lt.default.createElement($s,null)))),Lt.default.createElement(Ta,null)))},Rs=Rl;var Le=m(I());var Gl={top:!1,right:!1,bottom:!1,left:!0,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},ql=150,Yl=Zr({key:"SidebarStylesAtom",default:{minWidth:480,visibleWidth:480,maxWidth:0}}),Xl=()=>{let{localSettings:e,setLocalSettings:t}=Ln(),[o,n]=(0,Le.useState)(!1),[r,i]=Jt(Yl),{maxWidth:p}=r,a=e.sidebarSettings,s=async l=>{i(u=>({...u,visibleWidth:l})),o&&(await t({sidebarSettings:{common:{chatBoxWidth:l}}}),Vt())};return(0,Le.useEffect)(()=>{let l=()=>{let u=Math.max((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0)-ql,480);i(h=>({...h,maxWidth:u}))};return window.addEventListener("resize",l),l(),()=>{window.removeEventListener("resize",l)}},[]),(0,Le.useEffect)(()=>{i(l=>({...l,visibleWidth:Math.min(l.visibleWidth,p)}))},[p]),(0,Le.useEffect)(()=>{a?.common?.chatBoxWidth&&p&&(i(l=>({...l,visibleWidth:Math.min(p,a?.common?.chatBoxWidth??l.minWidth)})),n(!0))},[a?.common?.chatBoxWidth,p,i]),{loaded:o,minWidth:r.minWidth,maxWidth:r.maxWidth,resizeEnable:{...Gl,left:!Te()},visibleWidth:r.visibleWidth,setLocalWidth:s}};var Gs=Xl;var Kl=()=>{let e=L.default.useRef(null),{visibleWidth:t,maxWidth:o,minWidth:n,setLocalWidth:r,resizeEnable:i}=Gs(),{isSubscriptionPaymentFailed:p}=z(),a=ui(),[s,l]=Jt(Bt),u=Ce(bo),{setExtensionTourOnBoardingOpened:h}=ke();(0,L.useEffect)(()=>{J().then(O=>{O[qt]&&h(!0)});let w=new MutationObserver(O=>{O.forEach(U=>{U.type!=="attributes"&&U.attributeName!=="class"||l(rt=>({...rt,env:gn(),open:U.target?.classList?.contains("open")||!1}))})}),B=document.getElementById(Gr);return B&&w.observe(B,{attributes:!0,childList:!1}),()=>{w.disconnect()}},[]);let{refreshChatAIModelSelector:g}=ii(),d=(0,L.useRef)(!1);(0,L.useEffect)(()=>{s.open&&(d.current||(window.postMessage({event:Xi,data:{open:s.open}}),d.current=!0),l(w=>({...w,loadedAppSidebar:!0})))},[s.open,g]),(0,L.useEffect)(()=>{if(!s.loadedAppSidebar){let w=setInterval(()=>{Ui()&&(l(B=>({...B,loadedAppSidebar:!0})),clearInterval(w))},1e3);return()=>{clearInterval(w)}}return()=>{}},[s.loadedAppSidebar]),(0,L.useEffect)(()=>{s.open&&u(w=>({...w,show:p}))},[s.open]),(0,L.useEffect)(()=>()=>{ti()},[]);let[f,c]=(0,L.useState)(!1),[_,v]=(0,L.useState)(!1),T=(0,L.useRef)(t);return T.current=t,(0,L.useEffect)(()=>{let w=()=>{c(window.innerWidth-T.current<450)};return window.addEventListener("resize",w),()=>{window.removeEventListener("resize",w)}},[]),L.default.createElement(L.default.Fragment,null,L.default.createElement(gi,{ref:a,size:{width:t,height:"100%"},enable:i,maxWidth:o,minWidth:n,onResize:(w,B,O,U)=>{c(window.innerWidth-t-U.width<450)},onResizeStop:async(w,B,O,U)=>{await r(t+U.width),v(!1)},onResizeStart:()=>{v(!0)}},L.default.createElement(P,{component:"div",className:"use-chat-gpt-ai-app",ref:e,sx:{flex:1,display:"flex",flexDirection:"column",height:"100%",borderLeft:"1px solid rgba(0, 0, 0, .1)",bgcolor:"background.paper"},onWheel:w=>{w.stopPropagation()}},_?L.default.createElement("style",null,"#USE_CHAT_GPT_AI_ROOT_Wrapper iframe { pointer-events: none }"):null,L.default.createElement(x,{height:"100%",sx:{"& *":{boxSizing:"border-box",fontFamily:'"Roboto","Helvetica","Arial",sans-serif!important'}}},L.default.createElement(Hn,null,L.default.createElement(ia,null),L.default.createElement(hi,null),L.default.createElement(Yi,null),L.default.createElement(Zi,null,L.default.createElement(je,{defaultContextMenuPath:"/my_own_tools"},L.default.createElement(Ns,{leftIsNarrow:f},L.default.createElement(Rs,null)))))))))},J0=Kl;export{J0 as default};
