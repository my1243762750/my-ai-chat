import{h as qe}from"./7LKKTU5H.js";import{b as Ke}from"./B7VRG6XU.js";import{d as Ze,i as Je,j as Qe}from"./STNCT5QQ.js";import{a as so}from"./S34QHPYH.js";import{x as Me}from"./MM57Z2BS.js";import{e as q,f as Ae}from"./OZ6K5KWN.js";import{c as Te}from"./QGTSDQHN.js";import{f as ye,i as _e,l as Ie,o as ge}from"./G7W6DI5V.js";import{e as Ee}from"./LSIA5SS7.js";import{c as B}from"./NCSJWSK3.js";import{E as j,la as $,na as V}from"./PEAOUDRP.js";import{k as $e}from"./BYBP4KRV.js";import{d as Xe}from"./DQCZLHJM.js";import{g as je}from"./2HIYOEPI.js";import{s as ze}from"./VE4EMEBO.js";import{$ as xe,Aa as Be,Ba as le,Ca as se,Da as Ve,E as Pe,W as J,X as Q,Y as Ce,Z as ee,_ as he,aa as be,ba as oe,ca as Oe,d as fe,da as Le,ea as Re,f as m,fa as ve,ga as we,ha as ke,ja as te,k,ka as re,la as De,ma as Ge,o as Y,pa as Ne,r as Se,ra as Fe,rb as ce,s as Z,sa as Ue,ta as h,wa as ne,xa as ae,ya as He,za as ie}from"./AUJ76673.js";import{A as We}from"./DOCIOFBQ.js";import{za as Ye}from"./MX3LYTPZ.js";import{a as H}from"./4B6UFNBQ.js";import{f as w}from"./GAV6HCJA.js";var Po=m({key:"PlanCategoryState",default:"individual"}),Co=m({key:"MaxAIClientCreateSessionLoadingAtom",default:!1}),ho=m({key:"PricingHooksPopupState",default:{show:!1}}),xo=m({key:"PricingUpgradeContentOpenAtom",default:!1}),bo=m({key:"PricingUpgradeContentPopupCurrentPaywallTypeAtom",default:"proactive_modal"}),Oo=m({key:"PricingPlansInfoState",default:ze}),Lo=m({key:"SubscriptionApiLoadingState",default:!1}),Ro=m({key:"UnableSubscriptionState",default:{show:!1,barHeight:0}}),vo=m({key:"PricingUpgradePlanContentRenderStateAtom",default:{type:"cardList",renderTypes:[]}});var co=async(e,o)=>{try{let{conversationId:t,AIModel:i,paywallType:l,buttonType:n,paywallData:r}=o,s=i??r?.info?.api_model_selection,y=t&&await Ze.getService().getConversationPayWallModel(t);if(y&&(s=y),e==="click"&&!o.targetElement)throw new Error("targetElement is required when action is click");let g=Qe({targetElement:o.targetElement,rootContainerId:o.rootContainerId}),T=Je(),S=r?.info?.user_paywall_reason??o.paywallReason??"",_=r?.info?.source_type??"";Xe(e==="show"?"paywall_showed":"paywall_clicked",Ye({ai_model:s,platform_feature:g,platform:T,paywall_type:l,button_type:n,paywall_reason:S,source_type:_}))}catch{}},Uo=We(co,1e3);var pe=w(H());var po=m({key:"ChatMyOwnToolsState",default:{selectedType:"SUGGESTED"}}),mo={SUGGESTED:null,MY_OWN_TOOLS:"/my_own_tools",REWRITE:"/rewrite"},zo=e=>mo[e],uo=()=>{let[e,o]=k(po),t=!1,i=(0,pe.useCallback)(n=>{o(r=>({...r,selectedType:n}))},[]),l=(0,pe.useCallback)(()=>{o(n=>({...n,selectedType:"SUGGESTED"}))},[]);return{isUnavailableUploadSource:t,selectedType:e.selectedType,changeMyOwnToolsType:i,resetMyOwnToolsType:l}},eo=uo;var ao=w(so());var a=w(H());var z=w(H());var oo=m({key:"GlobalConfirmOpenStore",default:!1}),to=m({key:"GlobalConfirmInfoStore",default:{title:"",content:""}});var ro=()=>{let[e,o]=k(oo),[t,i]=k(to),l=(0,z.useCallback)(s=>{i(s),o(!0)},[]),n=(0,z.useCallback)(()=>o(!1),[]),r=(0,z.useCallback)(s=>{i(y=>({...y,...s}))},[]);return{open:e,openConfirm:l,closeConfirm:n,updateConfirmInfo:r,...t}};var no=()=>null,fo=()=>{let{t:e}=fe(),{open:o,closeConfirm:t,...i}=ro(),{resetMyOwnToolsType:l}=eo(),{title:n,titleSx:r,content:s,contentSx:y,closeButton:g=!0,confirmButtonText:T,confirmDangerColor:S,confirmButtonProps:_,cancelButtonText:G,cancelButtonProps:x,customRenderConfirmButton:N,customRenderCancelButton:E,headerContainerSx:b,contentContainerSx:X,footerContainerSx:P,footerButtonVariant:O="horizontal",width:K,sx:L,onConfirm:F,onClose:R}=i,v=()=>{t(),R?.()},[I,C]=a.default.useState(!1),c=async u=>{l(),C(!0);let U=!!(F&&await F(u));C(!1),(!u||U)&&v()},f=O==="vertical",M=(0,a.useMemo)(()=>_?.color==="error"||S,[S,_?.color]),ue=(0,a.useMemo)(()=>[{fontSize:14,lineHeight:1.4,fontWeight:500,py:1.25,px:2,borderRadius:"100vh",width:f?"100%":"auto",order:f?1:2,..._?.sx},M?{bgcolor:u=>u.palette.mode==="dark"?"rgba(244, 58, 58, 1)":"rgba(237, 80, 80, 1)","&:hover":{bgcolor:u=>u.palette.mode==="dark"?"rgba(244, 58, 58, 1)":"rgba(237, 80, 80, 1)",color:"#fff"},color:"#fff"}:{}],[M,_?.sx,f]);return a.default.createElement(Ie,{open:o,onClose:I?no:v,closeAfterTransition:!0,slots:{backdrop:_e},id:"maxai-client--global-confirm-modal",slotProps:{backdrop:{timeout:500}}},a.default.createElement(ye,{in:o},a.default.createElement(ge,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:K||448,borderRadius:2,...L}},a.default.createElement(V,{sx:{gap:1,flexDirection:"row",alignItems:"center",justifyContent:"space-between",p:3,borderBottom:"1px solid",borderColor:"border.main",height:"24px",...b}},typeof n=="string"?a.default.createElement($,{className:"global-confirm-title",fontSize:20,lineHeight:1.2,fontWeight:500,color:"text.primary",sx:r},n):a.default.createElement(B,{className:"global-confirm-title",sx:r},n),g&&a.default.createElement(B,null,a.default.createElement(Te,{onClick:I?no:v},a.default.createElement(ao.default,null)))),a.default.createElement(V,{sx:{p:3,gap:f?3:2,...X}},typeof s=="string"?a.default.createElement($,{className:"global-confirm-content",fontSize:14,lineHeight:1.4,fontWeight:400,color:"text.primary",sx:y},s):a.default.createElement(B,{className:"global-confirm-content",sx:y},s),a.default.createElement(V,{sx:{flexDirection:f?"column":"row",gap:1.5,alignItems:"center",justifyContent:"flex-end",...P}},E||a.default.createElement(Ee,{disabled:I,variant:"normalOutlined",className:"global-confirm-cancel-btn",onClick:()=>c(!1),...x,sx:{fontSize:14,lineHeight:1.4,fontWeight:500,py:1.25,px:2,borderRadius:"100vh",width:f?"100%":"auto",order:f?2:1,...x?.sx}},G??e("package__common:cancel")),N||a.default.createElement(Ke,{variant:"contained",color:"error",loading:I,className:"global-confirm-confirm-btn",onClick:()=>c(!0),..._,sx:ue},T??e("package__common:confirm")))))))},yo=fo;var ut=e=>!Se.includes(e);var ft=(e,o,t)=>{let{checkValid:i=!0,fallback:l=!0}=t||{};if(e){let n=ce[e]||[],r=n.find(s=>{let y=o&&s.oldModelValues?.includes(o),g=s.value===o||y;return i?g&&s.isDeprecated!==!0:g});return!r&&l&&n.length>0?n.filter(s=>s.isDeprecated!==!0)[0]||n[0]||null:r||null}return o&&Object.values(ce).flat().find(n=>n.value===o||n.oldModelValues?.includes(o))||null};var io=(r=>(r[r.ZERO=0]="ZERO",r[r.ONE=1]="ONE",r[r.TWO=2]="TWO",r[r.THREE=3]="THREE",r[r.FOUR=4]="FOUR",r[r.FIVE=5]="FIVE",r))(io||{});var D=e=>({key:e.value,label:e.title,value:e}),W=(e,o=Y(),t=3)=>e.length<=t?e.map(D):[...e.slice(0,t).map(D),{key:o,type:"more",label:"package__features:chat__ai_model_selector__more__title",children:e.slice(t).map(D)}],A={FREE:[ke],FAST:[ae,ee,re,J,se],SMART:[ne,oe,te,ie,le],REASONING:[h,Q],LEGACY:[Fe,be,Ge,De,Be,xe,Ce,he,Ne,Ue],ART:[He,Le,Ve,ve,Re,we]},me={USE_CHAT_GPT_PLUS:{FAST:ae,SMART:ne,REASONING:h},MAXAI_CLAUDE:{FAST:ee,SMART:oe,REASONING:h},MAXAI_GEMINI:{FAST:re,SMART:te,REASONING:h},MAXAI_DEEPSEEK:{FAST:J,SMART:ie,REASONING:Q},MAXAI_LLAMA:{FAST:se,SMART:le,REASONING:h}},_o=()=>({chat:void 0,chatHub:{0:void 0,1:void 0,2:void 0,3:void 0,4:void 0,5:void 0}}),lo="MAXAI_CURRENT_TEMPORARY_PROVIDER",Io=e=>Object.entries(me).find(([o,t])=>Object.entries(t).find(([i,l])=>l.value===e)?.[0])?.[0],de=async()=>{let e=await Z.getItem(lo);return!e||typeof e!="object"?_o():e},go=async(e,o)=>{let t=await de();return o!==void 0?t.chatHub[o]=e:t.chat=e,await Z.setItem(lo,t),e},ht=async(e,o,t)=>{let i=t!==void 0?(await de()).chatHub[t]:(await de()).chat,l=i?me[i]?.[o]:void 0;if(!l){let n=Io(e);n&&(l=me[n]?.[o],go(n,t))}return l},xt=Object.entries(A).reduce((e,[o,t])=>(t.forEach(i=>{e[i.value]=o}),e),{}),p={FREE:{key:"FREE",type:"group",label:"package__features:chat__ai_model_selector__free_group__title",children:[D(A.FREE[0])]},FAST:{key:"FAST",type:"group",label:"package__features:chat__ai_model_selector__fast_group__title",children:W(A.FAST,"more-fast")},SMART:{key:"SMART",type:"group",label:"package__features:chat__ai_model_selector__smart_group__title",children:W(A.SMART,"more-smart",4)},REASONING:{key:"REASONING",type:"group",label:"package__features:chat__ai_model_selector__reasoning_group__title",children:W(A.REASONING,"more-reasoning",2)},LEGACY:{key:"LEGACY",type:"group",label:"package__features:chat__ai_model_selector__legacy_group__title",children:W(A.LEGACY,"more-legacy")},ART:{key:"ART",type:"group",label:"package__features:chat__ai_model_selector__image_group__title",children:A.ART.map(D)}},bt=e=>({Chat:[p.SMART,p.REASONING,p.FAST,p.LEGACY],ContextMenu:[p.SMART,p.REASONING,p.FAST,p.LEGACY],Summary:[p.SMART,p.LEGACY,p.FAST],Search:[p.SMART,p.REASONING,p.FAST,p.LEGACY],Art:[p.ART]})[e]||[];var d=w(H()),To=j(({className:e,...o})=>d.default.createElement(Ae,{...o,classes:{popper:e}}))(({theme:e})=>({[`& .${q.tooltip}`]:{backgroundColor:e.palette.background.paper,color:"rgba(0, 0, 0, 0.87)",fontSize:12,boxShadow:e.shadows[1],maxWidth:"none"},[`& .${q.arrow}`]:{color:e.palette.background.paper}})),Eo=j("img")({display:"inline-flex"}),Mo=e=>{let{src:o,alt:t,height:i,width:l="100%",SkeletonSx:n,maxRetryTimes:r=1,maxLoadingTime:s=10*1e3,preview:y,placement:g,imgStyle:T,fileId:S,onError:_,imageSx:G,onImageClick:x,onLoaded:N}=e,[E,b]=(0,d.useState)(null),[X,P]=(0,d.useState)(!0),O=(0,d.useRef)(Y()),K=$e(N),L=qe();return(0,d.useEffect)(()=>{let F=async()=>{let C=async()=>new Promise(c=>{let f=setTimeout(()=>{P(!1),c(!1)},s),M=new Image;M.src=o,M.onload=()=>{clearTimeout(f),b(o),P(!1),c(!0),K.current?.(M)},M.onerror=async ue=>{clearTimeout(f);try{let u=await Pe.fetch(o,{parse:"blob",method:"GET"});if(u){let U=u.response?.status;if(je(U)&&U>=400){P(!1),S?(b(Oe("/images/svg-icons/image-invalid.svg")),c(!0)):c(!1);return}u.success&&b(URL.createObjectURL(u.data)),P(!1),c(u.success)}else c(!1)}catch{c(!1)}}});for(let c=-1;c<r;c++)if(await C())return!0;return!1},R=new IntersectionObserver(C=>{C.forEach(c=>{c.isIntersecting&&(F().then(f=>{f||_&&_()}),R.unobserve(c.target))})}),v=`#lazy-image-${O.current}`,I=null;return I=(L??document.body).querySelector(v),I&&R.observe(I),()=>{I&&R.unobserve(I)}},[o,L]),d.default.createElement(d.default.Fragment,null,X?d.default.createElement(Me,{className:"maxai--lazy-load--skeleton",id:`lazy-image-${O.current}`,variant:"rectangular",height:i,"data-src":E,sx:{width:l,borderRadius:T?.borderRadius||0,...n}}):d.default.createElement(To,{placement:g||"top",title:y?d.default.createElement("img",{style:{objectFit:"contain",...T},src:E,alt:t,width:256,height:256}):null,PopperProps:{container:L,style:{zIndex:"2147483660!important"}}},d.default.createElement(Eo,{id:`lazy-image-${O.current}`,src:E??void 0,alt:t,width:l,height:i,"data-src":E,style:{...T},sx:G,onClick:x})))},zt=Mo;export{ho as a,xo as b,bo as c,Lo as d,Ro as e,vo as f,co as g,Uo as h,zo as i,eo as j,ro as k,yo as l,ut as m,ft as n,io as o,A as p,me as q,Io as r,de as s,go as t,ht as u,xt as v,p as w,bt as x,zt as y};
